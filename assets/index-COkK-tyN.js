function Fp(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var Qs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Up(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yw(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Vp={exports:{}},Bl={},Gp={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jo=Symbol.for("react.element"),xw=Symbol.for("react.portal"),ww=Symbol.for("react.fragment"),vw=Symbol.for("react.strict_mode"),Ew=Symbol.for("react.profiler"),_w=Symbol.for("react.provider"),Cw=Symbol.for("react.context"),Aw=Symbol.for("react.forward_ref"),Sw=Symbol.for("react.suspense"),Tw=Symbol.for("react.memo"),Iw=Symbol.for("react.lazy"),ph=Symbol.iterator;function Nw(t){return t===null||typeof t!="object"?null:(t=ph&&t[ph]||t["@@iterator"],typeof t=="function"?t:null)}var Hp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qp=Object.assign,zp={};function Ps(t,e,n){this.props=t,this.context=e,this.refs=zp,this.updater=n||Hp}Ps.prototype.isReactComponent={};Ps.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ps.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wp(){}Wp.prototype=Ps.prototype;function Rd(t,e,n){this.props=t,this.context=e,this.refs=zp,this.updater=n||Hp}var kd=Rd.prototype=new Wp;kd.constructor=Rd;qp(kd,Ps.prototype);kd.isPureReactComponent=!0;var gh=Array.isArray,Kp=Object.prototype.hasOwnProperty,Pd={current:null},$p={key:!0,ref:!0,__self:!0,__source:!0};function Yp(t,e,n){var r,s={},a=null,u=null;if(e!=null)for(r in e.ref!==void 0&&(u=e.ref),e.key!==void 0&&(a=""+e.key),e)Kp.call(e,r)&&!$p.hasOwnProperty(r)&&(s[r]=e[r]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var m=Array(h),p=0;p<h;p++)m[p]=arguments[p+2];s.children=m}if(t&&t.defaultProps)for(r in h=t.defaultProps,h)s[r]===void 0&&(s[r]=h[r]);return{$$typeof:jo,type:t,key:a,ref:u,props:s,_owner:Pd.current}}function bw(t,e){return{$$typeof:jo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Md(t){return typeof t=="object"&&t!==null&&t.$$typeof===jo}function Rw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var mh=/\/+/g;function Tu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Rw(""+t.key):e.toString(36)}function Ga(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case jo:case xw:u=!0}}if(u)return u=t,s=s(u),t=r===""?"."+Tu(u,0):r,gh(s)?(n="",t!=null&&(n=t.replace(mh,"$&/")+"/"),Ga(s,e,n,"",function(p){return p})):s!=null&&(Md(s)&&(s=bw(s,n+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(mh,"$&/")+"/")+t)),e.push(s)),1;if(u=0,r=r===""?".":r+":",gh(t))for(var h=0;h<t.length;h++){a=t[h];var m=r+Tu(a,h);u+=Ga(a,e,n,m,s)}else if(m=Nw(t),typeof m=="function")for(t=m.call(t),h=0;!(a=t.next()).done;)a=a.value,m=r+Tu(a,h++),u+=Ga(a,e,n,m,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return u}function pa(t,e,n){if(t==null)return t;var r=[],s=0;return Ga(t,r,"","",function(a){return e.call(n,a,s++)}),r}function kw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},Ha={transition:null},Pw={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:Ha,ReactCurrentOwner:Pd};function jp(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:pa,forEach:function(t,e,n){pa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return pa(t,function(){e++}),e},toArray:function(t){return pa(t,function(e){return e})||[]},only:function(t){if(!Md(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=Ps;ke.Fragment=ww;ke.Profiler=Ew;ke.PureComponent=Rd;ke.StrictMode=vw;ke.Suspense=Sw;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pw;ke.act=jp;ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qp({},t.props),s=t.key,a=t.ref,u=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,u=Pd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(m in e)Kp.call(e,m)&&!$p.hasOwnProperty(m)&&(r[m]=e[m]===void 0&&h!==void 0?h[m]:e[m])}var m=arguments.length-2;if(m===1)r.children=n;else if(1<m){h=Array(m);for(var p=0;p<m;p++)h[p]=arguments[p+2];r.children=h}return{$$typeof:jo,type:t.type,key:s,ref:a,props:r,_owner:u}};ke.createContext=function(t){return t={$$typeof:Cw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_w,_context:t},t.Consumer=t};ke.createElement=Yp;ke.createFactory=function(t){var e=Yp.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:Aw,render:t}};ke.isValidElement=Md;ke.lazy=function(t){return{$$typeof:Iw,_payload:{_status:-1,_result:t},_init:kw}};ke.memo=function(t,e){return{$$typeof:Tw,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=Ha.transition;Ha.transition={};try{t()}finally{Ha.transition=e}};ke.unstable_act=jp;ke.useCallback=function(t,e){return Qt.current.useCallback(t,e)};ke.useContext=function(t){return Qt.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};ke.useEffect=function(t,e){return Qt.current.useEffect(t,e)};ke.useId=function(){return Qt.current.useId()};ke.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return Qt.current.useMemo(t,e)};ke.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};ke.useRef=function(t){return Qt.current.useRef(t)};ke.useState=function(t){return Qt.current.useState(t)};ke.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return Qt.current.useTransition()};ke.version="18.3.1";Gp.exports=ke;var Ce=Gp.exports;const Dd=Up(Ce);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw=Ce,Dw=Symbol.for("react.element"),Ow=Symbol.for("react.fragment"),Lw=Object.prototype.hasOwnProperty,Bw=Mw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fw={key:!0,ref:!0,__self:!0,__source:!0};function Xp(t,e,n){var r,s={},a=null,u=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(u=e.ref);for(r in e)Lw.call(e,r)&&!Fw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Dw,type:t,key:a,ref:u,props:s,_owner:Bw.current}}Bl.Fragment=Ow;Bl.jsx=Xp;Bl.jsxs=Xp;Vp.exports=Bl;var S=Vp.exports,uc={},Jp={exports:{}},Cn={},Zp={exports:{}},Qp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,xe){var Te=Q.length;Q.push(xe);e:for(;0<Te;){var rt=Te-1>>>1,De=Q[rt];if(0<s(De,xe))Q[rt]=xe,Q[Te]=De,Te=rt;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var xe=Q[0],Te=Q.pop();if(Te!==xe){Q[0]=Te;e:for(var rt=0,De=Q.length,Sn=De>>>1;rt<Sn;){var ot=2*(rt+1)-1,si=Q[ot],ge=ot+1,Tr=Q[ge];if(0>s(si,Te))ge<De&&0>s(Tr,si)?(Q[rt]=Tr,Q[ge]=Te,rt=ge):(Q[rt]=si,Q[ot]=Te,rt=ot);else if(ge<De&&0>s(Tr,Te))Q[rt]=Tr,Q[ge]=Te,rt=ge;else break e}}return xe}function s(Q,xe){var Te=Q.sortIndex-xe.sortIndex;return Te!==0?Te:Q.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var m=[],p=[],w=1,_=null,C=3,T=!1,P=!1,M=!1,V=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(Q){for(var xe=n(p);xe!==null;){if(xe.callback===null)r(p);else if(xe.startTime<=Q)r(p),xe.sortIndex=xe.expirationTime,e(m,xe);else break;xe=n(p)}}function F(Q){if(M=!1,R(Q),!P)if(n(m)!==null)P=!0,ve(Y);else{var xe=n(p);xe!==null&&oe(F,xe.startTime-Q)}}function Y(Q,xe){P=!1,M&&(M=!1,D($),$=-1),T=!0;var Te=C;try{for(R(xe),_=n(m);_!==null&&(!(_.expirationTime>xe)||Q&&!Se());){var rt=_.callback;if(typeof rt=="function"){_.callback=null,C=_.priorityLevel;var De=rt(_.expirationTime<=xe);xe=t.unstable_now(),typeof De=="function"?_.callback=De:_===n(m)&&r(m),R(xe)}else r(m);_=n(m)}if(_!==null)var Sn=!0;else{var ot=n(p);ot!==null&&oe(F,ot.startTime-xe),Sn=!1}return Sn}finally{_=null,C=Te,T=!1}}var H=!1,B=null,$=-1,q=5,re=-1;function Se(){return!(t.unstable_now()-re<q)}function se(){if(B!==null){var Q=t.unstable_now();re=Q;var xe=!0;try{xe=B(!0,Q)}finally{xe?le():(H=!1,B=null)}}else H=!1}var le;if(typeof k=="function")le=function(){k(se)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,z=ue.port2;ue.port1.onmessage=se,le=function(){z.postMessage(null)}}else le=function(){V(se,0)};function ve(Q){B=Q,H||(H=!0,le())}function oe(Q,xe){$=V(function(){Q(t.unstable_now())},xe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){P||T||(P=!0,ve(Y))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return n(m)},t.unstable_next=function(Q){switch(C){case 1:case 2:case 3:var xe=3;break;default:xe=C}var Te=C;C=xe;try{return Q()}finally{C=Te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,xe){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Te=C;C=Q;try{return xe()}finally{C=Te}},t.unstable_scheduleCallback=function(Q,xe,Te){var rt=t.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?rt+Te:rt):Te=rt,Q){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=Te+De,Q={id:w++,callback:xe,priorityLevel:Q,startTime:Te,expirationTime:De,sortIndex:-1},Te>rt?(Q.sortIndex=Te,e(p,Q),n(m)===null&&Q===n(p)&&(M?(D($),$=-1):M=!0,oe(F,Te-rt))):(Q.sortIndex=De,e(m,Q),P||T||(P=!0,ve(Y))),Q},t.unstable_shouldYield=Se,t.unstable_wrapCallback=function(Q){var xe=C;return function(){var Te=C;C=xe;try{return Q.apply(this,arguments)}finally{C=Te}}}})(Qp);Zp.exports=Qp;var Uw=Zp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw=Ce,_n=Uw;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eg=new Set,No={};function ki(t,e){Cs(t,e),Cs(t+"Capture",e)}function Cs(t,e){for(No[t]=e,t=0;t<e.length;t++)eg.add(e[t])}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cc=Object.prototype.hasOwnProperty,Gw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yh={},xh={};function Hw(t){return cc.call(xh,t)?!0:cc.call(yh,t)?!1:Gw.test(t)?xh[t]=!0:(yh[t]=!0,!1)}function qw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zw(t,e,n,r){if(e===null||typeof e>"u"||qw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function en(t,e,n,r,s,a,u){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=u}var Vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vt[t]=new en(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vt[e]=new en(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vt[t]=new en(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vt[t]=new en(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vt[t]=new en(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vt[t]=new en(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vt[t]=new en(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vt[t]=new en(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vt[t]=new en(t,5,!1,t.toLowerCase(),null,!1,!1)});var Od=/[\-:]([a-z])/g;function Ld(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Od,Ld);Vt[e]=new en(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Od,Ld);Vt[e]=new en(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Od,Ld);Vt[e]=new en(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vt[t]=new en(t,1,!1,t.toLowerCase(),null,!1,!1)});Vt.xlinkHref=new en("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vt[t]=new en(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bd(t,e,n,r){var s=Vt.hasOwnProperty(e)?Vt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zw(e,n,s,r)&&(n=null),r||s===null?Hw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Cr=Vw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ga=Symbol.for("react.element"),Qi=Symbol.for("react.portal"),es=Symbol.for("react.fragment"),Fd=Symbol.for("react.strict_mode"),dc=Symbol.for("react.profiler"),tg=Symbol.for("react.provider"),ng=Symbol.for("react.context"),Ud=Symbol.for("react.forward_ref"),fc=Symbol.for("react.suspense"),hc=Symbol.for("react.suspense_list"),Vd=Symbol.for("react.memo"),Lr=Symbol.for("react.lazy"),rg=Symbol.for("react.offscreen"),wh=Symbol.iterator;function eo(t){return t===null||typeof t!="object"?null:(t=wh&&t[wh]||t["@@iterator"],typeof t=="function"?t:null)}var dt=Object.assign,Iu;function uo(t){if(Iu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Iu=e&&e[1]||""}return`
`+Iu+t}var Nu=!1;function bu(t,e){if(!t||Nu)return"";Nu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),a=r.stack.split(`
`),u=s.length-1,h=a.length-1;1<=u&&0<=h&&s[u]!==a[h];)h--;for(;1<=u&&0<=h;u--,h--)if(s[u]!==a[h]){if(u!==1||h!==1)do if(u--,h--,0>h||s[u]!==a[h]){var m=`
`+s[u].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=u&&0<=h);break}}}finally{Nu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?uo(t):""}function Ww(t){switch(t.tag){case 5:return uo(t.type);case 16:return uo("Lazy");case 13:return uo("Suspense");case 19:return uo("SuspenseList");case 0:case 2:case 15:return t=bu(t.type,!1),t;case 11:return t=bu(t.type.render,!1),t;case 1:return t=bu(t.type,!0),t;default:return""}}function pc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case es:return"Fragment";case Qi:return"Portal";case dc:return"Profiler";case Fd:return"StrictMode";case fc:return"Suspense";case hc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ng:return(t.displayName||"Context")+".Consumer";case tg:return(t._context.displayName||"Context")+".Provider";case Ud:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vd:return e=t.displayName||null,e!==null?e:pc(t.type)||"Memo";case Lr:e=t._payload,t=t._init;try{return pc(t(e))}catch{}}return null}function Kw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pc(e);case 8:return e===Fd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ig(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $w(t){var e=ig(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(u){r=""+u,a.call(this,u)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ma(t){t._valueTracker||(t._valueTracker=$w(t))}function sg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ig(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function tl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gc(t,e){var n=e.checked;return dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vh(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function og(t,e){e=e.checked,e!=null&&Bd(t,"checked",e,!1)}function mc(t,e){og(t,e);var n=Zr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yc(t,e.type,n):e.hasOwnProperty("defaultValue")&&yc(t,e.type,Zr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Eh(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yc(t,e,n){(e!=="number"||tl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var co=Array.isArray;function hs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function xc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _h(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(co(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zr(n)}}function ag(t,e){var n=Zr(e.value),r=Zr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ch(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ya,ug=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ya=ya||document.createElement("div"),ya.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ya.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yw=["Webkit","ms","Moz","O"];Object.keys(go).forEach(function(t){Yw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),go[e]=go[t]})});function cg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||go.hasOwnProperty(t)&&go[t]?(""+e).trim():e+"px"}function dg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=cg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var jw=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vc(t,e){if(e){if(jw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Ec(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _c=null;function Gd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cc=null,ps=null,gs=null;function Ah(t){if(t=Zo(t)){if(typeof Cc!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Hl(e),Cc(t.stateNode,t.type,e))}}function fg(t){ps?gs?gs.push(t):gs=[t]:ps=t}function hg(){if(ps){var t=ps,e=gs;if(gs=ps=null,Ah(t),e)for(t=0;t<e.length;t++)Ah(e[t])}}function pg(t,e){return t(e)}function gg(){}var Ru=!1;function mg(t,e,n){if(Ru)return t(e,n);Ru=!0;try{return pg(t,e,n)}finally{Ru=!1,(ps!==null||gs!==null)&&(gg(),hg())}}function Ro(t,e){var n=t.stateNode;if(n===null)return null;var r=Hl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Ac=!1;if(xr)try{var to={};Object.defineProperty(to,"passive",{get:function(){Ac=!0}}),window.addEventListener("test",to,to),window.removeEventListener("test",to,to)}catch{Ac=!1}function Xw(t,e,n,r,s,a,u,h,m){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(w){this.onError(w)}}var mo=!1,nl=null,rl=!1,Sc=null,Jw={onError:function(t){mo=!0,nl=t}};function Zw(t,e,n,r,s,a,u,h,m){mo=!1,nl=null,Xw.apply(Jw,arguments)}function Qw(t,e,n,r,s,a,u,h,m){if(Zw.apply(this,arguments),mo){if(mo){var p=nl;mo=!1,nl=null}else throw Error(ee(198));rl||(rl=!0,Sc=p)}}function Pi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function yg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sh(t){if(Pi(t)!==t)throw Error(ee(188))}function e2(t){var e=t.alternate;if(!e){if(e=Pi(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Sh(s),t;if(a===r)return Sh(s),e;a=a.sibling}throw Error(ee(188))}if(n.return!==r.return)n=s,r=a;else{for(var u=!1,h=s.child;h;){if(h===n){u=!0,n=s,r=a;break}if(h===r){u=!0,r=s,n=a;break}h=h.sibling}if(!u){for(h=a.child;h;){if(h===n){u=!0,n=a,r=s;break}if(h===r){u=!0,r=a,n=s;break}h=h.sibling}if(!u)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function xg(t){return t=e2(t),t!==null?wg(t):null}function wg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wg(t);if(e!==null)return e;t=t.sibling}return null}var vg=_n.unstable_scheduleCallback,Th=_n.unstable_cancelCallback,t2=_n.unstable_shouldYield,n2=_n.unstable_requestPaint,xt=_n.unstable_now,r2=_n.unstable_getCurrentPriorityLevel,Hd=_n.unstable_ImmediatePriority,Eg=_n.unstable_UserBlockingPriority,il=_n.unstable_NormalPriority,i2=_n.unstable_LowPriority,_g=_n.unstable_IdlePriority,Fl=null,lr=null;function s2(t){if(lr&&typeof lr.onCommitFiberRoot=="function")try{lr.onCommitFiberRoot(Fl,t,void 0,(t.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:l2,o2=Math.log,a2=Math.LN2;function l2(t){return t>>>=0,t===0?32:31-(o2(t)/a2|0)|0}var xa=64,wa=4194304;function fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,u=n&268435455;if(u!==0){var h=u&~s;h!==0?r=fo(h):(a&=u,a!==0&&(r=fo(a)))}else u=n&~s,u!==0?r=fo(u):a!==0&&(r=fo(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-$n(e),s=1<<n,r|=t[n],e&=~s;return r}function u2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var u=31-$n(a),h=1<<u,m=s[u];m===-1?(!(h&n)||h&r)&&(s[u]=u2(h,e)):m<=e&&(t.expiredLanes|=h),a&=~h}}function Tc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Cg(){var t=xa;return xa<<=1,!(xa&4194240)&&(xa=64),t}function ku(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$n(e),t[e]=n}function d2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-$n(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function qd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$n(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var qe=0;function Ag(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Sg,zd,Tg,Ig,Ng,Ic=!1,va=[],zr=null,Wr=null,Kr=null,ko=new Map,Po=new Map,Fr=[],f2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ih(t,e){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":ko.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Po.delete(e.pointerId)}}function no(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=Zo(e),e!==null&&zd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function h2(t,e,n,r,s){switch(e){case"focusin":return zr=no(zr,t,e,n,r,s),!0;case"dragenter":return Wr=no(Wr,t,e,n,r,s),!0;case"mouseover":return Kr=no(Kr,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return ko.set(a,no(ko.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Po.set(a,no(Po.get(a)||null,t,e,n,r,s)),!0}return!1}function bg(t){var e=vi(t.target);if(e!==null){var n=Pi(e);if(n!==null){if(e=n.tag,e===13){if(e=yg(n),e!==null){t.blockedOn=e,Ng(t.priority,function(){Tg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Nc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);_c=r,n.target.dispatchEvent(r),_c=null}else return e=Zo(n),e!==null&&zd(e),t.blockedOn=n,!1;e.shift()}return!0}function Nh(t,e,n){qa(t)&&n.delete(e)}function p2(){Ic=!1,zr!==null&&qa(zr)&&(zr=null),Wr!==null&&qa(Wr)&&(Wr=null),Kr!==null&&qa(Kr)&&(Kr=null),ko.forEach(Nh),Po.forEach(Nh)}function ro(t,e){t.blockedOn===e&&(t.blockedOn=null,Ic||(Ic=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,p2)))}function Mo(t){function e(s){return ro(s,t)}if(0<va.length){ro(va[0],t);for(var n=1;n<va.length;n++){var r=va[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zr!==null&&ro(zr,t),Wr!==null&&ro(Wr,t),Kr!==null&&ro(Kr,t),ko.forEach(e),Po.forEach(e),n=0;n<Fr.length;n++)r=Fr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fr.length&&(n=Fr[0],n.blockedOn===null);)bg(n),n.blockedOn===null&&Fr.shift()}var ms=Cr.ReactCurrentBatchConfig,ol=!0;function g2(t,e,n,r){var s=qe,a=ms.transition;ms.transition=null;try{qe=1,Wd(t,e,n,r)}finally{qe=s,ms.transition=a}}function m2(t,e,n,r){var s=qe,a=ms.transition;ms.transition=null;try{qe=4,Wd(t,e,n,r)}finally{qe=s,ms.transition=a}}function Wd(t,e,n,r){if(ol){var s=Nc(t,e,n,r);if(s===null)Gu(t,e,r,al,n),Ih(t,r);else if(h2(s,t,e,n,r))r.stopPropagation();else if(Ih(t,r),e&4&&-1<f2.indexOf(t)){for(;s!==null;){var a=Zo(s);if(a!==null&&Sg(a),a=Nc(t,e,n,r),a===null&&Gu(t,e,r,al,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Gu(t,e,r,null,n)}}var al=null;function Nc(t,e,n,r){if(al=null,t=Gd(r),t=vi(t),t!==null)if(e=Pi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=yg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return al=t,null}function Rg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(r2()){case Hd:return 1;case Eg:return 4;case il:case i2:return 16;case _g:return 536870912;default:return 16}default:return 16}}var Gr=null,Kd=null,za=null;function kg(){if(za)return za;var t,e=Kd,n=e.length,r,s="value"in Gr?Gr.value:Gr.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var u=n-t;for(r=1;r<=u&&e[n-r]===s[a-r];r++);return za=s.slice(t,1<r?1-r:void 0)}function Wa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ea(){return!0}function bh(){return!1}function An(t){function e(n,r,s,a,u){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=u,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(a):a[h]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ea:bh,this.isPropagationStopped=bh,this}return dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ea)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ea)},persist:function(){},isPersistent:Ea}),e}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$d=An(Ms),Jo=dt({},Ms,{view:0,detail:0}),y2=An(Jo),Pu,Mu,io,Ul=dt({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==io&&(io&&t.type==="mousemove"?(Pu=t.screenX-io.screenX,Mu=t.screenY-io.screenY):Mu=Pu=0,io=t),Pu)},movementY:function(t){return"movementY"in t?t.movementY:Mu}}),Rh=An(Ul),x2=dt({},Ul,{dataTransfer:0}),w2=An(x2),v2=dt({},Jo,{relatedTarget:0}),Du=An(v2),E2=dt({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),_2=An(E2),C2=dt({},Ms,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),A2=An(C2),S2=dt({},Ms,{data:0}),kh=An(S2),T2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=N2[t])?!!e[t]:!1}function Yd(){return b2}var R2=dt({},Jo,{key:function(t){if(t.key){var e=T2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?I2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yd,charCode:function(t){return t.type==="keypress"?Wa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),k2=An(R2),P2=dt({},Ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ph=An(P2),M2=dt({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yd}),D2=An(M2),O2=dt({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),L2=An(O2),B2=dt({},Ul,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),F2=An(B2),U2=[9,13,27,32],jd=xr&&"CompositionEvent"in window,yo=null;xr&&"documentMode"in document&&(yo=document.documentMode);var V2=xr&&"TextEvent"in window&&!yo,Pg=xr&&(!jd||yo&&8<yo&&11>=yo),Mh=" ",Dh=!1;function Mg(t,e){switch(t){case"keyup":return U2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ts=!1;function G2(t,e){switch(t){case"compositionend":return Dg(e);case"keypress":return e.which!==32?null:(Dh=!0,Mh);case"textInput":return t=e.data,t===Mh&&Dh?null:t;default:return null}}function H2(t,e){if(ts)return t==="compositionend"||!jd&&Mg(t,e)?(t=kg(),za=Kd=Gr=null,ts=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Pg&&e.locale!=="ko"?null:e.data;default:return null}}var q2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!q2[t.type]:e==="textarea"}function Og(t,e,n,r){fg(r),e=ll(e,"onChange"),0<e.length&&(n=new $d("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xo=null,Do=null;function z2(t){Kg(t,0)}function Vl(t){var e=is(t);if(sg(e))return t}function W2(t,e){if(t==="change")return e}var Lg=!1;if(xr){var Ou;if(xr){var Lu="oninput"in document;if(!Lu){var Lh=document.createElement("div");Lh.setAttribute("oninput","return;"),Lu=typeof Lh.oninput=="function"}Ou=Lu}else Ou=!1;Lg=Ou&&(!document.documentMode||9<document.documentMode)}function Bh(){xo&&(xo.detachEvent("onpropertychange",Bg),Do=xo=null)}function Bg(t){if(t.propertyName==="value"&&Vl(Do)){var e=[];Og(e,Do,t,Gd(t)),mg(z2,e)}}function K2(t,e,n){t==="focusin"?(Bh(),xo=e,Do=n,xo.attachEvent("onpropertychange",Bg)):t==="focusout"&&Bh()}function $2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vl(Do)}function Y2(t,e){if(t==="click")return Vl(e)}function j2(t,e){if(t==="input"||t==="change")return Vl(e)}function X2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jn=typeof Object.is=="function"?Object.is:X2;function Oo(t,e){if(jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!cc.call(e,s)||!jn(t[s],e[s]))return!1}return!0}function Fh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Uh(t,e){var n=Fh(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fh(n)}}function Fg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Fg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ug(){for(var t=window,e=tl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=tl(t.document)}return e}function Xd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function J2(t){var e=Ug(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Fg(n.ownerDocument.documentElement,n)){if(r!==null&&Xd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=Uh(n,a);var u=Uh(n,r);s&&u&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==u.node||t.focusOffset!==u.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(u.node,u.offset)):(e.setEnd(u.node,u.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Z2=xr&&"documentMode"in document&&11>=document.documentMode,ns=null,bc=null,wo=null,Rc=!1;function Vh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rc||ns==null||ns!==tl(r)||(r=ns,"selectionStart"in r&&Xd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wo&&Oo(wo,r)||(wo=r,r=ll(bc,"onSelect"),0<r.length&&(e=new $d("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ns)))}function _a(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rs={animationend:_a("Animation","AnimationEnd"),animationiteration:_a("Animation","AnimationIteration"),animationstart:_a("Animation","AnimationStart"),transitionend:_a("Transition","TransitionEnd")},Bu={},Vg={};xr&&(Vg=document.createElement("div").style,"AnimationEvent"in window||(delete rs.animationend.animation,delete rs.animationiteration.animation,delete rs.animationstart.animation),"TransitionEvent"in window||delete rs.transitionend.transition);function Gl(t){if(Bu[t])return Bu[t];if(!rs[t])return t;var e=rs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Vg)return Bu[t]=e[n];return t}var Gg=Gl("animationend"),Hg=Gl("animationiteration"),qg=Gl("animationstart"),zg=Gl("transitionend"),Wg=new Map,Gh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ei(t,e){Wg.set(t,e),ki(e,[t])}for(var Fu=0;Fu<Gh.length;Fu++){var Uu=Gh[Fu],Q2=Uu.toLowerCase(),ev=Uu[0].toUpperCase()+Uu.slice(1);ei(Q2,"on"+ev)}ei(Gg,"onAnimationEnd");ei(Hg,"onAnimationIteration");ei(qg,"onAnimationStart");ei("dblclick","onDoubleClick");ei("focusin","onFocus");ei("focusout","onBlur");ei(zg,"onTransitionEnd");Cs("onMouseEnter",["mouseout","mouseover"]);Cs("onMouseLeave",["mouseout","mouseover"]);Cs("onPointerEnter",["pointerout","pointerover"]);Cs("onPointerLeave",["pointerout","pointerover"]);ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ki("onBeforeInput",["compositionend","keypress","textInput","paste"]);ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ho));function Hh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Qw(r,e,void 0,t),t.currentTarget=null}function Kg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var u=r.length-1;0<=u;u--){var h=r[u],m=h.instance,p=h.currentTarget;if(h=h.listener,m!==a&&s.isPropagationStopped())break e;Hh(s,h,p),a=m}else for(u=0;u<r.length;u++){if(h=r[u],m=h.instance,p=h.currentTarget,h=h.listener,m!==a&&s.isPropagationStopped())break e;Hh(s,h,p),a=m}}}if(rl)throw t=Sc,rl=!1,Sc=null,t}function Qe(t,e){var n=e[Oc];n===void 0&&(n=e[Oc]=new Set);var r=t+"__bubble";n.has(r)||($g(e,t,2,!1),n.add(r))}function Vu(t,e,n){var r=0;e&&(r|=4),$g(n,t,r,e)}var Ca="_reactListening"+Math.random().toString(36).slice(2);function Lo(t){if(!t[Ca]){t[Ca]=!0,eg.forEach(function(n){n!=="selectionchange"&&(tv.has(n)||Vu(n,!1,t),Vu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ca]||(e[Ca]=!0,Vu("selectionchange",!1,e))}}function $g(t,e,n,r){switch(Rg(e)){case 1:var s=g2;break;case 4:s=m2;break;default:s=Wd}n=s.bind(null,e,n,t),s=void 0,!Ac||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Gu(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var h=r.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(u===4)for(u=r.return;u!==null;){var m=u.tag;if((m===3||m===4)&&(m=u.stateNode.containerInfo,m===s||m.nodeType===8&&m.parentNode===s))return;u=u.return}for(;h!==null;){if(u=vi(h),u===null)return;if(m=u.tag,m===5||m===6){r=a=u;continue e}h=h.parentNode}}r=r.return}mg(function(){var p=a,w=Gd(n),_=[];e:{var C=Wg.get(t);if(C!==void 0){var T=$d,P=t;switch(t){case"keypress":if(Wa(n)===0)break e;case"keydown":case"keyup":T=k2;break;case"focusin":P="focus",T=Du;break;case"focusout":P="blur",T=Du;break;case"beforeblur":case"afterblur":T=Du;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Rh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=w2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=D2;break;case Gg:case Hg:case qg:T=_2;break;case zg:T=L2;break;case"scroll":T=y2;break;case"wheel":T=F2;break;case"copy":case"cut":case"paste":T=A2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Ph}var M=(e&4)!==0,V=!M&&t==="scroll",D=M?C!==null?C+"Capture":null:C;M=[];for(var k=p,R;k!==null;){R=k;var F=R.stateNode;if(R.tag===5&&F!==null&&(R=F,D!==null&&(F=Ro(k,D),F!=null&&M.push(Bo(k,F,R)))),V)break;k=k.return}0<M.length&&(C=new T(C,P,null,n,w),_.push({event:C,listeners:M}))}}if(!(e&7)){e:{if(C=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",C&&n!==_c&&(P=n.relatedTarget||n.fromElement)&&(vi(P)||P[wr]))break e;if((T||C)&&(C=w.window===w?w:(C=w.ownerDocument)?C.defaultView||C.parentWindow:window,T?(P=n.relatedTarget||n.toElement,T=p,P=P?vi(P):null,P!==null&&(V=Pi(P),P!==V||P.tag!==5&&P.tag!==6)&&(P=null)):(T=null,P=p),T!==P)){if(M=Rh,F="onMouseLeave",D="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(M=Ph,F="onPointerLeave",D="onPointerEnter",k="pointer"),V=T==null?C:is(T),R=P==null?C:is(P),C=new M(F,k+"leave",T,n,w),C.target=V,C.relatedTarget=R,F=null,vi(w)===p&&(M=new M(D,k+"enter",P,n,w),M.target=R,M.relatedTarget=V,F=M),V=F,T&&P)t:{for(M=T,D=P,k=0,R=M;R;R=zi(R))k++;for(R=0,F=D;F;F=zi(F))R++;for(;0<k-R;)M=zi(M),k--;for(;0<R-k;)D=zi(D),R--;for(;k--;){if(M===D||D!==null&&M===D.alternate)break t;M=zi(M),D=zi(D)}M=null}else M=null;T!==null&&qh(_,C,T,M,!1),P!==null&&V!==null&&qh(_,V,P,M,!0)}}e:{if(C=p?is(p):window,T=C.nodeName&&C.nodeName.toLowerCase(),T==="select"||T==="input"&&C.type==="file")var Y=W2;else if(Oh(C))if(Lg)Y=j2;else{Y=$2;var H=K2}else(T=C.nodeName)&&T.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(Y=Y2);if(Y&&(Y=Y(t,p))){Og(_,Y,n,w);break e}H&&H(t,C,p),t==="focusout"&&(H=C._wrapperState)&&H.controlled&&C.type==="number"&&yc(C,"number",C.value)}switch(H=p?is(p):window,t){case"focusin":(Oh(H)||H.contentEditable==="true")&&(ns=H,bc=p,wo=null);break;case"focusout":wo=bc=ns=null;break;case"mousedown":Rc=!0;break;case"contextmenu":case"mouseup":case"dragend":Rc=!1,Vh(_,n,w);break;case"selectionchange":if(Z2)break;case"keydown":case"keyup":Vh(_,n,w)}var B;if(jd)e:{switch(t){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else ts?Mg(t,n)&&($="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(Pg&&n.locale!=="ko"&&(ts||$!=="onCompositionStart"?$==="onCompositionEnd"&&ts&&(B=kg()):(Gr=w,Kd="value"in Gr?Gr.value:Gr.textContent,ts=!0)),H=ll(p,$),0<H.length&&($=new kh($,t,null,n,w),_.push({event:$,listeners:H}),B?$.data=B:(B=Dg(n),B!==null&&($.data=B)))),(B=V2?G2(t,n):H2(t,n))&&(p=ll(p,"onBeforeInput"),0<p.length&&(w=new kh("onBeforeInput","beforeinput",null,n,w),_.push({event:w,listeners:p}),w.data=B))}Kg(_,e)})}function Bo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ll(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Ro(t,n),a!=null&&r.unshift(Bo(t,a,s)),a=Ro(t,e),a!=null&&r.push(Bo(t,a,s))),t=t.return}return r}function zi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qh(t,e,n,r,s){for(var a=e._reactName,u=[];n!==null&&n!==r;){var h=n,m=h.alternate,p=h.stateNode;if(m!==null&&m===r)break;h.tag===5&&p!==null&&(h=p,s?(m=Ro(n,a),m!=null&&u.unshift(Bo(n,m,h))):s||(m=Ro(n,a),m!=null&&u.push(Bo(n,m,h)))),n=n.return}u.length!==0&&t.push({event:e,listeners:u})}var nv=/\r\n?/g,rv=/\u0000|\uFFFD/g;function zh(t){return(typeof t=="string"?t:""+t).replace(nv,`
`).replace(rv,"")}function Aa(t,e,n){if(e=zh(e),zh(t)!==e&&n)throw Error(ee(425))}function ul(){}var kc=null,Pc=null;function Mc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dc=typeof setTimeout=="function"?setTimeout:void 0,iv=typeof clearTimeout=="function"?clearTimeout:void 0,Wh=typeof Promise=="function"?Promise:void 0,sv=typeof queueMicrotask=="function"?queueMicrotask:typeof Wh<"u"?function(t){return Wh.resolve(null).then(t).catch(ov)}:Dc;function ov(t){setTimeout(function(){throw t})}function Hu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Mo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Mo(e)}function $r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ds=Math.random().toString(36).slice(2),ar="__reactFiber$"+Ds,Fo="__reactProps$"+Ds,wr="__reactContainer$"+Ds,Oc="__reactEvents$"+Ds,av="__reactListeners$"+Ds,lv="__reactHandles$"+Ds;function vi(t){var e=t[ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[wr]||n[ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kh(t);t!==null;){if(n=t[ar])return n;t=Kh(t)}return e}t=n,n=t.parentNode}return null}function Zo(t){return t=t[ar]||t[wr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function is(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Hl(t){return t[Fo]||null}var Lc=[],ss=-1;function ti(t){return{current:t}}function nt(t){0>ss||(t.current=Lc[ss],Lc[ss]=null,ss--)}function Je(t,e){ss++,Lc[ss]=t.current,t.current=e}var Qr={},$t=ti(Qr),dn=ti(!1),Ti=Qr;function As(t,e){var n=t.type.contextTypes;if(!n)return Qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function fn(t){return t=t.childContextTypes,t!=null}function cl(){nt(dn),nt($t)}function $h(t,e,n){if($t.current!==Qr)throw Error(ee(168));Je($t,e),Je(dn,n)}function Yg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ee(108,Kw(t)||"Unknown",s));return dt({},n,r)}function dl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qr,Ti=$t.current,Je($t,t),Je(dn,dn.current),!0}function Yh(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=Yg(t,e,Ti),r.__reactInternalMemoizedMergedChildContext=t,nt(dn),nt($t),Je($t,t)):nt(dn),Je(dn,n)}var pr=null,ql=!1,qu=!1;function jg(t){pr===null?pr=[t]:pr.push(t)}function uv(t){ql=!0,jg(t)}function ni(){if(!qu&&pr!==null){qu=!0;var t=0,e=qe;try{var n=pr;for(qe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pr=null,ql=!1}catch(s){throw pr!==null&&(pr=pr.slice(t+1)),vg(Hd,ni),s}finally{qe=e,qu=!1}}return null}var os=[],as=0,fl=null,hl=0,Rn=[],kn=0,Ii=null,gr=1,mr="";function pi(t,e){os[as++]=hl,os[as++]=fl,fl=t,hl=e}function Xg(t,e,n){Rn[kn++]=gr,Rn[kn++]=mr,Rn[kn++]=Ii,Ii=t;var r=gr;t=mr;var s=32-$n(r)-1;r&=~(1<<s),n+=1;var a=32-$n(e)+s;if(30<a){var u=s-s%5;a=(r&(1<<u)-1).toString(32),r>>=u,s-=u,gr=1<<32-$n(e)+s|n<<s|r,mr=a+t}else gr=1<<a|n<<s|r,mr=t}function Jd(t){t.return!==null&&(pi(t,1),Xg(t,1,0))}function Zd(t){for(;t===fl;)fl=os[--as],os[as]=null,hl=os[--as],os[as]=null;for(;t===Ii;)Ii=Rn[--kn],Rn[kn]=null,mr=Rn[--kn],Rn[kn]=null,gr=Rn[--kn],Rn[kn]=null}var En=null,vn=null,st=!1,Kn=null;function Jg(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function jh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,En=t,vn=$r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,En=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ii!==null?{id:gr,overflow:mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,En=t,vn=null,!0):!1;default:return!1}}function Bc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fc(t){if(st){var e=vn;if(e){var n=e;if(!jh(t,e)){if(Bc(t))throw Error(ee(418));e=$r(n.nextSibling);var r=En;e&&jh(t,e)?Jg(r,n):(t.flags=t.flags&-4097|2,st=!1,En=t)}}else{if(Bc(t))throw Error(ee(418));t.flags=t.flags&-4097|2,st=!1,En=t}}}function Xh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;En=t}function Sa(t){if(t!==En)return!1;if(!st)return Xh(t),st=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mc(t.type,t.memoizedProps)),e&&(e=vn)){if(Bc(t))throw Zg(),Error(ee(418));for(;e;)Jg(t,e),e=$r(e.nextSibling)}if(Xh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=$r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=En?$r(t.stateNode.nextSibling):null;return!0}function Zg(){for(var t=vn;t;)t=$r(t.nextSibling)}function Ss(){vn=En=null,st=!1}function Qd(t){Kn===null?Kn=[t]:Kn.push(t)}var cv=Cr.ReactCurrentBatchConfig;function so(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(u){var h=s.refs;u===null?delete h[a]:h[a]=u},e._stringRef=a,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function Ta(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jh(t){var e=t._init;return e(t._payload)}function Qg(t){function e(D,k){if(t){var R=D.deletions;R===null?(D.deletions=[k],D.flags|=16):R.push(k)}}function n(D,k){if(!t)return null;for(;k!==null;)e(D,k),k=k.sibling;return null}function r(D,k){for(D=new Map;k!==null;)k.key!==null?D.set(k.key,k):D.set(k.index,k),k=k.sibling;return D}function s(D,k){return D=Jr(D,k),D.index=0,D.sibling=null,D}function a(D,k,R){return D.index=R,t?(R=D.alternate,R!==null?(R=R.index,R<k?(D.flags|=2,k):R):(D.flags|=2,k)):(D.flags|=1048576,k)}function u(D){return t&&D.alternate===null&&(D.flags|=2),D}function h(D,k,R,F){return k===null||k.tag!==6?(k=Xu(R,D.mode,F),k.return=D,k):(k=s(k,R),k.return=D,k)}function m(D,k,R,F){var Y=R.type;return Y===es?w(D,k,R.props.children,F,R.key):k!==null&&(k.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Lr&&Jh(Y)===k.type)?(F=s(k,R.props),F.ref=so(D,k,R),F.return=D,F):(F=Za(R.type,R.key,R.props,null,D.mode,F),F.ref=so(D,k,R),F.return=D,F)}function p(D,k,R,F){return k===null||k.tag!==4||k.stateNode.containerInfo!==R.containerInfo||k.stateNode.implementation!==R.implementation?(k=Ju(R,D.mode,F),k.return=D,k):(k=s(k,R.children||[]),k.return=D,k)}function w(D,k,R,F,Y){return k===null||k.tag!==7?(k=Si(R,D.mode,F,Y),k.return=D,k):(k=s(k,R),k.return=D,k)}function _(D,k,R){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Xu(""+k,D.mode,R),k.return=D,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ga:return R=Za(k.type,k.key,k.props,null,D.mode,R),R.ref=so(D,null,k),R.return=D,R;case Qi:return k=Ju(k,D.mode,R),k.return=D,k;case Lr:var F=k._init;return _(D,F(k._payload),R)}if(co(k)||eo(k))return k=Si(k,D.mode,R,null),k.return=D,k;Ta(D,k)}return null}function C(D,k,R,F){var Y=k!==null?k.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return Y!==null?null:h(D,k,""+R,F);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ga:return R.key===Y?m(D,k,R,F):null;case Qi:return R.key===Y?p(D,k,R,F):null;case Lr:return Y=R._init,C(D,k,Y(R._payload),F)}if(co(R)||eo(R))return Y!==null?null:w(D,k,R,F,null);Ta(D,R)}return null}function T(D,k,R,F,Y){if(typeof F=="string"&&F!==""||typeof F=="number")return D=D.get(R)||null,h(k,D,""+F,Y);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case ga:return D=D.get(F.key===null?R:F.key)||null,m(k,D,F,Y);case Qi:return D=D.get(F.key===null?R:F.key)||null,p(k,D,F,Y);case Lr:var H=F._init;return T(D,k,R,H(F._payload),Y)}if(co(F)||eo(F))return D=D.get(R)||null,w(k,D,F,Y,null);Ta(k,F)}return null}function P(D,k,R,F){for(var Y=null,H=null,B=k,$=k=0,q=null;B!==null&&$<R.length;$++){B.index>$?(q=B,B=null):q=B.sibling;var re=C(D,B,R[$],F);if(re===null){B===null&&(B=q);break}t&&B&&re.alternate===null&&e(D,B),k=a(re,k,$),H===null?Y=re:H.sibling=re,H=re,B=q}if($===R.length)return n(D,B),st&&pi(D,$),Y;if(B===null){for(;$<R.length;$++)B=_(D,R[$],F),B!==null&&(k=a(B,k,$),H===null?Y=B:H.sibling=B,H=B);return st&&pi(D,$),Y}for(B=r(D,B);$<R.length;$++)q=T(B,D,$,R[$],F),q!==null&&(t&&q.alternate!==null&&B.delete(q.key===null?$:q.key),k=a(q,k,$),H===null?Y=q:H.sibling=q,H=q);return t&&B.forEach(function(Se){return e(D,Se)}),st&&pi(D,$),Y}function M(D,k,R,F){var Y=eo(R);if(typeof Y!="function")throw Error(ee(150));if(R=Y.call(R),R==null)throw Error(ee(151));for(var H=Y=null,B=k,$=k=0,q=null,re=R.next();B!==null&&!re.done;$++,re=R.next()){B.index>$?(q=B,B=null):q=B.sibling;var Se=C(D,B,re.value,F);if(Se===null){B===null&&(B=q);break}t&&B&&Se.alternate===null&&e(D,B),k=a(Se,k,$),H===null?Y=Se:H.sibling=Se,H=Se,B=q}if(re.done)return n(D,B),st&&pi(D,$),Y;if(B===null){for(;!re.done;$++,re=R.next())re=_(D,re.value,F),re!==null&&(k=a(re,k,$),H===null?Y=re:H.sibling=re,H=re);return st&&pi(D,$),Y}for(B=r(D,B);!re.done;$++,re=R.next())re=T(B,D,$,re.value,F),re!==null&&(t&&re.alternate!==null&&B.delete(re.key===null?$:re.key),k=a(re,k,$),H===null?Y=re:H.sibling=re,H=re);return t&&B.forEach(function(se){return e(D,se)}),st&&pi(D,$),Y}function V(D,k,R,F){if(typeof R=="object"&&R!==null&&R.type===es&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case ga:e:{for(var Y=R.key,H=k;H!==null;){if(H.key===Y){if(Y=R.type,Y===es){if(H.tag===7){n(D,H.sibling),k=s(H,R.props.children),k.return=D,D=k;break e}}else if(H.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Lr&&Jh(Y)===H.type){n(D,H.sibling),k=s(H,R.props),k.ref=so(D,H,R),k.return=D,D=k;break e}n(D,H);break}else e(D,H);H=H.sibling}R.type===es?(k=Si(R.props.children,D.mode,F,R.key),k.return=D,D=k):(F=Za(R.type,R.key,R.props,null,D.mode,F),F.ref=so(D,k,R),F.return=D,D=F)}return u(D);case Qi:e:{for(H=R.key;k!==null;){if(k.key===H)if(k.tag===4&&k.stateNode.containerInfo===R.containerInfo&&k.stateNode.implementation===R.implementation){n(D,k.sibling),k=s(k,R.children||[]),k.return=D,D=k;break e}else{n(D,k);break}else e(D,k);k=k.sibling}k=Ju(R,D.mode,F),k.return=D,D=k}return u(D);case Lr:return H=R._init,V(D,k,H(R._payload),F)}if(co(R))return P(D,k,R,F);if(eo(R))return M(D,k,R,F);Ta(D,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,k!==null&&k.tag===6?(n(D,k.sibling),k=s(k,R),k.return=D,D=k):(n(D,k),k=Xu(R,D.mode,F),k.return=D,D=k),u(D)):n(D,k)}return V}var Ts=Qg(!0),em=Qg(!1),pl=ti(null),gl=null,ls=null,ef=null;function tf(){ef=ls=gl=null}function nf(t){var e=pl.current;nt(pl),t._currentValue=e}function Uc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ys(t,e){gl=t,ef=ls=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cn=!0),t.firstContext=null)}function On(t){var e=t._currentValue;if(ef!==t)if(t={context:t,memoizedValue:e,next:null},ls===null){if(gl===null)throw Error(ee(308));ls=t,gl.dependencies={lanes:0,firstContext:t}}else ls=ls.next=t;return e}var Ei=null;function rf(t){Ei===null?Ei=[t]:Ei.push(t)}function tm(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,rf(e)):(n.next=s.next,s.next=n),e.interleaved=n,vr(t,r)}function vr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Br=!1;function sf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Be&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,vr(t,n)}return s=r.interleaved,s===null?(e.next=e,rf(r)):(e.next=s.next,s.next=e),r.interleaved=e,vr(t,n)}function Ka(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qd(t,n)}}function Zh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=u:a=a.next=u,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ml(t,e,n,r){var s=t.updateQueue;Br=!1;var a=s.firstBaseUpdate,u=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var m=h,p=m.next;m.next=null,u===null?a=p:u.next=p,u=m;var w=t.alternate;w!==null&&(w=w.updateQueue,h=w.lastBaseUpdate,h!==u&&(h===null?w.firstBaseUpdate=p:h.next=p,w.lastBaseUpdate=m))}if(a!==null){var _=s.baseState;u=0,w=p=m=null,h=a;do{var C=h.lane,T=h.eventTime;if((r&C)===C){w!==null&&(w=w.next={eventTime:T,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var P=t,M=h;switch(C=e,T=n,M.tag){case 1:if(P=M.payload,typeof P=="function"){_=P.call(T,_,C);break e}_=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=M.payload,C=typeof P=="function"?P.call(T,_,C):P,C==null)break e;_=dt({},_,C);break e;case 2:Br=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,C=s.effects,C===null?s.effects=[h]:C.push(h))}else T={eventTime:T,lane:C,tag:h.tag,payload:h.payload,callback:h.callback,next:null},w===null?(p=w=T,m=_):w=w.next=T,u|=C;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;C=h,h=C.next,C.next=null,s.lastBaseUpdate=C,s.shared.pending=null}}while(!0);if(w===null&&(m=_),s.baseState=m,s.firstBaseUpdate=p,s.lastBaseUpdate=w,e=s.shared.interleaved,e!==null){s=e;do u|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);bi|=u,t.lanes=u,t.memoizedState=_}}function Qh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ee(191,s));s.call(r)}}}var Qo={},ur=ti(Qo),Uo=ti(Qo),Vo=ti(Qo);function _i(t){if(t===Qo)throw Error(ee(174));return t}function of(t,e){switch(Je(Vo,e),Je(Uo,t),Je(ur,Qo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wc(e,t)}nt(ur),Je(ur,e)}function Is(){nt(ur),nt(Uo),nt(Vo)}function rm(t){_i(Vo.current);var e=_i(ur.current),n=wc(e,t.type);e!==n&&(Je(Uo,t),Je(ur,n))}function af(t){Uo.current===t&&(nt(ur),nt(Uo))}var ut=ti(0);function yl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zu=[];function lf(){for(var t=0;t<zu.length;t++)zu[t]._workInProgressVersionPrimary=null;zu.length=0}var $a=Cr.ReactCurrentDispatcher,Wu=Cr.ReactCurrentBatchConfig,Ni=0,ct=null,Tt=null,kt=null,xl=!1,vo=!1,Go=0,dv=0;function qt(){throw Error(ee(321))}function uf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jn(t[n],e[n]))return!1;return!0}function cf(t,e,n,r,s,a){if(Ni=a,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$a.current=t===null||t.memoizedState===null?gv:mv,t=n(r,s),vo){a=0;do{if(vo=!1,Go=0,25<=a)throw Error(ee(301));a+=1,kt=Tt=null,e.updateQueue=null,$a.current=yv,t=n(r,s)}while(vo)}if($a.current=wl,e=Tt!==null&&Tt.next!==null,Ni=0,kt=Tt=ct=null,xl=!1,e)throw Error(ee(300));return t}function df(){var t=Go!==0;return Go=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?ct.memoizedState=kt=t:kt=kt.next=t,kt}function Ln(){if(Tt===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var e=kt===null?ct.memoizedState:kt.next;if(e!==null)kt=e,Tt=t;else{if(t===null)throw Error(ee(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},kt===null?ct.memoizedState=kt=t:kt=kt.next=t}return kt}function Ho(t,e){return typeof e=="function"?e(t):e}function Ku(t){var e=Ln(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=Tt,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var u=s.next;s.next=a.next,a.next=u}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var h=u=null,m=null,p=a;do{var w=p.lane;if((Ni&w)===w)m!==null&&(m=m.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var _={lane:w,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};m===null?(h=m=_,u=r):m=m.next=_,ct.lanes|=w,bi|=w}p=p.next}while(p!==null&&p!==a);m===null?u=r:m.next=h,jn(r,e.memoizedState)||(cn=!0),e.memoizedState=r,e.baseState=u,e.baseQueue=m,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,ct.lanes|=a,bi|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $u(t){var e=Ln(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var u=s=s.next;do a=t(a,u.action),u=u.next;while(u!==s);jn(a,e.memoizedState)||(cn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function im(){}function sm(t,e){var n=ct,r=Ln(),s=e(),a=!jn(r.memoizedState,s);if(a&&(r.memoizedState=s,cn=!0),r=r.queue,ff(lm.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||kt!==null&&kt.memoizedState.tag&1){if(n.flags|=2048,qo(9,am.bind(null,n,r,s,e),void 0,null),Pt===null)throw Error(ee(349));Ni&30||om(n,e,s)}return s}function om(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function am(t,e,n,r){e.value=n,e.getSnapshot=r,um(e)&&cm(t)}function lm(t,e,n){return n(function(){um(e)&&cm(t)})}function um(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jn(t,n)}catch{return!0}}function cm(t){var e=vr(t,1);e!==null&&Yn(e,t,1,-1)}function e0(t){var e=sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:t},e.queue=t,t=t.dispatch=pv.bind(null,ct,t),[e.memoizedState,t]}function qo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function dm(){return Ln().memoizedState}function Ya(t,e,n,r){var s=sr();ct.flags|=t,s.memoizedState=qo(1|e,n,void 0,r===void 0?null:r)}function zl(t,e,n,r){var s=Ln();r=r===void 0?null:r;var a=void 0;if(Tt!==null){var u=Tt.memoizedState;if(a=u.destroy,r!==null&&uf(r,u.deps)){s.memoizedState=qo(e,n,a,r);return}}ct.flags|=t,s.memoizedState=qo(1|e,n,a,r)}function t0(t,e){return Ya(8390656,8,t,e)}function ff(t,e){return zl(2048,8,t,e)}function fm(t,e){return zl(4,2,t,e)}function hm(t,e){return zl(4,4,t,e)}function pm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gm(t,e,n){return n=n!=null?n.concat([t]):null,zl(4,4,pm.bind(null,e,t),n)}function hf(){}function mm(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ym(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function xm(t,e,n){return Ni&21?(jn(n,e)||(n=Cg(),ct.lanes|=n,bi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cn=!0),t.memoizedState=n)}function fv(t,e){var n=qe;qe=n!==0&&4>n?n:4,t(!0);var r=Wu.transition;Wu.transition={};try{t(!1),e()}finally{qe=n,Wu.transition=r}}function wm(){return Ln().memoizedState}function hv(t,e,n){var r=Xr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},vm(t))Em(e,n);else if(n=tm(t,e,n,r),n!==null){var s=Zt();Yn(n,t,r,s),_m(n,e,r)}}function pv(t,e,n){var r=Xr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(vm(t))Em(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var u=e.lastRenderedState,h=a(u,n);if(s.hasEagerState=!0,s.eagerState=h,jn(h,u)){var m=e.interleaved;m===null?(s.next=s,rf(e)):(s.next=m.next,m.next=s),e.interleaved=s;return}}catch{}finally{}n=tm(t,e,s,r),n!==null&&(s=Zt(),Yn(n,t,r,s),_m(n,e,r))}}function vm(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function Em(t,e){vo=xl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _m(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qd(t,n)}}var wl={readContext:On,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},gv={readContext:On,useCallback:function(t,e){return sr().memoizedState=[t,e===void 0?null:e],t},useContext:On,useEffect:t0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ya(4194308,4,pm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ya(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ya(4,2,t,e)},useMemo:function(t,e){var n=sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hv.bind(null,ct,t),[r.memoizedState,t]},useRef:function(t){var e=sr();return t={current:t},e.memoizedState=t},useState:e0,useDebugValue:hf,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=e0(!1),e=t[0];return t=fv.bind(null,t[1]),sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ct,s=sr();if(st){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Pt===null)throw Error(ee(349));Ni&30||om(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,t0(lm.bind(null,r,a,t),[t]),r.flags|=2048,qo(9,am.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=sr(),e=Pt.identifierPrefix;if(st){var n=mr,r=gr;n=(r&~(1<<32-$n(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Go++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=dv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mv={readContext:On,useCallback:mm,useContext:On,useEffect:ff,useImperativeHandle:gm,useInsertionEffect:fm,useLayoutEffect:hm,useMemo:ym,useReducer:Ku,useRef:dm,useState:function(){return Ku(Ho)},useDebugValue:hf,useDeferredValue:function(t){var e=Ln();return xm(e,Tt.memoizedState,t)},useTransition:function(){var t=Ku(Ho)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:im,useSyncExternalStore:sm,useId:wm,unstable_isNewReconciler:!1},yv={readContext:On,useCallback:mm,useContext:On,useEffect:ff,useImperativeHandle:gm,useInsertionEffect:fm,useLayoutEffect:hm,useMemo:ym,useReducer:$u,useRef:dm,useState:function(){return $u(Ho)},useDebugValue:hf,useDeferredValue:function(t){var e=Ln();return Tt===null?e.memoizedState=t:xm(e,Tt.memoizedState,t)},useTransition:function(){var t=$u(Ho)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:im,useSyncExternalStore:sm,useId:wm,unstable_isNewReconciler:!1};function Hn(t,e){if(t&&t.defaultProps){e=dt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wl={isMounted:function(t){return(t=t._reactInternals)?Pi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Zt(),s=Xr(t),a=yr(r,s);a.payload=e,n!=null&&(a.callback=n),e=Yr(t,a,s),e!==null&&(Yn(e,t,s,r),Ka(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Zt(),s=Xr(t),a=yr(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Yr(t,a,s),e!==null&&(Yn(e,t,s,r),Ka(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zt(),r=Xr(t),s=yr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Yr(t,s,r),e!==null&&(Yn(e,t,r,n),Ka(e,t,r))}};function n0(t,e,n,r,s,a,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,u):e.prototype&&e.prototype.isPureReactComponent?!Oo(n,r)||!Oo(s,a):!0}function Cm(t,e,n){var r=!1,s=Qr,a=e.contextType;return typeof a=="object"&&a!==null?a=On(a):(s=fn(e)?Ti:$t.current,r=e.contextTypes,a=(r=r!=null)?As(t,s):Qr),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function r0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wl.enqueueReplaceState(e,e.state,null)}function Gc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},sf(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=On(a):(a=fn(e)?Ti:$t.current,s.context=As(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Vc(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Wl.enqueueReplaceState(s,s.state,null),ml(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ns(t,e){try{var n="",r=e;do n+=Ww(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Yu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xv=typeof WeakMap=="function"?WeakMap:Map;function Am(t,e,n){n=yr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){El||(El=!0,Zc=r),Hc(t,e)},n}function Sm(t,e,n){n=yr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Hc(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Hc(t,e),typeof r!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var u=e.stack;this.componentDidCatch(e.value,{componentStack:u!==null?u:""})}),n}function i0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new xv;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Pv.bind(null,t,e,n),e.then(t,t))}function s0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function o0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=yr(-1,1),e.tag=2,Yr(n,e,1))),n.lanes|=1),t)}var wv=Cr.ReactCurrentOwner,cn=!1;function Xt(t,e,n,r){e.child=t===null?em(e,null,n,r):Ts(e,t.child,n,r)}function a0(t,e,n,r,s){n=n.render;var a=e.ref;return ys(e,s),r=cf(t,e,n,r,a,s),n=df(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Er(t,e,s)):(st&&n&&Jd(e),e.flags|=1,Xt(t,e,r,s),e.child)}function l0(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!Ef(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,Tm(t,e,a,r,s)):(t=Za(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var u=a.memoizedProps;if(n=n.compare,n=n!==null?n:Oo,n(u,r)&&t.ref===e.ref)return Er(t,e,s)}return e.flags|=1,t=Jr(a,r),t.ref=e.ref,t.return=e,e.child=t}function Tm(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(Oo(a,r)&&t.ref===e.ref)if(cn=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(cn=!0);else return e.lanes=t.lanes,Er(t,e,s)}return qc(t,e,n,r,s)}function Im(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(cs,yn),yn|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Je(cs,yn),yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Je(cs,yn),yn|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Je(cs,yn),yn|=r;return Xt(t,e,s,n),e.child}function Nm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qc(t,e,n,r,s){var a=fn(n)?Ti:$t.current;return a=As(e,a),ys(e,s),n=cf(t,e,n,r,a,s),r=df(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Er(t,e,s)):(st&&r&&Jd(e),e.flags|=1,Xt(t,e,n,s),e.child)}function u0(t,e,n,r,s){if(fn(n)){var a=!0;dl(e)}else a=!1;if(ys(e,s),e.stateNode===null)ja(t,e),Cm(e,n,r),Gc(e,n,r,s),r=!0;else if(t===null){var u=e.stateNode,h=e.memoizedProps;u.props=h;var m=u.context,p=n.contextType;typeof p=="object"&&p!==null?p=On(p):(p=fn(n)?Ti:$t.current,p=As(e,p));var w=n.getDerivedStateFromProps,_=typeof w=="function"||typeof u.getSnapshotBeforeUpdate=="function";_||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==r||m!==p)&&r0(e,u,r,p),Br=!1;var C=e.memoizedState;u.state=C,ml(e,r,u,s),m=e.memoizedState,h!==r||C!==m||dn.current||Br?(typeof w=="function"&&(Vc(e,n,w,r),m=e.memoizedState),(h=Br||n0(e,n,h,r,C,m,p))?(_||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(e.flags|=4194308)):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=m),u.props=r,u.state=m,u.context=p,r=h):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{u=e.stateNode,nm(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:Hn(e.type,h),u.props=p,_=e.pendingProps,C=u.context,m=n.contextType,typeof m=="object"&&m!==null?m=On(m):(m=fn(n)?Ti:$t.current,m=As(e,m));var T=n.getDerivedStateFromProps;(w=typeof T=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==_||C!==m)&&r0(e,u,r,m),Br=!1,C=e.memoizedState,u.state=C,ml(e,r,u,s);var P=e.memoizedState;h!==_||C!==P||dn.current||Br?(typeof T=="function"&&(Vc(e,n,T,r),P=e.memoizedState),(p=Br||n0(e,n,p,r,C,P,m)||!1)?(w||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,P,m),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,P,m)),typeof u.componentDidUpdate=="function"&&(e.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&C===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&C===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),u.props=r,u.state=P,u.context=m,r=p):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&C===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&C===t.memoizedState||(e.flags|=1024),r=!1)}return zc(t,e,n,r,a,s)}function zc(t,e,n,r,s,a){Nm(t,e);var u=(e.flags&128)!==0;if(!r&&!u)return s&&Yh(e,n,!1),Er(t,e,a);r=e.stateNode,wv.current=e;var h=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&u?(e.child=Ts(e,t.child,null,a),e.child=Ts(e,null,h,a)):Xt(t,e,h,a),e.memoizedState=r.state,s&&Yh(e,n,!0),e.child}function bm(t){var e=t.stateNode;e.pendingContext?$h(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$h(t,e.context,!1),of(t,e.containerInfo)}function c0(t,e,n,r,s){return Ss(),Qd(s),e.flags|=256,Xt(t,e,n,r),e.child}var Wc={dehydrated:null,treeContext:null,retryLane:0};function Kc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Rm(t,e,n){var r=e.pendingProps,s=ut.current,a=!1,u=(e.flags&128)!==0,h;if((h=u)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Je(ut,s&1),t===null)return Fc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(u=r.children,t=r.fallback,a?(r=e.mode,a=e.child,u={mode:"hidden",children:u},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=u):a=Yl(u,r,0,null),t=Si(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Kc(n),e.memoizedState=Wc,t):pf(e,u));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return vv(t,e,u,r,h,s,n);if(a){a=r.fallback,u=e.mode,s=t.child,h=s.sibling;var m={mode:"hidden",children:r.children};return!(u&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=m,e.deletions=null):(r=Jr(s,m),r.subtreeFlags=s.subtreeFlags&14680064),h!==null?a=Jr(h,a):(a=Si(a,u,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,u=t.child.memoizedState,u=u===null?Kc(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},a.memoizedState=u,a.childLanes=t.childLanes&~n,e.memoizedState=Wc,r}return a=t.child,t=a.sibling,r=Jr(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pf(t,e){return e=Yl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ia(t,e,n,r){return r!==null&&Qd(r),Ts(e,t.child,null,n),t=pf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vv(t,e,n,r,s,a,u){if(n)return e.flags&256?(e.flags&=-257,r=Yu(Error(ee(422))),Ia(t,e,u,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=Yl({mode:"visible",children:r.children},s,0,null),a=Si(a,s,u,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Ts(e,t.child,null,u),e.child.memoizedState=Kc(u),e.memoizedState=Wc,a);if(!(e.mode&1))return Ia(t,e,u,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var h=r.dgst;return r=h,a=Error(ee(419)),r=Yu(a,r,void 0),Ia(t,e,u,r)}if(h=(u&t.childLanes)!==0,cn||h){if(r=Pt,r!==null){switch(u&-u){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|u)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,vr(t,s),Yn(r,t,s,-1))}return vf(),r=Yu(Error(ee(421))),Ia(t,e,u,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Mv.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,vn=$r(s.nextSibling),En=e,st=!0,Kn=null,t!==null&&(Rn[kn++]=gr,Rn[kn++]=mr,Rn[kn++]=Ii,gr=t.id,mr=t.overflow,Ii=e),e=pf(e,r.children),e.flags|=4096,e)}function d0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Uc(t.return,e,n)}function ju(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function km(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(Xt(t,e,r.children,n),r=ut.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&d0(t,n,e);else if(t.tag===19)d0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Je(ut,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&yl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ju(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&yl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ju(e,!0,n,null,a);break;case"together":ju(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ja(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Er(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),bi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=Jr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ev(t,e,n){switch(e.tag){case 3:bm(e),Ss();break;case 5:rm(e);break;case 1:fn(e.type)&&dl(e);break;case 4:of(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Je(pl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Je(ut,ut.current&1),e.flags|=128,null):n&e.child.childLanes?Rm(t,e,n):(Je(ut,ut.current&1),t=Er(t,e,n),t!==null?t.sibling:null);Je(ut,ut.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return km(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Je(ut,ut.current),r)break;return null;case 22:case 23:return e.lanes=0,Im(t,e,n)}return Er(t,e,n)}var Pm,$c,Mm,Dm;Pm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$c=function(){};Mm=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,_i(ur.current);var a=null;switch(n){case"input":s=gc(t,s),r=gc(t,r),a=[];break;case"select":s=dt({},s,{value:void 0}),r=dt({},r,{value:void 0}),a=[];break;case"textarea":s=xc(t,s),r=xc(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ul)}vc(n,r);var u;n=null;for(p in s)if(!r.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var h=s[p];for(u in h)h.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(No.hasOwnProperty(p)?a||(a=[]):(a=a||[]).push(p,null));for(p in r){var m=r[p];if(h=s!=null?s[p]:void 0,r.hasOwnProperty(p)&&m!==h&&(m!=null||h!=null))if(p==="style")if(h){for(u in h)!h.hasOwnProperty(u)||m&&m.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in m)m.hasOwnProperty(u)&&h[u]!==m[u]&&(n||(n={}),n[u]=m[u])}else n||(a||(a=[]),a.push(p,n)),n=m;else p==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,h=h?h.__html:void 0,m!=null&&h!==m&&(a=a||[]).push(p,m)):p==="children"?typeof m!="string"&&typeof m!="number"||(a=a||[]).push(p,""+m):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(No.hasOwnProperty(p)?(m!=null&&p==="onScroll"&&Qe("scroll",t),a||h===m||(a=[])):(a=a||[]).push(p,m))}n&&(a=a||[]).push("style",n);var p=a;(e.updateQueue=p)&&(e.flags|=4)}};Dm=function(t,e,n,r){n!==r&&(e.flags|=4)};function oo(t,e){if(!st)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _v(t,e,n){var r=e.pendingProps;switch(Zd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(e),null;case 1:return fn(e.type)&&cl(),zt(e),null;case 3:return r=e.stateNode,Is(),nt(dn),nt($t),lf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kn!==null&&(td(Kn),Kn=null))),$c(t,e),zt(e),null;case 5:af(e);var s=_i(Vo.current);if(n=e.type,t!==null&&e.stateNode!=null)Mm(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return zt(e),null}if(t=_i(ur.current),Sa(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[ar]=e,r[Fo]=a,t=(e.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(s=0;s<ho.length;s++)Qe(ho[s],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":vh(r,a),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Qe("invalid",r);break;case"textarea":_h(r,a),Qe("invalid",r)}vc(n,a),s=null;for(var u in a)if(a.hasOwnProperty(u)){var h=a[u];u==="children"?typeof h=="string"?r.textContent!==h&&(a.suppressHydrationWarning!==!0&&Aa(r.textContent,h,t),s=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(a.suppressHydrationWarning!==!0&&Aa(r.textContent,h,t),s=["children",""+h]):No.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&Qe("scroll",r)}switch(n){case"input":ma(r),Eh(r,a,!0);break;case"textarea":ma(r),Ch(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=ul)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{u=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=u.createElement(n,{is:r.is}):(t=u.createElement(n),n==="select"&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,n),t[ar]=e,t[Fo]=r,Pm(t,e,!1,!1),e.stateNode=t;e:{switch(u=Ec(n,r),n){case"dialog":Qe("cancel",t),Qe("close",t),s=r;break;case"iframe":case"object":case"embed":Qe("load",t),s=r;break;case"video":case"audio":for(s=0;s<ho.length;s++)Qe(ho[s],t);s=r;break;case"source":Qe("error",t),s=r;break;case"img":case"image":case"link":Qe("error",t),Qe("load",t),s=r;break;case"details":Qe("toggle",t),s=r;break;case"input":vh(t,r),s=gc(t,r),Qe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=dt({},r,{value:void 0}),Qe("invalid",t);break;case"textarea":_h(t,r),s=xc(t,r),Qe("invalid",t);break;default:s=r}vc(n,s),h=s;for(a in h)if(h.hasOwnProperty(a)){var m=h[a];a==="style"?dg(t,m):a==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&ug(t,m)):a==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&bo(t,m):typeof m=="number"&&bo(t,""+m):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(No.hasOwnProperty(a)?m!=null&&a==="onScroll"&&Qe("scroll",t):m!=null&&Bd(t,a,m,u))}switch(n){case"input":ma(t),Eh(t,r,!1);break;case"textarea":ma(t),Ch(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zr(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?hs(t,!!r.multiple,a,!1):r.defaultValue!=null&&hs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ul)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zt(e),null;case 6:if(t&&e.stateNode!=null)Dm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=_i(Vo.current),_i(ur.current),Sa(e)){if(r=e.stateNode,n=e.memoizedProps,r[ar]=e,(a=r.nodeValue!==n)&&(t=En,t!==null))switch(t.tag){case 3:Aa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Aa(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ar]=e,e.stateNode=r}return zt(e),null;case 13:if(nt(ut),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&vn!==null&&e.mode&1&&!(e.flags&128))Zg(),Ss(),e.flags|=98560,a=!1;else if(a=Sa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(ee(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ee(317));a[ar]=e}else Ss(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zt(e),a=!1}else Kn!==null&&(td(Kn),Kn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ut.current&1?It===0&&(It=3):vf())),e.updateQueue!==null&&(e.flags|=4),zt(e),null);case 4:return Is(),$c(t,e),t===null&&Lo(e.stateNode.containerInfo),zt(e),null;case 10:return nf(e.type._context),zt(e),null;case 17:return fn(e.type)&&cl(),zt(e),null;case 19:if(nt(ut),a=e.memoizedState,a===null)return zt(e),null;if(r=(e.flags&128)!==0,u=a.rendering,u===null)if(r)oo(a,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(u=yl(t),u!==null){for(e.flags|=128,oo(a,!1),r=u.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,u=a.alternate,u===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,t=u.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Je(ut,ut.current&1|2),e.child}t=t.sibling}a.tail!==null&&xt()>bs&&(e.flags|=128,r=!0,oo(a,!1),e.lanes=4194304)}else{if(!r)if(t=yl(u),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),oo(a,!0),a.tail===null&&a.tailMode==="hidden"&&!u.alternate&&!st)return zt(e),null}else 2*xt()-a.renderingStartTime>bs&&n!==1073741824&&(e.flags|=128,r=!0,oo(a,!1),e.lanes=4194304);a.isBackwards?(u.sibling=e.child,e.child=u):(n=a.last,n!==null?n.sibling=u:e.child=u,a.last=u)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=xt(),e.sibling=null,n=ut.current,Je(ut,r?n&1|2:n&1),e):(zt(e),null);case 22:case 23:return wf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yn&1073741824&&(zt(e),e.subtreeFlags&6&&(e.flags|=8192)):zt(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function Cv(t,e){switch(Zd(e),e.tag){case 1:return fn(e.type)&&cl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Is(),nt(dn),nt($t),lf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return af(e),null;case 13:if(nt(ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));Ss()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(ut),null;case 4:return Is(),null;case 10:return nf(e.type._context),null;case 22:case 23:return wf(),null;case 24:return null;default:return null}}var Na=!1,Wt=!1,Av=typeof WeakSet=="function"?WeakSet:Set,fe=null;function us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){mt(t,e,r)}else n.current=null}function Yc(t,e,n){try{n()}catch(r){mt(t,e,r)}}var f0=!1;function Sv(t,e){if(kc=ol,t=Ug(),Xd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var u=0,h=-1,m=-1,p=0,w=0,_=t,C=null;t:for(;;){for(var T;_!==n||s!==0&&_.nodeType!==3||(h=u+s),_!==a||r!==0&&_.nodeType!==3||(m=u+r),_.nodeType===3&&(u+=_.nodeValue.length),(T=_.firstChild)!==null;)C=_,_=T;for(;;){if(_===t)break t;if(C===n&&++p===s&&(h=u),C===a&&++w===r&&(m=u),(T=_.nextSibling)!==null)break;_=C,C=_.parentNode}_=T}n=h===-1||m===-1?null:{start:h,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pc={focusedElem:t,selectionRange:n},ol=!1,fe=e;fe!==null;)if(e=fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fe=t;else for(;fe!==null;){e=fe;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var M=P.memoizedProps,V=P.memoizedState,D=e.stateNode,k=D.getSnapshotBeforeUpdate(e.elementType===e.type?M:Hn(e.type,M),V);D.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(F){mt(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,fe=t;break}fe=e.return}return P=f0,f0=!1,P}function Eo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&Yc(e,n,a)}s=s.next}while(s!==r)}}function Kl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Om(t){var e=t.alternate;e!==null&&(t.alternate=null,Om(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ar],delete e[Fo],delete e[Oc],delete e[av],delete e[lv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Lm(t){return t.tag===5||t.tag===3||t.tag===4}function h0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Lm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ul));else if(r!==4&&(t=t.child,t!==null))for(Xc(t,e,n),t=t.sibling;t!==null;)Xc(t,e,n),t=t.sibling}function Jc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Jc(t,e,n),t=t.sibling;t!==null;)Jc(t,e,n),t=t.sibling}var Ft=null,zn=!1;function Dr(t,e,n){for(n=n.child;n!==null;)Bm(t,e,n),n=n.sibling}function Bm(t,e,n){if(lr&&typeof lr.onCommitFiberUnmount=="function")try{lr.onCommitFiberUnmount(Fl,n)}catch{}switch(n.tag){case 5:Wt||us(n,e);case 6:var r=Ft,s=zn;Ft=null,Dr(t,e,n),Ft=r,zn=s,Ft!==null&&(zn?(t=Ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ft.removeChild(n.stateNode));break;case 18:Ft!==null&&(zn?(t=Ft,n=n.stateNode,t.nodeType===8?Hu(t.parentNode,n):t.nodeType===1&&Hu(t,n),Mo(t)):Hu(Ft,n.stateNode));break;case 4:r=Ft,s=zn,Ft=n.stateNode.containerInfo,zn=!0,Dr(t,e,n),Ft=r,zn=s;break;case 0:case 11:case 14:case 15:if(!Wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,u=a.destroy;a=a.tag,u!==void 0&&(a&2||a&4)&&Yc(n,e,u),s=s.next}while(s!==r)}Dr(t,e,n);break;case 1:if(!Wt&&(us(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){mt(n,e,h)}Dr(t,e,n);break;case 21:Dr(t,e,n);break;case 22:n.mode&1?(Wt=(r=Wt)||n.memoizedState!==null,Dr(t,e,n),Wt=r):Dr(t,e,n);break;default:Dr(t,e,n)}}function p0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Av),e.forEach(function(r){var s=Dv.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,u=e,h=u;e:for(;h!==null;){switch(h.tag){case 5:Ft=h.stateNode,zn=!1;break e;case 3:Ft=h.stateNode.containerInfo,zn=!0;break e;case 4:Ft=h.stateNode.containerInfo,zn=!0;break e}h=h.return}if(Ft===null)throw Error(ee(160));Bm(a,u,s),Ft=null,zn=!1;var m=s.alternate;m!==null&&(m.return=null),s.return=null}catch(p){mt(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fm(e,t),e=e.sibling}function Fm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vn(e,t),ir(t),r&4){try{Eo(3,t,t.return),Kl(3,t)}catch(M){mt(t,t.return,M)}try{Eo(5,t,t.return)}catch(M){mt(t,t.return,M)}}break;case 1:Vn(e,t),ir(t),r&512&&n!==null&&us(n,n.return);break;case 5:if(Vn(e,t),ir(t),r&512&&n!==null&&us(n,n.return),t.flags&32){var s=t.stateNode;try{bo(s,"")}catch(M){mt(t,t.return,M)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,u=n!==null?n.memoizedProps:a,h=t.type,m=t.updateQueue;if(t.updateQueue=null,m!==null)try{h==="input"&&a.type==="radio"&&a.name!=null&&og(s,a),Ec(h,u);var p=Ec(h,a);for(u=0;u<m.length;u+=2){var w=m[u],_=m[u+1];w==="style"?dg(s,_):w==="dangerouslySetInnerHTML"?ug(s,_):w==="children"?bo(s,_):Bd(s,w,_,p)}switch(h){case"input":mc(s,a);break;case"textarea":ag(s,a);break;case"select":var C=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var T=a.value;T!=null?hs(s,!!a.multiple,T,!1):C!==!!a.multiple&&(a.defaultValue!=null?hs(s,!!a.multiple,a.defaultValue,!0):hs(s,!!a.multiple,a.multiple?[]:"",!1))}s[Fo]=a}catch(M){mt(t,t.return,M)}}break;case 6:if(Vn(e,t),ir(t),r&4){if(t.stateNode===null)throw Error(ee(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(M){mt(t,t.return,M)}}break;case 3:if(Vn(e,t),ir(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Mo(e.containerInfo)}catch(M){mt(t,t.return,M)}break;case 4:Vn(e,t),ir(t);break;case 13:Vn(e,t),ir(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(yf=xt())),r&4&&p0(t);break;case 22:if(w=n!==null&&n.memoizedState!==null,t.mode&1?(Wt=(p=Wt)||w,Vn(e,t),Wt=p):Vn(e,t),ir(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!w&&t.mode&1)for(fe=t,w=t.child;w!==null;){for(_=fe=w;fe!==null;){switch(C=fe,T=C.child,C.tag){case 0:case 11:case 14:case 15:Eo(4,C,C.return);break;case 1:us(C,C.return);var P=C.stateNode;if(typeof P.componentWillUnmount=="function"){r=C,n=C.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(M){mt(r,n,M)}}break;case 5:us(C,C.return);break;case 22:if(C.memoizedState!==null){m0(_);continue}}T!==null?(T.return=C,fe=T):m0(_)}w=w.sibling}e:for(w=null,_=t;;){if(_.tag===5){if(w===null){w=_;try{s=_.stateNode,p?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(h=_.stateNode,m=_.memoizedProps.style,u=m!=null&&m.hasOwnProperty("display")?m.display:null,h.style.display=cg("display",u))}catch(M){mt(t,t.return,M)}}}else if(_.tag===6){if(w===null)try{_.stateNode.nodeValue=p?"":_.memoizedProps}catch(M){mt(t,t.return,M)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;w===_&&(w=null),_=_.return}w===_&&(w=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:Vn(e,t),ir(t),r&4&&p0(t);break;case 21:break;default:Vn(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Lm(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(bo(s,""),r.flags&=-33);var a=h0(t);Jc(t,a,s);break;case 3:case 4:var u=r.stateNode.containerInfo,h=h0(t);Xc(t,h,u);break;default:throw Error(ee(161))}}catch(m){mt(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Tv(t,e,n){fe=t,Um(t)}function Um(t,e,n){for(var r=(t.mode&1)!==0;fe!==null;){var s=fe,a=s.child;if(s.tag===22&&r){var u=s.memoizedState!==null||Na;if(!u){var h=s.alternate,m=h!==null&&h.memoizedState!==null||Wt;h=Na;var p=Wt;if(Na=u,(Wt=m)&&!p)for(fe=s;fe!==null;)u=fe,m=u.child,u.tag===22&&u.memoizedState!==null?y0(s):m!==null?(m.return=u,fe=m):y0(s);for(;a!==null;)fe=a,Um(a),a=a.sibling;fe=s,Na=h,Wt=p}g0(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,fe=a):g0(t)}}function g0(t){for(;fe!==null;){var e=fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wt||Kl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Wt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Hn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Qh(e,a,r);break;case 3:var u=e.updateQueue;if(u!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Qh(e,u,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var m=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var w=p.memoizedState;if(w!==null){var _=w.dehydrated;_!==null&&Mo(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Wt||e.flags&512&&jc(e)}catch(C){mt(e,e.return,C)}}if(e===t){fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,fe=n;break}fe=e.return}}function m0(t){for(;fe!==null;){var e=fe;if(e===t){fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,fe=n;break}fe=e.return}}function y0(t){for(;fe!==null;){var e=fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Kl(4,e)}catch(m){mt(e,n,m)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(m){mt(e,s,m)}}var a=e.return;try{jc(e)}catch(m){mt(e,a,m)}break;case 5:var u=e.return;try{jc(e)}catch(m){mt(e,u,m)}}}catch(m){mt(e,e.return,m)}if(e===t){fe=null;break}var h=e.sibling;if(h!==null){h.return=e.return,fe=h;break}fe=e.return}}var Iv=Math.ceil,vl=Cr.ReactCurrentDispatcher,gf=Cr.ReactCurrentOwner,Mn=Cr.ReactCurrentBatchConfig,Be=0,Pt=null,Et=null,Ut=0,yn=0,cs=ti(0),It=0,zo=null,bi=0,$l=0,mf=0,_o=null,un=null,yf=0,bs=1/0,fr=null,El=!1,Zc=null,jr=null,ba=!1,Hr=null,_l=0,Co=0,Qc=null,Xa=-1,Ja=0;function Zt(){return Be&6?xt():Xa!==-1?Xa:Xa=xt()}function Xr(t){return t.mode&1?Be&2&&Ut!==0?Ut&-Ut:cv.transition!==null?(Ja===0&&(Ja=Cg()),Ja):(t=qe,t!==0||(t=window.event,t=t===void 0?16:Rg(t.type)),t):1}function Yn(t,e,n,r){if(50<Co)throw Co=0,Qc=null,Error(ee(185));Xo(t,n,r),(!(Be&2)||t!==Pt)&&(t===Pt&&(!(Be&2)&&($l|=n),It===4&&Ur(t,Ut)),hn(t,r),n===1&&Be===0&&!(e.mode&1)&&(bs=xt()+500,ql&&ni()))}function hn(t,e){var n=t.callbackNode;c2(t,e);var r=sl(t,t===Pt?Ut:0);if(r===0)n!==null&&Th(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Th(n),e===1)t.tag===0?uv(x0.bind(null,t)):jg(x0.bind(null,t)),sv(function(){!(Be&6)&&ni()}),n=null;else{switch(Ag(r)){case 1:n=Hd;break;case 4:n=Eg;break;case 16:n=il;break;case 536870912:n=_g;break;default:n=il}n=$m(n,Vm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Vm(t,e){if(Xa=-1,Ja=0,Be&6)throw Error(ee(327));var n=t.callbackNode;if(xs()&&t.callbackNode!==n)return null;var r=sl(t,t===Pt?Ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Cl(t,r);else{e=r;var s=Be;Be|=2;var a=Hm();(Pt!==t||Ut!==e)&&(fr=null,bs=xt()+500,Ai(t,e));do try{Rv();break}catch(h){Gm(t,h)}while(!0);tf(),vl.current=a,Be=s,Et!==null?e=0:(Pt=null,Ut=0,e=It)}if(e!==0){if(e===2&&(s=Tc(t),s!==0&&(r=s,e=ed(t,s))),e===1)throw n=zo,Ai(t,0),Ur(t,r),hn(t,xt()),n;if(e===6)Ur(t,r);else{if(s=t.current.alternate,!(r&30)&&!Nv(s)&&(e=Cl(t,r),e===2&&(a=Tc(t),a!==0&&(r=a,e=ed(t,a))),e===1))throw n=zo,Ai(t,0),Ur(t,r),hn(t,xt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:gi(t,un,fr);break;case 3:if(Ur(t,r),(r&130023424)===r&&(e=yf+500-xt(),10<e)){if(sl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Zt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Dc(gi.bind(null,t,un,fr),e);break}gi(t,un,fr);break;case 4:if(Ur(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var u=31-$n(r);a=1<<u,u=e[u],u>s&&(s=u),r&=~a}if(r=s,r=xt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Iv(r/1960))-r,10<r){t.timeoutHandle=Dc(gi.bind(null,t,un,fr),r);break}gi(t,un,fr);break;case 5:gi(t,un,fr);break;default:throw Error(ee(329))}}}return hn(t,xt()),t.callbackNode===n?Vm.bind(null,t):null}function ed(t,e){var n=_o;return t.current.memoizedState.isDehydrated&&(Ai(t,e).flags|=256),t=Cl(t,e),t!==2&&(e=un,un=n,e!==null&&td(e)),t}function td(t){un===null?un=t:un.push.apply(un,t)}function Nv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!jn(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ur(t,e){for(e&=~mf,e&=~$l,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$n(e),r=1<<n;t[n]=-1,e&=~r}}function x0(t){if(Be&6)throw Error(ee(327));xs();var e=sl(t,0);if(!(e&1))return hn(t,xt()),null;var n=Cl(t,e);if(t.tag!==0&&n===2){var r=Tc(t);r!==0&&(e=r,n=ed(t,r))}if(n===1)throw n=zo,Ai(t,0),Ur(t,e),hn(t,xt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gi(t,un,fr),hn(t,xt()),null}function xf(t,e){var n=Be;Be|=1;try{return t(e)}finally{Be=n,Be===0&&(bs=xt()+500,ql&&ni())}}function Ri(t){Hr!==null&&Hr.tag===0&&!(Be&6)&&xs();var e=Be;Be|=1;var n=Mn.transition,r=qe;try{if(Mn.transition=null,qe=1,t)return t()}finally{qe=r,Mn.transition=n,Be=e,!(Be&6)&&ni()}}function wf(){yn=cs.current,nt(cs)}function Ai(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,iv(n)),Et!==null)for(n=Et.return;n!==null;){var r=n;switch(Zd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cl();break;case 3:Is(),nt(dn),nt($t),lf();break;case 5:af(r);break;case 4:Is();break;case 13:nt(ut);break;case 19:nt(ut);break;case 10:nf(r.type._context);break;case 22:case 23:wf()}n=n.return}if(Pt=t,Et=t=Jr(t.current,null),Ut=yn=e,It=0,zo=null,mf=$l=bi=0,un=_o=null,Ei!==null){for(e=0;e<Ei.length;e++)if(n=Ei[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var u=a.next;a.next=s,r.next=u}n.pending=r}Ei=null}return t}function Gm(t,e){do{var n=Et;try{if(tf(),$a.current=wl,xl){for(var r=ct.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xl=!1}if(Ni=0,kt=Tt=ct=null,vo=!1,Go=0,gf.current=null,n===null||n.return===null){It=1,zo=e,Et=null;break}e:{var a=t,u=n.return,h=n,m=e;if(e=Ut,h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var p=m,w=h,_=w.tag;if(!(w.mode&1)&&(_===0||_===11||_===15)){var C=w.alternate;C?(w.updateQueue=C.updateQueue,w.memoizedState=C.memoizedState,w.lanes=C.lanes):(w.updateQueue=null,w.memoizedState=null)}var T=s0(u);if(T!==null){T.flags&=-257,o0(T,u,h,a,e),T.mode&1&&i0(a,p,e),e=T,m=p;var P=e.updateQueue;if(P===null){var M=new Set;M.add(m),e.updateQueue=M}else P.add(m);break e}else{if(!(e&1)){i0(a,p,e),vf();break e}m=Error(ee(426))}}else if(st&&h.mode&1){var V=s0(u);if(V!==null){!(V.flags&65536)&&(V.flags|=256),o0(V,u,h,a,e),Qd(Ns(m,h));break e}}a=m=Ns(m,h),It!==4&&(It=2),_o===null?_o=[a]:_o.push(a),a=u;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var D=Am(a,m,e);Zh(a,D);break e;case 1:h=m;var k=a.type,R=a.stateNode;if(!(a.flags&128)&&(typeof k.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(jr===null||!jr.has(R)))){a.flags|=65536,e&=-e,a.lanes|=e;var F=Sm(a,h,e);Zh(a,F);break e}}a=a.return}while(a!==null)}zm(n)}catch(Y){e=Y,Et===n&&n!==null&&(Et=n=n.return);continue}break}while(!0)}function Hm(){var t=vl.current;return vl.current=wl,t===null?wl:t}function vf(){(It===0||It===3||It===2)&&(It=4),Pt===null||!(bi&268435455)&&!($l&268435455)||Ur(Pt,Ut)}function Cl(t,e){var n=Be;Be|=2;var r=Hm();(Pt!==t||Ut!==e)&&(fr=null,Ai(t,e));do try{bv();break}catch(s){Gm(t,s)}while(!0);if(tf(),Be=n,vl.current=r,Et!==null)throw Error(ee(261));return Pt=null,Ut=0,It}function bv(){for(;Et!==null;)qm(Et)}function Rv(){for(;Et!==null&&!t2();)qm(Et)}function qm(t){var e=Km(t.alternate,t,yn);t.memoizedProps=t.pendingProps,e===null?zm(t):Et=e,gf.current=null}function zm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Cv(n,e),n!==null){n.flags&=32767,Et=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,Et=null;return}}else if(n=_v(n,e,yn),n!==null){Et=n;return}if(e=e.sibling,e!==null){Et=e;return}Et=e=t}while(e!==null);It===0&&(It=5)}function gi(t,e,n){var r=qe,s=Mn.transition;try{Mn.transition=null,qe=1,kv(t,e,n,r)}finally{Mn.transition=s,qe=r}return null}function kv(t,e,n,r){do xs();while(Hr!==null);if(Be&6)throw Error(ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(d2(t,a),t===Pt&&(Et=Pt=null,Ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ba||(ba=!0,$m(il,function(){return xs(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Mn.transition,Mn.transition=null;var u=qe;qe=1;var h=Be;Be|=4,gf.current=null,Sv(t,n),Fm(n,t),J2(Pc),ol=!!kc,Pc=kc=null,t.current=n,Tv(n),n2(),Be=h,qe=u,Mn.transition=a}else t.current=n;if(ba&&(ba=!1,Hr=t,_l=s),a=t.pendingLanes,a===0&&(jr=null),s2(n.stateNode),hn(t,xt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(El)throw El=!1,t=Zc,Zc=null,t;return _l&1&&t.tag!==0&&xs(),a=t.pendingLanes,a&1?t===Qc?Co++:(Co=0,Qc=t):Co=0,ni(),null}function xs(){if(Hr!==null){var t=Ag(_l),e=Mn.transition,n=qe;try{if(Mn.transition=null,qe=16>t?16:t,Hr===null)var r=!1;else{if(t=Hr,Hr=null,_l=0,Be&6)throw Error(ee(331));var s=Be;for(Be|=4,fe=t.current;fe!==null;){var a=fe,u=a.child;if(fe.flags&16){var h=a.deletions;if(h!==null){for(var m=0;m<h.length;m++){var p=h[m];for(fe=p;fe!==null;){var w=fe;switch(w.tag){case 0:case 11:case 15:Eo(8,w,a)}var _=w.child;if(_!==null)_.return=w,fe=_;else for(;fe!==null;){w=fe;var C=w.sibling,T=w.return;if(Om(w),w===p){fe=null;break}if(C!==null){C.return=T,fe=C;break}fe=T}}}var P=a.alternate;if(P!==null){var M=P.child;if(M!==null){P.child=null;do{var V=M.sibling;M.sibling=null,M=V}while(M!==null)}}fe=a}}if(a.subtreeFlags&2064&&u!==null)u.return=a,fe=u;else e:for(;fe!==null;){if(a=fe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Eo(9,a,a.return)}var D=a.sibling;if(D!==null){D.return=a.return,fe=D;break e}fe=a.return}}var k=t.current;for(fe=k;fe!==null;){u=fe;var R=u.child;if(u.subtreeFlags&2064&&R!==null)R.return=u,fe=R;else e:for(u=k;fe!==null;){if(h=fe,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Kl(9,h)}}catch(Y){mt(h,h.return,Y)}if(h===u){fe=null;break e}var F=h.sibling;if(F!==null){F.return=h.return,fe=F;break e}fe=h.return}}if(Be=s,ni(),lr&&typeof lr.onPostCommitFiberRoot=="function")try{lr.onPostCommitFiberRoot(Fl,t)}catch{}r=!0}return r}finally{qe=n,Mn.transition=e}}return!1}function w0(t,e,n){e=Ns(n,e),e=Am(t,e,1),t=Yr(t,e,1),e=Zt(),t!==null&&(Xo(t,1,e),hn(t,e))}function mt(t,e,n){if(t.tag===3)w0(t,t,n);else for(;e!==null;){if(e.tag===3){w0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jr===null||!jr.has(r))){t=Ns(n,t),t=Sm(e,t,1),e=Yr(e,t,1),t=Zt(),e!==null&&(Xo(e,1,t),hn(e,t));break}}e=e.return}}function Pv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Zt(),t.pingedLanes|=t.suspendedLanes&n,Pt===t&&(Ut&n)===n&&(It===4||It===3&&(Ut&130023424)===Ut&&500>xt()-yf?Ai(t,0):mf|=n),hn(t,e)}function Wm(t,e){e===0&&(t.mode&1?(e=wa,wa<<=1,!(wa&130023424)&&(wa=4194304)):e=1);var n=Zt();t=vr(t,e),t!==null&&(Xo(t,e,n),hn(t,n))}function Mv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Wm(t,n)}function Dv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),Wm(t,n)}var Km;Km=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dn.current)cn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return cn=!1,Ev(t,e,n);cn=!!(t.flags&131072)}else cn=!1,st&&e.flags&1048576&&Xg(e,hl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ja(t,e),t=e.pendingProps;var s=As(e,$t.current);ys(e,n),s=cf(null,e,r,t,s,n);var a=df();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fn(r)?(a=!0,dl(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,sf(e),s.updater=Wl,e.stateNode=s,s._reactInternals=e,Gc(e,r,t,n),e=zc(null,e,r,!0,a,n)):(e.tag=0,st&&a&&Jd(e),Xt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ja(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Lv(r),t=Hn(r,t),s){case 0:e=qc(null,e,r,t,n);break e;case 1:e=u0(null,e,r,t,n);break e;case 11:e=a0(null,e,r,t,n);break e;case 14:e=l0(null,e,r,Hn(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hn(r,s),qc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hn(r,s),u0(t,e,r,s,n);case 3:e:{if(bm(e),t===null)throw Error(ee(387));r=e.pendingProps,a=e.memoizedState,s=a.element,nm(t,e),ml(e,r,null,n);var u=e.memoizedState;if(r=u.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Ns(Error(ee(423)),e),e=c0(t,e,r,n,s);break e}else if(r!==s){s=Ns(Error(ee(424)),e),e=c0(t,e,r,n,s);break e}else for(vn=$r(e.stateNode.containerInfo.firstChild),En=e,st=!0,Kn=null,n=em(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ss(),r===s){e=Er(t,e,n);break e}Xt(t,e,r,n)}e=e.child}return e;case 5:return rm(e),t===null&&Fc(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,u=s.children,Mc(r,s)?u=null:a!==null&&Mc(r,a)&&(e.flags|=32),Nm(t,e),Xt(t,e,u,n),e.child;case 6:return t===null&&Fc(e),null;case 13:return Rm(t,e,n);case 4:return of(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ts(e,null,r,n):Xt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hn(r,s),a0(t,e,r,s,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,u=s.value,Je(pl,r._currentValue),r._currentValue=u,a!==null)if(jn(a.value,u)){if(a.children===s.children&&!dn.current){e=Er(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var h=a.dependencies;if(h!==null){u=a.child;for(var m=h.firstContext;m!==null;){if(m.context===r){if(a.tag===1){m=yr(-1,n&-n),m.tag=2;var p=a.updateQueue;if(p!==null){p=p.shared;var w=p.pending;w===null?m.next=m:(m.next=w.next,w.next=m),p.pending=m}}a.lanes|=n,m=a.alternate,m!==null&&(m.lanes|=n),Uc(a.return,n,e),h.lanes|=n;break}m=m.next}}else if(a.tag===10)u=a.type===e.type?null:a.child;else if(a.tag===18){if(u=a.return,u===null)throw Error(ee(341));u.lanes|=n,h=u.alternate,h!==null&&(h.lanes|=n),Uc(u,n,e),u=a.sibling}else u=a.child;if(u!==null)u.return=a;else for(u=a;u!==null;){if(u===e){u=null;break}if(a=u.sibling,a!==null){a.return=u.return,u=a;break}u=u.return}a=u}Xt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ys(e,n),s=On(s),r=r(s),e.flags|=1,Xt(t,e,r,n),e.child;case 14:return r=e.type,s=Hn(r,e.pendingProps),s=Hn(r.type,s),l0(t,e,r,s,n);case 15:return Tm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hn(r,s),ja(t,e),e.tag=1,fn(r)?(t=!0,dl(e)):t=!1,ys(e,n),Cm(e,r,s),Gc(e,r,s,n),zc(null,e,r,!0,t,n);case 19:return km(t,e,n);case 22:return Im(t,e,n)}throw Error(ee(156,e.tag))};function $m(t,e){return vg(t,e)}function Ov(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,r){return new Ov(t,e,n,r)}function Ef(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Lv(t){if(typeof t=="function")return Ef(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ud)return 11;if(t===Vd)return 14}return 2}function Jr(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Za(t,e,n,r,s,a){var u=2;if(r=t,typeof t=="function")Ef(t)&&(u=1);else if(typeof t=="string")u=5;else e:switch(t){case es:return Si(n.children,s,a,e);case Fd:u=8,s|=8;break;case dc:return t=Pn(12,n,e,s|2),t.elementType=dc,t.lanes=a,t;case fc:return t=Pn(13,n,e,s),t.elementType=fc,t.lanes=a,t;case hc:return t=Pn(19,n,e,s),t.elementType=hc,t.lanes=a,t;case rg:return Yl(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tg:u=10;break e;case ng:u=9;break e;case Ud:u=11;break e;case Vd:u=14;break e;case Lr:u=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Pn(u,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function Si(t,e,n,r){return t=Pn(7,t,r,e),t.lanes=n,t}function Yl(t,e,n,r){return t=Pn(22,t,r,e),t.elementType=rg,t.lanes=n,t.stateNode={isHidden:!1},t}function Xu(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function Ju(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Bv(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ku(0),this.expirationTimes=ku(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ku(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _f(t,e,n,r,s,a,u,h,m){return t=new Bv(t,e,n,h,m),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Pn(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sf(a),t}function Fv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ym(t){if(!t)return Qr;t=t._reactInternals;e:{if(Pi(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(fn(n))return Yg(t,n,e)}return e}function jm(t,e,n,r,s,a,u,h,m){return t=_f(n,r,!0,t,s,a,u,h,m),t.context=Ym(null),n=t.current,r=Zt(),s=Xr(n),a=yr(r,s),a.callback=e??null,Yr(n,a,s),t.current.lanes=s,Xo(t,s,r),hn(t,r),t}function jl(t,e,n,r){var s=e.current,a=Zt(),u=Xr(s);return n=Ym(n),e.context===null?e.context=n:e.pendingContext=n,e=yr(a,u),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yr(s,e,u),t!==null&&(Yn(t,s,u,a),Ka(t,s,u)),u}function Al(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function v0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Cf(t,e){v0(t,e),(t=t.alternate)&&v0(t,e)}function Uv(){return null}var Xm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Af(t){this._internalRoot=t}Xl.prototype.render=Af.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));jl(t,e,null,null)};Xl.prototype.unmount=Af.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ri(function(){jl(null,t,null,null)}),e[wr]=null}};function Xl(t){this._internalRoot=t}Xl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ig();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fr.length&&e!==0&&e<Fr[n].priority;n++);Fr.splice(n,0,t),n===0&&bg(t)}};function Sf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function E0(){}function Vv(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var p=Al(u);a.call(p)}}var u=jm(e,r,t,0,null,!1,!1,"",E0);return t._reactRootContainer=u,t[wr]=u.current,Lo(t.nodeType===8?t.parentNode:t),Ri(),u}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var h=r;r=function(){var p=Al(m);h.call(p)}}var m=_f(t,0,!1,null,null,!1,!1,"",E0);return t._reactRootContainer=m,t[wr]=m.current,Lo(t.nodeType===8?t.parentNode:t),Ri(function(){jl(e,m,n,r)}),m}function Zl(t,e,n,r,s){var a=n._reactRootContainer;if(a){var u=a;if(typeof s=="function"){var h=s;s=function(){var m=Al(u);h.call(m)}}jl(e,u,t,s)}else u=Vv(n,e,t,s,r);return Al(u)}Sg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fo(e.pendingLanes);n!==0&&(qd(e,n|1),hn(e,xt()),!(Be&6)&&(bs=xt()+500,ni()))}break;case 13:Ri(function(){var r=vr(t,1);if(r!==null){var s=Zt();Yn(r,t,1,s)}}),Cf(t,1)}};zd=function(t){if(t.tag===13){var e=vr(t,134217728);if(e!==null){var n=Zt();Yn(e,t,134217728,n)}Cf(t,134217728)}};Tg=function(t){if(t.tag===13){var e=Xr(t),n=vr(t,e);if(n!==null){var r=Zt();Yn(n,t,e,r)}Cf(t,e)}};Ig=function(){return qe};Ng=function(t,e){var n=qe;try{return qe=t,e()}finally{qe=n}};Cc=function(t,e,n){switch(e){case"input":if(mc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Hl(r);if(!s)throw Error(ee(90));sg(r),mc(r,s)}}}break;case"textarea":ag(t,n);break;case"select":e=n.value,e!=null&&hs(t,!!n.multiple,e,!1)}};pg=xf;gg=Ri;var Gv={usingClientEntryPoint:!1,Events:[Zo,is,Hl,fg,hg,xf]},ao={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hv={bundleType:ao.bundleType,version:ao.version,rendererPackageName:ao.rendererPackageName,rendererConfig:ao.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xg(t),t===null?null:t.stateNode},findFiberByHostInstance:ao.findFiberByHostInstance||Uv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ra=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ra.isDisabled&&Ra.supportsFiber)try{Fl=Ra.inject(Hv),lr=Ra}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gv;Cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sf(e))throw Error(ee(200));return Fv(t,e,null,n)};Cn.createRoot=function(t,e){if(!Sf(t))throw Error(ee(299));var n=!1,r="",s=Xm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=_f(t,1,!1,null,null,n,!1,r,s),t[wr]=e.current,Lo(t.nodeType===8?t.parentNode:t),new Af(e)};Cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=xg(e),t=t===null?null:t.stateNode,t};Cn.flushSync=function(t){return Ri(t)};Cn.hydrate=function(t,e,n){if(!Jl(e))throw Error(ee(200));return Zl(null,t,e,!0,n)};Cn.hydrateRoot=function(t,e,n){if(!Sf(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",u=Xm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),e=jm(e,null,t,1,n??null,s,!1,a,u),t[wr]=e.current,Lo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Xl(e)};Cn.render=function(t,e,n){if(!Jl(e))throw Error(ee(200));return Zl(null,t,e,!1,n)};Cn.unmountComponentAtNode=function(t){if(!Jl(t))throw Error(ee(40));return t._reactRootContainer?(Ri(function(){Zl(null,null,t,!1,function(){t._reactRootContainer=null,t[wr]=null})}),!0):!1};Cn.unstable_batchedUpdates=xf;Cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jl(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Zl(t,e,n,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function Jm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jm)}catch(t){console.error(t)}}Jm(),Jp.exports=Cn;var qv=Jp.exports,_0=qv;uc.createRoot=_0.createRoot,uc.hydrateRoot=_0.hydrateRoot;var or=(t=>(t.INVENTORY="INVENTORY",t.ADD_PRODUCT="ADD_PRODUCT",t.CHAT_BOT="CHAT_BOT",t))(or||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ie=(t,e)=>{const n=Ce.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:u,className:h="",children:m,...p},w)=>Ce.createElement("svg",{ref:w,...zv,width:s,height:s,stroke:r,strokeWidth:u?Number(a)*24/Number(s):a,className:["lucide",`lucide-${Wv(t)}`,h].join(" "),...p},[...e.map(([_,C])=>Ce.createElement(_,C)),...Array.isArray(m)?m:[m]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=Ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=Ie("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=Ie("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=Ie("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=Ie("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=Ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=Ie("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=Ie("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=Ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=Ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=Ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=Ie("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=Ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=Ie("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=Ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=Ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=Ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=Ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=Ie("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=Ie("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=Ie("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=Ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=Ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=Ie("PackageOpen",[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=Ie("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=Ie("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=Ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=Ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=Ie("ScanEye",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M5 12s2.5-5 7-5 7 5 7 5-2.5 5-7 5-7-5-7-5",key:"nhuolu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=Ie("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=Ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=Ie("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=Ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=Ie("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=Ie("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=Ie("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=Ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=Ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=Ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),pE=({currentView:t,setCurrentView:e,isMobileMenuOpen:n,setIsMobileMenuOpen:r,categories:s,onAddCategory:a,selectedCategory:u,onSelectCategory:h})=>{const[m,p]=Ce.useState(""),[w,_]=Ce.useState(!1),C=[{id:or.INVENTORY,label:"Depo & Envanter",icon:S.jsx(nE,{size:20})},{id:or.ADD_PRODUCT,label:"rn Ekle",icon:S.jsx(Nf,{size:20})},{id:or.CHAT_BOT,label:"Asistan (AI)",icon:S.jsx(oE,{size:20})}],T=M=>{e(M),r(!1)},P=M=>{M.preventDefault(),m.trim()&&(a(m.trim()),p(""),_(!1))};return S.jsx(S.Fragment,{children:S.jsxs("nav",{className:"bg-orange-600 text-white sticky top-0 z-50 shadow-lg shadow-orange-900/10",children:[S.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"flex items-center justify-between h-16",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"bg-white p-1.5 rounded-lg shadow-sm",children:S.jsx(I0,{className:"text-orange-600 w-6 h-6"})}),S.jsxs("div",{children:[S.jsx("span",{className:"font-bold text-xl tracking-tight leading-none block",children:"ASLAN AVM"}),S.jsx("span",{className:"text-[10px] text-orange-100 font-medium tracking-wider opacity-80 uppercase block",children:"Ynetim Paneli"})]})]}),S.jsx("div",{className:"hidden md:flex flex-1 items-center",children:S.jsx("div",{className:"ml-10 flex items-center space-x-2",children:C.map(M=>S.jsxs("button",{onClick:()=>T(M.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 ${t===M.id?"bg-white text-orange-600 shadow-md transform scale-105":"text-orange-50 hover:bg-orange-500 hover:text-white"}`,children:[M.icon,M.label]},M.id))})}),S.jsx("div",{className:"md:hidden",children:S.jsxs("button",{onClick:()=>r(!n),className:"inline-flex items-center justify-center p-2 rounded-lg text-orange-50 hover:text-white hover:bg-orange-500 transition-colors focus:outline-none",children:[S.jsx("span",{className:"sr-only",children:"Meny a"}),n?S.jsx(Rs,{size:28}):S.jsx(sE,{size:28})]})})]})}),S.jsx("div",{className:`md:hidden fixed inset-0 z-40 bg-gray-900/50 backdrop-blur-sm transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>r(!1),children:S.jsxs("div",{className:`fixed inset-y-0 left-0 w-72 bg-orange-700 shadow-2xl transform transition-transform duration-300 ease-in-out flex flex-col ${n?"translate-x-0":"-translate-x-full"}`,onClick:M=>M.stopPropagation(),children:[S.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-orange-600/50",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("div",{className:"bg-white p-1 rounded-md",children:S.jsx(I0,{className:"text-orange-700 w-5 h-5"})}),S.jsx("span",{className:"font-bold text-lg",children:"ASLAN AVM"})]}),S.jsx("button",{onClick:()=>r(!1),className:"text-orange-200 hover:text-white",children:S.jsx(Rs,{size:24})})]}),S.jsxs("div",{className:"px-3 py-4 space-y-2 overflow-y-auto",children:[S.jsx("div",{className:"mb-6 space-y-2",children:C.map(M=>S.jsxs("button",{onClick:()=>T(M.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-base font-medium transition-all ${t===M.id?"bg-white text-orange-600 shadow-sm":"text-orange-100 hover:bg-orange-600 hover:text-white"}`,children:[S.jsx("div",{className:`${t===M.id?"bg-orange-100":"bg-orange-800"} p-2 rounded-lg`,children:M.icon}),M.label]},M.id))}),S.jsxs("div",{className:"pt-4 border-t border-orange-600/50",children:[S.jsxs("div",{className:"flex items-center justify-between px-2 mb-3",children:[S.jsxs("h3",{className:"text-xs font-bold text-orange-200 uppercase tracking-wider flex items-center gap-2",children:[S.jsx(Qv,{size:14})," Kategoriler"]}),S.jsx("button",{onClick:()=>_(!w),className:"text-orange-200 hover:text-white hover:bg-orange-600 p-1 rounded",children:S.jsx(aE,{size:16})})]}),w&&S.jsxs("form",{onSubmit:P,className:"mb-3 px-2 flex gap-2",children:[S.jsx("input",{type:"text",value:m,onChange:M=>p(M.target.value),placeholder:"Kategori ad...",className:"w-full text-xs p-2 rounded text-gray-900 border-0 focus:ring-2 focus:ring-orange-400",autoFocus:!0}),S.jsx("button",{type:"submit",className:"bg-white text-orange-700 p-2 rounded font-bold text-xs",children:"OK"})]}),S.jsxs("div",{className:"space-y-1",children:[S.jsxs("button",{onClick:()=>h(""),className:`w-full flex items-center gap-3 px-4 py-2 text-sm rounded-lg transition-colors cursor-pointer ${u===""?"bg-orange-600 text-white font-bold":"text-orange-100 hover:bg-orange-600"}`,children:[S.jsx(tE,{size:14,className:"opacity-70"}),"Tm rnler"]}),s.length===0?S.jsx("div",{className:"text-orange-200/60 text-xs px-4 italic",children:"Kategori bulunamad"}):s.map(M=>S.jsxs("button",{onClick:()=>h(M.name),className:`w-full flex items-center gap-3 px-4 py-2 text-sm rounded-lg transition-colors cursor-pointer text-left ${u===M.name?"bg-orange-600 text-white font-bold":"text-orange-100 hover:bg-orange-600"}`,children:[S.jsx(ny,{size:14,className:"opacity-70"}),M.name]},M.id))]})]})]})]})})]})})};var od=function(t,e){return od=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},od(t,e)};function ry(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");od(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Sl=function(){return Sl=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sl.apply(this,arguments)};function Os(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function iy(t,e,n,r){var s=arguments.length,a=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var h=t.length-1;h>=0;h--)(u=t[h])&&(a=(s<3?u(a):s>3?u(e,n,a):u(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a}function sy(t,e){return function(n,r){e(n,r,t)}}function oy(t,e,n,r,s,a){function u(D){if(D!==void 0&&typeof D!="function")throw new TypeError("Function expected");return D}for(var h=r.kind,m=h==="getter"?"get":h==="setter"?"set":"value",p=!e&&t?r.static?t:t.prototype:null,w=e||(p?Object.getOwnPropertyDescriptor(p,r.name):{}),_,C=!1,T=n.length-1;T>=0;T--){var P={};for(var M in r)P[M]=M==="access"?{}:r[M];for(var M in r.access)P.access[M]=r.access[M];P.addInitializer=function(D){if(C)throw new TypeError("Cannot add initializers after decoration has completed");a.push(u(D||null))};var V=(0,n[T])(h==="accessor"?{get:w.get,set:w.set}:w[m],P);if(h==="accessor"){if(V===void 0)continue;if(V===null||typeof V!="object")throw new TypeError("Object expected");(_=u(V.get))&&(w.get=_),(_=u(V.set))&&(w.set=_),(_=u(V.init))&&s.unshift(_)}else(_=u(V))&&(h==="field"?s.unshift(_):w[m]=_)}p&&Object.defineProperty(p,r.name,w),C=!0}function ay(t,e,n){for(var r=arguments.length>2,s=0;s<e.length;s++)n=r?e[s].call(t,n):e[s].call(t);return r?n:void 0}function ly(t){return typeof t=="symbol"?t:"".concat(t)}function uy(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function cy(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function he(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(w){try{p(r.next(w))}catch(_){u(_)}}function m(w){try{p(r.throw(w))}catch(_){u(_)}}function p(w){w.done?a(w.value):s(w.value).then(h,m)}p((r=r.apply(t,e||[])).next())})}function dy(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=h(0),u.throw=h(1),u.return=h(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(p){return function(w){return m([p,w])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(r=1,s&&(a=p[0]&2?s.return:p[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,p[1])).done)return a;switch(s=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,s=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(w){p=[6,w],s=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Ql=Object.create?function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function fy(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ql(e,t,n)}function Tl(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rf(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,a=[],u;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(h){u={error:h}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return a}function hy(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Rf(arguments[e]));return t}function py(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var a=arguments[e],u=0,h=a.length;u<h;u++,s++)r[s]=a[u];return r}function gy(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function ks(t){return this instanceof ks?(this.v=t,this):new ks(t)}function my(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),s[Symbol.asyncIterator]=function(){return this},s;function u(T){return function(P){return Promise.resolve(P).then(T,_)}}function h(T,P){r[T]&&(s[T]=function(M){return new Promise(function(V,D){a.push([T,M,V,D])>1||m(T,M)})},P&&(s[T]=P(s[T])))}function m(T,P){try{p(r[T](P))}catch(M){C(a[0][3],M)}}function p(T){T.value instanceof ks?Promise.resolve(T.value.v).then(w,_):C(a[0][2],T)}function w(T){m("next",T)}function _(T){m("throw",T)}function C(T,P){T(P),a.shift(),a.length&&m(a[0][0],a[0][1])}}function yy(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,a){e[s]=t[s]?function(u){return(n=!n)?{value:ks(t[s](u)),done:!1}:a?a(u):u}:a}}function xy(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Tl=="function"?Tl(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(u){return new Promise(function(h,m){u=t[a](u),s(h,m,u.done,u.value)})}}function s(a,u,h,m){Promise.resolve(m).then(function(p){a({value:p,done:h})},u)}}function wy(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var gE=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},ad=function(t){return ad=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},ad(t)};function vy(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=ad(t),r=0;r<n.length;r++)n[r]!=="default"&&Ql(e,t,n[r]);return gE(e,t),e}function Ey(t){return t&&t.__esModule?t:{default:t}}function _y(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function Cy(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n}function Ay(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Sy(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var mE=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function Ty(t){function e(a){t.error=t.hasError?new mE(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var n,r=0;function s(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(s);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(s,function(u){return e(u),s()})}else r|=1}catch(u){e(u)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function Iy(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,s,a,u){return r?e?".jsx":".js":s&&(!a||!u)?n:s+a+"."+u.toLowerCase()+"js"}):t}const yE={__extends:ry,__assign:Sl,__rest:Os,__decorate:iy,__param:sy,__esDecorate:oy,__runInitializers:ay,__propKey:ly,__setFunctionName:uy,__metadata:cy,__awaiter:he,__generator:dy,__createBinding:Ql,__exportStar:fy,__values:Tl,__read:Rf,__spread:hy,__spreadArrays:py,__spreadArray:gy,__await:ks,__asyncGenerator:my,__asyncDelegator:yy,__asyncValues:xy,__makeTemplateObject:wy,__importStar:vy,__importDefault:Ey,__classPrivateFieldGet:_y,__classPrivateFieldSet:Cy,__classPrivateFieldIn:Ay,__addDisposableResource:Sy,__disposeResources:Ty,__rewriteRelativeImportExtension:Iy},xE=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Sy,get __assign(){return Sl},__asyncDelegator:yy,__asyncGenerator:my,__asyncValues:xy,__await:ks,__awaiter:he,__classPrivateFieldGet:_y,__classPrivateFieldIn:Ay,__classPrivateFieldSet:Cy,__createBinding:Ql,__decorate:iy,__disposeResources:Ty,__esDecorate:oy,__exportStar:fy,__extends:ry,__generator:dy,__importDefault:Ey,__importStar:vy,__makeTemplateObject:wy,__metadata:cy,__param:sy,__propKey:ly,__read:Rf,__rest:Os,__rewriteRelativeImportExtension:Iy,__runInitializers:ay,__setFunctionName:uy,__spread:hy,__spreadArray:gy,__spreadArrays:py,__values:Tl,default:yE},Symbol.toStringTag,{value:"Module"})),wE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class kf extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class vE extends kf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class N0 extends kf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class b0 extends kf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ld;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ld||(ld={}));class EE{constructor(e,{headers:n={},customFetch:r,region:s=ld.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=wE(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return he(this,arguments,void 0,function*(n,r={}){var s;let a,u;try{const{headers:h,method:m,body:p,signal:w,timeout:_}=r;let C={},{region:T}=r;T||(T=this.region);const P=new URL(`${this.url}/${n}`);T&&T!=="any"&&(C["x-region"]=T,P.searchParams.set("forceFunctionRegion",T));let M;p&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(C["Content-Type"]="application/octet-stream",M=p):typeof p=="string"?(C["Content-Type"]="text/plain",M=p):typeof FormData<"u"&&p instanceof FormData?M=p:(C["Content-Type"]="application/json",M=JSON.stringify(p)):M=p;let V=w;_&&(u=new AbortController,a=setTimeout(()=>u.abort(),_),w?(V=u.signal,w.addEventListener("abort",()=>u.abort())):V=u.signal);const D=yield this.fetch(P.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},C),this.headers),h),body:M,signal:V}).catch(Y=>{throw new vE(Y)}),k=D.headers.get("x-relay-error");if(k&&k==="true")throw new N0(D);if(!D.ok)throw new b0(D);let R=((s=D.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),F;return R==="application/json"?F=yield D.json():R==="application/octet-stream"||R==="application/pdf"?F=yield D.blob():R==="text/event-stream"?F=D:R==="multipart/form-data"?F=yield D.formData():F=yield D.text(),{data:F,error:null,response:D}}catch(h){return{data:null,error:h,response:h instanceof b0||h instanceof N0?h.context:void 0}}finally{a&&clearTimeout(a)}})}}var Jt={};const Ls=yw(xE);var ka={},Pa={},Ma={},Da={},Oa={},La={},R0;function Ny(){if(R0)return La;R0=1,Object.defineProperty(La,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return La.default=t,La}var k0;function by(){if(k0)return Oa;k0=1,Object.defineProperty(Oa,"__esModule",{value:!0});const e=Ls.__importDefault(Ny());class n{constructor(s){var a,u;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(a=s.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=s.signal,this.isMaybeSingle=(u=s.isMaybeSingle)!==null&&u!==void 0?u:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,a){return this.headers=new Headers(this.headers),this.headers.set(s,a),this}then(s,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let h=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var p,w,_,C;let T=null,P=null,M=null,V=m.status,D=m.statusText;if(m.ok){if(this.method!=="HEAD"){const Y=await m.text();Y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?P=Y:P=JSON.parse(Y))}const R=(w=this.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),F=(_=m.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");R&&F&&F.length>1&&(M=parseInt(F[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(P)&&(P.length>1?(T={code:"PGRST116",details:`Results contain ${P.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},P=null,M=null,V=406,D="Not Acceptable"):P.length===1?P=P[0]:P=null)}else{const R=await m.text();try{T=JSON.parse(R),Array.isArray(T)&&m.status===404&&(P=[],T=null,V=200,D="OK")}catch{m.status===404&&R===""?(V=204,D="No Content"):T={message:R}}if(T&&this.isMaybeSingle&&(!((C=T==null?void 0:T.details)===null||C===void 0)&&C.includes("0 rows"))&&(T=null,V=200,D="OK"),T&&this.shouldThrowOnError)throw new e.default(T)}return{error:T,data:P,count:M,status:V,statusText:D}});return this.shouldThrowOnError||(h=h.catch(m=>{var p,w,_,C,T,P;let M="";const V=m==null?void 0:m.cause;if(V){const D=(p=V==null?void 0:V.message)!==null&&p!==void 0?p:"",k=(w=V==null?void 0:V.code)!==null&&w!==void 0?w:"";M=`${(_=m==null?void 0:m.name)!==null&&_!==void 0?_:"FetchError"}: ${m==null?void 0:m.message}`,M+=`

Caused by: ${(C=V==null?void 0:V.name)!==null&&C!==void 0?C:"Error"}: ${D}`,k&&(M+=` (${k})`),V!=null&&V.stack&&(M+=`
${V.stack}`)}else M=(T=m==null?void 0:m.stack)!==null&&T!==void 0?T:"";return{error:{message:`${(P=m==null?void 0:m.name)!==null&&P!==void 0?P:"FetchError"}: ${m==null?void 0:m.message}`,details:M,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),h.then(s,a)}returns(){return this}overrideTypes(){return this}}return Oa.default=n,Oa}var P0;function Ry(){if(P0)return Da;P0=1,Object.defineProperty(Da,"__esModule",{value:!0});const e=Ls.__importDefault(by());class n extends e.default{select(s){let a=!1;const u=(s??"*").split("").map(h=>/\s/.test(h)&&!a?"":(h==='"'&&(a=!a),h)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:u,foreignTable:h,referencedTable:m=h}={}){const p=m?`${m}.order`:"order",w=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${w?`${w},`:""}${s}.${a?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:u=a}={}){const h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${s}`),this}range(s,a,{foreignTable:u,referencedTable:h=u}={}){const m=typeof h>"u"?"offset":`${h}.offset`,p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(m,`${s}`),this.url.searchParams.set(p,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:u=!1,buffers:h=!1,wal:m=!1,format:p="text"}={}){var w;const _=[s?"analyze":null,a?"verbose":null,u?"settings":null,h?"buffers":null,m?"wal":null].filter(Boolean).join("|"),C=(w=this.headers.get("Accept"))!==null&&w!==void 0?w:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${C}"; options=${_};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Da.default=n,Da}var M0;function Pf(){if(M0)return Ma;M0=1,Object.defineProperty(Ma,"__esModule",{value:!0});const e=Ls.__importDefault(Ry()),n=new RegExp("[,()]");class r extends e.default{eq(a,u){return this.url.searchParams.append(a,`eq.${u}`),this}neq(a,u){return this.url.searchParams.append(a,`neq.${u}`),this}gt(a,u){return this.url.searchParams.append(a,`gt.${u}`),this}gte(a,u){return this.url.searchParams.append(a,`gte.${u}`),this}lt(a,u){return this.url.searchParams.append(a,`lt.${u}`),this}lte(a,u){return this.url.searchParams.append(a,`lte.${u}`),this}like(a,u){return this.url.searchParams.append(a,`like.${u}`),this}likeAllOf(a,u){return this.url.searchParams.append(a,`like(all).{${u.join(",")}}`),this}likeAnyOf(a,u){return this.url.searchParams.append(a,`like(any).{${u.join(",")}}`),this}ilike(a,u){return this.url.searchParams.append(a,`ilike.${u}`),this}ilikeAllOf(a,u){return this.url.searchParams.append(a,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(a,u){return this.url.searchParams.append(a,`ilike(any).{${u.join(",")}}`),this}regexMatch(a,u){return this.url.searchParams.append(a,`match.${u}`),this}regexIMatch(a,u){return this.url.searchParams.append(a,`imatch.${u}`),this}is(a,u){return this.url.searchParams.append(a,`is.${u}`),this}isDistinct(a,u){return this.url.searchParams.append(a,`isdistinct.${u}`),this}in(a,u){const h=Array.from(new Set(u)).map(m=>typeof m=="string"&&n.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(a,`in.(${h})`),this}contains(a,u){return typeof u=="string"?this.url.searchParams.append(a,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(a,`cs.{${u.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(u)}`),this}containedBy(a,u){return typeof u=="string"?this.url.searchParams.append(a,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(a,`cd.{${u.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(u)}`),this}rangeGt(a,u){return this.url.searchParams.append(a,`sr.${u}`),this}rangeGte(a,u){return this.url.searchParams.append(a,`nxl.${u}`),this}rangeLt(a,u){return this.url.searchParams.append(a,`sl.${u}`),this}rangeLte(a,u){return this.url.searchParams.append(a,`nxr.${u}`),this}rangeAdjacent(a,u){return this.url.searchParams.append(a,`adj.${u}`),this}overlaps(a,u){return typeof u=="string"?this.url.searchParams.append(a,`ov.${u}`):this.url.searchParams.append(a,`ov.{${u.join(",")}}`),this}textSearch(a,u,{config:h,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const w=h===void 0?"":`(${h})`;return this.url.searchParams.append(a,`${p}fts${w}.${u}`),this}match(a){return Object.entries(a).forEach(([u,h])=>{this.url.searchParams.append(u,`eq.${h}`)}),this}not(a,u,h){return this.url.searchParams.append(a,`not.${u}.${h}`),this}or(a,{foreignTable:u,referencedTable:h=u}={}){const m=h?`${h}.or`:"or";return this.url.searchParams.append(m,`(${a})`),this}filter(a,u,h){return this.url.searchParams.append(a,`${u}.${h}`),this}}return Ma.default=r,Ma}var D0;function ky(){if(D0)return Pa;D0=1,Object.defineProperty(Pa,"__esModule",{value:!0});const e=Ls.__importDefault(Pf());class n{constructor(s,{headers:a={},schema:u,fetch:h}){this.url=s,this.headers=new Headers(a),this.schema=u,this.fetch=h}select(s,a){const{head:u=!1,count:h}=a??{},m=u?"HEAD":"GET";let p=!1;const w=(s??"*").split("").map(_=>/\s/.test(_)&&!p?"":(_==='"'&&(p=!p),_)).join("");return this.url.searchParams.set("select",w),h&&this.headers.append("Prefer",`count=${h}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:u=!0}={}){var h;const m="POST";if(a&&this.headers.append("Prefer",`count=${a}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((w,_)=>w.concat(Object.keys(_)),[]);if(p.length>0){const w=[...new Set(p)].map(_=>`"${_}"`);this.url.searchParams.set("columns",w.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:u=!1,count:h,defaultToNull:m=!0}={}){var p;const w="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),h&&this.headers.append("Prefer",`count=${h}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const _=s.reduce((C,T)=>C.concat(Object.keys(T)),[]);if(_.length>0){const C=[...new Set(_)].map(T=>`"${T}"`);this.url.searchParams.set("columns",C.join(","))}}return new e.default({method:w,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(s,{count:a}={}){var u;const h="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:s}={}){var a;const u="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Pa.default=n,Pa}var O0;function _E(){if(O0)return ka;O0=1,Object.defineProperty(ka,"__esModule",{value:!0});const t=Ls,e=t.__importDefault(ky()),n=t.__importDefault(Pf());class r{constructor(a,{headers:u={},schema:h,fetch:m}={}){this.url=a,this.headers=new Headers(u),this.schemaName=h,this.fetch=m}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const u=new URL(`${this.url}/${a}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,u={},{head:h=!1,get:m=!1,count:p}={}){var w;let _;const C=new URL(`${this.url}/rpc/${a}`);let T;h||m?(_=h?"HEAD":"GET",Object.entries(u).filter(([M,V])=>V!==void 0).map(([M,V])=>[M,Array.isArray(V)?`{${V.join(",")}}`:`${V}`]).forEach(([M,V])=>{C.searchParams.append(M,V)})):(_="POST",T=u);const P=new Headers(this.headers);return p&&P.set("Prefer",`count=${p}`),new n.default({method:_,url:C,headers:P,schema:this.schemaName,body:T,fetch:(w=this.fetch)!==null&&w!==void 0?w:fetch})}}return ka.default=r,ka}Object.defineProperty(Jt,"__esModule",{value:!0});var Py=Jt.PostgrestError=Hy=Jt.PostgrestBuilder=Vy=Jt.PostgrestTransformBuilder=Fy=Jt.PostgrestFilterBuilder=Ly=Jt.PostgrestQueryBuilder=Dy=Jt.PostgrestClient=void 0;const Bs=Ls,My=Bs.__importDefault(_E());var Dy=Jt.PostgrestClient=My.default;const Oy=Bs.__importDefault(ky());var Ly=Jt.PostgrestQueryBuilder=Oy.default;const By=Bs.__importDefault(Pf());var Fy=Jt.PostgrestFilterBuilder=By.default;const Uy=Bs.__importDefault(Ry());var Vy=Jt.PostgrestTransformBuilder=Uy.default;const Gy=Bs.__importDefault(by());var Hy=Jt.PostgrestBuilder=Gy.default;const qy=Bs.__importDefault(Ny());Py=Jt.PostgrestError=qy.default;var zy=Jt.default={PostgrestClient:My.default,PostgrestQueryBuilder:Oy.default,PostgrestFilterBuilder:By.default,PostgrestTransformBuilder:Uy.default,PostgrestBuilder:Gy.default,PostgrestError:qy.default};const CE=Fp({__proto__:null,get PostgrestBuilder(){return Hy},get PostgrestClient(){return Dy},get PostgrestError(){return Py},get PostgrestFilterBuilder(){return Fy},get PostgrestQueryBuilder(){return Ly},get PostgrestTransformBuilder(){return Vy},default:zy},[Jt]),{PostgrestClient:AE,PostgrestQueryBuilder:Jb,PostgrestFilterBuilder:Zb,PostgrestTransformBuilder:Qb,PostgrestBuilder:eR,PostgrestError:tR}=zy||CE;class SE{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const TE="2.86.0",IE=`realtime-js/${TE}`,Wy="1.0.0",NE="2.0.0",L0=Wy,ud=1e4,bE=1e3,RE=100;var yi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(yi||(yi={}));var St;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(St||(St={}));var Wn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Wn||(Wn={}));var cd;(function(t){t.websocket="websocket"})(cd||(cd={}));var xi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(xi||(xi={}));class kE{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},u=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,n,r){var s,a;const u=e.topic,h=(s=e.ref)!==null&&s!==void 0?s:"",m=(a=e.join_ref)!==null&&a!==void 0?a:"",p=e.payload.event,w=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(w).length===0?"":JSON.stringify(w);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const C=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+h.length+u.length+p.length+_.length,T=new ArrayBuffer(this.HEADER_LENGTH+C);let P=new DataView(T),M=0;P.setUint8(M++,this.KINDS.userBroadcastPush),P.setUint8(M++,m.length),P.setUint8(M++,h.length),P.setUint8(M++,u.length),P.setUint8(M++,p.length),P.setUint8(M++,_.length),P.setUint8(M++,n),Array.from(m,D=>P.setUint8(M++,D.charCodeAt(0))),Array.from(h,D=>P.setUint8(M++,D.charCodeAt(0))),Array.from(u,D=>P.setUint8(M++,D.charCodeAt(0))),Array.from(p,D=>P.setUint8(M++,D.charCodeAt(0))),Array.from(_,D=>P.setUint8(M++,D.charCodeAt(0)));var V=new Uint8Array(T.byteLength+r.byteLength);return V.set(new Uint8Array(T),0),V.set(new Uint8Array(r),T.byteLength),V.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,a,u,h,m]=r;return n({join_ref:s,ref:a,topic:u,event:h,payload:m})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),a=n.getUint8(2),u=n.getUint8(3),h=n.getUint8(4);let m=this.HEADER_LENGTH+4;const p=r.decode(e.slice(m,m+s));m=m+s;const w=r.decode(e.slice(m,m+a));m=m+a;const _=r.decode(e.slice(m,m+u));m=m+u;const C=e.slice(m,e.byteLength),T=h===this.JSON_ENCODING?JSON.parse(r.decode(C)):C,P={type:this.BROADCAST_EVENT,event:w,payload:T};return u>0&&(P.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:P}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class Ky{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Xe||(Xe={}));const B0=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,u)=>(a[u]=PE(u,t,e,s),a),{}):{}},PE=(t,e,n,r)=>{const s=e.find(h=>h.name===t),a=s==null?void 0:s.type,u=n[t];return a&&!r.includes(a)?$y(a,u):dd(u)},$y=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return LE(e,n)}switch(t){case Xe.bool:return ME(e);case Xe.float4:case Xe.float8:case Xe.int2:case Xe.int4:case Xe.int8:case Xe.numeric:case Xe.oid:return DE(e);case Xe.json:case Xe.jsonb:return OE(e);case Xe.timestamp:return BE(e);case Xe.abstime:case Xe.date:case Xe.daterange:case Xe.int4range:case Xe.int8range:case Xe.money:case Xe.reltime:case Xe.text:case Xe.time:case Xe.timestamptz:case Xe.timetz:case Xe.tsrange:case Xe.tstzrange:return dd(e);default:return dd(e)}},dd=t=>t,ME=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},DE=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},OE=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},LE=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const u=t.slice(1,n);try{a=JSON.parse("["+u+"]")}catch{a=u?u.split(","):[]}return a.map(h=>$y(e,h))}return t},BE=t=>typeof t=="string"?t.replace(" ","T"):t,Yy=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Qu{constructor(e,n,r={},s=ud){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var F0;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(F0||(F0={}));class So{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=So.syncState(this.state,s,a,u),this.pendingDiffs.forEach(m=>{this.state=So.syncDiff(this.state,m,a,u)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=So.syncDiff(this.state,s,a,u),h())}),this.onJoin((s,a,u)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:u})}),this.onLeave((s,a,u)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const a=this.cloneDeep(e),u=this.transformState(n),h={},m={};return this.map(a,(p,w)=>{u[p]||(m[p]=w)}),this.map(u,(p,w)=>{const _=a[p];if(_){const C=w.map(V=>V.presence_ref),T=_.map(V=>V.presence_ref),P=w.filter(V=>T.indexOf(V.presence_ref)<0),M=_.filter(V=>C.indexOf(V.presence_ref)<0);P.length>0&&(h[p]=P),M.length>0&&(m[p]=M)}else h[p]=w}),this.syncDiff(a,{joins:h,leaves:m},r,s)}static syncDiff(e,n,r,s){const{joins:a,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(h,m)=>{var p;const w=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(m),w.length>0){const _=e[h].map(T=>T.presence_ref),C=w.filter(T=>_.indexOf(T.presence_ref)<0);e[h].unshift(...C)}r(h,w,m)}),this.map(u,(h,m)=>{let p=e[h];if(!p)return;const w=m.map(_=>_.presence_ref);p=p.filter(_=>w.indexOf(_.presence_ref)<0),e[h]=p,s(h,p,m),p.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var U0;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(U0||(U0={}));var To;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(To||(To={}));var hr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(hr||(hr={}));class Mf{constructor(e,n={config:{}},r){var s,a;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=St.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Qu(this,Wn.join,this.params,this.timeout),this.rejoinTimer=new Ky(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=St.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=St.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wn.reply,{},(u,h)=>{this._trigger(this._replyEventName(h),u)}),this.presence=new So(this),this.broadcastEndpointURL=Yy(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==St.closed){const{config:{broadcast:u,presence:h,private:m}}=this.params,p=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(T=>T.filter))!==null&&s!==void 0?s:[],w=!!this.bindings[To.PRESENCE]&&this.bindings[To.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,_={},C={broadcast:u,presence:Object.assign(Object.assign({},h),{enabled:w}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(T=>e==null?void 0:e(hr.CHANNEL_ERROR,T)),this._onClose(()=>e==null?void 0:e(hr.CLOSED)),this.updateJoinPayload(Object.assign({config:C},_)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:T})=>{var P;if(this.socket.setAuth(),T===void 0){e==null||e(hr.SUBSCRIBED);return}else{const M=this.bindings.postgres_changes,V=(P=M==null?void 0:M.length)!==null&&P!==void 0?P:0,D=[];for(let k=0;k<V;k++){const R=M[k],{filter:{event:F,schema:Y,table:H,filter:B}}=R,$=T&&T[k];if($&&$.event===F&&$.schema===Y&&$.table===H&&$.filter===B)D.push(Object.assign(Object.assign({},R),{id:$.id}));else{this.unsubscribe(),this.state=St.errored,e==null||e(hr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,e&&e(hr.SUBSCRIBED);return}}).receive("error",T=>{this.state=St.errored,e==null||e(hr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(hr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===St.joined&&e===To.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(h.status===202)return{success:!0};let m=h.statusText;try{const p=await h.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:u}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=p.body)===null||s===void 0?void 0:s.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var u,h,m;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||m===void 0)&&m.ack)&&a("ok"),p.receive("ok",()=>a("ok")),p.receive("error",()=>a("error")),p.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=St.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Wn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Qu(this,Wn.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=St.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),u}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Qu(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>RE){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,a;const u=e.toLocaleLowerCase(),{close:h,error:m,leave:p,join:w}=Wn;if(r&&[h,m,p,w].indexOf(u)>=0&&r!==this._joinRef())return;let C=this._onMessage(u,n,r);if(n&&!C)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(T=>{var P,M,V;return((P=T.filter)===null||P===void 0?void 0:P.event)==="*"||((V=(M=T.filter)===null||M===void 0?void 0:M.event)===null||V===void 0?void 0:V.toLocaleLowerCase())===u}).map(T=>T.callback(C,r)):(a=this.bindings[u])===null||a===void 0||a.filter(T=>{var P,M,V,D,k,R;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in T){const F=T.id,Y=(P=T.filter)===null||P===void 0?void 0:P.event;return F&&((M=n.ids)===null||M===void 0?void 0:M.includes(F))&&(Y==="*"||(Y==null?void 0:Y.toLocaleLowerCase())===((V=n.data)===null||V===void 0?void 0:V.type.toLocaleLowerCase()))}else{const F=(k=(D=T==null?void 0:T.filter)===null||D===void 0?void 0:D.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return F==="*"||F===((R=n==null?void 0:n.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===u}).map(T=>{if(typeof C=="object"&&"ids"in C){const P=C.data,{schema:M,table:V,commit_timestamp:D,type:k,errors:R}=P;C=Object.assign(Object.assign({},{schema:M,table:V,commit_timestamp:D,eventType:k,new:{},old:{},errors:R}),this._getPayloadRecords(P))}T.callback(C,r)})}_isClosed(){return this.state===St.closed}_isJoined(){return this.state===St.joined}_isJoining(){return this.state===St.joining}_isLeaving(){return this.state===St.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Mf.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Wn.close,{},e)}_onError(e){this._on(Wn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=St.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=B0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=B0(e.columns,e.old_record)),n}}const ec=()=>{},Ba={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},FE=[1e3,2e3,5e3,1e4],UE=1e4,VE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class GE{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ud,this.transport=null,this.heartbeatIntervalMs=Ba.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ec,this.ref=0,this.reconnectTimer=null,this.vsn=L0,this.logger=ec,this.conn=null,this.sendBuffer=[],this.serializer=new kE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${cd.websocket}`,this.httpEndpoint=Yy(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=SE.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case yi.connecting:return xi.Connecting;case yi.open:return xi.Open;case yi.closing:return xi.Closing;default:return xi.Closed}}isConnected(){return this.connectionState()===xi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new Mf(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:s,ref:a}=e,u=()=>{this.encode(e,h=>{var m;(m=this.conn)===null||m===void 0||m.send(h)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(bE,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ba.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:a,ref:u}=n,h=u?`(${u})`:"",m=a.status||"";this.log("receive",`${m} ${r} ${s} ${h}`.trim(),a),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(s,a,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===yi.open||this.conn.readyState===yi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Wn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([VE],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:IE};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Wn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Ky(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ba.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,a,u,h,m,p,w,_,C,T;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:ud,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Ba.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(h=e==null?void 0:e.heartbeatCallback)!==null&&h!==void 0?h:ec,this.vsn=(m=e==null?void 0:e.vsn)!==null&&m!==void 0?m:L0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:P=>FE[P-1]||UE,this.vsn){case Wy:this.encode=(w=e==null?void 0:e.encode)!==null&&w!==void 0?w:(P,M)=>M(JSON.stringify(P)),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:(P,M)=>M(JSON.parse(P));break;case NE:this.encode=(C=e==null?void 0:e.encode)!==null&&C!==void 0?C:this.serializer.encode.bind(this.serializer),this.decode=(T=e==null?void 0:e.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class eu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function lt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class HE extends eu{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fd extends eu{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Df=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),qE=()=>Response,hd=t=>{if(Array.isArray(t))return t.map(n=>hd(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=hd(r)}),e},zE=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},WE=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),tc=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},KE=(t,e,n)=>he(void 0,void 0,void 0,function*(){const r=yield qE();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const a=t.status||500,u=(s==null?void 0:s.statusCode)||a+"";e(new HE(tc(s),a,u))}).catch(s=>{e(new fd(tc(s),s))}):e(new fd(tc(t),t))}),$E=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(zE(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function ea(t,e,n,r,s,a){return he(this,void 0,void 0,function*(){return new Promise((u,h)=>{t(n,$E(e,r,s,a)).then(m=>{if(!m.ok)throw m;return r!=null&&r.noResolveJson?m:m.json()}).then(m=>u(m)).catch(m=>KE(m,h,r))})})}function Wo(t,e,n,r){return he(this,void 0,void 0,function*(){return ea(t,"GET",e,n,r)})}function qn(t,e,n,r,s){return he(this,void 0,void 0,function*(){return ea(t,"POST",e,r,s,n)})}function pd(t,e,n,r,s){return he(this,void 0,void 0,function*(){return ea(t,"PUT",e,r,s,n)})}function YE(t,e,n,r){return he(this,void 0,void 0,function*(){return ea(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Of(t,e,n,r,s){return he(this,void 0,void 0,function*(){return ea(t,"DELETE",e,r,s,n)})}class jE{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return he(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lt(e))return{data:null,error:e};throw e}})}}var jy;class XE{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[jy]="BlobDownloadBuilder",this.promise=null}asStream(){return new jE(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return he(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lt(e))return{data:null,error:e};throw e}})}}jy=Symbol.toStringTag;const JE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},V0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ZE{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Df(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return he(this,void 0,void 0,function*(){try{let a;const u=Object.assign(Object.assign({},V0),s);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),m&&a.append("metadata",this.encodeMetadata(m)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",u.cacheControl),m&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(m))):(a=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,m&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!u.duplex&&(u.duplex="half")),s!=null&&s.headers&&(h=Object.assign(Object.assign({},h),s.headers));const p=this._removeEmptyFolders(n),w=this._getFinalPath(p),_=yield(e=="PUT"?pd:qn)(this.fetch,`${this.url}/object/${w}`,a,Object.assign({headers:h},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:_.Id,fullPath:_.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(lt(a))return{data:null,error:a};throw a}})}upload(e,n,r){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return he(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),u=this._getFinalPath(a),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",n);try{let m;const p=Object.assign({upsert:V0.upsert},s),w=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",r)):typeof FormData<"u"&&r instanceof FormData?(m=r,m.append("cacheControl",p.cacheControl)):(m=r,w["cache-control"]=`max-age=${p.cacheControl}`,w["content-type"]=p.contentType);const _=yield pd(this.fetch,h.toString(),m,{headers:w});return{data:{path:a,fullPath:_.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(lt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,n){return he(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield qn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),u=new URL(this.url+a.url),h=u.searchParams.get("token");if(!h)throw new eu("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:h},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}update(e,n,r){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return he(this,void 0,void 0,function*(){try{return{data:yield qn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return he(this,void 0,void 0,function*(){try{return{data:{path:(yield qn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return he(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield qn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${u}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return he(this,void 0,void 0,function*(){try{const s=yield qn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=a?`?${a}`:"",h=this._getFinalPath(e),m=()=>Wo(this.fetch,`${this.url}/${s}/${h}${u}`,{headers:this.headers,noResolveJson:!0});return new XE(m,this.shouldThrowOnError)}info(e){return he(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Wo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:hd(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}exists(e){return he(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield YE(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r)&&r instanceof fd){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});m!==""&&s.push(m);let p=s.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${p}`)}}}remove(e){return he(this,void 0,void 0,function*(){try{return{data:yield Of(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}list(e,n,r){return he(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},JE),n),{prefix:e||""});return{data:yield qn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}listV2(e,n){return he(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield qn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Xy="2.86.0",Jy={"X-Client-Info":`storage-js/${Xy}`};class QE{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Jy),n),this.fetch=Df(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return he(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Wo(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}getBucket(e){return he(this,void 0,void 0,function*(){try{return{data:yield Wo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}createBucket(e){return he(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield qn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return he(this,void 0,void 0,function*(){try{return{data:yield pd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return he(this,void 0,void 0,function*(){try{return{data:yield qn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return he(this,void 0,void 0,function*(){try{return{data:yield Of(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var Ko=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function e_(t,e,n){const r=new URL(e,t);if(n)for(const[s,a]of Object.entries(n))a!==void 0&&r.searchParams.set(s,a);return r.toString()}async function t_(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function n_(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:a,headers:u}){const h=e_(t.baseUrl,r,s),m=await t_(t.auth),p=await e(h,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...m,...u},body:a?JSON.stringify(a):void 0}),w=await p.text(),_=(p.headers.get("content-type")||"").includes("application/json"),C=_&&w?JSON.parse(w):w;if(!p.ok){const T=_?C:void 0,P=T==null?void 0:T.error;throw new Ko((P==null?void 0:P.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:P==null?void 0:P.type,icebergCode:P==null?void 0:P.code,details:T})}return{status:p.status,headers:p.headers,data:C}}}}function Fa(t){return t.join("")}var r_=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Fa(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fa(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fa(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fa(t.namespace)}`}),!0}catch(e){if(e instanceof Ko&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Ko&&n.status===409)return;throw n}}};function Wi(t){return t.join("")}var i_=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wi(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wi(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wi(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wi(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wi(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wi(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Ko&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Ko&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},s_=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=n_({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new r_(this.client,e),this.tableOps=new i_(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class o_{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Jy),n),this.fetch=Df(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return he(this,void 0,void 0,function*(){try{return{data:yield qn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}listBuckets(e){return he(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Wo(this.fetch,s,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return he(this,void 0,void 0,function*(){try{return{data:yield Of(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}})}from(e){if(!WE(e))throw new eu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new s_({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>he(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Lf={"X-Client-Info":`storage-js/${Xy}`,"Content-Type":"application/json"};class Zy extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function xn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class nc extends Zy{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class a_ extends Zy{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var G0;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(G0||(G0={}));const Bf=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),l_=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},H0=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),u_=(t,e,n)=>he(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t.status||500,a=t;if(typeof a.json=="function")a.json().then(u=>{const h=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||s+"";e(new nc(H0(u),s,h))}).catch(()=>{const u=s+"",h=a.statusText||`HTTP ${s} error`;e(new nc(h,s,u))});else{const u=s+"",h=a.statusText||`HTTP ${s} error`;e(new nc(h,s,u))}}else e(new a_(H0(t),t))}),c_=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(l_(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n)):s};function d_(t,e,n,r,s,a){return he(this,void 0,void 0,function*(){return new Promise((u,h)=>{t(n,c_(e,r,s,a)).then(m=>{if(!m.ok)throw m;if(r!=null&&r.noResolveJson)return m;const p=m.headers.get("content-type");return!p||!p.includes("application/json")?{}:m.json()}).then(m=>u(m)).catch(m=>u_(m,h,r))})})}function wn(t,e,n,r,s){return he(this,void 0,void 0,function*(){return d_(t,"POST",e,r,s,n)})}class f_{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Lf),n),this.fetch=Bf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return he(this,void 0,void 0,function*(){try{return{data:(yield wn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}getIndex(e,n){return he(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xn(r))return{data:null,error:r};throw r}})}listIndexes(e){return he(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return he(this,void 0,void 0,function*(){try{return{data:(yield wn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xn(r))return{data:null,error:r};throw r}})}}class h_{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Lf),n),this.fetch=Bf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return he(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield wn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}getVectors(e){return he(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}listVectors(e){return he(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield wn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}queryVectors(e){return he(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}deleteVectors(e){return he(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield wn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}}class p_{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Lf),n),this.fetch=Bf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return he(this,void 0,void 0,function*(){try{return{data:(yield wn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}getBucket(e){return he(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}listBuckets(){return he(this,arguments,void 0,function*(e={}){try{return{data:yield wn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return he(this,void 0,void 0,function*(){try{return{data:(yield wn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}}class g_ extends p_{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new m_(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return he(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return he(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return he(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return he(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class m_ extends f_{constructor(e,n,r,s){super(e,n,s),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return he(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return he(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return he(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return he(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new y_(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class y_ extends h_{constructor(e,n,r,s,a){super(e,n,a),this.vectorBucketName=r,this.indexName=s}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return he(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return he(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return he(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return he(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return he(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class x_ extends QE{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new ZE(this.url,this.headers,e,this.fetch)}get vectors(){return new g_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new o_(this.url+"/iceberg",this.headers,this.fetch)}}const w_="2.86.0";let po="";typeof Deno<"u"?po="deno":typeof document<"u"?po="web":typeof navigator<"u"&&navigator.product==="ReactNative"?po="react-native":po="node";const v_={"X-Client-Info":`supabase-js-${po}/${w_}`},E_={headers:v_},__={schema:"public"},C_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},A_={},S_=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),T_=()=>Headers,I_=(t,e,n)=>{const r=S_(n),s=T_();return async(a,u)=>{var h;const m=(h=await e())!==null&&h!==void 0?h:t;let p=new s(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),r(a,Object.assign(Object.assign({},u),{headers:p}))}};function N_(t){return t.endsWith("/")?t:t+"/"}function b_(t,e){var n,r;const{db:s,auth:a,realtime:u,global:h}=t,{db:m,auth:p,realtime:w,global:_}=e,C={db:Object.assign(Object.assign({},m),s),auth:Object.assign(Object.assign({},p),a),realtime:Object.assign(Object.assign({},w),u),storage:{},global:Object.assign(Object.assign(Object.assign({},_),h),{headers:Object.assign(Object.assign({},(n=_==null?void 0:_.headers)!==null&&n!==void 0?n:{}),(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?C.accessToken=t.accessToken:delete C.accessToken,C}function R_(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(N_(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Qy="2.86.0",Ji=30*1e3,gd=3,rc=gd*Ji,k_="http://localhost:9999",P_="supabase.auth.token",M_={"X-Client-Info":`gotrue-js/${Qy}`},md="X-Supabase-Api-Version",ex={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},D_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,O_=10*60*1e3;class $o extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function me(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class L_ extends $o{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function B_(t){return me(t)&&t.name==="AuthApiError"}class wi extends $o{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ri extends $o{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class gn extends ri{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function F_(t){return me(t)&&t.name==="AuthSessionMissingError"}class Ki extends ri{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ua extends ri{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Va extends ri{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function U_(t){return me(t)&&t.name==="AuthImplicitGrantRedirectError"}class q0 extends ri{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yd extends ri{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ic(t){return me(t)&&t.name==="AuthRetryableFetchError"}class z0 extends ri{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class xd extends ri{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Il="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),W0=` 	
\r=`.split(""),V_=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<W0.length;e+=1)t[W0[e].charCodeAt(0)]=-2;for(let e=0;e<Il.length;e+=1)t[Il[e].charCodeAt(0)]=e;return t})();function K0(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Il[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Il[r]),e.queuedBits-=6}}function tx(t,e,n){const r=V_[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function $0(t){const e=[],n=u=>{e.push(String.fromCodePoint(u))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=u=>{q_(u,r,n)};for(let u=0;u<t.length;u+=1)tx(t.charCodeAt(u),s,a);return e.join("")}function G_(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function H_(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}G_(r,e)}}function q_(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function ws(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)tx(t.charCodeAt(s),n,r);return new Uint8Array(e)}function z_(t){const e=[];return H_(t,n=>e.push(n)),new Uint8Array(e)}function Ci(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>K0(s,n,r)),K0(null,n,r),e.join("")}function W_(t){return Math.round(Date.now()/1e3)+t}function K_(){return Symbol("auth-callback")}const Bt=()=>typeof window<"u"&&typeof document<"u",fi={tested:!1,writable:!1},nx=()=>{if(!Bt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fi.tested)return fi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),fi.tested=!0,fi.writable=!0}catch{fi.tested=!0,fi.writable=!1}return fi.writable};function $_(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const rx=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Y_=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Zi=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},hi=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Or=async(t,e)=>{await t.removeItem(e)};class tu{constructor(){this.promise=new tu.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}tu.promiseConstructor=Promise;function sc(t){const e=t.split(".");if(e.length!==3)throw new xd("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!D_.test(e[r]))throw new xd("JWT not in base64url format");return{header:JSON.parse($0(e[0])),payload:JSON.parse($0(e[1])),signature:ws(e[2]),raw:{header:e[0],payload:e[1]}}}async function j_(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function X_(t,e){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const u=await t(a);if(!e(a,null,u)){r(u);return}}catch(u){if(!e(a,u)){s(u);return}}})()})}function J_(t){return("0"+t.toString(16)).substr(-2)}function Z_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,J_).join("")}async function Q_(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function eC(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Q_(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $i(t,e,n=!1){const r=Z_();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Zi(t,`${e}-code-verifier`,s);const a=await eC(r);return[a,r===a?"plain":"s256"]}const tC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function nC(t){const e=t.headers.get(md);if(!e||!e.match(tC))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function rC(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function iC(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const sC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yi(t){if(!sC.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function oc(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function oC(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function Y0(t){return JSON.parse(JSON.stringify(t))}const mi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),aC=[502,503,504];async function j0(t){var e;if(!Y_(t))throw new yd(mi(t),0);if(aC.includes(t.status))throw new yd(mi(t),t.status);let n;try{n=await t.json()}catch(a){throw new wi(mi(a),a)}let r;const s=nC(t);if(s&&s.getTime()>=ex["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new z0(mi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new gn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,u)=>a&&typeof u=="string",!0))throw new z0(mi(n),t.status,n.weak_password.reasons);throw new L_(mi(n),t.status||500,r)}const lC=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function _e(t,e,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[md]||(a[md]=ex["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const u=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(u.redirect_to=r.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await uC(t,e,n+h,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(m):{data:Object.assign({},m),error:null}}async function uC(t,e,n,r,s,a){const u=lC(e,r,s,a);let h;try{h=await t(n,Object.assign({},u))}catch(m){throw console.error(m),new yd(mi(m),0)}if(h.ok||await j0(h),r!=null&&r.noResolveJson)return h;try{return await h.json()}catch(m){await j0(m)}}function Gn(t){var e;let n=null;fC(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=W_(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function X0(t){const e=Gn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Vr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function cC(t){return{data:t,error:null}}function dC(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=t,u=Os(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},m=Object.assign({},u);return{data:{properties:h,user:m},error:null}}function J0(t){return t}function fC(t){return t.access_token&&t.refresh_token&&t.expires_in}const ac=["global","local","others"];class hC{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=rx(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=ac[0]){if(ac.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ac.join(", ")}`);try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Vr})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Os(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:dC,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(me(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Vr})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,a,u,h,m;try{const p={nextPage:null,lastPage:0,total:0},w=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:J0});if(w.error)throw w.error;const _=await w.json(),C=(u=w.headers.get("x-total-count"))!==null&&u!==void 0?u:0,T=(m=(h=w.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&m!==void 0?m:[];return T.length>0&&(T.forEach(P=>{const M=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),V=JSON.parse(P.split(";")[1].split("=")[1]);p[`${V}Page`]=M}),p.total=parseInt(C)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(me(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Yi(e);try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Vr})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Yi(e);try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Vr})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Yi(e);try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Vr})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Yi(e.userId);try{const{data:n,error:r}=await _e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(me(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Yi(e.userId),Yi(e.id);try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,a,u,h,m;try{const p={nextPage:null,lastPage:0,total:0},w=await _e(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:J0});if(w.error)throw w.error;const _=await w.json(),C=(u=w.headers.get("x-total-count"))!==null&&u!==void 0?u:0,T=(m=(h=w.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&m!==void 0?m:[];return T.length>0&&(T.forEach(P=>{const M=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),V=JSON.parse(P.split(";")[1].split("=")[1]);p[`${V}Page`]=M}),p.total=parseInt(C)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(me(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(me(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await _e(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(me(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await _e(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await _e(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(me(n))return{data:null,error:n};throw n}}}function Z0(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const ji={debug:!!(globalThis&&nx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ix extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class pC extends ix{}async function gC(t,e,n){ji.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ji.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ji.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{ji.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw ji.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new pC(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ji.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function mC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function sx(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function yC(t){return parseInt(t,16)}function xC(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function wC(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:u,notBefore:h,requestId:m,resources:p,scheme:w,uri:_,version:C}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(C!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${C}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const T=sx(t.address),P=w?`${w}://${r}`:r,M=t.statement?`${t.statement}
`:"",V=`${P} wants you to sign in with your Ethereum account:
${T}

${M}`;let D=`URI: ${_}
Version: ${C}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${a.toISOString()}`;if(s&&(D+=`
Expiration Time: ${s.toISOString()}`),h&&(D+=`
Not Before: ${h.toISOString()}`),m&&(D+=`
Request ID: ${m}`),p){let k=`
Resources:`;for(const R of p){if(!R||typeof R!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);k+=`
- ${R}`}D+=k}return`${V}
${D}`}class vt extends Error{constructor({message:e,code:n,cause:r,name:s}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=s??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Nl extends vt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function vC({error:t,options:e}){var n,r,s;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new vt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new vt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new vt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new vt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new vt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new vt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new vt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new vt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const u=window.location.hostname;if(ox(u)){if(a.rp.id!==u)return new vt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new vt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new vt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function EC({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new vt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new vt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(ox(r)){if(n.rpId!==r)return new vt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new vt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class _C{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const CC=new _C;function AC(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=Os(t,["challenge","user","excludeCredentials"]),a=ws(e).buffer,u=Object.assign(Object.assign({},n),{id:ws(n.id).buffer}),h=Object.assign(Object.assign({},s),{challenge:a,user:u});if(r&&r.length>0){h.excludeCredentials=new Array(r.length);for(let m=0;m<r.length;m++){const p=r[m];h.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:ws(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function SC(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Os(t,["challenge","allowCredentials"]),s=ws(e).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const h=n[u];a.allowCredentials[u]=Object.assign(Object.assign({},h),{id:ws(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return a}function TC(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ci(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ci(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function IC(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ci(new Uint8Array(s.authenticatorData)),clientDataJSON:Ci(new Uint8Array(s.clientDataJSON)),signature:Ci(new Uint8Array(s.signature)),userHandle:s.userHandle?Ci(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ox(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Q0(){var t,e;return!!(Bt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function NC(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Nl("Browser returned unexpected credential type",e)}:{data:null,error:new Nl("Empty credential response",e)}}catch(e){return{data:null,error:vC({error:e,options:t})}}}async function bC(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Nl("Browser returned unexpected credential type",e)}:{data:null,error:new Nl("Empty credential response",e)}}catch(e){return{data:null,error:EC({error:e,options:t})}}}const RC={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},kC={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function bl(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const a in s){const u=s[a];if(u!==void 0)if(Array.isArray(u))r[a]=u;else if(n(u))r[a]=u;else if(e(u)){const h=r[a];e(h)?r[a]=bl(h,u):r[a]=bl(u)}else r[a]=u}return r}function PC(t,e){return bl(RC,t,e||{})}function MC(t,e){return bl(kC,t,e||{})}class DC{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},a){try{const{data:u,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:h};const m=s??CC.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${r}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=PC(u.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:w,error:_}=await NC({publicKey:p,signal:m});return w?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:w}},error:null}:{data:null,error:_}}case"request":{const p=MC(u.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:w,error:_}=await bC(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:m}));return w?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:w}},error:null}:{data:null,error:_}}}}catch(u){return me(u)?{data:null,error:u}:{data:null,error:new wi("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new $o("rpId is required for WebAuthn authentication")};try{if(!Q0())return{data:null,error:new wi("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:a});if(!u)return{data:null,error:h};const{webauthn:m}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:r,credential_response:m.credential_response}})}catch(u){return me(u)?{data:null,error:u}:{data:null,error:new wi("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new $o("rpId is required for WebAuthn registration")};try{if(!Q0())return{data:null,error:new wi("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(w=>{var _;return(_=w.data)===null||_===void 0?void 0:_.all.find(C=>C.factor_type==="webauthn"&&C.friendly_name===e&&C.status!=="unverified")}).then(w=>w?this.client.mfa.unenroll({factorId:w==null?void 0:w.id}):void 0),{data:null,error:h};const{data:m,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:a});return m?this._verify({factorId:u.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:r,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(u){return me(u)?{data:null,error:u}:{data:null,error:new wi("Unexpected error in register",u)}}}}mC();const OC={url:k_,storageKey:P_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:M_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function e1(t,e,n){return await n()}const Xi={};class Yo{get jwks(){var e,n;return(n=(e=Xi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Xi[this.storageKey]=Object.assign(Object.assign({},Xi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Xi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Xi[this.storageKey]=Object.assign(Object.assign({},Xi[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},OC),e);if(this.storageKey=a.storageKey,this.instanceID=(n=Yo.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Yo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Bt()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new hC({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=rx(a.fetch),this.lock=a.lock||e1,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Bt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=gC:this.lock=e1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new DC(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:nx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Z0(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Z0(this.memoryStorage)),Bt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Qy}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Bt()&&(n=$_(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Bt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),U_(a)){const m=(e=a.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:u,redirectType:h}=s;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return me(n)?this._returnResult({error:n}):this._returnResult({error:new wi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const a=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Gn}),{data:u,error:h}=a;if(h||!u)return this._returnResult({data:{user:null,session:null},error:h});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var n,r,s;try{let a;if("email"in e){const{email:w,password:_,options:C}=e;let T=null,P=null;this.flowType==="pkce"&&([T,P]=await $i(this.storage,this.storageKey)),a=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:C==null?void 0:C.emailRedirectTo,body:{email:w,password:_,data:(n=C==null?void 0:C.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:C==null?void 0:C.captchaToken},code_challenge:T,code_challenge_method:P},xform:Gn})}else if("phone"in e){const{phone:w,password:_,options:C}=e;a=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:_,data:(r=C==null?void 0:C.data)!==null&&r!==void 0?r:{},channel:(s=C==null?void 0:C.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:C==null?void 0:C.captchaToken}},xform:Gn})}else throw new Ua("You must provide either an email or phone number and a password");const{data:u,error:h}=a;if(h||!u)return this._returnResult({data:{user:null,session:null},error:h});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:u,options:h}=e;n=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:X0})}else if("phone"in e){const{phone:a,password:u,options:h}=e;n=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:X0})}else throw new Ua("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const a=new Ki;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(me(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,a,u,h,m,p,w,_,C;let T,P;if("message"in e)T=e.message,P=e.signature;else{const{chain:M,wallet:V,statement:D,options:k}=e;let R;if(Bt())if(typeof V=="object")R=V;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")R=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof V!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=V}const F=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href),Y=await R.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Y||Y.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const H=sx(Y[0]);let B=(r=k==null?void 0:k.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!B){const q=await R.request({method:"eth_chainId"});B=yC(q)}const $={domain:F.host,address:H,statement:D,uri:F.href,version:"1",chainId:B,nonce:(s=k==null?void 0:k.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(u=(a=k==null?void 0:k.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(h=k==null?void 0:k.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(m=k==null?void 0:k.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=k==null?void 0:k.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(w=k==null?void 0:k.signInWithEthereum)===null||w===void 0?void 0:w.resources};T=wC($),P=await R.request({method:"personal_sign",params:[xC(T),H]})}try{const{data:M,error:V}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:P},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(C=e.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:Gn});if(V)throw V;if(!M||!M.session||!M.user){const D=new Ki;return this._returnResult({data:{user:null,session:null},error:D})}return M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),this._returnResult({data:Object.assign({},M),error:V})}catch(M){if(me(M))return this._returnResult({data:{user:null,session:null},error:M});throw M}}async signInWithSolana(e){var n,r,s,a,u,h,m,p,w,_,C,T;let P,M;if("message"in e)P=e.message,M=e.signature;else{const{chain:V,wallet:D,statement:k,options:R}=e;let F;if(Bt())if(typeof D=="object")F=D;else{const H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))F=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=D}const Y=new URL((n=R==null?void 0:R.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in F&&F.signIn){const H=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R==null?void 0:R.signInWithSolana),{version:"1",domain:Y.host,uri:Y.href}),k?{statement:k}:null));let B;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")B=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)B=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)P=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),M=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${Y.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${Y.href}`,`Issued At: ${(s=(r=R==null?void 0:R.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=R==null?void 0:R.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((u=R==null?void 0:R.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((h=R==null?void 0:R.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((m=R==null?void 0:R.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((p=R==null?void 0:R.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((_=(w=R==null?void 0:R.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||_===void 0)&&_.length?["Resources",...R.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const H=await F.signMessage(new TextEncoder().encode(P),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");M=H}}try{const{data:V,error:D}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:Ci(M)},!((C=e.options)===null||C===void 0)&&C.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:Gn});if(D)throw D;if(!V||!V.session||!V.user){const k=new Ki;return this._returnResult({data:{user:null,session:null},error:k})}return V.session&&(await this._saveSession(V.session),await this._notifyAllSubscribers("SIGNED_IN",V.session)),this._returnResult({data:Object.assign({},V),error:D})}catch(V){if(me(V))return this._returnResult({data:{user:null,session:null},error:V});throw V}}async _exchangeCodeForSession(e){const n=await hi(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:a,error:u}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Gn});if(await Or(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!a||!a.session||!a.user){const h=new Ki;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:u})}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:a,nonce:u}=e,h=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Gn}),{data:m,error:p}=h;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const w=new Ki;return this._returnResult({data:{user:null,session:null},error:w})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(n){if(me(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,a,u;try{if("email"in e){const{email:h,options:m}=e;let p=null,w=null;this.flowType==="pkce"&&([p,w]=await $i(this.storage,this.storageKey));const{error:_}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},create_user:(r=m==null?void 0:m.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:w},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:h,options:m}=e,{data:p,error:w}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},create_user:(a=m==null?void 0:m.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(u=m==null?void 0:m.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:w})}throw new Ua("You must provide either an email or phone number.")}catch(h){if(me(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var n,r;try{let s,a;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:h}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Gn});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,p=u.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(s){if(me(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,a,u;try{let h=null,m=null;this.flowType==="pkce"&&([h,m]=await $i(this.storage,this.storageKey));const p=await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:m}),headers:this.headers,xform:cC});return!((a=p.data)===null||a===void 0)&&a.url&&Bt()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(h){if(me(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new gn;const{error:s}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(me(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:a}=e,{error:u}=await _e(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:r,type:s,options:a}=e,{data:u,error:h}=await _e(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new Ua("You must provide either an email or phone number and a type")}catch(n){if(me(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await hi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<rc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const u=await hi(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=oc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=oC(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Vr}):await this._useSession(async n=>{var r,s,a;const{data:u,error:h}=n;if(h)throw h;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new gn}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=u.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Vr})})}catch(n){if(me(n))return F_(n)&&(await this._removeSession(),await Or(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new gn;const u=s.session;let h=null,m=null;this.flowType==="pkce"&&e.email!=null&&([h,m]=await $i(this.storage,this.storageKey));const{data:p,error:w}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:m}),jwt:u.access_token,xform:Vr});if(w)throw w;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(r){if(me(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new gn;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:u}=sc(e.access_token);if(u.exp&&(r=u.exp,s=r<=n),s){const{data:h,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!h)return{data:{user:null,session:null},error:null};a=h}else{const{data:h,error:m}=await this._getUser(e.access_token);if(m)throw m;a={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(me(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:u,error:h}=n;if(h)throw h;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new gn;const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(me(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Bt())throw new Va("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Va(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new q0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Va("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new q0("No code detected.");const{data:k,error:R}=await this._exchangeCodeForSession(e.code);if(R)throw R;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:u,expires_in:h,expires_at:m,token_type:p}=e;if(!a||!h||!u||!p)throw new Va("No session defined in URL");const w=Math.round(Date.now()/1e3),_=parseInt(h);let C=w+_;m&&(C=parseInt(m));const T=C-w;T*1e3<=Ji&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${_}s`);const P=C-_;w-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,C,w):w-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,C,w);const{data:M,error:V}=await this._getUser(a);if(V)throw V;const D={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:_,expires_at:C,refresh_token:u,token_type:p,user:M.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:e.type},error:null})}catch(r){if(me(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await hi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({error:a});const u=(r=s.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(B_(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await Or(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=K_(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:u}=n;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await $i(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var u,h,m,p,w;const{data:_,error:C}=a;if(C)throw C;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",T,{headers:this.headers,jwt:(w=(p=_.session)===null||p===void 0?void 0:p.access_token)!==null&&w!==void 0?w:void 0})});if(s)throw s;return Bt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(me(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:a}}=n;if(s)throw s;const{options:u,provider:h,token:m,access_token:p,nonce:w}=e,_=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:h,id_token:m,access_token:p,nonce:w,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Gn}),{data:C,error:T}=_;return T?this._returnResult({data:{user:null,session:null},error:T}):!C||!C.session||!C.user?this._returnResult({data:{user:null,session:null},error:new Ki}):(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("USER_UPDATED",C.session)),this._returnResult({data:C,error:T}))}catch(s){if(me(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:u}=n;if(u)throw u;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await X_(async s=>(s>0&&await j_(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gn})),(s,a)=>{const u=200*Math.pow(2,s);return a&&ic(a)&&Date.now()+u-r<Ji})}catch(r){if(this._debug(n,"error",r),me(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Bt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await hi(this.storage,this.storageKey);if(s&&this.userStorage){let u=await hi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:s.user},await Zi(this.userStorage,this.storageKey+"-user",u)),s.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:oc()}else if(s&&!s.user&&!s.user){const u=await hi(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(s.user=u.user,await Or(this.storage,this.storageKey+"-user"),await Zi(this.storage,this.storageKey,s)):s.user=oc()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<rc;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${rc}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:u}=await this._callRefreshToken(s.refresh_token);u&&(console.error(u),ic(u)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(s.access_token);!h&&(u!=null&&u.user)?(s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(r,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new gn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new tu;const{data:a,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!a.session)throw new gn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const h={data:a.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(a){if(this._debug(s,"error",a),me(a)){const u={data:null,error:a};return ic(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(m){a.push(m)}});if(await Promise.all(u),a.length>0){for(let h=0;h<a.length;h+=1)console.error(a[h]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Zi(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=Y0(s);await Zi(this.storage,this.storageKey,a)}else{const s=Y0(n);await Zi(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Or(this.storage,this.storageKey),await Or(this.storage,this.storageKey+"-code-verifier"),await Or(this.storage,this.storageKey+"-user"),this.userStorage&&await Or(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Bt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ji);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Ji);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ji}ms, refresh threshold is ${gd} ticks`),s<=gd&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ix)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,u]=await $i(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(u)}`});s.push(h.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?this._returnResult({data:null,error:a}):await _e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:u}=n;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:p}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&m.type==="totp"&&(!((s=m==null?void 0:m.totp)===null||s===void 0)&&s.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?TC(e.webauthn.credential_response):IC(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:m}=await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:m}))})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const u=await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(u.error)return u;const{data:h}=u;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:AC(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:SC(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=sc(r.access_token);let u=null;a.aal&&(u=a.aal);let h=u;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(w=>w.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(h="aal2");const p=a.amr||[];return{data:{currentLevel:u,nextLevel:h,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await _e(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new gn})})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new gn});const u=await _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&Bt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new gn});const u=await _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&Bt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await _e(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new gn})})}catch(e){if(me(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await _e(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new gn})})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(h=>h.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(h=>h.kid===e),r&&this.jwks_cached_at+O_>s)return r;const{data:a,error:u}=await _e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(h=>h.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:T,error:P}=await this.getSession();if(P||!T.session)return this._returnResult({data:null,error:P});r=T.session.access_token}const{header:s,payload:a,signature:u,raw:{header:h,payload:m}}=sc(r);n!=null&&n.allowExpired||rC(a.exp);const p=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:T}=await this.getUser(r);if(T)throw T;return{data:{claims:a,header:s,signature:u},error:null}}const w=iC(s.alg),_=await crypto.subtle.importKey("jwk",p,w,!0,["verify"]);if(!await crypto.subtle.verify(w,_,u,z_(`${h}.${m}`)))throw new xd("Invalid JWT signature");return{data:{claims:a,header:s,signature:u},error:null}}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}}Yo.nextInstanceID={};const LC=Yo;class BC extends LC{constructor(e){super(e)}}class FC{constructor(e,n,r){var s,a,u;this.supabaseUrl=e,this.supabaseKey=n;const h=R_(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const m=`sb-${h.hostname.split(".")[0]}-auth-token`,p={db:__,realtime:A_,auth:Object.assign(Object.assign({},C_),{storageKey:m}),global:E_},w=b_(r??{},p);this.storageKey=(s=w.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=w.global.headers)!==null&&a!==void 0?a:{},w.accessToken?(this.accessToken=w.accessToken,this.auth=new Proxy({},{get:(_,C)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(C)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=w.auth)!==null&&u!==void 0?u:{},this.headers,w.global.fetch),this.fetch=I_(n,this._getAccessToken.bind(this),w.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},w.realtime)),this.accessToken&&this.accessToken().then(_=>this.realtime.setAuth(_)).catch(_=>console.warn("Failed to set initial Realtime auth token:",_)),this.rest=new AE(new URL("rest/v1",h).href,{headers:this.headers,schema:w.db.schema,fetch:this.fetch}),this.storage=new x_(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),w.accessToken||this._listenForAuthEvents()}get functions(){return new EE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,storageKey:u,flowType:h,lock:m,debug:p,throwOnError:w},_,C){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new BC({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),_),storageKey:u,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,flowType:h,lock:m,debug:p,throwOnError:w,fetch:C,hasCustomAuthorizationHeader:Object.keys(this.headers).some(P=>P.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new GE(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const UC=(t,e,n)=>new FC(t,e,n);function VC(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}VC()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var lc={};const ax=(t,e)=>{try{if(typeof process<"u"&&lc&&lc[t])return lc[t]}catch{}return e},GC=ax("SUPABASE_URL","https://ijgwrbeiaoxmzdxlarsk.supabase.co"),HC=ax("SUPABASE_ANON_KEY","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlqZ3dyYmVpYW94bXpkeGxhcnNrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1MjgzMTksImV4cCI6MjA4MDEwNDMxOX0.ZDDd1oFvyKHxv1ac5TKAnonN2FWEixjS8vjz82Iq19w"),ln=UC(GC,HC);var ae;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ae||(ae={}));var t1=new Map([[ae.QR_CODE,"QR_CODE"],[ae.AZTEC,"AZTEC"],[ae.CODABAR,"CODABAR"],[ae.CODE_39,"CODE_39"],[ae.CODE_93,"CODE_93"],[ae.CODE_128,"CODE_128"],[ae.DATA_MATRIX,"DATA_MATRIX"],[ae.MAXICODE,"MAXICODE"],[ae.ITF,"ITF"],[ae.EAN_13,"EAN_13"],[ae.EAN_8,"EAN_8"],[ae.PDF_417,"PDF_417"],[ae.RSS_14,"RSS_14"],[ae.RSS_EXPANDED,"RSS_EXPANDED"],[ae.UPC_A,"UPC_A"],[ae.UPC_E,"UPC_E"],[ae.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),n1;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(n1||(n1={}));function qC(t){return Object.values(ae).includes(t)}var Rl;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Rl||(Rl={}));var zC=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Rl.SCAN_TYPE_CAMERA,Rl.SCAN_TYPE_FILE],t}(),lx=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!t1.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,t1.get(e))},t}(),r1=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),wd;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(wd||(wd={}));var WC=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:wd.UNKWOWN_ERROR}},t}(),KC=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function dr(t){return typeof t>"u"||t===null}var ds=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),ux=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var s=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(s),u=Object.keys(e),h=0,m=u;h<m.length;h++){var p=m[h];if(a.has(p))return n.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},t}(),vd={exports:{}};(function(t,e){(function(n,r){r(e)})(Qs,function(n){function r(I){return I==null}var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,i){I.__proto__=i}||function(I,i){for(var o in i)i.hasOwnProperty(o)&&(I[o]=i[o])};function a(I,i){s(I,i);function o(){this.constructor=I}I.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}function u(I,i){var o=Object.setPrototypeOf;o?o(I,i):I.__proto__=i}function h(I,i){i===void 0&&(i=I.constructor);var o=Error.captureStackTrace;o&&o(I,i)}var m=function(I){a(i,I);function i(o){var l=this.constructor,c=I.call(this,o)||this;return Object.defineProperty(c,"name",{value:l.name,enumerable:!1}),u(c,l.prototype),h(c),c}return i}(Error);class p extends m{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}p.kind="Exception";class w extends p{}w.kind="ArgumentException";class _ extends p{}_.kind="IllegalArgumentException";class C{constructor(i){if(this.binarizer=i,i===null)throw new _("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,o){return this.binarizer.getBlackRow(i,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,o,l,c){const d=this.binarizer.getLuminanceSource().crop(i,o,l,c);return new C(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new C(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new C(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class T extends p{static getChecksumInstance(){return new T}}T.kind="ChecksumException";class P{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class M{static arraycopy(i,o,l,c,d){for(;d--;)l[c++]=i[o++]}static currentTimeMillis(){return Date.now()}}class V extends p{}V.kind="IndexOutOfBoundsException";class D extends V{constructor(i=void 0,o=void 0){super(o),this.index=i,this.message=o}}D.kind="ArrayIndexOutOfBoundsException";class k{static fill(i,o){for(let l=0,c=i.length;l<c;l++)i[l]=o}static fillWithin(i,o,l,c){k.rangeCheck(i.length,o,l);for(let d=o;d<l;d++)i[d]=c}static rangeCheck(i,o,l){if(o>l)throw new _("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new D(o);if(l>i)throw new D(l)}static asList(...i){return i}static create(i,o,l){return Array.from({length:i}).map(d=>Array.from({length:o}).fill(l))}static createInt32Array(i,o,l){return Array.from({length:i}).map(d=>Int32Array.from({length:o}).fill(l))}static equals(i,o){if(!i||!o||!i.length||!o.length||i.length!==o.length)return!1;for(let l=0,c=i.length;l<c;l++)if(i[l]!==o[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let o=1;for(const l of i)o=31*o+l;return o}static fillUint8Array(i,o){for(let l=0;l!==i.length;l++)i[l]=o}static copyOf(i,o){return i.slice(0,o)}static copyOfUint8Array(i,o){if(i.length<=o){const l=new Uint8Array(o);return l.set(i),l}return i.slice(0,o)}static copyOfRange(i,o,l){const c=l-o,d=new Int32Array(c);return M.arraycopy(i,o,d,0,c),d}static binarySearch(i,o,l){l===void 0&&(l=k.numberComparator);let c=0,d=i.length-1;for(;c<=d;){const f=d+c>>1,y=l(o,i[f]);if(y>0)c=f+1;else if(y<0)d=f-1;else return f}return-c-1}static numberComparator(i,o){return i-o}}class R{static numberOfTrailingZeros(i){let o;if(i===0)return 32;let l=31;return o=i<<16,o!==0&&(l-=16,i=o),o=i<<8,o!==0&&(l-=8,i=o),o=i<<4,o!==0&&(l-=4,i=o),o=i<<2,o!==0&&(l-=2,i=o),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let o=1;return i>>>16||(o+=16,i<<=16),i>>>24||(o+=8,i<<=8),i>>>28||(o+=4,i<<=4),i>>>30||(o+=2,i<<=2),o-=i>>>31,o}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,o){return Math.trunc(i/o)}static parseInt(i,o=void 0){return parseInt(i,o)}}R.MIN_VALUE_32_BITS=-2147483648,R.MAX_VALUE=Number.MAX_SAFE_INTEGER;class F{constructor(i,o){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,o==null?this.bits=F.makeArray(i):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const o=F.makeArray(i);M.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const o=this.size;if(i>=o)return o;const l=this.bits;let c=Math.floor(i/32),d=l[c];d&=~((1<<(i&31))-1);const f=l.length;for(;d===0;){if(++c===f)return o;d=l[c]}const y=c*32+R.numberOfTrailingZeros(d);return y>o?o:y}getNextUnset(i){const o=this.size;if(i>=o)return o;const l=this.bits;let c=Math.floor(i/32),d=~l[c];d&=~((1<<(i&31))-1);const f=l.length;for(;d===0;){if(++c===f)return o;d=~l[c]}const y=c*32+R.numberOfTrailingZeros(d);return y>o?o:y}setBulk(i,o){this.bits[Math.floor(i/32)]=o}setRange(i,o){if(o<i||i<0||o>this.size)throw new _;if(o===i)return;o--;const l=Math.floor(i/32),c=Math.floor(o/32),d=this.bits;for(let f=l;f<=c;f++){const y=f>l?0:i&31,E=(2<<(f<c?31:o&31))-(1<<y);d[f]|=E}}clear(){const i=this.bits.length,o=this.bits;for(let l=0;l<i;l++)o[l]=0}isRange(i,o,l){if(o<i||i<0||o>this.size)throw new _;if(o===i)return!0;o--;const c=Math.floor(i/32),d=Math.floor(o/32),f=this.bits;for(let y=c;y<=d;y++){const v=y>c?0:i&31,A=(2<<(y<d?31:o&31))-(1<<v)&4294967295;if((f[y]&A)!==(l?A:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,o){if(o<0||o>32)throw new _("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const o=i.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new _("Sizes don't match");const o=this.bits;for(let l=0,c=o.length;l<c;l++)o[l]^=i.bits[l]}toBytes(i,o,l,c){for(let d=0;d<c;d++){let f=0;for(let y=0;y<8;y++)this.get(i)&&(f|=1<<7-y),i++;o[l+d]=f}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,c=this.bits;for(let d=0;d<l;d++){let f=c[d];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,i[o-d]=f}if(this.size!==l*32){const d=l*32-this.size;let f=i[0]>>>d;for(let y=1;y<l;y++){const v=i[y];f|=v<<32-d,i[y-1]=f,f=v>>>d}i[l-1]=f}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof F))return!1;const o=i;return this.size===o.size&&k.equals(this.bits,o.bits)}hashCode(){return 31*this.size+k.hashCode(this.bits)}toString(){let i="";for(let o=0,l=this.size;o<l;o++)o&7||(i+=" "),i+=this.get(o)?"X":".";return i}clone(){return new F(this.size,this.bits.slice())}}var Y;(function(I){I[I.OTHER=0]="OTHER",I[I.PURE_BARCODE=1]="PURE_BARCODE",I[I.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",I[I.TRY_HARDER=3]="TRY_HARDER",I[I.CHARACTER_SET=4]="CHARACTER_SET",I[I.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",I[I.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",I[I.ASSUME_GS1=7]="ASSUME_GS1",I[I.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",I[I.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",I[I.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Y||(Y={}));var H=Y;class B extends p{static getFormatInstance(){return new B}}B.kind="FormatException";var $;(function(I){I[I.Cp437=0]="Cp437",I[I.ISO8859_1=1]="ISO8859_1",I[I.ISO8859_2=2]="ISO8859_2",I[I.ISO8859_3=3]="ISO8859_3",I[I.ISO8859_4=4]="ISO8859_4",I[I.ISO8859_5=5]="ISO8859_5",I[I.ISO8859_6=6]="ISO8859_6",I[I.ISO8859_7=7]="ISO8859_7",I[I.ISO8859_8=8]="ISO8859_8",I[I.ISO8859_9=9]="ISO8859_9",I[I.ISO8859_10=10]="ISO8859_10",I[I.ISO8859_11=11]="ISO8859_11",I[I.ISO8859_13=12]="ISO8859_13",I[I.ISO8859_14=13]="ISO8859_14",I[I.ISO8859_15=14]="ISO8859_15",I[I.ISO8859_16=15]="ISO8859_16",I[I.SJIS=16]="SJIS",I[I.Cp1250=17]="Cp1250",I[I.Cp1251=18]="Cp1251",I[I.Cp1252=19]="Cp1252",I[I.Cp1256=20]="Cp1256",I[I.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",I[I.UTF8=22]="UTF8",I[I.ASCII=23]="ASCII",I[I.Big5=24]="Big5",I[I.GB18030=25]="GB18030",I[I.EUC_KR=26]="EUC_KR"})($||($={}));class q{constructor(i,o,l,...c){this.valueIdentifier=i,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=c,q.VALUE_IDENTIFIER_TO_ECI.set(i,this),q.NAME_TO_ECI.set(l,this);const d=this.values;for(let f=0,y=d.length;f!==y;f++){const v=d[f];q.VALUES_TO_ECI.set(v,this)}for(const f of c)q.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new B("incorect value");const o=q.VALUES_TO_ECI.get(i);if(o===void 0)throw new B("incorect value");return o}static getCharacterSetECIByName(i){const o=q.NAME_TO_ECI.get(i);if(o===void 0)throw new B("incorect value");return o}equals(i){if(!(i instanceof q))return!1;const o=i;return this.getName()===o.getName()}}q.VALUE_IDENTIFIER_TO_ECI=new Map,q.VALUES_TO_ECI=new Map,q.NAME_TO_ECI=new Map,q.Cp437=new q($.Cp437,Int32Array.from([0,2]),"Cp437"),q.ISO8859_1=new q($.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),q.ISO8859_2=new q($.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),q.ISO8859_3=new q($.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),q.ISO8859_4=new q($.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),q.ISO8859_5=new q($.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),q.ISO8859_6=new q($.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),q.ISO8859_7=new q($.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),q.ISO8859_8=new q($.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),q.ISO8859_9=new q($.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),q.ISO8859_10=new q($.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),q.ISO8859_11=new q($.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),q.ISO8859_13=new q($.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),q.ISO8859_14=new q($.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),q.ISO8859_15=new q($.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),q.ISO8859_16=new q($.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),q.SJIS=new q($.SJIS,20,"SJIS","Shift_JIS"),q.Cp1250=new q($.Cp1250,21,"Cp1250","windows-1250"),q.Cp1251=new q($.Cp1251,22,"Cp1251","windows-1251"),q.Cp1252=new q($.Cp1252,23,"Cp1252","windows-1252"),q.Cp1256=new q($.Cp1256,24,"Cp1256","windows-1256"),q.UnicodeBigUnmarked=new q($.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),q.UTF8=new q($.UTF8,26,"UTF8","UTF-8"),q.ASCII=new q($.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),q.Big5=new q($.Big5,28,"Big5"),q.GB18030=new q($.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),q.EUC_KR=new q($.EUC_KR,30,"EUC_KR","EUC-KR");class re extends p{}re.kind="UnsupportedOperationException";class Se{static decode(i,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!Se.isBrowser()&&i==="ISO-8859-1"}static encode(i,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof q?i:q.getCharacterSetECIByName(i)}static decodeFallback(i,o){const l=this.encodingCharacterSet(o);if(Se.isDecodeFallbackSupported(l)){let c="";for(let d=0,f=i.length;d<f;d++){let y=i[d].toString(16);y.length<2&&(y="0"+y),c+="%"+y}return decodeURIComponent(c)}if(l.equals(q.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new re(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(q.UTF8)||i.equals(q.ISO8859_1)||i.equals(q.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),c=[];for(let d=0;d<l.length;d++)c.push(l[d].charCodeAt(0));return new Uint8Array(c)}}class se{static castAsNonUtf8Char(i,o=null){const l=o?o.getName():this.ISO88591;return Se.decode(new Uint8Array([i]),l)}static guessEncoding(i,o){if(o!=null&&o.get(H.CHARACTER_SET)!==void 0)return o.get(H.CHARACTER_SET).toString();const l=i.length;let c=!0,d=!0,f=!0,y=0,v=0,E=0,A=0,N=0,b=0,L=0,U=0,G=0,W=0,X=0;const te=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let ne=0;ne<l&&(c||d||f);ne++){const Z=i[ne]&255;f&&(y>0?Z&128?y--:f=!1:Z&128&&(Z&64?(y++,Z&32?(y++,Z&16?(y++,Z&8?f=!1:A++):E++):v++):f=!1)),c&&(Z>127&&Z<160?c=!1:Z>159&&(Z<192||Z===215||Z===247)&&X++),d&&(N>0?Z<64||Z===127||Z>252?d=!1:N--:Z===128||Z===160||Z>239?d=!1:Z>160&&Z<224?(b++,U=0,L++,L>G&&(G=L)):Z>127?(N++,L=0,U++,U>W&&(W=U)):(L=0,U=0))}return f&&y>0&&(f=!1),d&&N>0&&(d=!1),f&&(te||v+E+A>0)?se.UTF8:d&&(se.ASSUME_SHIFT_JIS||G>=3||W>=3)?se.SHIFT_JIS:c&&d?G===2&&b===2||X*10>=l?se.SHIFT_JIS:se.ISO88591:c?se.ISO88591:d?se.SHIFT_JIS:f?se.UTF8:se.PLATFORM_DEFAULT_ENCODING}static format(i,...o){let l=-1;function c(f,y,v,E,A,N){if(f==="%%")return"%";if(o[++l]===void 0)return;f=E?parseInt(E.substr(1)):void 0;let b=A?parseInt(A.substr(1)):void 0,L;switch(N){case"s":L=o[l];break;case"c":L=o[l][0];break;case"f":L=parseFloat(o[l]).toFixed(f);break;case"p":L=parseFloat(o[l]).toPrecision(f);break;case"e":L=parseFloat(o[l]).toExponential(f);break;case"x":L=parseInt(o[l]).toString(b||16);break;case"d":L=parseFloat(parseInt(o[l],b||10).toPrecision(f)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(b);let U=parseInt(v),G=v&&v[0]+""=="0"?"0":" ";for(;L.length<U;)L=y!==void 0?L+G:G+L;return L}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,c)}static getBytes(i,o){return Se.encode(i,o)}static getCharCode(i,o=0){return i.charCodeAt(o)}static getCharAt(i){return String.fromCharCode(i)}}se.SHIFT_JIS=q.SJIS.getName(),se.GB2312="GB2312",se.ISO88591=q.ISO8859_1.getName(),se.EUC_JP="EUC_JP",se.UTF8=q.UTF8.getName(),se.PLATFORM_DEFAULT_ENCODING=se.UTF8,se.ASSUME_SHIFT_JIS=!1;class le{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=se.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,o,l){for(let c=o;o<o+l;c++)this.append(i[c]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+1)}substring(i,o){return this.value.substring(i,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+o.length)}}class ue{constructor(i,o,l,c){if(this.width=i,this.height=o,this.rowSize=l,this.bits=c,o==null&&(o=i),this.height=o,i<1||o<1)throw new _("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const o=i.length,l=i[0].length,c=new ue(l,o);for(let d=0;d<o;d++){const f=i[d];for(let y=0;y<l;y++)f[y]&&c.set(y,d)}return c}static parseFromString(i,o,l){if(i===null)throw new _("stringRepresentation cannot be null");const c=new Array(i.length);let d=0,f=0,y=-1,v=0,E=0;for(;E<i.length;)if(i.charAt(E)===`
`||i.charAt(E)==="\r"){if(d>f){if(y===-1)y=d-f;else if(d-f!==y)throw new _("row lengths do not match");f=d,v++}E++}else if(i.substring(E,E+o.length)===o)E+=o.length,c[d]=!0,d++;else if(i.substring(E,E+l.length)===l)E+=l.length,c[d]=!1,d++;else throw new _("illegal character encountered: "+i.substring(E));if(d>f){if(y===-1)y=d-f;else if(d-f!==y)throw new _("row lengths do not match");v++}const A=new ue(y,v);for(let N=0;N<d;N++)c[N]&&A.set(Math.floor(N%y),Math.floor(N/y));return A}get(i,o){const l=o*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new _("input matrix dimensions do not match");const o=new F(Math.floor(this.width/32)+1),l=this.rowSize,c=this.bits;for(let d=0,f=this.height;d<f;d++){const y=d*l,v=i.getRow(d,o).getBitArray();for(let E=0;E<l;E++)c[y+E]^=v[E]}}clear(){const i=this.bits,o=i.length;for(let l=0;l<o;l++)i[l]=0}setRegion(i,o,l,c){if(o<0||i<0)throw new _("Left and top must be nonnegative");if(c<1||l<1)throw new _("Height and width must be at least 1");const d=i+l,f=o+c;if(f>this.height||d>this.width)throw new _("The region must fit inside the matrix");const y=this.rowSize,v=this.bits;for(let E=o;E<f;E++){const A=E*y;for(let N=i;N<d;N++)v[A+Math.floor(N/32)]|=1<<(N&31)&4294967295}}getRow(i,o){o==null||o.getSize()<this.width?o=new F(this.width):o.clear();const l=this.rowSize,c=this.bits,d=i*l;for(let f=0;f<l;f++)o.setBulk(f*32,c[d+f]);return o}setRow(i,o){M.arraycopy(o.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),o=this.getHeight();let l=new F(i),c=new F(i);for(let d=0,f=Math.floor((o+1)/2);d<f;d++)l=this.getRow(d,l),c=this.getRow(o-1-d,c),l.reverse(),c.reverse(),this.setRow(d,c),this.setRow(o-1-d,l)}getEnclosingRectangle(){const i=this.width,o=this.height,l=this.rowSize,c=this.bits;let d=i,f=o,y=-1,v=-1;for(let E=0;E<o;E++)for(let A=0;A<l;A++){const N=c[E*l+A];if(N!==0){if(E<f&&(f=E),E>v&&(v=E),A*32<d){let b=0;for(;!(N<<31-b&4294967295);)b++;A*32+b<d&&(d=A*32+b)}if(A*32+31>y){let b=31;for(;!(N>>>b);)b--;A*32+b>y&&(y=A*32+b)}}}return y<d||v<f?null:Int32Array.from([d,f,y-d+1,v-f+1])}getTopLeftOnBit(){const i=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const c=l/i;let d=l%i*32;const f=o[l];let y=0;for(;!(f<<31-y&4294967295);)y++;return d+=y,Int32Array.from([d,c])}getBottomRightOnBit(){const i=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const c=Math.floor(l/i);let d=Math.floor(l%i)*32;const f=o[l];let y=31;for(;!(f>>>y);)y--;return d+=y,Int32Array.from([d,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof ue))return!1;const o=i;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&k.equals(this.bits,o.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+k.hashCode(this.bits),i}toString(i="X ",o="  ",l=`
`){return this.buildToString(i,o,l)}buildToString(i,o,l){let c=new le;for(let d=0,f=this.height;d<f;d++){for(let y=0,v=this.width;y<v;y++)c.append(this.get(y,d)?i:o);c.append(l)}return c.toString()}clone(){return new ue(this.width,this.height,this.rowSize,this.bits.slice())}}class z extends p{static getNotFoundInstance(){return new z}}z.kind="NotFoundException";class ve extends P{constructor(i){super(i),this.luminances=ve.EMPTY,this.buckets=new Int32Array(ve.LUMINANCE_BUCKETS)}getBlackRow(i,o){const l=this.getLuminanceSource(),c=l.getWidth();o==null||o.getSize()<c?o=new F(c):o.clear(),this.initArrays(c);const d=l.getRow(i,this.luminances),f=this.buckets;for(let v=0;v<c;v++)f[(d[v]&255)>>ve.LUMINANCE_SHIFT]++;const y=ve.estimateBlackPoint(f);if(c<3)for(let v=0;v<c;v++)(d[v]&255)<y&&o.set(v);else{let v=d[0]&255,E=d[1]&255;for(let A=1;A<c-1;A++){const N=d[A+1]&255;(E*4-v-N)/2<y&&o.set(A),v=E,E=N}}return o}getBlackMatrix(){const i=this.getLuminanceSource(),o=i.getWidth(),l=i.getHeight(),c=new ue(o,l);this.initArrays(o);const d=this.buckets;for(let v=1;v<5;v++){const E=Math.floor(l*v/5),A=i.getRow(E,this.luminances),N=Math.floor(o*4/5);for(let b=Math.floor(o/5);b<N;b++){const L=A[b]&255;d[L>>ve.LUMINANCE_SHIFT]++}}const f=ve.estimateBlackPoint(d),y=i.getMatrix();for(let v=0;v<l;v++){const E=v*o;for(let A=0;A<o;A++)(y[E+A]&255)<f&&c.set(A,v)}return c}createBinarizer(i){return new ve(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const o=this.buckets;for(let l=0;l<ve.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(i){const o=i.length;let l=0,c=0,d=0;for(let A=0;A<o;A++)i[A]>d&&(c=A,d=i[A]),i[A]>l&&(l=i[A]);let f=0,y=0;for(let A=0;A<o;A++){const N=A-c,b=i[A]*N*N;b>y&&(f=A,y=b)}if(c>f){const A=c;c=f,f=A}if(f-c<=o/16)throw new z;let v=f-1,E=-1;for(let A=f-1;A>c;A--){const N=A-c,b=N*N*(f-A)*(l-i[A]);b>E&&(v=A,E=b)}return v<<ve.LUMINANCE_SHIFT}}ve.LUMINANCE_BITS=5,ve.LUMINANCE_SHIFT=8-ve.LUMINANCE_BITS,ve.LUMINANCE_BUCKETS=1<<ve.LUMINANCE_BITS,ve.EMPTY=Uint8ClampedArray.from([0]);class oe extends ve{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),o=i.getWidth(),l=i.getHeight();if(o>=oe.MINIMUM_DIMENSION&&l>=oe.MINIMUM_DIMENSION){const c=i.getMatrix();let d=o>>oe.BLOCK_SIZE_POWER;o&oe.BLOCK_SIZE_MASK&&d++;let f=l>>oe.BLOCK_SIZE_POWER;l&oe.BLOCK_SIZE_MASK&&f++;const y=oe.calculateBlackPoints(c,d,f,o,l),v=new ue(o,l);oe.calculateThresholdForBlock(c,d,f,o,l,y,v),this.matrix=v}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new oe(i)}static calculateThresholdForBlock(i,o,l,c,d,f,y){const v=d-oe.BLOCK_SIZE,E=c-oe.BLOCK_SIZE;for(let A=0;A<l;A++){let N=A<<oe.BLOCK_SIZE_POWER;N>v&&(N=v);const b=oe.cap(A,2,l-3);for(let L=0;L<o;L++){let U=L<<oe.BLOCK_SIZE_POWER;U>E&&(U=E);const G=oe.cap(L,2,o-3);let W=0;for(let te=-2;te<=2;te++){const ne=f[b+te];W+=ne[G-2]+ne[G-1]+ne[G]+ne[G+1]+ne[G+2]}const X=W/25;oe.thresholdBlock(i,U,N,X,c,y)}}}static cap(i,o,l){return i<o?o:i>l?l:i}static thresholdBlock(i,o,l,c,d,f){for(let y=0,v=l*d+o;y<oe.BLOCK_SIZE;y++,v+=d)for(let E=0;E<oe.BLOCK_SIZE;E++)(i[v+E]&255)<=c&&f.set(o+E,l+y)}static calculateBlackPoints(i,o,l,c,d){const f=d-oe.BLOCK_SIZE,y=c-oe.BLOCK_SIZE,v=new Array(l);for(let E=0;E<l;E++){v[E]=new Int32Array(o);let A=E<<oe.BLOCK_SIZE_POWER;A>f&&(A=f);for(let N=0;N<o;N++){let b=N<<oe.BLOCK_SIZE_POWER;b>y&&(b=y);let L=0,U=255,G=0;for(let X=0,te=A*c+b;X<oe.BLOCK_SIZE;X++,te+=c){for(let ne=0;ne<oe.BLOCK_SIZE;ne++){const Z=i[te+ne]&255;L+=Z,Z<U&&(U=Z),Z>G&&(G=Z)}if(G-U>oe.MIN_DYNAMIC_RANGE)for(X++,te+=c;X<oe.BLOCK_SIZE;X++,te+=c)for(let ne=0;ne<oe.BLOCK_SIZE;ne++)L+=i[te+ne]&255}let W=L>>oe.BLOCK_SIZE_POWER*2;if(G-U<=oe.MIN_DYNAMIC_RANGE&&(W=U/2,E>0&&N>0)){const X=(v[E-1][N]+2*v[E][N-1]+v[E-1][N-1])/4;U<X&&(W=X)}v[E][N]=W}}return v}}oe.BLOCK_SIZE_POWER=3,oe.BLOCK_SIZE=1<<oe.BLOCK_SIZE_POWER,oe.BLOCK_SIZE_MASK=oe.BLOCK_SIZE-1,oe.MINIMUM_DIMENSION=oe.BLOCK_SIZE*5,oe.MIN_DYNAMIC_RANGE=24;class Q{constructor(i,o){this.width=i,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,o,l,c){throw new re("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new re("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new re("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let o=new le;for(let l=0;l<this.height;l++){const c=this.getRow(l,i);for(let d=0;d<this.width;d++){const f=c[d]&255;let y;f<64?y="#":f<128?y="+":f<192?y=".":y=" ",o.append(y)}o.append(`
`)}return o.toString()}}class xe extends Q{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,o){const l=this.delegate.getRow(i,o),c=this.getWidth();for(let d=0;d<c;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let c=0;c<o;c++)l[c]=255-(i[c]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,o,l,c){return new xe(this.delegate.crop(i,o,l,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new xe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new xe(this.delegate.rotateCounterClockwise45())}}class Te extends Q{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=Te.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const o=i.getContext("2d").getImageData(0,0,i.width,i.height);return Te.toGrayscaleBuffer(o.data,i.width,i.height)}static toGrayscaleBuffer(i,o,l){const c=new Uint8ClampedArray(o*l);for(let d=0,f=0,y=i.length;d<y;d+=4,f++){let v;if(i[d+3]===0)v=255;else{const A=i[d],N=i[d+1],b=i[d+2];v=306*A+601*N+117*b+512>>10}c[f]=v}return c}getRow(i,o){if(i<0||i>=this.getHeight())throw new _("Requested row is outside the image: "+i);const l=this.getWidth(),c=i*l;return o===null?o=this.buffer.slice(c,c+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(c,c+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,o,l,c){return super.crop(i,o,l,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const o=this.getTempCanvasElement(),l=o.getContext("2d"),c=i*Te.DEGREE_TO_RADIANS,d=this.canvas.width,f=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(c))*d+Math.abs(Math.sin(c))*f),v=Math.ceil(Math.abs(Math.sin(c))*d+Math.abs(Math.cos(c))*f);return o.width=y,o.height=v,l.translate(y/2,v/2),l.rotate(c),l.drawImage(this.canvas,d/-2,f/-2),this.buffer=Te.makeBufferFromCanvasImageData(o),this}invert(){return new xe(this)}}Te.DEGREE_TO_RADIANS=Math.PI/180;class rt{constructor(i,o,l){this.deviceId=i,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var De=(globalThis||Qs||self||window||void 0)&&(globalThis||Qs||self||window||void 0).__awaiter||function(I,i,o,l){function c(d){return d instanceof o?d:new o(function(f){f(d)})}return new(o||(o=Promise))(function(d,f){function y(A){try{E(l.next(A))}catch(N){f(N)}}function v(A){try{E(l.throw(A))}catch(N){f(N)}}function E(A){A.done?d(A.value):c(A.value).then(y,v)}E((l=l.apply(I,i||[])).next())})};class Sn{constructor(i,o=500,l){this.reader=i,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return De(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of i){const c=l.kind==="video"?"videoinput":l.kind;if(c!=="videoinput")continue;const d=l.deviceId||l.id,f=l.label||`Video device ${o.length+1}`,y=l.groupId,v={deviceId:d,label:f,kind:c,groupId:y};o.push(v)}return o})}getVideoInputDevices(){return De(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new rt(o.deviceId,o.label))})}findDeviceById(i){return De(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,o){return De(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,o)})}decodeOnceFromVideoDevice(i,o){return De(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeOnceFromConstraints(c,o)})}decodeOnceFromConstraints(i,o){return De(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(i,o){return De(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,o,l){return De(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,o,l)})}decodeFromVideoDevice(i,o,l){return De(this,void 0,void 0,function*(){let c;i?c={deviceId:{exact:i}}:c={facingMode:"environment"};const d={video:c};return yield this.decodeFromConstraints(d,o,l)})}decodeFromConstraints(i,o,l){return De(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(c,o,l)})}decodeFromStream(i,o,l){return De(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(i,o);return yield this.decodeContinuously(c,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,o){return De(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((o,l)=>this.playVideoOnLoad(i,()=>o()))}playVideoOnLoad(i,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",o),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return De(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,o){const l=document.getElementById(i);if(!l)throw new w(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new w(`element with id '${i}' must be an ${o} element`);return l}decodeFromImage(i,o){if(!i&&!o)throw new w("either imageElement with a src set or an url must be provided");return o&&!i?this.decodeFromImageUrl(o):this.decodeFromImageElement(i)}decodeFromVideo(i,o){if(!i&&!o)throw new w("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,o,l){if(i===void 0&&o===void 0)throw new w("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new w("An image element must be provided.");this.reset();const o=this.prepareImageElement(i);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(i){const o=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(i,o){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(i){if(!i)throw new w("A video element must be provided.");this.reset();const o=this.prepareVideoElement(i);return this.videoElement=o,o}decodeFromImageUrl(i){if(!i)throw new w("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=i,l}decodeFromVideoUrl(i){if(!i)throw new w("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=i,l}decodeFromVideoUrlContinuously(i,o){if(!i)throw new w("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(l,o);return l.src=i,c}_decodeOnLoadImage(i){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(o,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return De(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,o){return De(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,o)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let o;return typeof i>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(o=i),o}prepareVideoElement(i){let o;return!i&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(o=i),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(i,o=!0,l=!0){this._stopAsyncDecode=!1;const c=(d,f)=>{if(this._stopAsyncDecode){f(new z("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(i);d(y)}catch(y){const v=o&&y instanceof z,A=(y instanceof T||y instanceof B)&&l;if(v||A)return setTimeout(c,this._timeBetweenDecodingAttempts,d,f);f(y)}};return new Promise((d,f)=>c(d,f))}decodeContinuously(i,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(i);o(c,null),setTimeout(l,this.timeBetweenScansMillis)}catch(c){o(null,c);const d=c instanceof T||c instanceof B,f=c instanceof z;(d||f)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const o=this.createBinaryBitmap(i);return this.decodeBitmap(o)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,o,l){o||(o={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(i,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const o=this.getCaptureCanvas(i),l=new Te(o),c=new oe(l);return new C(c)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const o=this.createCaptureCanvas(i);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,c;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,c=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,c=i.naturalHeight||i.height)),o.style.width=l+"px",o.style.height=c+"px",o.width=l,o.height=c,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,o){try{i.srcObject=o}catch{i.src=URL.createObjectURL(o)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class ot{constructor(i,o,l=o==null?0:8*o.length,c,d,f=M.currentTimeMillis()){this.text=i,this.rawBytes=o,this.numBits=l,this.resultPoints=c,this.format=d,this.timestamp=f,this.text=i,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=c,this.format=d,this.resultMetadata=null,f==null?this.timestamp=M.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,o)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const o=this.resultPoints;if(o===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(o.length+i.length);M.arraycopy(o,0,l,0,o.length),M.arraycopy(i,0,l,o.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var si;(function(I){I[I.AZTEC=0]="AZTEC",I[I.CODABAR=1]="CODABAR",I[I.CODE_39=2]="CODE_39",I[I.CODE_93=3]="CODE_93",I[I.CODE_128=4]="CODE_128",I[I.DATA_MATRIX=5]="DATA_MATRIX",I[I.EAN_8=6]="EAN_8",I[I.EAN_13=7]="EAN_13",I[I.ITF=8]="ITF",I[I.MAXICODE=9]="MAXICODE",I[I.PDF_417=10]="PDF_417",I[I.QR_CODE=11]="QR_CODE",I[I.RSS_14=12]="RSS_14",I[I.RSS_EXPANDED=13]="RSS_EXPANDED",I[I.UPC_A=14]="UPC_A",I[I.UPC_E=15]="UPC_E",I[I.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(si||(si={}));var ge=si,Tr;(function(I){I[I.OTHER=0]="OTHER",I[I.ORIENTATION=1]="ORIENTATION",I[I.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",I[I.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",I[I.ISSUE_NUMBER=4]="ISSUE_NUMBER",I[I.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",I[I.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",I[I.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",I[I.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",I[I.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",I[I.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Tr||(Tr={}));var Nt=Tr;class Gs{constructor(i,o,l,c,d=-1,f=-1){this.rawBytes=i,this.text=o,this.byteSegments=l,this.ecLevel=c,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=f,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Hs{exp(i){return this.expTable[i]}log(i){if(i===0)throw new _;return this.logTable[i]}static addOrSubtract(i,o){return i^o}}class tn{constructor(i,o){if(o.length===0)throw new _;this.field=i;const l=o.length;if(l>1&&o[0]===0){let c=1;for(;c<l&&o[c]===0;)c++;c===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-c),M.arraycopy(o,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(i===1){l=0;for(let f=0,y=o.length;f!==y;f++){const v=o[f];l=Hs.addOrSubtract(l,v)}return l}l=o[0];const c=o.length,d=this.field;for(let f=1;f<c;f++)l=Hs.addOrSubtract(d.multiply(i,l),o[f]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,l=i.coefficients;if(o.length>l.length){const f=o;o=l,l=f}let c=new Int32Array(l.length);const d=l.length-o.length;M.arraycopy(l,0,c,0,d);for(let f=d;f<l.length;f++)c[f]=Hs.addOrSubtract(o[f-d],l[f]);return new tn(this.field,c)}multiply(i){if(!this.field.equals(i.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,c=i.coefficients,d=c.length,f=new Int32Array(l+d-1),y=this.field;for(let v=0;v<l;v++){const E=o[v];for(let A=0;A<d;A++)f[v+A]=Hs.addOrSubtract(f[v+A],y.multiply(E,c[A]))}return new tn(y,f)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const o=this.coefficients.length,l=this.field,c=new Int32Array(o),d=this.coefficients;for(let f=0;f<o;f++)c[f]=l.multiply(d[f],i);return new tn(l,c)}multiplyByMonomial(i,o){if(i<0)throw new _;if(o===0)return this.field.getZero();const l=this.coefficients,c=l.length,d=new Int32Array(c+i),f=this.field;for(let y=0;y<c;y++)d[y]=f.multiply(l[y],o);return new tn(f,d)}divide(i){if(!this.field.equals(i.field))throw new _("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new _("Divide by 0");const o=this.field;let l=o.getZero(),c=this;const d=i.getCoefficient(i.getDegree()),f=o.inverse(d);for(;c.getDegree()>=i.getDegree()&&!c.isZero();){const y=c.getDegree()-i.getDegree(),v=o.multiply(c.getCoefficient(c.getDegree()),f),E=i.multiplyByMonomial(y,v),A=o.buildMonomial(y,v);l=l.addOrSubtract(A),c=c.addOrSubtract(E)}return[l,c]}toString(){let i="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),o===0||l!==1){const c=this.field.log(l);c===0?i+="1":c===1?i+="a":(i+="a^",i+=c)}o!==0&&(o===1?i+="x":(i+="x^",i+=o))}}return i}}class ta extends p{}ta.kind="ArithmeticException";class Ue extends Hs{constructor(i,o,l){super(),this.primitive=i,this.size=o,this.generatorBase=l;const c=new Int32Array(o);let d=1;for(let y=0;y<o;y++)c[y]=d,d*=2,d>=o&&(d^=i,d&=o-1);this.expTable=c;const f=new Int32Array(o);for(let y=0;y<o-1;y++)f[c[y]]=y;this.logTable=f,this.zero=new tn(this,Int32Array.from([0])),this.one=new tn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new _;if(o===0)return this.zero;const l=new Int32Array(i+1);return l[0]=o,new tn(this,l)}inverse(i){if(i===0)throw new ta;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+R.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}Ue.AZTEC_DATA_12=new Ue(4201,4096,1),Ue.AZTEC_DATA_10=new Ue(1033,1024,1),Ue.AZTEC_DATA_6=new Ue(67,64,1),Ue.AZTEC_PARAM=new Ue(19,16,1),Ue.QR_CODE_FIELD_256=new Ue(285,256,0),Ue.DATA_MATRIX_FIELD_256=new Ue(301,256,1),Ue.AZTEC_DATA_8=Ue.DATA_MATRIX_FIELD_256,Ue.MAXICODE_FIELD_64=Ue.AZTEC_DATA_6;class Di extends p{}Di.kind="ReedSolomonException";class Jn extends p{}Jn.kind="IllegalStateException";class qs{constructor(i){this.field=i}decode(i,o){const l=this.field,c=new tn(l,i),d=new Int32Array(o);let f=!0;for(let L=0;L<o;L++){const U=c.evaluateAt(l.exp(L+l.getGeneratorBase()));d[d.length-1-L]=U,U!==0&&(f=!1)}if(f)return;const y=new tn(l,d),v=this.runEuclideanAlgorithm(l.buildMonomial(o,1),y,o),E=v[0],A=v[1],N=this.findErrorLocations(E),b=this.findErrorMagnitudes(A,N);for(let L=0;L<N.length;L++){const U=i.length-1-l.log(N[L]);if(U<0)throw new Di("Bad error location");i[U]=Ue.addOrSubtract(i[U],b[L])}}runEuclideanAlgorithm(i,o,l){if(i.getDegree()<o.getDegree()){const L=i;i=o,o=L}const c=this.field;let d=i,f=o,y=c.getZero(),v=c.getOne();for(;f.getDegree()>=(l/2|0);){let L=d,U=y;if(d=f,y=v,d.isZero())throw new Di("r_{i-1} was zero");f=L;let G=c.getZero();const W=d.getCoefficient(d.getDegree()),X=c.inverse(W);for(;f.getDegree()>=d.getDegree()&&!f.isZero();){const te=f.getDegree()-d.getDegree(),ne=c.multiply(f.getCoefficient(f.getDegree()),X);G=G.addOrSubtract(c.buildMonomial(te,ne)),f=f.addOrSubtract(d.multiplyByMonomial(te,ne))}if(v=G.multiply(y).addOrSubtract(U),f.getDegree()>=d.getDegree())throw new Jn("Division algorithm failed to reduce polynomial?")}const E=v.getCoefficient(0);if(E===0)throw new Di("sigmaTilde(0) was zero");const A=c.inverse(E),N=v.multiplyScalar(A),b=f.multiplyScalar(A);return[N,b]}findErrorLocations(i){const o=i.getDegree();if(o===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(o);let c=0;const d=this.field;for(let f=1;f<d.getSize()&&c<o;f++)i.evaluateAt(f)===0&&(l[c]=d.inverse(f),c++);if(c!==o)throw new Di("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,o){const l=o.length,c=new Int32Array(l),d=this.field;for(let f=0;f<l;f++){const y=d.inverse(o[f]);let v=1;for(let E=0;E<l;E++)if(f!==E){const A=d.multiply(o[E],y),N=A&1?A&-2:A|1;v=d.multiply(v,N)}c[f]=d.multiply(i.evaluateAt(y),d.inverse(v)),d.getGeneratorBase()!==0&&(c[f]=d.multiply(c[f],y))}return c}}var Mt;(function(I){I[I.UPPER=0]="UPPER",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.DIGIT=3]="DIGIT",I[I.PUNCT=4]="PUNCT",I[I.BINARY=5]="BINARY"})(Mt||(Mt={}));class Ye{decode(i){this.ddata=i;let o=i.getBits(),l=this.extractBits(o),c=this.correctBits(l),d=Ye.convertBoolArrayToByteArray(c),f=Ye.getEncodedData(c),y=new Gs(d,f,null,null);return y.setNumBits(c.length),y}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let o=i.length,l=Mt.UPPER,c=Mt.UPPER,d="",f=0;for(;f<o;)if(c===Mt.BINARY){if(o-f<5)break;let y=Ye.readCode(i,f,5);if(f+=5,y===0){if(o-f<11)break;y=Ye.readCode(i,f,11)+31,f+=11}for(let v=0;v<y;v++){if(o-f<8){f=o;break}const E=Ye.readCode(i,f,8);d+=se.castAsNonUtf8Char(E),f+=8}c=l}else{let y=c===Mt.DIGIT?4:5;if(o-f<y)break;let v=Ye.readCode(i,f,y);f+=y;let E=Ye.getCharacter(c,v);E.startsWith("CTRL_")?(l=c,c=Ye.getTable(E.charAt(5)),E.charAt(6)==="L"&&(l=c)):(d+=E,c=l)}return d}static getTable(i){switch(i){case"L":return Mt.LOWER;case"P":return Mt.PUNCT;case"M":return Mt.MIXED;case"D":return Mt.DIGIT;case"B":return Mt.BINARY;case"U":default:return Mt.UPPER}}static getCharacter(i,o){switch(i){case Mt.UPPER:return Ye.UPPER_TABLE[o];case Mt.LOWER:return Ye.LOWER_TABLE[o];case Mt.MIXED:return Ye.MIXED_TABLE[o];case Mt.PUNCT:return Ye.PUNCT_TABLE[o];case Mt.DIGIT:return Ye.DIGIT_TABLE[o];default:throw new Jn("Bad table")}}correctBits(i){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=Ue.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=Ue.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=Ue.AZTEC_DATA_10):(l=12,o=Ue.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),d=i.length/l;if(d<c)throw new B;let f=i.length%l,y=new Int32Array(d);for(let b=0;b<d;b++,f+=l)y[b]=Ye.readCode(i,f,l);try{new qs(o).decode(y,d-c)}catch(b){throw new B(b)}let v=(1<<l)-1,E=0;for(let b=0;b<c;b++){let L=y[b];if(L===0||L===v)throw new B;(L===1||L===v-1)&&E++}let A=new Array(c*l-E),N=0;for(let b=0;b<c;b++){let L=y[b];if(L===1||L===v-1)A.fill(L>1,N,N+l-1),N+=l-1;else for(let U=l-1;U>=0;--U)A[N++]=(L&1<<U)!==0}return A}extractBits(i){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),c=(o?11:14)+l*4,d=new Int32Array(c),f=new Array(this.totalBitsInLayer(l,o));if(o)for(let y=0;y<d.length;y++)d[y]=y;else{let y=c+1+2*R.truncDivision(R.truncDivision(c,2)-1,15),v=c/2,E=R.truncDivision(y,2);for(let A=0;A<v;A++){let N=A+R.truncDivision(A,15);d[v-A-1]=E-N-1,d[v+A]=E+N+1}}for(let y=0,v=0;y<l;y++){let E=(l-y)*4+(o?9:12),A=y*2,N=c-1-A;for(let b=0;b<E;b++){let L=b*2;for(let U=0;U<2;U++)f[v+L+U]=i.get(d[A+U],d[A+b]),f[v+2*E+L+U]=i.get(d[A+b],d[N-U]),f[v+4*E+L+U]=i.get(d[N-U],d[N-b]),f[v+6*E+L+U]=i.get(d[N-b],d[A+U])}v+=E*8}return f}static readCode(i,o,l){let c=0;for(let d=o;d<o+l;d++)c<<=1,i[d]&&(c|=1);return c}static readByte(i,o){let l=i.length-o;return l>=8?Ye.readCode(i,o,8):Ye.readCode(i,o,l)<<8-l}static convertBoolArrayToByteArray(i){let o=new Uint8Array((i.length+7)/8);for(let l=0;l<o.length;l++)o[l]=Ye.readByte(i,8*l);return o}totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}Ye.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ye.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ye.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ye.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ye.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Oe{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,o,l,c){const d=i-l,f=o-c;return Math.sqrt(d*d+f*f)}static sum(i){let o=0;for(let l=0,c=i.length;l!==c;l++){const d=i[l];o+=d}return o}}class na{static floatToIntBits(i){return i}}na.MAX_VALUE=Number.MAX_SAFE_INTEGER;class pe{constructor(i,o){this.x=i,this.y=o}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof pe){const o=i;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*na.floatToIntBits(this.x)+na.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const o=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),c=this.distance(i[0],i[2]);let d,f,y;if(l>=o&&l>=c?(f=i[0],d=i[1],y=i[2]):c>=l&&c>=o?(f=i[1],d=i[0],y=i[2]):(f=i[2],d=i[0],y=i[1]),this.crossProductZ(d,f,y)<0){const v=d;d=y,y=v}i[0]=d,i[1]=f,i[2]=y}static distance(i,o){return Oe.distance(i.x,i.y,o.x,o.y)}static crossProductZ(i,o,l){const c=o.x,d=o.y;return(l.x-c)*(i.y-d)-(l.y-d)*(i.x-c)}}class ra{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Yf extends ra{constructor(i,o,l,c,d){super(i,o),this.compact=l,this.nbDatablocks=c,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class cr{constructor(i,o,l,c){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),o==null&&(o=cr.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),c==null&&(c=i.getHeight()/2|0);const d=o/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=c-d,this.downInit=c+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new z}detect(){let i=this.leftInit,o=this.rightInit,l=this.upInit,c=this.downInit,d=!1,f=!0,y=!1,v=!1,E=!1,A=!1,N=!1;const b=this.width,L=this.height;for(;f;){f=!1;let U=!0;for(;(U||!v)&&o<b;)U=this.containsBlackPoint(l,c,o,!1),U?(o++,f=!0,v=!0):v||o++;if(o>=b){d=!0;break}let G=!0;for(;(G||!E)&&c<L;)G=this.containsBlackPoint(i,o,c,!0),G?(c++,f=!0,E=!0):E||c++;if(c>=L){d=!0;break}let W=!0;for(;(W||!A)&&i>=0;)W=this.containsBlackPoint(l,c,i,!1),W?(i--,f=!0,A=!0):A||i--;if(i<0){d=!0;break}let X=!0;for(;(X||!N)&&l>=0;)X=this.containsBlackPoint(i,o,l,!0),X?(l--,f=!0,N=!0):N||l--;if(l<0){d=!0;break}f&&(y=!0)}if(!d&&y){const U=o-i;let G=null;for(let ne=1;G===null&&ne<U;ne++)G=this.getBlackPointOnSegment(i,c-ne,i+ne,c);if(G==null)throw new z;let W=null;for(let ne=1;W===null&&ne<U;ne++)W=this.getBlackPointOnSegment(i,l+ne,i+ne,l);if(W==null)throw new z;let X=null;for(let ne=1;X===null&&ne<U;ne++)X=this.getBlackPointOnSegment(o,l+ne,o-ne,l);if(X==null)throw new z;let te=null;for(let ne=1;te===null&&ne<U;ne++)te=this.getBlackPointOnSegment(o,c-ne,o-ne,c);if(te==null)throw new z;return this.centerEdges(te,G,X,W)}else throw new z}getBlackPointOnSegment(i,o,l,c){const d=Oe.round(Oe.distance(i,o,l,c)),f=(l-i)/d,y=(c-o)/d,v=this.image;for(let E=0;E<d;E++){const A=Oe.round(i+E*f),N=Oe.round(o+E*y);if(v.get(A,N))return new pe(A,N)}return null}centerEdges(i,o,l,c){const d=i.getX(),f=i.getY(),y=o.getX(),v=o.getY(),E=l.getX(),A=l.getY(),N=c.getX(),b=c.getY(),L=cr.CORR;return d<this.width/2?[new pe(N-L,b+L),new pe(y+L,v+L),new pe(E-L,A-L),new pe(d+L,f-L)]:[new pe(N+L,b+L),new pe(y+L,v-L),new pe(E-L,A+L),new pe(d-L,f-L)]}containsBlackPoint(i,o,l,c){const d=this.image;if(c){for(let f=i;f<=o;f++)if(d.get(f,l))return!0}else for(let f=i;f<=o;f++)if(d.get(l,f))return!0;return!1}}cr.INIT_SIZE=10,cr.CORR=1;class ou{static checkAndNudgePoints(i,o){const l=i.getWidth(),c=i.getHeight();let d=!0;for(let f=0;f<o.length&&d;f+=2){const y=Math.floor(o[f]),v=Math.floor(o[f+1]);if(y<-1||y>l||v<-1||v>c)throw new z;d=!1,y===-1?(o[f]=0,d=!0):y===l&&(o[f]=l-1,d=!0),v===-1?(o[f+1]=0,d=!0):v===c&&(o[f+1]=c-1,d=!0)}d=!0;for(let f=o.length-2;f>=0&&d;f-=2){const y=Math.floor(o[f]),v=Math.floor(o[f+1]);if(y<-1||y>l||v<-1||v>c)throw new z;d=!1,y===-1?(o[f]=0,d=!0):y===l&&(o[f]=l-1,d=!0),v===-1?(o[f+1]=0,d=!0):v===c&&(o[f+1]=c-1,d=!0)}}}class Bn{constructor(i,o,l,c,d,f,y,v,E){this.a11=i,this.a21=o,this.a31=l,this.a12=c,this.a22=d,this.a32=f,this.a13=y,this.a23=v,this.a33=E}static quadrilateralToQuadrilateral(i,o,l,c,d,f,y,v,E,A,N,b,L,U,G,W){const X=Bn.quadrilateralToSquare(i,o,l,c,d,f,y,v);return Bn.squareToQuadrilateral(E,A,N,b,L,U,G,W).times(X)}transformPoints(i){const o=i.length,l=this.a11,c=this.a12,d=this.a13,f=this.a21,y=this.a22,v=this.a23,E=this.a31,A=this.a32,N=this.a33;for(let b=0;b<o;b+=2){const L=i[b],U=i[b+1],G=d*L+v*U+N;i[b]=(l*L+f*U+E)/G,i[b+1]=(c*L+y*U+A)/G}}transformPointsWithValues(i,o){const l=this.a11,c=this.a12,d=this.a13,f=this.a21,y=this.a22,v=this.a23,E=this.a31,A=this.a32,N=this.a33,b=i.length;for(let L=0;L<b;L++){const U=i[L],G=o[L],W=d*U+v*G+N;i[L]=(l*U+f*G+E)/W,o[L]=(c*U+y*G+A)/W}}static squareToQuadrilateral(i,o,l,c,d,f,y,v){const E=i-l+d-y,A=o-c+f-v;if(E===0&&A===0)return new Bn(l-i,d-l,i,c-o,f-c,o,0,0,1);{const N=l-d,b=y-d,L=c-f,U=v-f,G=N*U-b*L,W=(E*U-b*A)/G,X=(N*A-E*L)/G;return new Bn(l-i+W*l,y-i+X*y,i,c-o+W*c,v-o+X*v,o,W,X,1)}}static quadrilateralToSquare(i,o,l,c,d,f,y,v){return Bn.squareToQuadrilateral(i,o,l,c,d,f,y,v).buildAdjoint()}buildAdjoint(){return new Bn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new Bn(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class jf extends ou{sampleGrid(i,o,l,c,d,f,y,v,E,A,N,b,L,U,G,W,X,te,ne){const Z=Bn.quadrilateralToQuadrilateral(c,d,f,y,v,E,A,N,b,L,U,G,W,X,te,ne);return this.sampleGridWithTransform(i,o,l,Z)}sampleGridWithTransform(i,o,l,c){if(o<=0||l<=0)throw new z;const d=new ue(o,l),f=new Float32Array(2*o);for(let y=0;y<l;y++){const v=f.length,E=y+.5;for(let A=0;A<v;A+=2)f[A]=A/2+.5,f[A+1]=E;c.transformPoints(f),ou.checkAndNudgePoints(i,f);try{for(let A=0;A<v;A+=2)i.get(Math.floor(f[A]),Math.floor(f[A+1]))&&d.set(A/2,y)}catch{throw new z}}return d}}class Ir{static setGridSampler(i){Ir.gridSampler=i}static getInstance(){return Ir.gridSampler}}Ir.gridSampler=new jf;class Yt{constructor(i,o){this.x=i,this.y=o}toResultPoint(){return new pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Xf{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(i){let f=l[0];l[0]=l[2],l[2]=f}this.extractParameters(l);let c=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new Yf(c,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new z;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],o),this.sampleLine(i[1],i[2],o),this.sampleLine(i[2],i[3],o),this.sampleLine(i[3],i[0],o)]);this.shift=this.getRotation(l,o);let c=0;for(let f=0;f<4;f++){let y=l[(this.shift+f)%4];this.compact?(c<<=7,c+=y>>1&127):(c<<=10,c+=(y>>2&992)+(y>>1&31))}let d=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(i,o){let l=0;i.forEach((c,d,f)=>{let y=(c>>o-2<<1)+(c&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let c=0;c<4;c++)if(R.bitCount(l^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new z}getCorrectedParameterData(i,o){let l,c;o?(l=7,c=2):(l=10,c=4);let d=l-c,f=new Int32Array(l);for(let v=l-1;v>=0;--v)f[v]=i&15,i>>=4;try{new qs(Ue.AZTEC_PARAM).decode(f,d)}catch{throw new z}let y=0;for(let v=0;v<c;v++)y=(y<<4)+f[v];return y}getBullsEyeCorners(i){let o=i,l=i,c=i,d=i,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let N=this.getFirstDifferent(o,f,1,-1),b=this.getFirstDifferent(l,f,1,1),L=this.getFirstDifferent(c,f,-1,1),U=this.getFirstDifferent(d,f,-1,-1);if(this.nbCenterLayers>2){let G=this.distancePoint(U,N)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if(G<.75||G>1.25||!this.isWhiteOrBlackRectangle(N,b,L,U))break}o=N,l=b,c=L,d=U,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new z;this.compact=this.nbCenterLayers===5;let y=new pe(o.getX()+.5,o.getY()-.5),v=new pe(l.getX()+.5,l.getY()+.5),E=new pe(c.getX()-.5,c.getY()+.5),A=new pe(d.getX()-.5,d.getY()-.5);return this.expandSquare([y,v,E,A],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,o,l,c;try{let y=new cr(this.image).detect();i=y[0],o=y[1],l=y[2],c=y[3]}catch{let v=this.image.getWidth()/2,E=this.image.getHeight()/2;i=this.getFirstDifferent(new Yt(v+7,E-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Yt(v+7,E+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Yt(v-7,E+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Yt(v-7,E-7),!1,-1,-1).toResultPoint()}let d=Oe.round((i.getX()+c.getX()+o.getX()+l.getX())/4),f=Oe.round((i.getY()+c.getY()+o.getY()+l.getY())/4);try{let y=new cr(this.image,15,d,f).detect();i=y[0],o=y[1],l=y[2],c=y[3]}catch{i=this.getFirstDifferent(new Yt(d+7,f-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Yt(d+7,f+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Yt(d-7,f+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Yt(d-7,f-7),!1,-1,-1).toResultPoint()}return d=Oe.round((i.getX()+c.getX()+o.getX()+l.getX())/4),f=Oe.round((i.getY()+c.getY()+o.getY()+l.getY())/4),new Yt(d,f)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,o,l,c,d){let f=Ir.getInstance(),y=this.getDimension(),v=y/2-this.nbCenterLayers,E=y/2+this.nbCenterLayers;return f.sampleGrid(i,y,y,v,v,E,v,E,E,v,E,o.getX(),o.getY(),l.getX(),l.getY(),c.getX(),c.getY(),d.getX(),d.getY())}sampleLine(i,o,l){let c=0,d=this.distanceResultPoint(i,o),f=d/l,y=i.getX(),v=i.getY(),E=f*(o.getX()-i.getX())/d,A=f*(o.getY()-i.getY())/d;for(let N=0;N<l;N++)this.image.get(Oe.round(y+N*E),Oe.round(v+N*A))&&(c|=1<<l-N-1);return c}isWhiteOrBlackRectangle(i,o,l,c){let d=3;i=new Yt(i.getX()-d,i.getY()+d),o=new Yt(o.getX()-d,o.getY()-d),l=new Yt(l.getX()+d,l.getY()-d),c=new Yt(c.getX()+d,c.getY()+d);let f=this.getColor(c,i);if(f===0)return!1;let y=this.getColor(i,o);return y!==f||(y=this.getColor(o,l),y!==f)?!1:(y=this.getColor(l,c),y===f)}getColor(i,o){let l=this.distancePoint(i,o),c=(o.getX()-i.getX())/l,d=(o.getY()-i.getY())/l,f=0,y=i.getX(),v=i.getY(),E=this.image.get(i.getX(),i.getY()),A=Math.ceil(l);for(let b=0;b<A;b++)y+=c,v+=d,this.image.get(Oe.round(y),Oe.round(v))!==E&&f++;let N=f/l;return N>.1&&N<.9?0:N<=.1===E?1:-1}getFirstDifferent(i,o,l,c){let d=i.getX()+l,f=i.getY()+c;for(;this.isValid(d,f)&&this.image.get(d,f)===o;)d+=l,f+=c;for(d-=l,f-=c;this.isValid(d,f)&&this.image.get(d,f)===o;)d+=l;for(d-=l;this.isValid(d,f)&&this.image.get(d,f)===o;)f+=c;return f-=c,new Yt(d,f)}expandSquare(i,o,l){let c=l/(2*o),d=i[0].getX()-i[2].getX(),f=i[0].getY()-i[2].getY(),y=(i[0].getX()+i[2].getX())/2,v=(i[0].getY()+i[2].getY())/2,E=new pe(y+c*d,v+c*f),A=new pe(y-c*d,v-c*f);d=i[1].getX()-i[3].getX(),f=i[1].getY()-i[3].getY(),y=(i[1].getX()+i[3].getX())/2,v=(i[1].getY()+i[3].getY())/2;let N=new pe(y+c*d,v+c*f),b=new pe(y-c*d,v-c*f);return[E,N,A,b]}isValid(i,o){return i>=0&&i<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(i){let o=Oe.round(i.getX()),l=Oe.round(i.getY());return this.isValid(o,l)}distancePoint(i,o){return Oe.distance(i.getX(),i.getY(),o.getX(),o.getY())}distanceResultPoint(i,o){return Oe.distance(i.getX(),i.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(R.truncDivision(this.nbLayers-4,8)+1)+15}}class ia{decode(i,o=null){let l=null,c=new Xf(i.getBlackMatrix()),d=null,f=null;try{let A=c.detectMirror(!1);d=A.getPoints(),this.reportFoundResultPoints(o,d),f=new Ye().decode(A)}catch(A){l=A}if(f==null)try{let A=c.detectMirror(!0);d=A.getPoints(),this.reportFoundResultPoints(o,d),f=new Ye().decode(A)}catch(A){throw l??A}let y=new ot(f.getText(),f.getRawBytes(),f.getNumBits(),d,ge.AZTEC,M.currentTimeMillis()),v=f.getByteSegments();v!=null&&y.putMetadata(Nt.BYTE_SEGMENTS,v);let E=f.getECLevel();return E!=null&&y.putMetadata(Nt.ERROR_CORRECTION_LEVEL,E),y}reportFoundResultPoints(i,o){if(i!=null){let l=i.get(H.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((c,d,f)=>{l.foundPossibleResultPoint(c)})}}reset(){}}class Vx extends Sn{constructor(i=500){super(new ia,i)}}class wt{decode(i,o){try{return this.doDecode(i,o)}catch{if(o&&o.get(H.TRY_HARDER)===!0&&i.isRotateSupported()){const d=i.rotateCounterClockwise(),f=this.doDecode(d,o),y=f.getResultMetadata();let v=270;y!==null&&y.get(Nt.ORIENTATION)===!0&&(v=v+y.get(Nt.ORIENTATION)%360),f.putMetadata(Nt.ORIENTATION,v);const E=f.getResultPoints();if(E!==null){const A=d.getHeight();for(let N=0;N<E.length;N++)E[N]=new pe(A-E[N].getY()-1,E[N].getX())}return f}else throw new z}}reset(){}doDecode(i,o){const l=i.getWidth(),c=i.getHeight();let d=new F(l);const f=o&&o.get(H.TRY_HARDER)===!0,y=Math.max(1,c>>(f?8:5));let v;f?v=c:v=15;const E=Math.trunc(c/2);for(let A=0;A<v;A++){const N=Math.trunc((A+1)/2),b=(A&1)===0,L=E+y*(b?N:-N);if(L<0||L>=c)break;try{d=i.getBlackRow(L,d)}catch{continue}for(let U=0;U<2;U++){if(U===1&&(d.reverse(),o&&o.get(H.NEED_RESULT_POINT_CALLBACK)===!0)){const G=new Map;o.forEach((W,X)=>G.set(X,W)),G.delete(H.NEED_RESULT_POINT_CALLBACK),o=G}try{const G=this.decodeRow(L,d,o);if(U===1){G.putMetadata(Nt.ORIENTATION,180);const W=G.getResultPoints();W!==null&&(W[0]=new pe(l-W[0].getX()-1,W[0].getY()),W[1]=new pe(l-W[1].getX()-1,W[1].getY()))}return G}catch{}}}throw new z}static recordPattern(i,o,l){const c=l.length;for(let E=0;E<c;E++)l[E]=0;const d=i.getSize();if(o>=d)throw new z;let f=!i.get(o),y=0,v=o;for(;v<d;){if(i.get(v)!==f)l[y]++;else{if(++y===c)break;l[y]=1,f=!f}v++}if(!(y===c||y===c-1&&v===d))throw new z}static recordPatternInReverse(i,o,l){let c=l.length,d=i.get(o);for(;o>0&&c>=0;)i.get(--o)!==d&&(c--,d=!d);if(c>=0)throw new z;wt.recordPattern(i,o+1,l)}static patternMatchVariance(i,o,l){const c=i.length;let d=0,f=0;for(let E=0;E<c;E++)d+=i[E],f+=o[E];if(d<f)return Number.POSITIVE_INFINITY;const y=d/f;l*=y;let v=0;for(let E=0;E<c;E++){const A=i[E],N=o[E]*y,b=A>N?A-N:N-A;if(b>l)return Number.POSITIVE_INFINITY;v+=b}return v/d}}class ie extends wt{static findStartPattern(i){const o=i.getSize(),l=i.getNextSet(0);let c=0,d=Int32Array.from([0,0,0,0,0,0]),f=l,y=!1;const v=6;for(let E=l;E<o;E++)if(i.get(E)!==y)d[c]++;else{if(c===v-1){let A=ie.MAX_AVG_VARIANCE,N=-1;for(let b=ie.CODE_START_A;b<=ie.CODE_START_C;b++){const L=wt.patternMatchVariance(d,ie.CODE_PATTERNS[b],ie.MAX_INDIVIDUAL_VARIANCE);L<A&&(A=L,N=b)}if(N>=0&&i.isRange(Math.max(0,f-(E-f)/2),f,!1))return Int32Array.from([f,E,N]);f+=d[0]+d[1],d=d.slice(2,d.length-1),d[c-1]=0,d[c]=0,c--}else c++;d[c]=1,y=!y}throw new z}static decodeCode(i,o,l){wt.recordPattern(i,l,o);let c=ie.MAX_AVG_VARIANCE,d=-1;for(let f=0;f<ie.CODE_PATTERNS.length;f++){const y=ie.CODE_PATTERNS[f],v=this.patternMatchVariance(o,y,ie.MAX_INDIVIDUAL_VARIANCE);v<c&&(c=v,d=f)}if(d>=0)return d;throw new z}decodeRow(i,o,l){const c=l&&l.get(H.ASSUME_GS1)===!0,d=ie.findStartPattern(o),f=d[2];let y=0;const v=new Uint8Array(20);v[y++]=f;let E;switch(f){case ie.CODE_START_A:E=ie.CODE_CODE_A;break;case ie.CODE_START_B:E=ie.CODE_CODE_B;break;case ie.CODE_START_C:E=ie.CODE_CODE_C;break;default:throw new B}let A=!1,N=!1,b="",L=d[0],U=d[1];const G=Int32Array.from([0,0,0,0,0,0]);let W=0,X=0,te=f,ne=0,Z=!0,Pe=!1,Ne=!1;for(;!A;){const qi=N;switch(N=!1,W=X,X=ie.decodeCode(o,G,U),v[y++]=X,X!==ie.CODE_STOP&&(Z=!0),X!==ie.CODE_STOP&&(ne++,te+=ne*X),L=U,U+=G.reduce((gw,mw)=>gw+mw,0),X){case ie.CODE_START_A:case ie.CODE_START_B:case ie.CODE_START_C:throw new B}switch(E){case ie.CODE_CODE_A:if(X<64)Ne===Pe?b+=String.fromCharCode(32+X):b+=String.fromCharCode(32+X+128),Ne=!1;else if(X<96)Ne===Pe?b+=String.fromCharCode(X-64):b+=String.fromCharCode(X+64),Ne=!1;else switch(X!==ie.CODE_STOP&&(Z=!1),X){case ie.CODE_FNC_1:c&&(b.length===0?b+="]C1":b+="");break;case ie.CODE_FNC_2:case ie.CODE_FNC_3:break;case ie.CODE_FNC_4_A:!Pe&&Ne?(Pe=!0,Ne=!1):Pe&&Ne?(Pe=!1,Ne=!1):Ne=!0;break;case ie.CODE_SHIFT:N=!0,E=ie.CODE_CODE_B;break;case ie.CODE_CODE_B:E=ie.CODE_CODE_B;break;case ie.CODE_CODE_C:E=ie.CODE_CODE_C;break;case ie.CODE_STOP:A=!0;break}break;case ie.CODE_CODE_B:if(X<96)Ne===Pe?b+=String.fromCharCode(32+X):b+=String.fromCharCode(32+X+128),Ne=!1;else switch(X!==ie.CODE_STOP&&(Z=!1),X){case ie.CODE_FNC_1:c&&(b.length===0?b+="]C1":b+="");break;case ie.CODE_FNC_2:case ie.CODE_FNC_3:break;case ie.CODE_FNC_4_B:!Pe&&Ne?(Pe=!0,Ne=!1):Pe&&Ne?(Pe=!1,Ne=!1):Ne=!0;break;case ie.CODE_SHIFT:N=!0,E=ie.CODE_CODE_A;break;case ie.CODE_CODE_A:E=ie.CODE_CODE_A;break;case ie.CODE_CODE_C:E=ie.CODE_CODE_C;break;case ie.CODE_STOP:A=!0;break}break;case ie.CODE_CODE_C:if(X<100)X<10&&(b+="0"),b+=X;else switch(X!==ie.CODE_STOP&&(Z=!1),X){case ie.CODE_FNC_1:c&&(b.length===0?b+="]C1":b+="");break;case ie.CODE_CODE_A:E=ie.CODE_CODE_A;break;case ie.CODE_CODE_B:E=ie.CODE_CODE_B;break;case ie.CODE_STOP:A=!0;break}break}qi&&(E=E===ie.CODE_CODE_A?ie.CODE_CODE_B:ie.CODE_CODE_A)}const on=U-L;if(U=o.getNextUnset(U),!o.isRange(U,Math.min(o.getSize(),U+(U-L)/2),!1))throw new z;if(te-=ne*W,te%103!==W)throw new T;const Un=b.length;if(Un===0)throw new z;Un>0&&Z&&(E===ie.CODE_CODE_C?b=b.substring(0,Un-2):b=b.substring(0,Un-1));const an=(d[1]+d[0])/2,$e=L+on/2,Lt=v.length,pn=new Uint8Array(Lt);for(let qi=0;qi<Lt;qi++)pn[qi]=v[qi];const Hi=[new pe(an,i),new pe($e,i)];return new ot(b,pn,0,Hi,ge.CODE_128,new Date().getTime())}}ie.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ie.MAX_AVG_VARIANCE=.25,ie.MAX_INDIVIDUAL_VARIANCE=.7,ie.CODE_SHIFT=98,ie.CODE_CODE_C=99,ie.CODE_CODE_B=100,ie.CODE_CODE_A=101,ie.CODE_FNC_1=102,ie.CODE_FNC_2=97,ie.CODE_FNC_3=96,ie.CODE_FNC_4_A=101,ie.CODE_FNC_4_B=100,ie.CODE_START_A=103,ie.CODE_START_B=104,ie.CODE_START_C=105,ie.CODE_STOP=106;class _t extends wt{constructor(i=!1,o=!1){super(),this.usingCheckDigit=i,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,o,l){let c=this.counters;c.fill(0),this.decodeRowResult="";let d=_t.findAsteriskPattern(o,c),f=o.getNextSet(d[1]),y=o.getSize(),v,E;do{_t.recordPattern(o,f,c);let G=_t.toNarrowWidePattern(c);if(G<0)throw new z;v=_t.patternToChar(G),this.decodeRowResult+=v,E=f;for(let W of c)f+=W;f=o.getNextSet(f)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let A=0;for(let G of c)A+=G;let N=f-E-A;if(f!==y&&N*2<A)throw new z;if(this.usingCheckDigit){let G=this.decodeRowResult.length-1,W=0;for(let X=0;X<G;X++)W+=_t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(X));if(this.decodeRowResult.charAt(G)!==_t.ALPHABET_STRING.charAt(W%43))throw new T;this.decodeRowResult=this.decodeRowResult.substring(0,G)}if(this.decodeRowResult.length===0)throw new z;let b;this.extendedMode?b=_t.decodeExtended(this.decodeRowResult):b=this.decodeRowResult;let L=(d[1]+d[0])/2,U=E+A/2;return new ot(b,null,0,[new pe(L,i),new pe(U,i)],ge.CODE_39,new Date().getTime())}static findAsteriskPattern(i,o){let l=i.getSize(),c=i.getNextSet(0),d=0,f=c,y=!1,v=o.length;for(let E=c;E<l;E++)if(i.get(E)!==y)o[d]++;else{if(d===v-1){if(this.toNarrowWidePattern(o)===_t.ASTERISK_ENCODING&&i.isRange(Math.max(0,f-Math.floor((E-f)/2)),f,!1))return[f,E];f+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,y=!y}throw new z}static toNarrowWidePattern(i){let o=i.length,l=0,c;do{let d=2147483647;for(let v of i)v<d&&v>l&&(d=v);l=d,c=0;let f=0,y=0;for(let v=0;v<o;v++){let E=i[v];E>l&&(y|=1<<o-1-v,c++,f+=E)}if(c===3){for(let v=0;v<o&&c>0;v++){let E=i[v];if(E>l&&(c--,E*2>=f))return-1}return y}}while(c>3);return-1}static patternToChar(i){for(let o=0;o<_t.CHARACTER_ENCODINGS.length;o++)if(_t.CHARACTER_ENCODINGS[o]===i)return _t.ALPHABET_STRING.charAt(o);if(i===_t.ASTERISK_ENCODING)return"*";throw new z}static decodeExtended(i){let o=i.length,l="";for(let c=0;c<o;c++){let d=i.charAt(c);if(d==="+"||d==="$"||d==="%"||d==="/"){let f=i.charAt(c+1),y="\0";switch(d){case"+":if(f>="A"&&f<="Z")y=String.fromCharCode(f.charCodeAt(0)+32);else throw new B;break;case"$":if(f>="A"&&f<="Z")y=String.fromCharCode(f.charCodeAt(0)-64);else throw new B;break;case"%":if(f>="A"&&f<="E")y=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")y=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")y=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")y=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")y="\0";else if(f==="V")y="@";else if(f==="W")y="`";else if(f==="X"||f==="Y"||f==="Z")y="";else throw new B;break;case"/":if(f>="A"&&f<="O")y=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")y=":";else throw new B;break}l+=y,c++}else l+=d}return l}}_t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",_t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],_t.ASTERISK_ENCODING=148;class We extends wt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,o,l){let c=this.decodeStart(o),d=this.decodeEnd(o),f=new le;We.decodeMiddle(o,c[1],d[0],f);let y=f.toString(),v=null;l!=null&&(v=l.get(H.ALLOWED_LENGTHS)),v==null&&(v=We.DEFAULT_ALLOWED_LENGTHS);let E=y.length,A=!1,N=0;for(let U of v){if(E===U){A=!0;break}U>N&&(N=U)}if(!A&&E>N&&(A=!0),!A)throw new B;const b=[new pe(c[1],i),new pe(d[0],i)];return new ot(y,null,0,b,ge.ITF,new Date().getTime())}static decodeMiddle(i,o,l,c){let d=new Int32Array(10),f=new Int32Array(5),y=new Int32Array(5);for(d.fill(0),f.fill(0),y.fill(0);o<l;){wt.recordPattern(i,o,d);for(let E=0;E<5;E++){let A=2*E;f[E]=d[A],y[E]=d[A+1]}let v=We.decodeDigit(f);c.append(v.toString()),v=this.decodeDigit(y),c.append(v.toString()),d.forEach(function(E){o+=E})}}decodeStart(i){let o=We.skipWhiteSpace(i),l=We.findGuardPattern(i,o,We.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let c=o-1;l>0&&c>=0&&!i.get(c);c--)l--;if(l!==0)throw new z}static skipWhiteSpace(i){const o=i.getSize(),l=i.getNextSet(0);if(l===o)throw new z;return l}decodeEnd(i){i.reverse();try{let o=We.skipWhiteSpace(i),l;try{l=We.findGuardPattern(i,o,We.END_PATTERN_REVERSED[0])}catch(d){d instanceof z&&(l=We.findGuardPattern(i,o,We.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let c=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-c,l}finally{i.reverse()}}static findGuardPattern(i,o,l){let c=l.length,d=new Int32Array(c),f=i.getSize(),y=!1,v=0,E=o;d.fill(0);for(let A=o;A<f;A++)if(i.get(A)!==y)d[v]++;else{if(v===c-1){if(wt.patternMatchVariance(d,l,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE)return[E,A];E+=d[0]+d[1],M.arraycopy(d,2,d,0,v-1),d[v-1]=0,d[v]=0,v--}else v++;d[v]=1,y=!y}throw new z}static decodeDigit(i){let o=We.MAX_AVG_VARIANCE,l=-1,c=We.PATTERNS.length;for(let d=0;d<c;d++){let f=We.PATTERNS[d],y=wt.patternMatchVariance(i,f,We.MAX_INDIVIDUAL_VARIANCE);y<o?(o=y,l=d):y===o&&(l=-1)}if(l>=0)return l%10;throw new z}}We.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],We.MAX_AVG_VARIANCE=.38,We.MAX_INDIVIDUAL_VARIANCE=.5,We.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],We.START_PATTERN=Int32Array.from([1,1,1,1]),We.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ft extends wt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let o=!1,l,c=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),l=ft.findGuardPattern(i,c,!1,this.START_END_PATTERN,d);let f=l[0];c=l[1];let y=f-(c-f);y>=0&&(o=i.isRange(y,f,!1))}return l}static checkChecksum(i){return ft.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let l=parseInt(i.charAt(o-1),10);return ft.getStandardUPCEANChecksum(i.substring(0,o-1))===l}static getStandardUPCEANChecksum(i){let o=i.length,l=0;for(let c=o-1;c>=0;c-=2){let d=i.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new B;l+=d}l*=3;for(let c=o-2;c>=0;c-=2){let d=i.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new B;l+=d}return(1e3-l)%10}static decodeEnd(i,o){return ft.findGuardPattern(i,o,!1,ft.START_END_PATTERN,new Int32Array(ft.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,o,l,c){return this.findGuardPattern(i,o,l,c,new Int32Array(c.length))}static findGuardPattern(i,o,l,c,d){let f=i.getSize();o=l?i.getNextUnset(o):i.getNextSet(o);let y=0,v=o,E=c.length,A=l;for(let N=o;N<f;N++)if(i.get(N)!==A)d[y]++;else{if(y===E-1){if(wt.patternMatchVariance(d,c,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE)return Int32Array.from([v,N]);v+=d[0]+d[1];let b=d.slice(2,d.length-1);for(let L=0;L<y-1;L++)d[L]=b[L];d[y-1]=0,d[y]=0,y--}else y++;d[y]=1,A=!A}throw new z}static decodeDigit(i,o,l,c){this.recordPattern(i,l,o);let d=this.MAX_AVG_VARIANCE,f=-1,y=c.length;for(let v=0;v<y;v++){let E=c[v],A=wt.patternMatchVariance(o,E,ft.MAX_INDIVIDUAL_VARIANCE);A<d&&(d=A,f=v)}if(f>=0)return f;throw new z}}ft.MAX_AVG_VARIANCE=.48,ft.MAX_INDIVIDUAL_VARIANCE=.7,ft.START_END_PATTERN=Int32Array.from([1,1,1]),ft.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ft.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ft.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class zs{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,l){let c=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,c),f=c.toString(),y=zs.parseExtensionString(f),v=[new pe((l[0]+l[1])/2,i),new pe(d,i)],E=new ot(f,null,0,v,ge.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&E.putAllMetadata(y),E}decodeMiddle(i,o,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=i.getSize(),f=o[1],y=0;for(let E=0;E<5&&f<d;E++){let A=ft.decodeDigit(i,c,f,ft.L_AND_G_PATTERNS);l+=String.fromCharCode(48+A%10);for(let N of c)f+=N;A>=10&&(y|=1<<4-E),E!==4&&(f=i.getNextSet(f),f=i.getNextUnset(f))}if(l.length!==5)throw new z;let v=this.determineCheckDigit(y);if(zs.extensionChecksum(l.toString())!==v)throw new z;return f}static extensionChecksum(i){let o=i.length,l=0;for(let c=o-2;c>=0;c-=2)l+=i.charAt(c).charCodeAt(0)-48;l*=3;for(let c=o-1;c>=0;c-=2)l+=i.charAt(c).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let o=0;o<10;o++)if(i===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new z}static parseExtensionString(i){if(i.length!==5)return null;let o=zs.parseExtension5String(i);return o==null?null:new Map([[Nt.SUGGESTED_PRICE,o]])}static parseExtension5String(i){let o;switch(i.charAt(0)){case"0":o="";break;case"5":o="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(i.substring(1)),c=(l/100).toString(),d=l%100,f=d<10?"0"+d:d.toString();return o+c+"."+f}}class au{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,l){let c=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,c),f=c.toString(),y=au.parseExtensionString(f),v=[new pe((l[0]+l[1])/2,i),new pe(d,i)],E=new ot(f,null,0,v,ge.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&E.putAllMetadata(y),E}decodeMiddle(i,o,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=i.getSize(),f=o[1],y=0;for(let v=0;v<2&&f<d;v++){let E=ft.decodeDigit(i,c,f,ft.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let A of c)f+=A;E>=10&&(y|=1<<1-v),v!==1&&(f=i.getNextSet(f),f=i.getNextUnset(f))}if(l.length!==2)throw new z;if(parseInt(l.toString())%4!==y)throw new z;return f}static parseExtensionString(i){return i.length!==2?null:new Map([[Nt.ISSUE_NUMBER,parseInt(i)]])}}class Jf{static decodeRow(i,o,l){let c=ft.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new zs().decodeRow(i,o,c)}catch{return new au().decodeRow(i,o,c)}}}Jf.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ve extends ft{constructor(){super(),this.decodeRowStringBuffer="",Ve.L_AND_G_PATTERNS=Ve.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let o=Ve.L_PATTERNS[i-10],l=new Int32Array(o.length);for(let c=0;c<o.length;c++)l[c]=o[o.length-c-1];Ve.L_AND_G_PATTERNS[i]=l}}decodeRow(i,o,l){let c=Ve.findStartGuardPattern(o),d=l==null?null:l.get(H.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Z=new pe((c[0]+c[1])/2,i);d.foundPossibleResultPoint(Z)}let f=this.decodeMiddle(o,c,this.decodeRowStringBuffer),y=f.rowOffset,v=f.resultString;if(d!=null){const Z=new pe(y,i);d.foundPossibleResultPoint(Z)}let E=this.decodeEnd(o,y);if(d!=null){const Z=new pe((E[0]+E[1])/2,i);d.foundPossibleResultPoint(Z)}let A=E[1],N=A+(A-E[0]);if(N>=o.getSize()||!o.isRange(A,N,!1))throw new z;let b=v.toString();if(b.length<8)throw new B;if(!Ve.checkChecksum(b))throw new T;let L=(c[1]+c[0])/2,U=(E[1]+E[0])/2,G=this.getBarcodeFormat(),W=[new pe(L,i),new pe(U,i)],X=new ot(b,null,0,W,G,new Date().getTime()),te=0;try{let Z=Jf.decodeRow(i,o,E[1]);X.putMetadata(Nt.UPC_EAN_EXTENSION,Z.getText()),X.putAllMetadata(Z.getResultMetadata()),X.addResultPoints(Z.getResultPoints()),te=Z.getText().length}catch{}let ne=l==null?null:l.get(H.ALLOWED_EAN_EXTENSIONS);if(ne!=null){let Z=!1;for(let Pe in ne)if(te.toString()===Pe){Z=!0;break}if(!Z)throw new z}return X}decodeEnd(i,o){return Ve.findGuardPattern(i,o,!1,Ve.START_END_PATTERN,new Int32Array(Ve.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return Ve.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let l=parseInt(i.charAt(o-1),10);return Ve.getStandardUPCEANChecksum(i.substring(0,o-1))===l}static getStandardUPCEANChecksum(i){let o=i.length,l=0;for(let c=o-1;c>=0;c-=2){let d=i.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new B;l+=d}l*=3;for(let c=o-2;c>=0;c-=2){let d=i.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new B;l+=d}return(1e3-l)%10}}class oi extends Ve{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=i.getSize(),f=o[1],y=0;for(let E=0;E<6&&f<d;E++){let A=Ve.decodeDigit(i,c,f,Ve.L_AND_G_PATTERNS);l+=String.fromCharCode(48+A%10);for(let N of c)f+=N;A>=10&&(y|=1<<5-E)}l=oi.determineFirstDigit(l,y),f=Ve.findGuardPattern(i,f,!0,Ve.MIDDLE_PATTERN,new Int32Array(Ve.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&f<d;E++){let A=Ve.decodeDigit(i,c,f,Ve.L_PATTERNS);l+=String.fromCharCode(48+A);for(let N of c)f+=N}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return ge.EAN_13}static determineFirstDigit(i,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new z}}oi.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Zf extends Ve{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,l){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=i.getSize(),f=o[1];for(let v=0;v<4&&f<d;v++){let E=Ve.decodeDigit(i,c,f,Ve.L_PATTERNS);l+=String.fromCharCode(48+E);for(let A of c)f+=A}f=Ve.findGuardPattern(i,f,!0,Ve.MIDDLE_PATTERN,new Int32Array(Ve.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<4&&f<d;v++){let E=Ve.decodeDigit(i,c,f,Ve.L_PATTERNS);l+=String.fromCharCode(48+E);for(let A of c)f+=A}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return ge.EAN_8}}class Qf extends Ve{constructor(){super(...arguments),this.ean13Reader=new oi}getBarcodeFormat(){return ge.UPC_A}decode(i,o){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,o,l))}decodeMiddle(i,o,l){return this.ean13Reader.decodeMiddle(i,o,l)}maybeReturnResult(i){let o=i.getText();if(o.charAt(0)==="0"){let l=new ot(o.substring(1),null,null,i.getResultPoints(),ge.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new z}reset(){this.ean13Reader.reset()}}class Fn extends Ve{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,o,l){const c=this.decodeMiddleCounters.map(E=>E);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const d=i.getSize();let f=o[1],y=0;for(let E=0;E<6&&f<d;E++){const A=Fn.decodeDigit(i,c,f,Fn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+A%10);for(let N of c)f+=N;A>=10&&(y|=1<<5-E)}let v=Fn.determineNumSysAndCheckDigit(l,y);return{rowOffset:f,resultString:v}}decodeEnd(i,o){return Fn.findGuardPatternWithoutCounters(i,o,!0,Fn.MIDDLE_END_PATTERN)}checkChecksum(i){return Ve.checkChecksum(Fn.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,o){for(let l=0;l<=1;l++)for(let c=0;c<10;c++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][c]){let d=String.fromCharCode(48+l),f=String.fromCharCode(48+c);return d+i+f}throw z.getNotFoundInstance()}getBarcodeFormat(){return ge.UPC_E}static convertUPCEtoUPCA(i){const o=i.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new le;l.append(i.charAt(0));let c=o[5];switch(c){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(c),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(c);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}Fn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Fn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class lu extends wt{constructor(i){super();let o=i==null?null:i.get(H.POSSIBLE_FORMATS),l=[];r(o)?(l.push(new oi),l.push(new Qf),l.push(new Zf),l.push(new Fn)):(o.indexOf(ge.EAN_13)>-1&&l.push(new oi),o.indexOf(ge.UPC_A)>-1&&l.push(new Qf),o.indexOf(ge.EAN_8)>-1&&l.push(new Zf),o.indexOf(ge.UPC_E)>-1&&l.push(new Fn)),this.readers=l}decodeRow(i,o,l){for(let c of this.readers)try{const d=c.decodeRow(i,o,l),f=d.getBarcodeFormat()===ge.EAN_13&&d.getText().charAt(0)==="0",y=l==null?null:l.get(H.POSSIBLE_FORMATS),v=y==null||y.includes(ge.UPC_A);if(f&&v){const E=d.getRawBytes(),A=new ot(d.getText().substring(1),E,E?E.length:null,d.getResultPoints(),ge.UPC_A);return A.putAllMetadata(d.getResultMetadata()),A}return d}catch{}throw new z}reset(){for(let i of this.readers)i.reset()}}class Gt extends wt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,o){for(let l=0;l<o.length;l++)if(wt.patternMatchVariance(i,o[l],Gt.MAX_INDIVIDUAL_VARIANCE)<Gt.MAX_AVG_VARIANCE)return l;throw new z}static count(i){return Oe.sum(new Int32Array(i))}static increment(i,o){let l=0,c=o[0];for(let d=1;d<i.length;d++)o[d]>c&&(c=o[d],l=d);i[l]++}static decrement(i,o){let l=0,c=o[0];for(let d=1;d<i.length;d++)o[d]<c&&(c=o[d],l=d);i[l]--}static isFinderPattern(i){let o=i[0]+i[1],l=o+i[2]+i[3],c=o/l;if(c>=Gt.MIN_FINDER_PATTERN_RATIO&&c<=Gt.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let y of i)y>f&&(f=y),y<d&&(d=y);return f<10*d}return!1}}Gt.MAX_AVG_VARIANCE=.2,Gt.MAX_INDIVIDUAL_VARIANCE=.45,Gt.MIN_FINDER_PATTERN_RATIO=9.5/12,Gt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Oi{constructor(i,o){this.value=i,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof Oi))return!1;const o=i;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class sa{constructor(i,o,l,c,d){this.value=i,this.startEnd=o,this.value=i,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new pe(l,d)),this.resultPoints.push(new pe(c,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof sa))return!1;const o=i;return this.value===o.value}hashCode(){return this.value}}class Zn{constructor(){}static getRSSvalue(i,o,l){let c=0;for(let v of i)c+=v;let d=0,f=0,y=i.length;for(let v=0;v<y-1;v++){let E;for(E=1,f|=1<<v;E<i[v];E++,f&=~(1<<v)){let A=Zn.combins(c-E-1,y-v-2);if(l&&f===0&&c-E-(y-v-1)>=y-v-1&&(A-=Zn.combins(c-E-(y-v),y-v-2)),y-v-1>1){let N=0;for(let b=c-E-(y-v-2);b>o;b--)N+=Zn.combins(c-E-b-1,y-v-3);A-=N*(y-1-v)}else c-E>o&&A--;d+=A}c-=E}return d}static combins(i,o){let l,c;i-o>o?(c=o,l=i-o):(c=i-o,l=o);let d=1,f=1;for(let y=i;y>l;y--)d*=y,f<=c&&(d/=f,f++);for(;f<=c;)d/=f,f++;return d}}class Gx{static buildBitArray(i){let o=i.length*2-1;i[i.length-1].getRightChar()==null&&(o-=1);let l=12*o,c=new F(l),d=0,y=i[0].getRightChar().getValue();for(let v=11;v>=0;--v)y&1<<v&&c.set(d),d++;for(let v=1;v<i.length;++v){let E=i[v],A=E.getLeftChar().getValue();for(let N=11;N>=0;--N)A&1<<N&&c.set(d),d++;if(E.getRightChar()!=null){let N=E.getRightChar().getValue();for(let b=11;b>=0;--b)N&1<<b&&c.set(d),d++}}return c}}class ai{constructor(i,o){o?this.decodedInformation=null:(this.finished=i,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class uu{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class nn extends uu{constructor(i,o){super(i),this.value=o}getValue(){return this.value}isFNC1(){return this.value===nn.FNC1}}nn.FNC1="$";class li extends uu{constructor(i,o,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Tn extends uu{constructor(i,o,l){if(super(i),o<0||o>10||l<0||l>10)throw new B;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Tn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Tn.FNC1}isAnyFNC1(){return this.firstDigit===Tn.FNC1||this.secondDigit===Tn.FNC1}}Tn.FNC1=10;class de{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new z;let o=i.substring(0,2);for(let d of de.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===de.VARIABLE_LENGTH?de.processVariableAI(2,d[2],i):de.processFixedAI(2,d[1],i);if(i.length<3)throw new z;let l=i.substring(0,3);for(let d of de.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===de.VARIABLE_LENGTH?de.processVariableAI(3,d[2],i):de.processFixedAI(3,d[1],i);for(let d of de.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===de.VARIABLE_LENGTH?de.processVariableAI(4,d[2],i):de.processFixedAI(4,d[1],i);if(i.length<4)throw new z;let c=i.substring(0,4);for(let d of de.FOUR_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===de.VARIABLE_LENGTH?de.processVariableAI(4,d[2],i):de.processFixedAI(4,d[1],i);throw new z}static processFixedAI(i,o,l){if(l.length<i)throw new z;let c=l.substring(0,i);if(l.length<i+o)throw new z;let d=l.substring(i,i+o),f=l.substring(i+o),y="("+c+")"+d,v=de.parseFieldsInGeneralPurpose(f);return v==null?y:y+v}static processVariableAI(i,o,l){let c=l.substring(0,i),d;l.length<i+o?d=l.length:d=i+o;let f=l.substring(i,d),y=l.substring(d),v="("+c+")"+f,E=de.parseFieldsInGeneralPurpose(y);return E==null?v:v+E}}de.VARIABLE_LENGTH=[],de.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",de.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",de.VARIABLE_LENGTH,20],["22",de.VARIABLE_LENGTH,29],["30",de.VARIABLE_LENGTH,8],["37",de.VARIABLE_LENGTH,8],["90",de.VARIABLE_LENGTH,30],["91",de.VARIABLE_LENGTH,30],["92",de.VARIABLE_LENGTH,30],["93",de.VARIABLE_LENGTH,30],["94",de.VARIABLE_LENGTH,30],["95",de.VARIABLE_LENGTH,30],["96",de.VARIABLE_LENGTH,30],["97",de.VARIABLE_LENGTH,3],["98",de.VARIABLE_LENGTH,30],["99",de.VARIABLE_LENGTH,30]],de.THREE_DIGIT_DATA_LENGTH=[["240",de.VARIABLE_LENGTH,30],["241",de.VARIABLE_LENGTH,30],["242",de.VARIABLE_LENGTH,6],["250",de.VARIABLE_LENGTH,30],["251",de.VARIABLE_LENGTH,30],["253",de.VARIABLE_LENGTH,17],["254",de.VARIABLE_LENGTH,20],["400",de.VARIABLE_LENGTH,30],["401",de.VARIABLE_LENGTH,30],["402",17],["403",de.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",de.VARIABLE_LENGTH,20],["421",de.VARIABLE_LENGTH,15],["422",3],["423",de.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],de.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",de.VARIABLE_LENGTH,15],["391",de.VARIABLE_LENGTH,18],["392",de.VARIABLE_LENGTH,15],["393",de.VARIABLE_LENGTH,18],["703",de.VARIABLE_LENGTH,30]],de.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",de.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",de.VARIABLE_LENGTH,20],["8003",de.VARIABLE_LENGTH,30],["8004",de.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",de.VARIABLE_LENGTH,30],["8008",de.VARIABLE_LENGTH,12],["8018",18],["8020",de.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",de.VARIABLE_LENGTH,70],["8200",de.VARIABLE_LENGTH,70]];class Li{constructor(i){this.buffer=new le,this.information=i}decodeAllCodes(i,o){let l=o,c=null;do{let d=this.decodeGeneralPurposeField(l,c),f=de.parseFieldsInGeneralPurpose(d.getNewString());if(f!=null&&i.append(f),d.isRemaining()?c=""+d.getRemainingValue():c=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let o=i;o<i+3;++o)if(this.information.get(o))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(i,4);return d===0?new Tn(this.information.getSize(),Tn.FNC1,Tn.FNC1):new Tn(this.information.getSize(),d-1,Tn.FNC1)}let o=this.extractNumericValueFromBitArray(i,7),l=(o-8)/11,c=(o-8)%11;return new Tn(i+7,l,c)}extractNumericValueFromBitArray(i,o){return Li.extractNumericValueFromBitArray(this.information,i,o)}static extractNumericValueFromBitArray(i,o,l){let c=0;for(let d=0;d<l;++d)i.get(o+d)&&(c|=1<<l-d-1);return c}decodeGeneralPurposeField(i,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new li(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new li(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),i=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),i=o.isFinished()):(o=this.parseNumericBlock(),i=o.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let o;return i.isSecondDigitFNC1()?o=new li(this.current.getPosition(),this.buffer.toString()):o=new li(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new ai(!0,o)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let o=new li(this.current.getPosition(),this.buffer.toString());return new ai(!0,o)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ai(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new li(this.current.getPosition(),this.buffer.toString());return new ai(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ai(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new li(this.current.getPosition(),this.buffer.toString());return new ai(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ai(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,8);return c>=232&&c<253}decodeIsoIec646(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new nn(i+5,nn.FNC1);if(o>=5&&o<15)return new nn(i+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new nn(i+7,""+(l+1));if(l>=90&&l<116)return new nn(i+7,""+(l+7));let c=this.extractNumericValueFromBitArray(i,8),d;switch(c){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new B}return new nn(i+8,d)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new nn(i+5,nn.FNC1);if(o>=5&&o<15)return new nn(i+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new nn(i+6,""+(l+33));let c;switch(l){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Jn("Decoding invalid alphanumeric value: "+l)}return new nn(i+6,c)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<5&&o+i<this.information.getSize();++o)if(o===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+o))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let o=i;o<i+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<4&&o+i<this.information.getSize();++o)if(this.information.get(i+o))return!1;return!0}}class cu{constructor(i){this.information=i,this.generalDecoder=new Li(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class rn extends cu{constructor(i){super(i)}encodeCompressedGtin(i,o){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,o,l)}encodeCompressedGtinWithoutAI(i,o,l){for(let c=0;c<4;++c){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*c,10);d/100===0&&i.append("0"),d/10===0&&i.append("0"),i.append(d)}rn.appendCheckDigit(i,l)}static appendCheckDigit(i,o){let l=0;for(let c=0;c<13;c++){let d=i.charAt(c+o).charCodeAt(0)-48;l+=c&1?d:3*d}l=10-l%10,l===10&&(l=0),i.append(l)}}rn.GTIN_SIZE=40;class Bi extends rn{constructor(i){super(i)}parseInformation(){let i=new le;i.append("(01)");let o=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Bi.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,Bi.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(i,Bi.HEADER_SIZE+44)}}Bi.HEADER_SIZE=4;class oa extends cu{constructor(i){super(i)}parseInformation(){let i=new le;return this.getGeneralDecoder().decodeAllCodes(i,oa.HEADER_SIZE)}}oa.HEADER_SIZE=5;class aa extends rn{constructor(i){super(i)}encodeCompressedWeight(i,o,l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(i,c);let d=this.checkWeight(c),f=1e5;for(let y=0;y<5;++y)d/f===0&&i.append("0"),f/=10;i.append(d)}}class Qn extends aa{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Qn.HEADER_SIZE+aa.GTIN_SIZE+Qn.WEIGHT_SIZE)throw new z;let i=new le;return this.encodeCompressedGtin(i,Qn.HEADER_SIZE),this.encodeCompressedWeight(i,Qn.HEADER_SIZE+aa.GTIN_SIZE,Qn.WEIGHT_SIZE),i.toString()}}Qn.HEADER_SIZE=5,Qn.WEIGHT_SIZE=15;class Hx extends Qn{constructor(i){super(i)}addWeightCode(i,o){i.append("(3103)")}checkWeight(i){return i}}class qx extends Qn{constructor(i){super(i)}addWeightCode(i,o){o<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class er extends rn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<er.HEADER_SIZE+rn.GTIN_SIZE)throw new z;let i=new le;this.encodeCompressedGtin(i,er.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(er.HEADER_SIZE+rn.GTIN_SIZE,er.LAST_DIGIT_SIZE);i.append("(392"),i.append(o),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(er.HEADER_SIZE+rn.GTIN_SIZE+er.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}er.HEADER_SIZE=8,er.LAST_DIGIT_SIZE=2;class jt extends rn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<jt.HEADER_SIZE+rn.GTIN_SIZE)throw new z;let i=new le;this.encodeCompressedGtin(i,jt.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(jt.HEADER_SIZE+rn.GTIN_SIZE,jt.LAST_DIGIT_SIZE);i.append("(393"),i.append(o),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(jt.HEADER_SIZE+rn.GTIN_SIZE+jt.LAST_DIGIT_SIZE,jt.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let c=this.getGeneralDecoder().decodeGeneralPurposeField(jt.HEADER_SIZE+rn.GTIN_SIZE+jt.LAST_DIGIT_SIZE+jt.FIRST_THREE_DIGITS_SIZE,null);return i.append(c.getNewString()),i.toString()}}jt.HEADER_SIZE=8,jt.LAST_DIGIT_SIZE=2,jt.FIRST_THREE_DIGITS_SIZE=10;class it extends aa{constructor(i,o,l){super(i),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=it.HEADER_SIZE+it.GTIN_SIZE+it.WEIGHT_SIZE+it.DATE_SIZE)throw new z;let i=new le;return this.encodeCompressedGtin(i,it.HEADER_SIZE),this.encodeCompressedWeight(i,it.HEADER_SIZE+it.GTIN_SIZE,it.WEIGHT_SIZE),this.encodeCompressedDate(i,it.HEADER_SIZE+it.GTIN_SIZE+it.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,it.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let c=l%32;l/=32;let d=l%12+1;l/=12;let f=l;f/10==0&&i.append("0"),i.append(f),d/10==0&&i.append("0"),i.append(d),c/10==0&&i.append("0"),i.append(c)}addWeightCode(i,o){i.append("("),i.append(this.firstAIdigits),i.append(o/1e5),i.append(")")}checkWeight(i){return i%1e5}}it.HEADER_SIZE=8,it.WEIGHT_SIZE=20,it.DATE_SIZE=16;function eh(I){try{if(I.get(1))return new Bi(I);if(!I.get(2))return new oa(I);switch(Li.extractNumericValueFromBitArray(I,1,4)){case 4:return new Hx(I);case 5:return new qx(I)}switch(Li.extractNumericValueFromBitArray(I,1,5)){case 12:return new er(I);case 13:return new jt(I)}switch(Li.extractNumericValueFromBitArray(I,1,7)){case 56:return new it(I,"310","11");case 57:return new it(I,"320","11");case 58:return new it(I,"310","13");case 59:return new it(I,"320","13");case 60:return new it(I,"310","15");case 61:return new it(I,"320","15");case 62:return new it(I,"310","17");case 63:return new it(I,"320","17")}}catch(i){throw console.log(i),new Jn("unknown decoder: "+I)}}class Nr{constructor(i,o,l,c){this.leftchar=i,this.rightchar=o,this.finderpattern=l,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,o){return i instanceof Nr?Nr.equalsOrNull(i.leftchar,o.leftchar)&&Nr.equalsOrNull(i.rightchar,o.rightchar)&&Nr.equalsOrNull(i.finderpattern,o.finderpattern):!1}static equalsOrNull(i,o){return i===null?o===null:Nr.equals(i,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class du{constructor(i,o,l){this.pairs=i,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,o){return i instanceof du?this.checkEqualitity(i,o)&&i.wasReversed===o.wasReversed:!1}checkEqualitity(i,o){if(!i||!o)return;let l;return i.forEach((c,d)=>{o.forEach(f=>{c.getLeftChar().getValue()===f.getLeftChar().getValue()&&c.getRightChar().getValue()===f.getRightChar().getValue()&&c.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(l=!0)})}),l}}class J extends Gt{constructor(i){super(...arguments),this.pairs=new Array(J.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,o,l){this.pairs.length=0,this.startFromEven=!1;try{return J.constructResult(this.decodeRow2pairs(i,o))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,J.constructResult(this.decodeRow2pairs(i,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,i))}catch(d){if(d instanceof z){if(!this.pairs.length)throw new z;l=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(i,!1),c){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new z}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),o}checkRows(i,o){for(let l=o;l<this.rows.length;l++){let c=this.rows[l];this.pairs.length=0;for(let f of i)this.pairs.push(f.getPairs());if(this.pairs.push(c.getPairs()),!J.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(i);d.push(c);try{return this.checkRows(d,l+1)}catch(f){this.verbose&&console.log(f)}}throw new z}static isValidSequence(i){for(let o of J.FINDER_PATTERN_SEQUENCES){if(i.length>o.length)continue;let l=!0;for(let c=0;c<i.length;c++)if(i[c].getFinderPattern().getValue()!=o[c]){l=!1;break}if(l)return!0}return!1}storeRow(i,o){let l=0,c=!1,d=!1;for(;l<this.rows.length;){let f=this.rows[l];if(f.getRowNumber()>i){d=f.isEquivalent(this.pairs);break}c=f.isEquivalent(this.pairs),l++}d||c||J.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new du(this.pairs,i,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,o){for(let l of o)if(l.getPairs().length!==i.length){for(let c of l.getPairs())for(let d of i)if(Nr.equals(c,d))break}}static isPartialRow(i,o){for(let l of o){let c=!0;for(let d of i){let f=!1;for(let y of l.getPairs())if(d.equals(y)){f=!0;break}if(!f){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(i){let o=Gx.buildBitArray(i),c=eh(o).parseInformation(),d=i[0].getFinderPattern().getResultPoints(),f=i[i.length-1].getFinderPattern().getResultPoints(),y=[d[0],d[1],f[0],f[1]];return new ot(c,null,null,y,ge.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),o=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let c=l.getChecksumPortion(),d=2;for(let y=1;y<this.pairs.size();++y){let v=this.pairs.get(y);c+=v.getLeftChar().getChecksumPortion(),d++;let E=v.getRightChar();E!=null&&(c+=E.getChecksumPortion(),d++)}return c%=211,211*(d-4)+c==o.getValue()}static getNextSecondBar(i,o){let l;return i.get(o)?(l=i.getNextUnset(o),l=i.getNextSet(l)):(l=i.getNextSet(o),l=i.getNextUnset(l)),l}retrieveNextPair(i,o,l){let c=o.length%2==0;this.startFromEven&&(c=!c);let d,f=!0,y=-1;do this.findNextPair(i,o,y),d=this.parseFoundFinderPattern(i,l,c),d==null?y=J.getNextSecondBar(i,this.startEnd[0]):f=!1;while(f);let v=this.decodeDataCharacter(i,d,c,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new z;let E;try{E=this.decodeDataCharacter(i,d,c,!1)}catch(A){E=null,this.verbose&&console.log(A)}return new Nr(v,E,d,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,o,l){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=i.getSize(),f;l>=0?f=l:this.isEmptyPair(o)?f=0:f=o[o.length-1].getFinderPattern().getStartEnd()[1];let y=o.length%2!=0;this.startFromEven&&(y=!y);let v=!1;for(;f<d&&(v=!i.get(f),!!v);)f++;let E=0,A=f;for(let N=f;N<d;N++)if(i.get(N)!=v)c[E]++;else{if(E==3){if(y&&J.reverseCounters(c),J.isFinderPattern(c)){this.startEnd[0]=A,this.startEnd[1]=N;return}y&&J.reverseCounters(c),A+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,E--}else E++;c[E]=1,v=!v}throw new z}static reverseCounters(i){let o=i.length;for(let l=0;l<o/2;++l){let c=i[l];i[l]=i[o-l-1],i[o-l-1]=c}}parseFoundFinderPattern(i,o,l){let c,d,f;if(l){let E=this.startEnd[0]-1;for(;E>=0&&!i.get(E);)E--;E++,c=this.startEnd[0]-E,d=E,f=this.startEnd[1]}else d=this.startEnd[0],f=i.getNextUnset(this.startEnd[1]+1),c=f-this.startEnd[1];let y=this.getDecodeFinderCounters();M.arraycopy(y,0,y,1,y.length-1),y[0]=c;let v;try{v=this.parseFinderValue(y,J.FINDER_PATTERNS)}catch{return null}return new sa(v,[d,f],d,f,o)}decodeDataCharacter(i,o,l,c){let d=this.getDataCharacterCounters();for(let $e=0;$e<d.length;$e++)d[$e]=0;if(c)J.recordPatternInReverse(i,o.getStartEnd()[0],d);else{J.recordPattern(i,o.getStartEnd()[1],d);for(let $e=0,Lt=d.length-1;$e<Lt;$e++,Lt--){let pn=d[$e];d[$e]=d[Lt],d[Lt]=pn}}let f=17,y=Oe.sum(new Int32Array(d))/f,v=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(y-v)/v>.3)throw new z;let E=this.getOddCounts(),A=this.getEvenCounts(),N=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let $e=0;$e<d.length;$e++){let Lt=1*d[$e]/y,pn=Lt+.5;if(pn<1){if(Lt<.3)throw new z;pn=1}else if(pn>8){if(Lt>8.7)throw new z;pn=8}let Hi=$e/2;$e&1?(A[Hi]=pn,b[Hi]=Lt-pn):(E[Hi]=pn,N[Hi]=Lt-pn)}this.adjustOddEvenCounts(f);let L=4*o.getValue()+(l?0:2)+(c?0:1)-1,U=0,G=0;for(let $e=E.length-1;$e>=0;$e--){if(J.isNotA1left(o,l,c)){let Lt=J.WEIGHTS[L][2*$e];G+=E[$e]*Lt}U+=E[$e]}let W=0;for(let $e=A.length-1;$e>=0;$e--)if(J.isNotA1left(o,l,c)){let Lt=J.WEIGHTS[L][2*$e+1];W+=A[$e]*Lt}let X=G+W;if(U&1||U>13||U<4)throw new z;let te=(13-U)/2,ne=J.SYMBOL_WIDEST[te],Z=9-ne,Pe=Zn.getRSSvalue(E,ne,!0),Ne=Zn.getRSSvalue(A,Z,!1),on=J.EVEN_TOTAL_SUBSET[te],Un=J.GSUM[te],an=Pe*on+Ne+Un;return new Oi(an,X)}static isNotA1left(i,o,l){return!(i.getValue()==0&&o&&l)}adjustOddEvenCounts(i){let o=Oe.sum(new Int32Array(this.getOddCounts())),l=Oe.sum(new Int32Array(this.getEvenCounts())),c=!1,d=!1;o>13?d=!0:o<4&&(c=!0);let f=!1,y=!1;l>13?y=!0:l<4&&(f=!0);let v=o+l-i,E=(o&1)==1,A=(l&1)==0;if(v==1)if(E){if(A)throw new z;d=!0}else{if(!A)throw new z;y=!0}else if(v==-1)if(E){if(A)throw new z;c=!0}else{if(!A)throw new z;f=!0}else if(v==0){if(E){if(!A)throw new z;o<l?(c=!0,y=!0):(d=!0,f=!0)}else if(A)throw new z}else throw new z;if(c){if(d)throw new z;J.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&J.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(y)throw new z;J.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&J.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}J.SYMBOL_WIDEST=[7,5,4,3,1],J.EVEN_TOTAL_SUBSET=[4,20,52,104,204],J.GSUM=[0,348,1388,2948,3988],J.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],J.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],J.FINDER_PAT_A=0,J.FINDER_PAT_B=1,J.FINDER_PAT_C=2,J.FINDER_PAT_D=3,J.FINDER_PAT_E=4,J.FINDER_PAT_F=5,J.FINDER_PATTERN_SEQUENCES=[[J.FINDER_PAT_A,J.FINDER_PAT_A],[J.FINDER_PAT_A,J.FINDER_PAT_B,J.FINDER_PAT_B],[J.FINDER_PAT_A,J.FINDER_PAT_C,J.FINDER_PAT_B,J.FINDER_PAT_D],[J.FINDER_PAT_A,J.FINDER_PAT_E,J.FINDER_PAT_B,J.FINDER_PAT_D,J.FINDER_PAT_C],[J.FINDER_PAT_A,J.FINDER_PAT_E,J.FINDER_PAT_B,J.FINDER_PAT_D,J.FINDER_PAT_D,J.FINDER_PAT_F],[J.FINDER_PAT_A,J.FINDER_PAT_E,J.FINDER_PAT_B,J.FINDER_PAT_D,J.FINDER_PAT_E,J.FINDER_PAT_F,J.FINDER_PAT_F],[J.FINDER_PAT_A,J.FINDER_PAT_A,J.FINDER_PAT_B,J.FINDER_PAT_B,J.FINDER_PAT_C,J.FINDER_PAT_C,J.FINDER_PAT_D,J.FINDER_PAT_D],[J.FINDER_PAT_A,J.FINDER_PAT_A,J.FINDER_PAT_B,J.FINDER_PAT_B,J.FINDER_PAT_C,J.FINDER_PAT_C,J.FINDER_PAT_D,J.FINDER_PAT_E,J.FINDER_PAT_E],[J.FINDER_PAT_A,J.FINDER_PAT_A,J.FINDER_PAT_B,J.FINDER_PAT_B,J.FINDER_PAT_C,J.FINDER_PAT_C,J.FINDER_PAT_D,J.FINDER_PAT_E,J.FINDER_PAT_F,J.FINDER_PAT_F],[J.FINDER_PAT_A,J.FINDER_PAT_A,J.FINDER_PAT_B,J.FINDER_PAT_B,J.FINDER_PAT_C,J.FINDER_PAT_D,J.FINDER_PAT_D,J.FINDER_PAT_E,J.FINDER_PAT_E,J.FINDER_PAT_F,J.FINDER_PAT_F]],J.MAX_PAIRS=11;class zx extends Oi{constructor(i,o,l){super(i,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ht extends Gt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,o,l){const c=this.decodePair(o,!1,i,l);ht.addOrTally(this.possibleLeftPairs,c),o.reverse();let d=this.decodePair(o,!0,i,l);ht.addOrTally(this.possibleRightPairs,d),o.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&ht.checkChecksum(f,y))return ht.constructResult(f,y)}throw new z}static addOrTally(i,o){if(o==null)return;let l=!1;for(let c of i)if(c.getValue()===o.getValue()){c.incrementCount(),l=!0;break}l||i.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,o){let l=4537077*i.getValue()+o.getValue(),c=new String(l).toString(),d=new le;for(let E=13-c.length;E>0;E--)d.append("0");d.append(c);let f=0;for(let E=0;E<13;E++){let A=d.charAt(E).charCodeAt(0)-48;f+=E&1?A:3*A}f=10-f%10,f===10&&(f=0),d.append(f.toString());let y=i.getFinderPattern().getResultPoints(),v=o.getFinderPattern().getResultPoints();return new ot(d.toString(),null,0,[y[0],y[1],v[0],v[1]],ge.RSS_14,new Date().getTime())}static checkChecksum(i,o){let l=(i.getChecksumPortion()+16*o.getChecksumPortion())%79,c=9*i.getFinderPattern().getValue()+o.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,l===c}decodePair(i,o,l,c){try{let d=this.findFinderPattern(i,o),f=this.parseFoundFinderPattern(i,l,o,d),y=c==null?null:c.get(H.NEED_RESULT_POINT_CALLBACK);if(y!=null){let A=(d[0]+d[1])/2;o&&(A=i.getSize()-1-A),y.foundPossibleResultPoint(new pe(A,l))}let v=this.decodeDataCharacter(i,f,!0),E=this.decodeDataCharacter(i,f,!1);return new zx(1597*v.getValue()+E.getValue(),v.getChecksumPortion()+4*E.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(i,o,l){let c=this.getDataCharacterCounters();for(let W=0;W<c.length;W++)c[W]=0;if(l)wt.recordPatternInReverse(i,o.getStartEnd()[0],c);else{wt.recordPattern(i,o.getStartEnd()[1]+1,c);for(let W=0,X=c.length-1;W<X;W++,X--){let te=c[W];c[W]=c[X],c[X]=te}}let d=l?16:15,f=Oe.sum(new Int32Array(c))/d,y=this.getOddCounts(),v=this.getEvenCounts(),E=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors();for(let W=0;W<c.length;W++){let X=c[W]/f,te=Math.floor(X+.5);te<1?te=1:te>8&&(te=8);let ne=Math.floor(W/2);W&1?(v[ne]=te,A[ne]=X-te):(y[ne]=te,E[ne]=X-te)}this.adjustOddEvenCounts(l,d);let N=0,b=0;for(let W=y.length-1;W>=0;W--)b*=9,b+=y[W],N+=y[W];let L=0,U=0;for(let W=v.length-1;W>=0;W--)L*=9,L+=v[W],U+=v[W];let G=b+3*L;if(l){if(N&1||N>12||N<4)throw new z;let W=(12-N)/2,X=ht.OUTSIDE_ODD_WIDEST[W],te=9-X,ne=Zn.getRSSvalue(y,X,!1),Z=Zn.getRSSvalue(v,te,!0),Pe=ht.OUTSIDE_EVEN_TOTAL_SUBSET[W],Ne=ht.OUTSIDE_GSUM[W];return new Oi(ne*Pe+Z+Ne,G)}else{if(U&1||U>10||U<4)throw new z;let W=(10-U)/2,X=ht.INSIDE_ODD_WIDEST[W],te=9-X,ne=Zn.getRSSvalue(y,X,!0),Z=Zn.getRSSvalue(v,te,!1),Pe=ht.INSIDE_ODD_TOTAL_SUBSET[W],Ne=ht.INSIDE_GSUM[W];return new Oi(Z*Pe+ne+Ne,G)}}findFinderPattern(i,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=i.getSize(),d=!1,f=0;for(;f<c&&(d=!i.get(f),o!==d);)f++;let y=0,v=f;for(let E=f;E<c;E++)if(i.get(E)!==d)l[y]++;else{if(y===3){if(Gt.isFinderPattern(l))return[v,E];v+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,d=!d}throw new z}parseFoundFinderPattern(i,o,l,c){let d=i.get(c[0]),f=c[0]-1;for(;f>=0&&d!==i.get(f);)f--;f++;const y=c[0]-f,v=this.getDecodeFinderCounters(),E=new Int32Array(v.length);M.arraycopy(v,0,E,1,v.length-1),E[0]=y;const A=this.parseFinderValue(E,ht.FINDER_PATTERNS);let N=f,b=c[1];return l&&(N=i.getSize()-1-N,b=i.getSize()-1-b),new sa(A,[f,c[1]],N,b,o)}adjustOddEvenCounts(i,o){let l=Oe.sum(new Int32Array(this.getOddCounts())),c=Oe.sum(new Int32Array(this.getEvenCounts())),d=!1,f=!1,y=!1,v=!1;i?(l>12?f=!0:l<4&&(d=!0),c>12?v=!0:c<4&&(y=!0)):(l>11?f=!0:l<5&&(d=!0),c>10?v=!0:c<4&&(y=!0));let E=l+c-o,A=(l&1)===(i?1:0),N=(c&1)===1;if(E===1)if(A){if(N)throw new z;f=!0}else{if(!N)throw new z;v=!0}else if(E===-1)if(A){if(N)throw new z;d=!0}else{if(!N)throw new z;y=!0}else if(E===0){if(A){if(!N)throw new z;l<c?(d=!0,v=!0):(f=!0,y=!0)}else if(N)throw new z}else throw new z;if(d){if(f)throw new z;Gt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Gt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(v)throw new z;Gt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&Gt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ht.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ht.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ht.OUTSIDE_GSUM=[0,161,961,2015,2715],ht.INSIDE_GSUM=[0,336,1036,1516],ht.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ht.INSIDE_ODD_WIDEST=[2,4,6,8],ht.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Fi extends wt{constructor(i,o){super(),this.readers=[],this.verbose=o===!0;const l=i?i.get(H.POSSIBLE_FORMATS):null,c=i&&i.get(H.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(ge.EAN_13)||l.includes(ge.UPC_A)||l.includes(ge.EAN_8)||l.includes(ge.UPC_E))&&this.readers.push(new lu(i)),l.includes(ge.CODE_39)&&this.readers.push(new _t(c)),l.includes(ge.CODE_128)&&this.readers.push(new ie),l.includes(ge.ITF)&&this.readers.push(new We),l.includes(ge.RSS_14)&&this.readers.push(new ht),l.includes(ge.RSS_EXPANDED)&&this.readers.push(new J(this.verbose))):(this.readers.push(new lu(i)),this.readers.push(new _t),this.readers.push(new lu(i)),this.readers.push(new ie),this.readers.push(new We),this.readers.push(new ht),this.readers.push(new J(this.verbose)))}decodeRow(i,o,l){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(i,o,l)}catch{}throw new z}reset(){this.readers.forEach(i=>i.reset())}}class Wx extends Sn{constructor(i=500,o){super(new Fi(o),i,o)}}class He{constructor(i,o,l){this.ecCodewords=i,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ge{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Me{constructor(i,o,l,c,d,f){this.versionNumber=i,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=d,this.ecBlocks=f;let y=0;const v=f.getECCodewords(),E=f.getECBlocks();for(let A of E)y+=A.getCount()*(A.getDataCodewords()+v);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,o){if(i&1||o&1)throw new B;for(let l of Me.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===o)return l;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new Me(1,10,10,8,8,new He(5,new Ge(1,3))),new Me(2,12,12,10,10,new He(7,new Ge(1,5))),new Me(3,14,14,12,12,new He(10,new Ge(1,8))),new Me(4,16,16,14,14,new He(12,new Ge(1,12))),new Me(5,18,18,16,16,new He(14,new Ge(1,18))),new Me(6,20,20,18,18,new He(18,new Ge(1,22))),new Me(7,22,22,20,20,new He(20,new Ge(1,30))),new Me(8,24,24,22,22,new He(24,new Ge(1,36))),new Me(9,26,26,24,24,new He(28,new Ge(1,44))),new Me(10,32,32,14,14,new He(36,new Ge(1,62))),new Me(11,36,36,16,16,new He(42,new Ge(1,86))),new Me(12,40,40,18,18,new He(48,new Ge(1,114))),new Me(13,44,44,20,20,new He(56,new Ge(1,144))),new Me(14,48,48,22,22,new He(68,new Ge(1,174))),new Me(15,52,52,24,24,new He(42,new Ge(2,102))),new Me(16,64,64,14,14,new He(56,new Ge(2,140))),new Me(17,72,72,16,16,new He(36,new Ge(4,92))),new Me(18,80,80,18,18,new He(48,new Ge(4,114))),new Me(19,88,88,20,20,new He(56,new Ge(4,144))),new Me(20,96,96,22,22,new He(68,new Ge(4,174))),new Me(21,104,104,24,24,new He(56,new Ge(6,136))),new Me(22,120,120,18,18,new He(68,new Ge(6,175))),new Me(23,132,132,20,20,new He(62,new Ge(8,163))),new Me(24,144,144,22,22,new He(62,new Ge(8,156),new Ge(2,155))),new Me(25,8,18,6,16,new He(7,new Ge(1,5))),new Me(26,8,32,6,14,new He(11,new Ge(1,10))),new Me(27,12,26,10,24,new He(14,new Ge(1,16))),new Me(28,12,36,10,16,new He(18,new Ge(1,22))),new Me(29,16,36,14,16,new He(24,new Ge(1,32))),new Me(30,16,48,14,22,new He(28,new Ge(1,49)))]}}Me.VERSIONS=Me.buildVersions();class fu{constructor(i){const o=i.getHeight();if(o<8||o>144||o&1)throw new B;this.version=fu.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new ue(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const o=i.getHeight(),l=i.getWidth();return Me.getVersionForDimensions(o,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,c=0;const d=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let y=!1,v=!1,E=!1,A=!1;do if(l===d&&c===0&&!y)i[o++]=this.readCorner1(d,f)&255,l-=2,c+=2,y=!0;else if(l===d-2&&c===0&&f&3&&!v)i[o++]=this.readCorner2(d,f)&255,l-=2,c+=2,v=!0;else if(l===d+4&&c===2&&!(f&7)&&!E)i[o++]=this.readCorner3(d,f)&255,l-=2,c+=2,E=!0;else if(l===d-2&&c===0&&(f&7)===4&&!A)i[o++]=this.readCorner4(d,f)&255,l-=2,c+=2,A=!0;else{do l<d&&c>=0&&!this.readMappingMatrix.get(c,l)&&(i[o++]=this.readUtah(l,c,d,f)&255),l-=2,c+=2;while(l>=0&&c<f);l+=1,c+=3;do l>=0&&c<f&&!this.readMappingMatrix.get(c,l)&&(i[o++]=this.readUtah(l,c,d,f)&255),l+=2,c-=2;while(l<d&&c>=0);l+=3,c+=1}while(l<d||c<f);if(o!==this.version.getTotalCodewords())throw new B;return i}readModule(i,o,l,c){return i<0&&(i+=l,o+=4-(l+4&7)),o<0&&(o+=c,i+=4-(c+4&7)),this.readMappingMatrix.set(o,i),this.mappingBitMatrix.get(o,i)}readUtah(i,o,l,c){let d=0;return this.readModule(i-2,o-2,l,c)&&(d|=1),d<<=1,this.readModule(i-2,o-1,l,c)&&(d|=1),d<<=1,this.readModule(i-1,o-2,l,c)&&(d|=1),d<<=1,this.readModule(i-1,o-1,l,c)&&(d|=1),d<<=1,this.readModule(i-1,o,l,c)&&(d|=1),d<<=1,this.readModule(i,o-2,l,c)&&(d|=1),d<<=1,this.readModule(i,o-1,l,c)&&(d|=1),d<<=1,this.readModule(i,o,l,c)&&(d|=1),d}readCorner1(i,o){let l=0;return this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,1,i,o)&&(l|=1),l<<=1,this.readModule(i-1,2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(2,o-1,i,o)&&(l|=1),l<<=1,this.readModule(3,o-1,i,o)&&(l|=1),l}readCorner2(i,o){let l=0;return this.readModule(i-3,0,i,o)&&(l|=1),l<<=1,this.readModule(i-2,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(0,o-4,i,o)&&(l|=1),l<<=1,this.readModule(0,o-3,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l}readCorner3(i,o){let l=0;return this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(0,o-3,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-3,i,o)&&(l|=1),l<<=1,this.readModule(1,o-2,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l}readCorner4(i,o){let l=0;return this.readModule(i-3,0,i,o)&&(l|=1),l<<=1,this.readModule(i-2,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(2,o-1,i,o)&&(l|=1),l<<=1,this.readModule(3,o-1,i,o)&&(l|=1),l}extractDataRegion(i){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==o)throw new _("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),f=o/c|0,y=l/d|0,v=f*c,E=y*d,A=new ue(E,v);for(let N=0;N<f;++N){const b=N*c;for(let L=0;L<y;++L){const U=L*d;for(let G=0;G<c;++G){const W=N*(c+2)+1+G,X=b+G;for(let te=0;te<d;++te){const ne=L*(d+2)+1+te;if(i.get(ne,W)){const Z=U+te;A.set(Z,X)}}}}}return A}}class hu{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o){const l=o.getECBlocks();let c=0;const d=l.getECBlocks();for(let G of d)c+=G.getCount();const f=new Array(c);let y=0;for(let G of d)for(let W=0;W<G.getCount();W++){const X=G.getDataCodewords(),te=l.getECCodewords()+X;f[y++]=new hu(X,new Uint8Array(te))}const E=f[0].codewords.length-l.getECCodewords(),A=E-1;let N=0;for(let G=0;G<A;G++)for(let W=0;W<y;W++)f[W].codewords[G]=i[N++];const b=o.getVersionNumber()===24,L=b?8:y;for(let G=0;G<L;G++)f[G].codewords[E-1]=i[N++];const U=f[0].codewords.length;for(let G=E;G<U;G++)for(let W=0;W<y;W++){const X=b?(W+8)%y:W,te=b&&X>7?G-1:G;f[X].codewords[te]=i[N++]}if(N!==i.length)throw new _;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class pu{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new _(""+i);let o=0,l=this.bitOffset,c=this.byteOffset;const d=this.bytes;if(l>0){const f=8-l,y=i<f?i:f,v=f-y,E=255>>8-y<<v;o=(d[c]&E)>>v,i-=y,l+=y,l===8&&(l=0,c++)}if(i>0){for(;i>=8;)o=o<<8|d[c]&255,c++,i-=8;if(i>0){const f=8-i,y=255>>f<<f;o=o<<i|(d[c]&y)>>f,l+=i}}return this.bitOffset=l,this.byteOffset=c,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ct;(function(I){I[I.PAD_ENCODE=0]="PAD_ENCODE",I[I.ASCII_ENCODE=1]="ASCII_ENCODE",I[I.C40_ENCODE=2]="C40_ENCODE",I[I.TEXT_ENCODE=3]="TEXT_ENCODE",I[I.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",I[I.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",I[I.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ct||(Ct={}));class br{static decode(i){const o=new pu(i),l=new le,c=new le,d=new Array;let f=Ct.ASCII_ENCODE;do if(f===Ct.ASCII_ENCODE)f=this.decodeAsciiSegment(o,l,c);else{switch(f){case Ct.C40_ENCODE:this.decodeC40Segment(o,l);break;case Ct.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case Ct.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case Ct.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case Ct.BASE256_ENCODE:this.decodeBase256Segment(o,l,d);break;default:throw new B}f=Ct.ASCII_ENCODE}while(f!==Ct.PAD_ENCODE&&o.available()>0);return c.length()>0&&l.append(c.toString()),new Gs(i,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(i,o,l){let c=!1;do{let d=i.readBits(8);if(d===0)throw new B;if(d<=128)return c&&(d+=128),o.append(String.fromCharCode(d-1)),Ct.ASCII_ENCODE;if(d===129)return Ct.PAD_ENCODE;if(d<=229){const f=d-130;f<10&&o.append("0"),o.append(""+f)}else switch(d){case 230:return Ct.C40_ENCODE;case 231:return Ct.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return Ct.ANSIX12_ENCODE;case 239:return Ct.TEXT_ENCODE;case 240:return Ct.EDIFACT_ENCODE;case 241:break;default:if(d!==254||i.available()!==0)throw new B;break}}while(i.available()>0);return Ct.ASCII_ENCODE}static decodeC40Segment(i,o){let l=!1;const c=[];let d=0;do{if(i.available()===8)return;const f=i.readBits(8);if(f===254)return;this.parseTwoBytes(f,i.readBits(8),c);for(let y=0;y<3;y++){const v=c[y];switch(d){case 0:if(v<3)d=v+1;else if(v<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[v];l?(o.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):o.append(E)}else throw new B;break;case 1:l?(o.append(String.fromCharCode(v+128)),l=!1):o.append(String.fromCharCode(v)),d=0;break;case 2:if(v<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[v];l?(o.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):o.append(E)}else switch(v){case 27:o.append("");break;case 30:l=!0;break;default:throw new B}d=0;break;case 3:l?(o.append(String.fromCharCode(v+224)),l=!1):o.append(String.fromCharCode(v+96)),d=0;break;default:throw new B}}}while(i.available()>0)}static decodeTextSegment(i,o){let l=!1,c=[],d=0;do{if(i.available()===8)return;const f=i.readBits(8);if(f===254)return;this.parseTwoBytes(f,i.readBits(8),c);for(let y=0;y<3;y++){const v=c[y];switch(d){case 0:if(v<3)d=v+1;else if(v<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[v];l?(o.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):o.append(E)}else throw new B;break;case 1:l?(o.append(String.fromCharCode(v+128)),l=!1):o.append(String.fromCharCode(v)),d=0;break;case 2:if(v<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[v];l?(o.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):o.append(E)}else switch(v){case 27:o.append("");break;case 30:l=!0;break;default:throw new B}d=0;break;case 3:if(v<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[v];l?(o.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):o.append(E),d=0}else throw new B;break;default:throw new B}}}while(i.available()>0)}static decodeAnsiX12Segment(i,o){const l=[];do{if(i.available()===8)return;const c=i.readBits(8);if(c===254)return;this.parseTwoBytes(c,i.readBits(8),l);for(let d=0;d<3;d++){const f=l[d];switch(f){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(f<14)o.append(String.fromCharCode(f+44));else if(f<40)o.append(String.fromCharCode(f+51));else throw new B;break}}}while(i.available()>0)}static parseTwoBytes(i,o,l){let c=(i<<8)+o-1,d=Math.floor(c/1600);l[0]=d,c-=d*1600,d=Math.floor(c/40),l[1]=d,l[2]=c-d*40}static decodeEdifactSegment(i,o){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let c=i.readBits(6);if(c===31){const d=8-i.getBitOffset();d!==8&&i.readBits(d);return}c&32||(c|=64),o.append(String.fromCharCode(c))}}while(i.available()>0)}static decodeBase256Segment(i,o,l){let c=1+i.getByteOffset();const d=this.unrandomize255State(i.readBits(8),c++);let f;if(d===0?f=i.available()/8|0:d<250?f=d:f=250*(d-249)+this.unrandomize255State(i.readBits(8),c++),f<0)throw new B;const y=new Uint8Array(f);for(let v=0;v<f;v++){if(i.available()<8)throw new B;y[v]=this.unrandomize255State(i.readBits(8),c++)}l.push(y);try{o.append(Se.decode(y,se.ISO88591))}catch(v){throw new Jn("Platform does not support required encoding: "+v.message)}}static unrandomize255State(i,o){const l=149*o%255+1,c=i-l;return c>=0?c:c+256}}br.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],br.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],br.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],br.TEXT_SHIFT2_SET_CHARS=br.C40_SHIFT2_SET_CHARS,br.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Kx{constructor(){this.rsDecoder=new qs(Ue.DATA_MATRIX_FIELD_256)}decode(i){const o=new fu(i),l=o.getVersion(),c=o.readCodewords(),d=hu.getDataBlocks(c,l);let f=0;for(let E of d)f+=E.getNumDataCodewords();const y=new Uint8Array(f),v=d.length;for(let E=0;E<v;E++){const A=d[E],N=A.getCodewords(),b=A.getNumDataCodewords();this.correctErrors(N,b);for(let L=0;L<b;L++)y[L*v+E]=N[L]}return br.decode(y)}correctErrors(i,o){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-o)}catch{throw new T}for(let c=0;c<o;c++)i[c]=l[c]}}class yt{constructor(i){this.image=i,this.rectangleDetector=new cr(this.image)}detect(){const i=this.rectangleDetector.detect();let o=this.detectSolid1(i);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new z;o=this.shiftToModuleCenter(o);const l=o[0],c=o[1],d=o[2],f=o[3];let y=this.transitionsBetween(l,f)+1,v=this.transitionsBetween(d,f)+1;(y&1)===1&&(y+=1),(v&1)===1&&(v+=1),4*y<7*v&&4*v<7*y&&(y=v=Math.max(y,v));let E=yt.sampleGrid(this.image,l,c,d,f,y,v);return new ra(E,[l,c,d,f])}static shiftPoint(i,o,l){let c=(o.getX()-i.getX())/(l+1),d=(o.getY()-i.getY())/(l+1);return new pe(i.getX()+c,i.getY()+d)}static moveAway(i,o,l){let c=i.getX(),d=i.getY();return c<o?c-=1:c+=1,d<l?d-=1:d+=1,new pe(c,d)}detectSolid1(i){let o=i[0],l=i[1],c=i[3],d=i[2],f=this.transitionsBetween(o,l),y=this.transitionsBetween(l,c),v=this.transitionsBetween(c,d),E=this.transitionsBetween(d,o),A=f,N=[d,o,l,c];return A>y&&(A=y,N[0]=o,N[1]=l,N[2]=c,N[3]=d),A>v&&(A=v,N[0]=l,N[1]=c,N[2]=d,N[3]=o),A>E&&(N[0]=c,N[1]=d,N[2]=o,N[3]=l),N}detectSolid2(i){let o=i[0],l=i[1],c=i[2],d=i[3],f=this.transitionsBetween(o,d),y=yt.shiftPoint(l,c,(f+1)*4),v=yt.shiftPoint(c,l,(f+1)*4),E=this.transitionsBetween(y,o),A=this.transitionsBetween(v,d);return E<A?(i[0]=o,i[1]=l,i[2]=c,i[3]=d):(i[0]=l,i[1]=c,i[2]=d,i[3]=o),i}correctTopRight(i){let o=i[0],l=i[1],c=i[2],d=i[3],f=this.transitionsBetween(o,d),y=this.transitionsBetween(l,d),v=yt.shiftPoint(o,l,(y+1)*4),E=yt.shiftPoint(c,l,(f+1)*4);f=this.transitionsBetween(v,d),y=this.transitionsBetween(E,d);let A=new pe(d.getX()+(c.getX()-l.getX())/(f+1),d.getY()+(c.getY()-l.getY())/(f+1)),N=new pe(d.getX()+(o.getX()-l.getX())/(y+1),d.getY()+(o.getY()-l.getY())/(y+1));if(!this.isValid(A))return this.isValid(N)?N:null;if(!this.isValid(N))return A;let b=this.transitionsBetween(v,A)+this.transitionsBetween(E,A),L=this.transitionsBetween(v,N)+this.transitionsBetween(E,N);return b>L?A:N}shiftToModuleCenter(i){let o=i[0],l=i[1],c=i[2],d=i[3],f=this.transitionsBetween(o,d)+1,y=this.transitionsBetween(c,d)+1,v=yt.shiftPoint(o,l,y*4),E=yt.shiftPoint(c,l,f*4);f=this.transitionsBetween(v,d)+1,y=this.transitionsBetween(E,d)+1,(f&1)===1&&(f+=1),(y&1)===1&&(y+=1);let A=(o.getX()+l.getX()+c.getX()+d.getX())/4,N=(o.getY()+l.getY()+c.getY()+d.getY())/4;o=yt.moveAway(o,A,N),l=yt.moveAway(l,A,N),c=yt.moveAway(c,A,N),d=yt.moveAway(d,A,N);let b,L;return v=yt.shiftPoint(o,l,y*4),v=yt.shiftPoint(v,d,f*4),b=yt.shiftPoint(l,o,y*4),b=yt.shiftPoint(b,c,f*4),E=yt.shiftPoint(c,d,y*4),E=yt.shiftPoint(E,l,f*4),L=yt.shiftPoint(d,c,y*4),L=yt.shiftPoint(L,o,f*4),[v,b,E,L]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,o,l,c,d,f,y){return Ir.getInstance().sampleGrid(i,f,y,.5,.5,f-.5,.5,f-.5,y-.5,.5,y-.5,o.getX(),o.getY(),d.getX(),d.getY(),c.getX(),c.getY(),l.getX(),l.getY())}transitionsBetween(i,o){let l=Math.trunc(i.getX()),c=Math.trunc(i.getY()),d=Math.trunc(o.getX()),f=Math.trunc(o.getY()),y=Math.abs(f-c)>Math.abs(d-l);if(y){let G=l;l=c,c=G,G=d,d=f,f=G}let v=Math.abs(d-l),E=Math.abs(f-c),A=-v/2,N=c<f?1:-1,b=l<d?1:-1,L=0,U=this.image.get(y?c:l,y?l:c);for(let G=l,W=c;G!==d;G+=b){let X=this.image.get(y?W:G,y?G:W);if(X!==U&&(L++,U=X),A+=E,A>0){if(W===f)break;W+=N,A-=v}}return L}}class Rr{constructor(){this.decoder=new Kx}decode(i,o=null){let l,c;if(o!=null&&o.has(H.PURE_BARCODE)){const E=Rr.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(E),c=Rr.NO_POINTS}else{const E=new yt(i.getBlackMatrix()).detect();l=this.decoder.decode(E.getBits()),c=E.getPoints()}const d=l.getRawBytes(),f=new ot(l.getText(),d,8*d.length,c,ge.DATA_MATRIX,M.currentTimeMillis()),y=l.getByteSegments();y!=null&&f.putMetadata(Nt.BYTE_SEGMENTS,y);const v=l.getECLevel();return v!=null&&f.putMetadata(Nt.ERROR_CORRECTION_LEVEL,v),f}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(o==null||l==null)throw new z;const c=this.moduleSize(o,i);let d=o[1];const f=l[1];let y=o[0];const E=(l[0]-y+1)/c,A=(f-d+1)/c;if(E<=0||A<=0)throw new z;const N=c/2;d+=N,y+=N;const b=new ue(E,A);for(let L=0;L<A;L++){const U=d+L*c;for(let G=0;G<E;G++)i.get(y+G*c,U)&&b.set(G,L)}return b}static moduleSize(i,o){const l=o.getWidth();let c=i[0];const d=i[1];for(;c<l&&o.get(c,d);)c++;if(c===l)throw new z;const f=c-i[0];if(f===0)throw new z;return f}}Rr.NO_POINTS=[];class $x extends Sn{constructor(i=500){super(new Rr,i)}}var Ui;(function(I){I[I.L=0]="L",I[I.M=1]="M",I[I.Q=2]="Q",I[I.H=3]="H"})(Ui||(Ui={}));class je{constructor(i,o,l){this.value=i,this.stringValue=o,this.bits=l,je.FOR_BITS.set(l,this),je.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return je.L;case"M":return je.M;case"Q":return je.Q;case"H":return je.H;default:throw new w(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof je))return!1;const o=i;return this.value===o.value}static forBits(i){if(i<0||i>=je.FOR_BITS.size)throw new _;return je.FOR_BITS.get(i)}}je.FOR_BITS=new Map,je.FOR_VALUE=new Map,je.L=new je(Ui.L,"L",1),je.M=new je(Ui.M,"M",0),je.Q=new je(Ui.Q,"Q",3),je.H=new je(Ui.H,"H",2);class Ht{constructor(i){this.errorCorrectionLevel=je.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,o){return R.bitCount(i^o)}static decodeFormatInformation(i,o){const l=Ht.doDecodeFormatInformation(i,o);return l!==null?l:Ht.doDecodeFormatInformation(i^Ht.FORMAT_INFO_MASK_QR,o^Ht.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,o){let l=Number.MAX_SAFE_INTEGER,c=0;for(const d of Ht.FORMAT_INFO_DECODE_LOOKUP){const f=d[0];if(f===i||f===o)return new Ht(d[1]);let y=Ht.numBitsDiffering(i,f);y<l&&(c=d[1],l=y),i!==o&&(y=Ht.numBitsDiffering(o,f),y<l&&(c=d[1],l=y))}return l<=3?new Ht(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Ht))return!1;const o=i;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Ht.FORMAT_INFO_MASK_QR=21522,Ht.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class K{constructor(i,...o){this.ecCodewordsPerBlock=i,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const o=this.ecBlocks;for(const l of o)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class O{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ye{constructor(i,o,...l){this.versionNumber=i,this.alignmentPatternCenters=o,this.ecBlocks=l;let c=0;const d=l[0].getECCodewordsPerBlock(),f=l[0].getECBlocks();for(const y of f)c+=y.getCount()*(y.getDataCodewords()+d);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new B;try{return this.getVersionForNumber((i-17)/4)}catch{throw new B}}static getVersionForNumber(i){if(i<1||i>40)throw new _;return ye.VERSIONS[i-1]}static decodeVersionInformation(i){let o=Number.MAX_SAFE_INTEGER,l=0;for(let c=0;c<ye.VERSION_DECODE_INFO.length;c++){const d=ye.VERSION_DECODE_INFO[c];if(d===i)return ye.getVersionForNumber(c+7);const f=Ht.numBitsDiffering(i,d);f<o&&(l=c+7,o=f)}return o<=3?ye.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),o=new ue(i);o.setRegion(0,0,9,9),o.setRegion(i-8,0,8,9),o.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let c=0;c<l;c++){const d=this.alignmentPatternCenters[c]-2;for(let f=0;f<l;f++)c===0&&(f===0||f===l-1)||c===l-1&&f===0||o.setRegion(this.alignmentPatternCenters[f]-2,d,5,5)}return o.setRegion(6,9,1,i-17),o.setRegion(9,6,i-17,1),this.versionNumber>6&&(o.setRegion(i-11,0,3,6),o.setRegion(0,i-11,6,3)),o}toString(){return""+this.versionNumber}}ye.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ye.VERSIONS=[new ye(1,new Int32Array(0),new K(7,new O(1,19)),new K(10,new O(1,16)),new K(13,new O(1,13)),new K(17,new O(1,9))),new ye(2,Int32Array.from([6,18]),new K(10,new O(1,34)),new K(16,new O(1,28)),new K(22,new O(1,22)),new K(28,new O(1,16))),new ye(3,Int32Array.from([6,22]),new K(15,new O(1,55)),new K(26,new O(1,44)),new K(18,new O(2,17)),new K(22,new O(2,13))),new ye(4,Int32Array.from([6,26]),new K(20,new O(1,80)),new K(18,new O(2,32)),new K(26,new O(2,24)),new K(16,new O(4,9))),new ye(5,Int32Array.from([6,30]),new K(26,new O(1,108)),new K(24,new O(2,43)),new K(18,new O(2,15),new O(2,16)),new K(22,new O(2,11),new O(2,12))),new ye(6,Int32Array.from([6,34]),new K(18,new O(2,68)),new K(16,new O(4,27)),new K(24,new O(4,19)),new K(28,new O(4,15))),new ye(7,Int32Array.from([6,22,38]),new K(20,new O(2,78)),new K(18,new O(4,31)),new K(18,new O(2,14),new O(4,15)),new K(26,new O(4,13),new O(1,14))),new ye(8,Int32Array.from([6,24,42]),new K(24,new O(2,97)),new K(22,new O(2,38),new O(2,39)),new K(22,new O(4,18),new O(2,19)),new K(26,new O(4,14),new O(2,15))),new ye(9,Int32Array.from([6,26,46]),new K(30,new O(2,116)),new K(22,new O(3,36),new O(2,37)),new K(20,new O(4,16),new O(4,17)),new K(24,new O(4,12),new O(4,13))),new ye(10,Int32Array.from([6,28,50]),new K(18,new O(2,68),new O(2,69)),new K(26,new O(4,43),new O(1,44)),new K(24,new O(6,19),new O(2,20)),new K(28,new O(6,15),new O(2,16))),new ye(11,Int32Array.from([6,30,54]),new K(20,new O(4,81)),new K(30,new O(1,50),new O(4,51)),new K(28,new O(4,22),new O(4,23)),new K(24,new O(3,12),new O(8,13))),new ye(12,Int32Array.from([6,32,58]),new K(24,new O(2,92),new O(2,93)),new K(22,new O(6,36),new O(2,37)),new K(26,new O(4,20),new O(6,21)),new K(28,new O(7,14),new O(4,15))),new ye(13,Int32Array.from([6,34,62]),new K(26,new O(4,107)),new K(22,new O(8,37),new O(1,38)),new K(24,new O(8,20),new O(4,21)),new K(22,new O(12,11),new O(4,12))),new ye(14,Int32Array.from([6,26,46,66]),new K(30,new O(3,115),new O(1,116)),new K(24,new O(4,40),new O(5,41)),new K(20,new O(11,16),new O(5,17)),new K(24,new O(11,12),new O(5,13))),new ye(15,Int32Array.from([6,26,48,70]),new K(22,new O(5,87),new O(1,88)),new K(24,new O(5,41),new O(5,42)),new K(30,new O(5,24),new O(7,25)),new K(24,new O(11,12),new O(7,13))),new ye(16,Int32Array.from([6,26,50,74]),new K(24,new O(5,98),new O(1,99)),new K(28,new O(7,45),new O(3,46)),new K(24,new O(15,19),new O(2,20)),new K(30,new O(3,15),new O(13,16))),new ye(17,Int32Array.from([6,30,54,78]),new K(28,new O(1,107),new O(5,108)),new K(28,new O(10,46),new O(1,47)),new K(28,new O(1,22),new O(15,23)),new K(28,new O(2,14),new O(17,15))),new ye(18,Int32Array.from([6,30,56,82]),new K(30,new O(5,120),new O(1,121)),new K(26,new O(9,43),new O(4,44)),new K(28,new O(17,22),new O(1,23)),new K(28,new O(2,14),new O(19,15))),new ye(19,Int32Array.from([6,30,58,86]),new K(28,new O(3,113),new O(4,114)),new K(26,new O(3,44),new O(11,45)),new K(26,new O(17,21),new O(4,22)),new K(26,new O(9,13),new O(16,14))),new ye(20,Int32Array.from([6,34,62,90]),new K(28,new O(3,107),new O(5,108)),new K(26,new O(3,41),new O(13,42)),new K(30,new O(15,24),new O(5,25)),new K(28,new O(15,15),new O(10,16))),new ye(21,Int32Array.from([6,28,50,72,94]),new K(28,new O(4,116),new O(4,117)),new K(26,new O(17,42)),new K(28,new O(17,22),new O(6,23)),new K(30,new O(19,16),new O(6,17))),new ye(22,Int32Array.from([6,26,50,74,98]),new K(28,new O(2,111),new O(7,112)),new K(28,new O(17,46)),new K(30,new O(7,24),new O(16,25)),new K(24,new O(34,13))),new ye(23,Int32Array.from([6,30,54,78,102]),new K(30,new O(4,121),new O(5,122)),new K(28,new O(4,47),new O(14,48)),new K(30,new O(11,24),new O(14,25)),new K(30,new O(16,15),new O(14,16))),new ye(24,Int32Array.from([6,28,54,80,106]),new K(30,new O(6,117),new O(4,118)),new K(28,new O(6,45),new O(14,46)),new K(30,new O(11,24),new O(16,25)),new K(30,new O(30,16),new O(2,17))),new ye(25,Int32Array.from([6,32,58,84,110]),new K(26,new O(8,106),new O(4,107)),new K(28,new O(8,47),new O(13,48)),new K(30,new O(7,24),new O(22,25)),new K(30,new O(22,15),new O(13,16))),new ye(26,Int32Array.from([6,30,58,86,114]),new K(28,new O(10,114),new O(2,115)),new K(28,new O(19,46),new O(4,47)),new K(28,new O(28,22),new O(6,23)),new K(30,new O(33,16),new O(4,17))),new ye(27,Int32Array.from([6,34,62,90,118]),new K(30,new O(8,122),new O(4,123)),new K(28,new O(22,45),new O(3,46)),new K(30,new O(8,23),new O(26,24)),new K(30,new O(12,15),new O(28,16))),new ye(28,Int32Array.from([6,26,50,74,98,122]),new K(30,new O(3,117),new O(10,118)),new K(28,new O(3,45),new O(23,46)),new K(30,new O(4,24),new O(31,25)),new K(30,new O(11,15),new O(31,16))),new ye(29,Int32Array.from([6,30,54,78,102,126]),new K(30,new O(7,116),new O(7,117)),new K(28,new O(21,45),new O(7,46)),new K(30,new O(1,23),new O(37,24)),new K(30,new O(19,15),new O(26,16))),new ye(30,Int32Array.from([6,26,52,78,104,130]),new K(30,new O(5,115),new O(10,116)),new K(28,new O(19,47),new O(10,48)),new K(30,new O(15,24),new O(25,25)),new K(30,new O(23,15),new O(25,16))),new ye(31,Int32Array.from([6,30,56,82,108,134]),new K(30,new O(13,115),new O(3,116)),new K(28,new O(2,46),new O(29,47)),new K(30,new O(42,24),new O(1,25)),new K(30,new O(23,15),new O(28,16))),new ye(32,Int32Array.from([6,34,60,86,112,138]),new K(30,new O(17,115)),new K(28,new O(10,46),new O(23,47)),new K(30,new O(10,24),new O(35,25)),new K(30,new O(19,15),new O(35,16))),new ye(33,Int32Array.from([6,30,58,86,114,142]),new K(30,new O(17,115),new O(1,116)),new K(28,new O(14,46),new O(21,47)),new K(30,new O(29,24),new O(19,25)),new K(30,new O(11,15),new O(46,16))),new ye(34,Int32Array.from([6,34,62,90,118,146]),new K(30,new O(13,115),new O(6,116)),new K(28,new O(14,46),new O(23,47)),new K(30,new O(44,24),new O(7,25)),new K(30,new O(59,16),new O(1,17))),new ye(35,Int32Array.from([6,30,54,78,102,126,150]),new K(30,new O(12,121),new O(7,122)),new K(28,new O(12,47),new O(26,48)),new K(30,new O(39,24),new O(14,25)),new K(30,new O(22,15),new O(41,16))),new ye(36,Int32Array.from([6,24,50,76,102,128,154]),new K(30,new O(6,121),new O(14,122)),new K(28,new O(6,47),new O(34,48)),new K(30,new O(46,24),new O(10,25)),new K(30,new O(2,15),new O(64,16))),new ye(37,Int32Array.from([6,28,54,80,106,132,158]),new K(30,new O(17,122),new O(4,123)),new K(28,new O(29,46),new O(14,47)),new K(30,new O(49,24),new O(10,25)),new K(30,new O(24,15),new O(46,16))),new ye(38,Int32Array.from([6,32,58,84,110,136,162]),new K(30,new O(4,122),new O(18,123)),new K(28,new O(13,46),new O(32,47)),new K(30,new O(48,24),new O(14,25)),new K(30,new O(42,15),new O(32,16))),new ye(39,Int32Array.from([6,26,54,82,110,138,166]),new K(30,new O(20,117),new O(4,118)),new K(28,new O(40,47),new O(7,48)),new K(30,new O(43,24),new O(22,25)),new K(30,new O(10,15),new O(67,16))),new ye(40,Int32Array.from([6,30,58,86,114,142,170]),new K(30,new O(19,118),new O(6,119)),new K(28,new O(18,47),new O(31,48)),new K(30,new O(34,24),new O(34,25)),new K(30,new O(20,15),new O(61,16)))];var bt;(function(I){I[I.DATA_MASK_000=0]="DATA_MASK_000",I[I.DATA_MASK_001=1]="DATA_MASK_001",I[I.DATA_MASK_010=2]="DATA_MASK_010",I[I.DATA_MASK_011=3]="DATA_MASK_011",I[I.DATA_MASK_100=4]="DATA_MASK_100",I[I.DATA_MASK_101=5]="DATA_MASK_101",I[I.DATA_MASK_110=6]="DATA_MASK_110",I[I.DATA_MASK_111=7]="DATA_MASK_111"})(bt||(bt={}));class In{constructor(i,o){this.value=i,this.isMasked=o}unmaskBitMatrix(i,o){for(let l=0;l<o;l++)for(let c=0;c<o;c++)this.isMasked(l,c)&&i.flip(c,l)}}In.values=new Map([[bt.DATA_MASK_000,new In(bt.DATA_MASK_000,(I,i)=>(I+i&1)===0)],[bt.DATA_MASK_001,new In(bt.DATA_MASK_001,(I,i)=>(I&1)===0)],[bt.DATA_MASK_010,new In(bt.DATA_MASK_010,(I,i)=>i%3===0)],[bt.DATA_MASK_011,new In(bt.DATA_MASK_011,(I,i)=>(I+i)%3===0)],[bt.DATA_MASK_100,new In(bt.DATA_MASK_100,(I,i)=>(Math.floor(I/2)+Math.floor(i/3)&1)===0)],[bt.DATA_MASK_101,new In(bt.DATA_MASK_101,(I,i)=>I*i%6===0)],[bt.DATA_MASK_110,new In(bt.DATA_MASK_110,(I,i)=>I*i%6<3)],[bt.DATA_MASK_111,new In(bt.DATA_MASK_111,(I,i)=>(I+i+I*i%3&1)===0)]]);class Yx{constructor(i){const o=i.getHeight();if(o<21||(o&3)!==1)throw new B;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let d=0;d<6;d++)i=this.copyBit(d,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let d=5;d>=0;d--)i=this.copyBit(8,d,i);const o=this.bitMatrix.getHeight();let l=0;const c=o-7;for(let d=o-1;d>=c;d--)l=this.copyBit(8,d,l);for(let d=o-8;d<o;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=Ht.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),o=Math.floor((i-17)/4);if(o<=6)return ye.getVersionForNumber(o);let l=0;const c=i-11;for(let f=5;f>=0;f--)for(let y=i-9;y>=c;y--)l=this.copyBit(y,f,l);let d=ye.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;l=0;for(let f=5;f>=0;f--)for(let y=i-9;y>=c;y--)l=this.copyBit(f,y,l);if(d=ye.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;throw new B}copyBit(i,o,l){return(this.isMirror?this.bitMatrix.get(o,i):this.bitMatrix.get(i,o))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),o=this.readVersion(),l=In.values.get(i.getDataMask()),c=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,c);const d=o.buildFunctionPattern();let f=!0;const y=new Uint8Array(o.getTotalCodewords());let v=0,E=0,A=0;for(let N=c-1;N>0;N-=2){N===6&&N--;for(let b=0;b<c;b++){const L=f?c-1-b:b;for(let U=0;U<2;U++)d.get(N-U,L)||(A++,E<<=1,this.bitMatrix.get(N-U,L)&&(E|=1),A===8&&(y[v++]=E,A=0,E=0))}f=!f}if(v!==o.getTotalCodewords())throw new B;return y}remask(){if(this.parsedFormatInfo===null)return;const i=In.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let o=0,l=i.getWidth();o<l;o++)for(let c=o+1,d=i.getHeight();c<d;c++)i.get(o,c)!==i.get(c,o)&&(i.flip(c,o),i.flip(o,c))}}class gu{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o,l){if(i.length!==o.getTotalCodewords())throw new _;const c=o.getECBlocksForLevel(l);let d=0;const f=c.getECBlocks();for(const U of f)d+=U.getCount();const y=new Array(d);let v=0;for(const U of f)for(let G=0;G<U.getCount();G++){const W=U.getDataCodewords(),X=c.getECCodewordsPerBlock()+W;y[v++]=new gu(W,new Uint8Array(X))}const E=y[0].codewords.length;let A=y.length-1;for(;A>=0&&y[A].codewords.length!==E;)A--;A++;const N=E-c.getECCodewordsPerBlock();let b=0;for(let U=0;U<N;U++)for(let G=0;G<v;G++)y[G].codewords[U]=i[b++];for(let U=A;U<v;U++)y[U].codewords[N]=i[b++];const L=y[0].codewords.length;for(let U=N;U<L;U++)for(let G=0;G<v;G++){const W=G<A?U:U+1;y[G].codewords[W]=i[b++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Nn;(function(I){I[I.TERMINATOR=0]="TERMINATOR",I[I.NUMERIC=1]="NUMERIC",I[I.ALPHANUMERIC=2]="ALPHANUMERIC",I[I.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",I[I.BYTE=4]="BYTE",I[I.ECI=5]="ECI",I[I.KANJI=6]="KANJI",I[I.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",I[I.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",I[I.HANZI=9]="HANZI"})(Nn||(Nn={}));class we{constructor(i,o,l,c){this.value=i,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=c,we.FOR_BITS.set(c,this),we.FOR_VALUE.set(i,this)}static forBits(i){const o=we.FOR_BITS.get(i);if(o===void 0)throw new _;return o}getCharacterCountBits(i){const o=i.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof we))return!1;const o=i;return this.value===o.value}toString(){return this.stringValue}}we.FOR_BITS=new Map,we.FOR_VALUE=new Map,we.TERMINATOR=new we(Nn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),we.NUMERIC=new we(Nn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),we.ALPHANUMERIC=new we(Nn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),we.STRUCTURED_APPEND=new we(Nn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),we.BYTE=new we(Nn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),we.ECI=new we(Nn.ECI,"ECI",Int32Array.from([0,0,0]),7),we.KANJI=new we(Nn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),we.FNC1_FIRST_POSITION=new we(Nn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),we.FNC1_SECOND_POSITION=new we(Nn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),we.HANZI=new we(Nn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class at{static decode(i,o,l,c){const d=new pu(i);let f=new le;const y=new Array;let v=-1,E=-1;try{let A=null,N=!1,b;do{if(d.available()<4)b=we.TERMINATOR;else{const L=d.readBits(4);b=we.forBits(L)}switch(b){case we.TERMINATOR:break;case we.FNC1_FIRST_POSITION:case we.FNC1_SECOND_POSITION:N=!0;break;case we.STRUCTURED_APPEND:if(d.available()<16)throw new B;v=d.readBits(8),E=d.readBits(8);break;case we.ECI:const L=at.parseECIValue(d);if(A=q.getCharacterSetECIByValue(L),A===null)throw new B;break;case we.HANZI:const U=d.readBits(4),G=d.readBits(b.getCharacterCountBits(o));U===at.GB2312_SUBSET&&at.decodeHanziSegment(d,f,G);break;default:const W=d.readBits(b.getCharacterCountBits(o));switch(b){case we.NUMERIC:at.decodeNumericSegment(d,f,W);break;case we.ALPHANUMERIC:at.decodeAlphanumericSegment(d,f,W,N);break;case we.BYTE:at.decodeByteSegment(d,f,W,A,y,c);break;case we.KANJI:at.decodeKanjiSegment(d,f,W);break;default:throw new B}break}}while(b!==we.TERMINATOR)}catch{throw new B}return new Gs(i,f.toString(),y.length===0?null:y,l===null?null:l.toString(),v,E)}static decodeHanziSegment(i,o,l){if(l*13>i.available())throw new B;const c=new Uint8Array(2*l);let d=0;for(;l>0;){const f=i.readBits(13);let y=f/96<<8&4294967295|f%96;y<959?y+=41377:y+=42657,c[d]=y>>8&255,c[d+1]=y&255,d+=2,l--}try{o.append(Se.decode(c,se.GB2312))}catch(f){throw new B(f)}}static decodeKanjiSegment(i,o,l){if(l*13>i.available())throw new B;const c=new Uint8Array(2*l);let d=0;for(;l>0;){const f=i.readBits(13);let y=f/192<<8&4294967295|f%192;y<7936?y+=33088:y+=49472,c[d]=y>>8,c[d+1]=y,d+=2,l--}try{o.append(Se.decode(c,se.SHIFT_JIS))}catch(f){throw new B(f)}}static decodeByteSegment(i,o,l,c,d,f){if(8*l>i.available())throw new B;const y=new Uint8Array(l);for(let E=0;E<l;E++)y[E]=i.readBits(8);let v;c===null?v=se.guessEncoding(y,f):v=c.getName();try{o.append(Se.decode(y,v))}catch(E){throw new B(E)}d.push(y)}static toAlphaNumericChar(i){if(i>=at.ALPHANUMERIC_CHARS.length)throw new B;return at.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,o,l,c){const d=o.length();for(;l>1;){if(i.available()<11)throw new B;const f=i.readBits(11);o.append(at.toAlphaNumericChar(Math.floor(f/45))),o.append(at.toAlphaNumericChar(f%45)),l-=2}if(l===1){if(i.available()<6)throw new B;o.append(at.toAlphaNumericChar(i.readBits(6)))}if(c)for(let f=d;f<o.length();f++)o.charAt(f)==="%"&&(f<o.length()-1&&o.charAt(f+1)==="%"?o.deleteCharAt(f+1):o.setCharAt(f,""))}static decodeNumericSegment(i,o,l){for(;l>=3;){if(i.available()<10)throw new B;const c=i.readBits(10);if(c>=1e3)throw new B;o.append(at.toAlphaNumericChar(Math.floor(c/100))),o.append(at.toAlphaNumericChar(Math.floor(c/10)%10)),o.append(at.toAlphaNumericChar(c%10)),l-=3}if(l===2){if(i.available()<7)throw new B;const c=i.readBits(7);if(c>=100)throw new B;o.append(at.toAlphaNumericChar(Math.floor(c/10))),o.append(at.toAlphaNumericChar(c%10))}else if(l===1){if(i.available()<4)throw new B;const c=i.readBits(4);if(c>=10)throw new B;o.append(at.toAlphaNumericChar(c))}}static parseECIValue(i){const o=i.readBits(8);if(!(o&128))return o&127;if((o&192)===128){const l=i.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=i.readBits(16);return(o&31)<<16&4294967295|l}throw new B}}at.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",at.GB2312_SUBSET=1;class th{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const o=i[0];i[0]=i[2],i[2]=o}}class jx{constructor(){this.rsDecoder=new qs(Ue.QR_CODE_FIELD_256)}decodeBooleanArray(i,o){return this.decodeBitMatrix(ue.parseFromBooleanArray(i),o)}decodeBitMatrix(i,o){const l=new Yx(i);let c=null;try{return this.decodeBitMatrixParser(l,o)}catch(d){c=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,o);return d.setOther(new th(!0)),d}catch(d){throw c!==null?c:d}}decodeBitMatrixParser(i,o){const l=i.readVersion(),c=i.readFormatInformation().getErrorCorrectionLevel(),d=i.readCodewords(),f=gu.getDataBlocks(d,l,c);let y=0;for(const A of f)y+=A.getNumDataCodewords();const v=new Uint8Array(y);let E=0;for(const A of f){const N=A.getCodewords(),b=A.getNumDataCodewords();this.correctErrors(N,b);for(let L=0;L<b;L++)v[E++]=N[L]}return at.decode(v,l,c,o)}correctErrors(i,o){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-o)}catch{throw new T}for(let c=0;c<o;c++)i[c]=l[c]}}class mu extends pe{constructor(i,o,l){super(i,o),this.estimatedModuleSize=l}aboutEquals(i,o,l){if(Math.abs(o-this.getY())<=i&&Math.abs(l-this.getX())<=i){const c=Math.abs(i-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(i,o,l){const c=(this.getX()+o)/2,d=(this.getY()+i)/2,f=(this.estimatedModuleSize+l)/2;return new mu(c,d,f)}}class la{constructor(i,o,l,c,d,f,y){this.image=i,this.startX=o,this.startY=l,this.width=c,this.height=d,this.moduleSize=f,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,o=this.height,l=this.width,c=i+l,d=this.startY+o/2,f=new Int32Array(3),y=this.image;for(let v=0;v<o;v++){const E=d+(v&1?-Math.floor((v+1)/2):Math.floor((v+1)/2));f[0]=0,f[1]=0,f[2]=0;let A=i;for(;A<c&&!y.get(A,E);)A++;let N=0;for(;A<c;){if(y.get(A,E))if(N===1)f[1]++;else if(N===2){if(this.foundPatternCross(f)){const b=this.handlePossibleCenter(f,E,A);if(b!==null)return b}f[0]=f[2],f[1]=1,f[2]=0,N=1}else f[++N]++;else N===1&&N++,f[N]++;A++}if(this.foundPatternCross(f)){const b=this.handlePossibleCenter(f,E,c);if(b!==null)return b}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new z}static centerFromEnd(i,o){return o-i[2]-i[1]/2}foundPatternCross(i){const o=this.moduleSize,l=o/2;for(let c=0;c<3;c++)if(Math.abs(o-i[c])>=l)return!1;return!0}crossCheckVertical(i,o,l,c){const d=this.image,f=d.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let v=i;for(;v>=0&&d.get(o,v)&&y[1]<=l;)y[1]++,v--;if(v<0||y[1]>l)return NaN;for(;v>=0&&!d.get(o,v)&&y[0]<=l;)y[0]++,v--;if(y[0]>l)return NaN;for(v=i+1;v<f&&d.get(o,v)&&y[1]<=l;)y[1]++,v++;if(v===f||y[1]>l)return NaN;for(;v<f&&!d.get(o,v)&&y[2]<=l;)y[2]++,v++;if(y[2]>l)return NaN;const E=y[0]+y[1]+y[2];return 5*Math.abs(E-c)>=2*c?NaN:this.foundPatternCross(y)?la.centerFromEnd(y,v):NaN}handlePossibleCenter(i,o,l){const c=i[0]+i[1]+i[2],d=la.centerFromEnd(i,l),f=this.crossCheckVertical(o,d,2*i[1],c);if(!isNaN(f)){const y=(i[0]+i[1]+i[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(y,f,d))return E.combineEstimate(f,d,y);const v=new mu(d,f,y);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null}}class yu extends pe{constructor(i,o,l,c){super(i,o),this.estimatedModuleSize=l,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,o,l){if(Math.abs(o-this.getY())<=i&&Math.abs(l-this.getX())<=i){const c=Math.abs(i-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(i,o,l){const c=this.count+1,d=(this.count*this.getX()+o)/c,f=(this.count*this.getY()+i)/c,y=(this.count*this.estimatedModuleSize+l)/c;return new yu(d,f,y,c)}}class Xx{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Rt{constructor(i,o){this.image=i,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const o=i!=null&&i.get(H.TRY_HARDER)!==void 0,l=i!=null&&i.get(H.PURE_BARCODE)!==void 0,c=this.image,d=c.getHeight(),f=c.getWidth();let y=Math.floor(3*d/(4*Rt.MAX_MODULES));(y<Rt.MIN_SKIP||o)&&(y=Rt.MIN_SKIP);let v=!1;const E=new Int32Array(5);for(let N=y-1;N<d&&!v;N+=y){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let b=0;for(let L=0;L<f;L++)if(c.get(L,N))(b&1)===1&&b++,E[b]++;else if(b&1)E[b]++;else if(b===4)if(Rt.foundPatternCross(E)){if(this.handlePossibleCenter(E,N,L,l)===!0)if(y=2,this.hasSkipped===!0)v=this.haveMultiplyConfirmedCenters();else{const G=this.findRowSkip();G>E[2]&&(N+=G-E[2]-y,L=f-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,b=3;continue}b=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,b=3;else E[++b]++;Rt.foundPatternCross(E)&&this.handlePossibleCenter(E,N,f,l)===!0&&(y=E[0],this.hasSkipped&&(v=this.haveMultiplyConfirmedCenters()))}const A=this.selectBestPatterns();return pe.orderBestPatterns(A),new Xx(A)}static centerFromEnd(i,o){return o-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let o=0;for(let d=0;d<5;d++){const f=i[d];if(f===0)return!1;o+=f}if(o<7)return!1;const l=o/7,c=l/2;return Math.abs(l-i[0])<c&&Math.abs(l-i[1])<c&&Math.abs(3*l-i[2])<3*c&&Math.abs(l-i[3])<c&&Math.abs(l-i[4])<c}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,o,l,c){const d=this.getCrossCheckStateCount();let f=0;const y=this.image;for(;i>=f&&o>=f&&y.get(o-f,i-f);)d[2]++,f++;if(i<f||o<f)return!1;for(;i>=f&&o>=f&&!y.get(o-f,i-f)&&d[1]<=l;)d[1]++,f++;if(i<f||o<f||d[1]>l)return!1;for(;i>=f&&o>=f&&y.get(o-f,i-f)&&d[0]<=l;)d[0]++,f++;if(d[0]>l)return!1;const v=y.getHeight(),E=y.getWidth();for(f=1;i+f<v&&o+f<E&&y.get(o+f,i+f);)d[2]++,f++;if(i+f>=v||o+f>=E)return!1;for(;i+f<v&&o+f<E&&!y.get(o+f,i+f)&&d[3]<l;)d[3]++,f++;if(i+f>=v||o+f>=E||d[3]>=l)return!1;for(;i+f<v&&o+f<E&&y.get(o+f,i+f)&&d[4]<l;)d[4]++,f++;if(d[4]>=l)return!1;const A=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(A-c)<2*c&&Rt.foundPatternCross(d)}crossCheckVertical(i,o,l,c){const d=this.image,f=d.getHeight(),y=this.getCrossCheckStateCount();let v=i;for(;v>=0&&d.get(o,v);)y[2]++,v--;if(v<0)return NaN;for(;v>=0&&!d.get(o,v)&&y[1]<=l;)y[1]++,v--;if(v<0||y[1]>l)return NaN;for(;v>=0&&d.get(o,v)&&y[0]<=l;)y[0]++,v--;if(y[0]>l)return NaN;for(v=i+1;v<f&&d.get(o,v);)y[2]++,v++;if(v===f)return NaN;for(;v<f&&!d.get(o,v)&&y[3]<l;)y[3]++,v++;if(v===f||y[3]>=l)return NaN;for(;v<f&&d.get(o,v)&&y[4]<l;)y[4]++,v++;if(y[4]>=l)return NaN;const E=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(E-c)>=2*c?NaN:Rt.foundPatternCross(y)?Rt.centerFromEnd(y,v):NaN}crossCheckHorizontal(i,o,l,c){const d=this.image,f=d.getWidth(),y=this.getCrossCheckStateCount();let v=i;for(;v>=0&&d.get(v,o);)y[2]++,v--;if(v<0)return NaN;for(;v>=0&&!d.get(v,o)&&y[1]<=l;)y[1]++,v--;if(v<0||y[1]>l)return NaN;for(;v>=0&&d.get(v,o)&&y[0]<=l;)y[0]++,v--;if(y[0]>l)return NaN;for(v=i+1;v<f&&d.get(v,o);)y[2]++,v++;if(v===f)return NaN;for(;v<f&&!d.get(v,o)&&y[3]<l;)y[3]++,v++;if(v===f||y[3]>=l)return NaN;for(;v<f&&d.get(v,o)&&y[4]<l;)y[4]++,v++;if(y[4]>=l)return NaN;const E=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(E-c)>=c?NaN:Rt.foundPatternCross(y)?Rt.centerFromEnd(y,v):NaN}handlePossibleCenter(i,o,l,c){const d=i[0]+i[1]+i[2]+i[3]+i[4];let f=Rt.centerFromEnd(i,l),y=this.crossCheckVertical(o,Math.floor(f),i[2],d);if(!isNaN(y)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(y),i[2],d),!isNaN(f)&&(!c||this.crossCheckDiagonal(Math.floor(y),Math.floor(f),i[2],d)))){const v=d/7;let E=!1;const A=this.possibleCenters;for(let N=0,b=A.length;N<b;N++){const L=A[N];if(L.aboutEquals(v,y,f)){A[N]=L.combineEstimate(y,f,v),E=!0;break}}if(!E){const N=new yu(f,y,v);A.push(N),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(N)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=Rt.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,o=0;const l=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=Rt.CENTER_QUORUM&&(i++,o+=f.getEstimatedModuleSize());if(i<3)return!1;const c=o/l;let d=0;for(const f of this.possibleCenters)d+=Math.abs(f.getEstimatedModuleSize()-c);return d<=.05*o}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new z;const o=this.possibleCenters;let l;if(i>3){let c=0,d=0;for(const v of this.possibleCenters){const E=v.getEstimatedModuleSize();c+=E,d+=E*E}l=c/i;let f=Math.sqrt(d/i-l*l);o.sort((v,E)=>{const A=Math.abs(E.getEstimatedModuleSize()-l),N=Math.abs(v.getEstimatedModuleSize()-l);return A<N?-1:A>N?1:0});const y=Math.max(.2*l,f);for(let v=0;v<o.length&&o.length>3;v++){const E=o[v];Math.abs(E.getEstimatedModuleSize()-l)>y&&(o.splice(v,1),v--)}}if(o.length>3){let c=0;for(const d of o)c+=d.getEstimatedModuleSize();l=c/o.length,o.sort((d,f)=>{if(f.getCount()===d.getCount()){const y=Math.abs(f.getEstimatedModuleSize()-l),v=Math.abs(d.getEstimatedModuleSize()-l);return y<v?1:y>v?-1:0}else return f.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}Rt.CENTER_QUORUM=2,Rt.MIN_SKIP=3,Rt.MAX_MODULES=57;class Ws{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(H.NEED_RESULT_POINT_CALLBACK);const l=new Rt(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const o=i.getTopLeft(),l=i.getTopRight(),c=i.getBottomLeft(),d=this.calculateModuleSize(o,l,c);if(d<1)throw new z("No pattern found in proccess finder.");const f=Ws.computeDimension(o,l,c,d),y=ye.getProvisionalVersionForDimension(f),v=y.getDimensionForVersion()-7;let E=null;if(y.getAlignmentPatternCenters().length>0){const L=l.getX()-o.getX()+c.getX(),U=l.getY()-o.getY()+c.getY(),G=1-3/v,W=Math.floor(o.getX()+G*(L-o.getX())),X=Math.floor(o.getY()+G*(U-o.getY()));for(let te=4;te<=16;te<<=1)try{E=this.findAlignmentInRegion(d,W,X,te);break}catch(ne){if(!(ne instanceof z))throw ne}}const A=Ws.createTransform(o,l,c,E,f),N=Ws.sampleGrid(this.image,A,f);let b;return E===null?b=[c,o,l]:b=[c,o,l,E],new ra(N,b)}static createTransform(i,o,l,c,d){const f=d-3.5;let y,v,E,A;return c!==null?(y=c.getX(),v=c.getY(),E=f-3,A=E):(y=o.getX()-i.getX()+l.getX(),v=o.getY()-i.getY()+l.getY(),E=f,A=f),Bn.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,E,A,3.5,f,i.getX(),i.getY(),o.getX(),o.getY(),y,v,l.getX(),l.getY())}static sampleGrid(i,o,l){return Ir.getInstance().sampleGridWithTransform(i,l,l,o)}static computeDimension(i,o,l,c){const d=Oe.round(pe.distance(i,o)/c),f=Oe.round(pe.distance(i,l)/c);let y=Math.floor((d+f)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new z("Dimensions could be not found.")}return y}calculateModuleSize(i,o,l){return(this.calculateModuleSizeOneWay(i,o)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(o.getX()),Math.floor(o.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?c/7:isNaN(c)?l/7:(l+c)/14}sizeOfBlackWhiteBlackRunBothWays(i,o,l,c){let d=this.sizeOfBlackWhiteBlackRun(i,o,l,c),f=1,y=i-(l-i);y<0?(f=i/(i-y),y=0):y>=this.image.getWidth()&&(f=(this.image.getWidth()-1-i)/(y-i),y=this.image.getWidth()-1);let v=Math.floor(o-(c-o)*f);return f=1,v<0?(f=o/(o-v),v=0):v>=this.image.getHeight()&&(f=(this.image.getHeight()-1-o)/(v-o),v=this.image.getHeight()-1),y=Math.floor(i+(y-i)*f),d+=this.sizeOfBlackWhiteBlackRun(i,o,y,v),d-1}sizeOfBlackWhiteBlackRun(i,o,l,c){const d=Math.abs(c-o)>Math.abs(l-i);if(d){let L=i;i=o,o=L,L=l,l=c,c=L}const f=Math.abs(l-i),y=Math.abs(c-o);let v=-f/2;const E=i<l?1:-1,A=o<c?1:-1;let N=0;const b=l+E;for(let L=i,U=o;L!==b;L+=E){const G=d?U:L,W=d?L:U;if(N===1===this.image.get(G,W)){if(N===2)return Oe.distance(L,U,i,o);N++}if(v+=y,v>0){if(U===c)break;U+=A,v-=f}}return N===2?Oe.distance(l+E,c,i,o):NaN}findAlignmentInRegion(i,o,l,c){const d=Math.floor(c*i),f=Math.max(0,o-d),y=Math.min(this.image.getWidth()-1,o+d);if(y-f<i*3)throw new z("Alignment top exceeds estimated module size.");const v=Math.max(0,l-d),E=Math.min(this.image.getHeight()-1,l+d);if(E-v<i*3)throw new z("Alignment bottom exceeds estimated module size.");return new la(this.image,f,v,y-f,E-v,i,this.resultPointCallback).find()}}class kr{constructor(){this.decoder=new jx}getDecoder(){return this.decoder}decode(i,o){let l,c;if(o!=null&&o.get(H.PURE_BARCODE)!==void 0){const v=kr.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(v,o),c=kr.NO_POINTS}else{const v=new Ws(i.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(v.getBits(),o),c=v.getPoints()}l.getOther()instanceof th&&l.getOther().applyMirroredCorrection(c);const d=new ot(l.getText(),l.getRawBytes(),void 0,c,ge.QR_CODE,void 0),f=l.getByteSegments();f!==null&&d.putMetadata(Nt.BYTE_SEGMENTS,f);const y=l.getECLevel();return y!==null&&d.putMetadata(Nt.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(d.putMetadata(Nt.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(Nt.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(o===null||l===null)throw new z;const c=this.moduleSize(o,i);let d=o[1],f=l[1],y=o[0],v=l[0];if(y>=v||d>=f)throw new z;if(f-d!==v-y&&(v=y+(f-d),v>=i.getWidth()))throw new z;const E=Math.round((v-y+1)/c),A=Math.round((f-d+1)/c);if(E<=0||A<=0)throw new z;if(A!==E)throw new z;const N=Math.floor(c/2);d+=N,y+=N;const b=y+Math.floor((E-1)*c)-v;if(b>0){if(b>N)throw new z;y-=b}const L=d+Math.floor((A-1)*c)-f;if(L>0){if(L>N)throw new z;d-=L}const U=new ue(E,A);for(let G=0;G<A;G++){const W=d+Math.floor(G*c);for(let X=0;X<E;X++)i.get(y+Math.floor(X*c),W)&&U.set(X,G)}return U}static moduleSize(i,o){const l=o.getHeight(),c=o.getWidth();let d=i[0],f=i[1],y=!0,v=0;for(;d<c&&f<l;){if(y!==o.get(d,f)){if(++v===5)break;y=!y}d++,f++}if(d===c||f===l)throw new z;return(d-i[0])/7}}kr.NO_POINTS=new Array;class Ae{PDF417Common(){}static getBitCountSum(i){return Oe.sum(i)}static toIntArray(i){if(i==null||!i.length)return Ae.EMPTY_INT_ARRAY;const o=new Int32Array(i.length);let l=0;for(const c of i)o[l++]=c;return o}static getCodeword(i){const o=k.binarySearch(Ae.SYMBOL_TABLE,i&262143);return o<0?-1:(Ae.CODEWORD_TABLE[o]-1)%Ae.NUMBER_OF_CODEWORDS}}Ae.NUMBER_OF_CODEWORDS=929,Ae.MAX_CODEWORDS_IN_BARCODE=Ae.NUMBER_OF_CODEWORDS-1,Ae.MIN_ROWS_IN_BARCODE=3,Ae.MAX_ROWS_IN_BARCODE=90,Ae.MODULES_IN_CODEWORD=17,Ae.MODULES_IN_STOP_PATTERN=18,Ae.BARS_IN_MODULE=8,Ae.EMPTY_INT_ARRAY=new Int32Array([]),Ae.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ae.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Jx{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class be{static detectMultiple(i,o,l){let c=i.getBlackMatrix(),d=be.detect(l,c);return d.length||(c=c.clone(),c.rotate180(),d=be.detect(l,c)),new Jx(c,d)}static detect(i,o){const l=new Array;let c=0,d=0,f=!1;for(;c<o.getHeight();){const y=be.findVertices(o,c,d);if(y[0]==null&&y[3]==null){if(!f)break;f=!1,d=0;for(const v of l)v[1]!=null&&(c=Math.trunc(Math.max(c,v[1].getY()))),v[3]!=null&&(c=Math.max(c,Math.trunc(v[3].getY())));c+=be.ROW_STEP;continue}if(f=!0,l.push(y),!i)break;y[2]!=null?(d=Math.trunc(y[2].getX()),c=Math.trunc(y[2].getY())):(d=Math.trunc(y[4].getX()),c=Math.trunc(y[4].getY()))}return l}static findVertices(i,o,l){const c=i.getHeight(),d=i.getWidth(),f=new Array(8);return be.copyToResult(f,be.findRowsWithPattern(i,c,d,o,l,be.START_PATTERN),be.INDEXES_START_PATTERN),f[4]!=null&&(l=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY())),be.copyToResult(f,be.findRowsWithPattern(i,c,d,o,l,be.STOP_PATTERN),be.INDEXES_STOP_PATTERN),f}static copyToResult(i,o,l){for(let c=0;c<l.length;c++)i[l[c]]=o[c]}static findRowsWithPattern(i,o,l,c,d,f){const y=new Array(4);let v=!1;const E=new Int32Array(f.length);for(;c<o;c+=be.ROW_STEP){let N=be.findGuardPattern(i,d,c,l,!1,f,E);if(N!=null){for(;c>0;){const b=be.findGuardPattern(i,d,--c,l,!1,f,E);if(b!=null)N=b;else{c++;break}}y[0]=new pe(N[0],c),y[1]=new pe(N[1],c),v=!0;break}}let A=c+1;if(v){let N=0,b=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;A<o;A++){const L=be.findGuardPattern(i,b[0],A,l,!1,f,E);if(L!=null&&Math.abs(b[0]-L[0])<be.MAX_PATTERN_DRIFT&&Math.abs(b[1]-L[1])<be.MAX_PATTERN_DRIFT)b=L,N=0;else{if(N>be.SKIPPED_ROW_COUNT_MAX)break;N++}}A-=N+1,y[2]=new pe(b[0],A),y[3]=new pe(b[1],A)}return A-c<be.BARCODE_MIN_HEIGHT&&k.fill(y,null),y}static findGuardPattern(i,o,l,c,d,f,y){k.fillWithin(y,0,y.length,0);let v=o,E=0;for(;i.get(v,l)&&v>0&&E++<be.MAX_PIXEL_DRIFT;)v--;let A=v,N=0,b=f.length;for(let L=d;A<c;A++)if(i.get(A,l)!==L)y[N]++;else{if(N===b-1){if(be.patternMatchVariance(y,f,be.MAX_INDIVIDUAL_VARIANCE)<be.MAX_AVG_VARIANCE)return new Int32Array([v,A]);v+=y[0]+y[1],M.arraycopy(y,2,y,0,N-1),y[N-1]=0,y[N]=0,N--}else N++;y[N]=1,L=!L}return N===b-1&&be.patternMatchVariance(y,f,be.MAX_INDIVIDUAL_VARIANCE)<be.MAX_AVG_VARIANCE?new Int32Array([v,A-1]):null}static patternMatchVariance(i,o,l){let c=i.length,d=0,f=0;for(let E=0;E<c;E++)d+=i[E],f+=o[E];if(d<f)return 1/0;let y=d/f;l*=y;let v=0;for(let E=0;E<c;E++){let A=i[E],N=o[E]*y,b=A>N?A-N:N-A;if(b>l)return 1/0;v+=b}return v/d}}be.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),be.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),be.MAX_AVG_VARIANCE=.42,be.MAX_INDIVIDUAL_VARIANCE=.8,be.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),be.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),be.MAX_PIXEL_DRIFT=3,be.MAX_PATTERN_DRIFT=5,be.SKIPPED_ROW_COUNT_MAX=25,be.ROW_STEP=5,be.BARCODE_MIN_HEIGHT=10;class Dt{constructor(i,o){if(o.length===0)throw new _;this.field=i;let l=o.length;if(l>1&&o[0]===0){let c=1;for(;c<l&&o[c]===0;)c++;c===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-c),M.arraycopy(o,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let c=0;for(let d of this.coefficients)c=this.field.add(c,d);return c}let o=this.coefficients[0],l=this.coefficients.length;for(let c=1;c<l;c++)o=this.field.add(this.field.multiply(i,o),this.coefficients[c]);return o}add(i){if(!this.field.equals(i.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,l=i.coefficients;if(o.length>l.length){let f=o;o=l,l=f}let c=new Int32Array(l.length),d=l.length-o.length;M.arraycopy(l,0,c,0,d);for(let f=d;f<l.length;f++)c[f]=this.field.add(o[f-d],l[f]);return new Dt(this.field,c)}subtract(i){if(!this.field.equals(i.field))throw new _("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof Dt?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new Dt(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,c=i.coefficients,d=c.length,f=new Int32Array(l+d-1);for(let y=0;y<l;y++){let v=o[y];for(let E=0;E<d;E++)f[y+E]=this.field.add(f[y+E],this.field.multiply(v,c[E]))}return new Dt(this.field,f)}negative(){let i=this.coefficients.length,o=new Int32Array(i);for(let l=0;l<i;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new Dt(this.field,o)}multiplyScalar(i){if(i===0)return new Dt(this.field,new Int32Array([0]));if(i===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let c=0;c<o;c++)l[c]=this.field.multiply(this.coefficients[c],i);return new Dt(this.field,l)}multiplyByMonomial(i,o){if(i<0)throw new _;if(o===0)return new Dt(this.field,new Int32Array([0]));let l=this.coefficients.length,c=new Int32Array(l+i);for(let d=0;d<l;d++)c[d]=this.field.multiply(this.coefficients[d],o);return new Dt(this.field,c)}toString(){let i=new le;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(o===0||l!==1)&&i.append(l),o!==0&&(o===1?i.append("x"):(i.append("x^"),i.append(o))))}return i.toString()}}class Zx{add(i,o){return(i+o)%this.modulus}subtract(i,o){return(this.modulus+i-o)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new _;return this.logTable[i]}inverse(i){if(i===0)throw new ta;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class xu extends Zx{constructor(i,o){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let c=0;c<i;c++)this.expTable[c]=l,l=l*o%i;for(let c=0;c<i-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Dt(this,new Int32Array([0])),this.one=new Dt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new _;if(o===0)return this.zero;let l=new Int32Array(i+1);return l[0]=o,new Dt(this,l)}}xu.PDF417_GF=new xu(Ae.NUMBER_OF_CODEWORDS,3);class nh{constructor(){this.field=xu.PDF417_GF}decode(i,o,l){let c=new Dt(this.field,i),d=new Int32Array(o),f=!1;for(let U=o;U>0;U--){let G=c.evaluateAt(this.field.exp(U));d[o-U]=G,G!==0&&(f=!0)}if(!f)return 0;let y=this.field.getOne();if(l!=null)for(const U of l){let G=this.field.exp(i.length-1-U),W=new Dt(this.field,new Int32Array([this.field.subtract(0,G),1]));y=y.multiply(W)}let v=new Dt(this.field,d),E=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),v,o),A=E[0],N=E[1],b=this.findErrorLocations(A),L=this.findErrorMagnitudes(N,A,b);for(let U=0;U<b.length;U++){let G=i.length-1-this.field.log(b[U]);if(G<0)throw T.getChecksumInstance();i[G]=this.field.subtract(i[G],L[U])}return b.length}runEuclideanAlgorithm(i,o,l){if(i.getDegree()<o.getDegree()){let b=i;i=o,o=b}let c=i,d=o,f=this.field.getZero(),y=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let b=c,L=f;if(c=d,f=y,c.isZero())throw T.getChecksumInstance();d=b;let U=this.field.getZero(),G=c.getCoefficient(c.getDegree()),W=this.field.inverse(G);for(;d.getDegree()>=c.getDegree()&&!d.isZero();){let X=d.getDegree()-c.getDegree(),te=this.field.multiply(d.getCoefficient(d.getDegree()),W);U=U.add(this.field.buildMonomial(X,te)),d=d.subtract(c.multiplyByMonomial(X,te))}y=U.multiply(f).subtract(L).negative()}let v=y.getCoefficient(0);if(v===0)throw T.getChecksumInstance();let E=this.field.inverse(v),A=y.multiply(E),N=d.multiply(E);return[A,N]}findErrorLocations(i){let o=i.getDegree(),l=new Int32Array(o),c=0;for(let d=1;d<this.field.getSize()&&c<o;d++)i.evaluateAt(d)===0&&(l[c]=this.field.inverse(d),c++);if(c!==o)throw T.getChecksumInstance();return l}findErrorMagnitudes(i,o,l){let c=o.getDegree(),d=new Int32Array(c);for(let E=1;E<=c;E++)d[c-E]=this.field.multiply(E,o.getCoefficient(E));let f=new Dt(this.field,d),y=l.length,v=new Int32Array(y);for(let E=0;E<y;E++){let A=this.field.inverse(l[E]),N=this.field.subtract(0,i.evaluateAt(A)),b=this.field.inverse(f.evaluateAt(A));v[E]=this.field.multiply(N,b)}return v}}class ui{constructor(i,o,l,c,d){i instanceof ui?this.constructor_2(i):this.constructor_1(i,o,l,c,d)}constructor_1(i,o,l,c,d){const f=o==null||l==null,y=c==null||d==null;if(f&&y)throw new z;f?(o=new pe(0,c.getY()),l=new pe(0,d.getY())):y&&(c=new pe(i.getWidth()-1,o.getY()),d=new pe(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=o,this.bottomLeft=l,this.topRight=c,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(c.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),c.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,o){return i==null?o:o==null?i:new ui(i.image,i.topLeft,i.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(i,o,l){let c=this.topLeft,d=this.bottomLeft,f=this.topRight,y=this.bottomRight;if(i>0){let v=l?this.topLeft:this.topRight,E=Math.trunc(v.getY()-i);E<0&&(E=0);let A=new pe(v.getX(),E);l?c=A:f=A}if(o>0){let v=l?this.bottomLeft:this.bottomRight,E=Math.trunc(v.getY()+o);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let A=new pe(v.getX(),E);l?d=A:y=A}return new ui(this.image,c,d,f,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Qx{constructor(i,o,l,c){this.columnCount=i,this.errorCorrectionLevel=c,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ks{constructor(){this.buffer=""}static form(i,o){let l=-1;function c(f,y,v,E,A,N){if(f==="%%")return"%";if(o[++l]===void 0)return;f=E?parseInt(E.substr(1)):void 0;let b=A?parseInt(A.substr(1)):void 0,L;switch(N){case"s":L=o[l];break;case"c":L=o[l][0];break;case"f":L=parseFloat(o[l]).toFixed(f);break;case"p":L=parseFloat(o[l]).toPrecision(f);break;case"e":L=parseFloat(o[l]).toExponential(f);break;case"x":L=parseInt(o[l]).toString(b||16);break;case"d":L=parseFloat(parseInt(o[l],b||10).toPrecision(f)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(b);let U=parseInt(v),G=v&&v[0]+""=="0"?"0":" ";for(;L.length<U;)L=y!==void 0?L+G:G+L;return L}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,c)}format(i,...o){this.buffer+=Ks.form(i,o)}toString(){return this.buffer}}class $s{constructor(i){this.boundingBox=new ui(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let o=this.getCodeword(i);if(o!=null)return o;for(let l=1;l<$s.MAX_NEARBY_DISTANCE;l++){let c=this.imageRowToCodewordIndex(i)-l;if(c>=0&&(o=this.codewords[c],o!=null)||(c=this.imageRowToCodewordIndex(i)+l,c<this.codewords.length&&(o=this.codewords[c],o!=null)))return o}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,o){this.codewords[this.imageRowToCodewordIndex(i)]=o}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new Ks;let o=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",o++);continue}i.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return i.toString()}}$s.MAX_NEARBY_DISTANCE=5;class Ys{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let o=this.values.get(i);o==null&&(o=0),o++,this.values.set(i,o)}getValue(){let i=-1,o=new Array;for(const[l,c]of this.values.entries()){const d={getKey:()=>l,getValue:()=>c};d.getValue()>i?(i=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===i&&o.push(d.getKey())}return Ae.toIntArray(o)}getConfidence(i){return this.values.get(i)}}class rh extends $s{constructor(i,o){super(i),this._isLeft=o}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,i);let l=this.getBoundingBox(),c=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),y=this.imageRowToCodewordIndex(Math.trunc(d.getY())),v=-1,E=1,A=0;for(let N=f;N<y;N++){if(o[N]==null)continue;let b=o[N],L=b.getRowNumber()-v;if(L===0)A++;else if(L===1)E=Math.max(E,A),A=1,v=b.getRowNumber();else if(L<0||b.getRowNumber()>=i.getRowCount()||L>N)o[N]=null;else{let U;E>2?U=(E-2)*L:U=L;let G=U>=N;for(let W=1;W<=U&&!G;W++)G=o[N-W]!=null;G?o[N]=null:(v=b.getRowNumber(),A=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let o=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let c=l.getRowNumber();if(c>=o.length)continue;o[c]++}return o}adjustIncompleteIndicatorColumnRowNumbers(i){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),c=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),y=this.getCodewords(),v=-1;for(let E=d;E<f;E++){if(y[E]==null)continue;let A=y[E];A.setRowNumberAsRowIndicatorColumn();let N=A.getRowNumber()-v;N===0||(N===1?v=A.getRowNumber():A.getRowNumber()>=i.getRowCount()?y[E]=null:v=A.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),o=new Ys,l=new Ys,c=new Ys,d=new Ys;for(let y of i){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let v=y.getValue()%30,E=y.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:l.setValue(v*3+1);break;case 1:d.setValue(v/3),c.setValue(v%3);break;case 2:o.setValue(v+1);break}}if(o.getValue().length===0||l.getValue().length===0||c.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+c.getValue()[0]<Ae.MIN_ROWS_IN_BARCODE||l.getValue()[0]+c.getValue()[0]>Ae.MAX_ROWS_IN_BARCODE)return null;let f=new Qx(o.getValue()[0],l.getValue()[0],c.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(i,f),f}removeIncorrectCodewords(i,o){for(let l=0;l<i.length;l++){let c=i[l];if(i[l]==null)continue;let d=c.getValue()%30,f=c.getRowNumber();if(f>o.getRowCount()){i[l]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(i[l]=null);break;case 2:d+1!==o.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class js{constructor(i,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=Ae.MAX_CODEWORDS_IN_BARCODE,o;do o=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let c=0;c<l.length;c++)l[c]!=null&&(l[c].hasValidRowNumber()||this.adjustRowNumbers(o,c,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&o[l]!=null&&i[l].getRowNumber()===o[l].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let d=this.detectionResultColumns[c].getCodewords()[l];d!=null&&(d.setRowNumber(i[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let c=o[l].getRowNumber(),d=0;for(let f=this.barcodeColumnCount+1;f>0&&d<this.ADJUST_ROW_NUMBER_SKIP;f--){let y=this.detectionResultColumns[f].getCodewords()[l];y!=null&&(d=js.adjustRowNumberIfValid(c,d,y),y.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let c=o[l].getRowNumber(),d=0;for(let f=1;f<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;f++){let y=this.detectionResultColumns[f].getCodewords()[l];y!=null&&(d=js.adjustRowNumberIfValid(c,d,y),y.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),o=0):++o),o}adjustRowNumbers(i,o,l){if(!this.detectionResultColumns[i-1])return;let c=l[o],d=this.detectionResultColumns[i-1].getCodewords(),f=d;this.detectionResultColumns[i+1]!=null&&(f=this.detectionResultColumns[i+1].getCodewords());let y=new Array(14);y[2]=d[o],y[3]=f[o],o>0&&(y[0]=l[o-1],y[4]=d[o-1],y[5]=f[o-1]),o>1&&(y[8]=l[o-2],y[10]=d[o-2],y[11]=f[o-2]),o<l.length-1&&(y[1]=l[o+1],y[6]=d[o+1],y[7]=f[o+1]),o<l.length-2&&(y[9]=l[o+2],y[12]=d[o+2],y[13]=f[o+2]);for(let v of y)if(js.adjustRowNumber(c,v))return}static adjustRowNumber(i,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===i.getBucket()?(i.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,o){this.detectionResultColumns[i]=o}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new Ks;for(let l=0;l<i.getCodewords().length;l++){o.format("CW %3d:",l);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[c].getCodewords()[l];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class Xs{constructor(i,o,l,c){this.rowNumber=Xs.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==Xs.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}Xs.BARCODE_ROW_UNKNOWN=-1;class sn{static initialize(){for(let i=0;i<Ae.SYMBOL_TABLE.length;i++){let o=Ae.SYMBOL_TABLE[i],l=o&1;for(let c=0;c<Ae.BARS_IN_MODULE;c++){let d=0;for(;(o&1)===l;)d+=1,o>>=1;l=o&1,sn.RATIOS_TABLE[i]||(sn.RATIOS_TABLE[i]=new Array(Ae.BARS_IN_MODULE)),sn.RATIOS_TABLE[i][Ae.BARS_IN_MODULE-c-1]=Math.fround(d/Ae.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let o=sn.getDecodedCodewordValue(sn.sampleBitCounts(i));return o!==-1?o:sn.getClosestDecodedValue(i)}static sampleBitCounts(i){let o=Oe.sum(i),l=new Int32Array(Ae.BARS_IN_MODULE),c=0,d=0;for(let f=0;f<Ae.MODULES_IN_CODEWORD;f++){let y=o/(2*Ae.MODULES_IN_CODEWORD)+f*o/Ae.MODULES_IN_CODEWORD;d+i[c]<=y&&(d+=i[c],c++),l[c]++}return l}static getDecodedCodewordValue(i){let o=sn.getBitValue(i);return Ae.getCodeword(o)===-1?-1:o}static getBitValue(i){let o=0;for(let l=0;l<i.length;l++)for(let c=0;c<i[l];c++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(i){let o=Oe.sum(i),l=new Array(Ae.BARS_IN_MODULE);if(o>1)for(let f=0;f<l.length;f++)l[f]=Math.fround(i[f]/o);let c=na.MAX_VALUE,d=-1;this.bSymbolTableReady||sn.initialize();for(let f=0;f<sn.RATIOS_TABLE.length;f++){let y=0,v=sn.RATIOS_TABLE[f];for(let E=0;E<Ae.BARS_IN_MODULE;E++){let A=Math.fround(v[E]-l[E]);if(y+=Math.fround(A*A),y>=c)break}y<c&&(c=y,d=Ae.SYMBOL_TABLE[f])}return d}}sn.bSymbolTableReady=!1,sn.RATIOS_TABLE=new Array(Ae.SYMBOL_TABLE.length).map(I=>new Array(Ae.BARS_IN_MODULE));class ih{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class sh{static parseLong(i,o=void 0){return parseInt(i,o)}}class oh extends p{}oh.kind="NullPointerException";class ew{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,o,l){if(i==null)throw new oh;if(o<0||o>i.length||l<0||o+l>i.length||o+l<0)throw new V;if(l===0)return;for(let c=0;c<l;c++)this.write(i[o+c])}flush(){}close(){}}class tw extends p{}class nw extends ew{constructor(i=32){if(super(),this.count=0,i<0)throw new _("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new tw;l=R.MAX_VALUE}this.buf=k.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,o,l){if(o<0||o>i.length||l<0||o+l-i.length>0)throw new V;this.ensureCapacity(this.count+l),M.arraycopy(i,o,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return k.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var ze;(function(I){I[I.ALPHA=0]="ALPHA",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.PUNCT=3]="PUNCT",I[I.ALPHA_SHIFT=4]="ALPHA_SHIFT",I[I.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ze||(ze={}));function ah(){if(typeof window<"u")return window.BigInt||null;if(typeof Qs<"u")return Qs.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ua;function Pr(I){if(typeof ua>"u"&&(ua=ah()),ua===null)throw new Error("BigInt is not supported!");return ua(I)}function rw(){let I=[];I[0]=Pr(1);let i=Pr(900);I[1]=i;for(let o=2;o<16;o++)I[o]=I[o-1]*i;return I}class j{static decode(i,o){let l=new le(""),c=q.ISO8859_1;l.enableDecoding(c);let d=1,f=i[d++],y=new ih;for(;d<i[0];){switch(f){case j.TEXT_COMPACTION_MODE_LATCH:d=j.textCompaction(i,d,l);break;case j.BYTE_COMPACTION_MODE_LATCH:case j.BYTE_COMPACTION_MODE_LATCH_6:d=j.byteCompaction(f,i,c,d,l);break;case j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[d++]);break;case j.NUMERIC_COMPACTION_MODE_LATCH:d=j.numericCompaction(i,d,l);break;case j.ECI_CHARSET:q.getCharacterSetECIByValue(i[d++]);break;case j.ECI_GENERAL_PURPOSE:d+=2;break;case j.ECI_USER_DEFINED:d++;break;case j.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=j.decodeMacroBlock(i,d,y);break;case j.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case j.MACRO_PDF417_TERMINATOR:throw new B;default:d--,d=j.textCompaction(i,d,l);break}if(d<i.length)f=i[d++];else throw B.getFormatInstance()}if(l.length()===0)throw B.getFormatInstance();let v=new Gs(null,l.toString(),null,o);return v.setOther(y),v}static decodeMacroBlock(i,o,l){if(o+j.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw B.getFormatInstance();let c=new Int32Array(j.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<j.NUMBER_OF_SEQUENCE_CODEWORDS;y++,o++)c[y]=i[o];l.setSegmentIndex(R.parseInt(j.decodeBase900toBase10(c,j.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new le;o=j.textCompaction(i,o,d),l.setFileId(d.toString());let f=-1;for(i[o]===j.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=o+1);o<i[0];)switch(i[o]){case j.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,i[o]){case j.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new le;o=j.textCompaction(i,o+1,y),l.setFileName(y.toString());break;case j.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let v=new le;o=j.textCompaction(i,o+1,v),l.setSender(v.toString());break;case j.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new le;o=j.textCompaction(i,o+1,E),l.setAddressee(E.toString());break;case j.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let A=new le;o=j.numericCompaction(i,o+1,A),l.setSegmentCount(R.parseInt(A.toString()));break;case j.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let N=new le;o=j.numericCompaction(i,o+1,N),l.setTimestamp(sh.parseLong(N.toString()));break;case j.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let b=new le;o=j.numericCompaction(i,o+1,b),l.setChecksum(R.parseInt(b.toString()));break;case j.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let L=new le;o=j.numericCompaction(i,o+1,L),l.setFileSize(sh.parseLong(L.toString()));break;default:throw B.getFormatInstance()}break;case j.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(f!==-1){let y=o-f;l.isLastSegment()&&y--,l.setOptionalData(k.copyOfRange(i,f,f+y))}return o}static textCompaction(i,o,l){let c=new Int32Array((i[0]-o)*2),d=new Int32Array((i[0]-o)*2),f=0,y=!1;for(;o<i[0]&&!y;){let v=i[o++];if(v<j.TEXT_COMPACTION_MODE_LATCH)c[f]=v/30,c[f+1]=v%30,f+=2;else switch(v){case j.TEXT_COMPACTION_MODE_LATCH:c[f++]=j.TEXT_COMPACTION_MODE_LATCH;break;case j.BYTE_COMPACTION_MODE_LATCH:case j.BYTE_COMPACTION_MODE_LATCH_6:case j.NUMERIC_COMPACTION_MODE_LATCH:case j.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case j.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case j.MACRO_PDF417_TERMINATOR:o--,y=!0;break;case j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[f]=j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,v=i[o++],d[f]=v,f++;break}}return j.decodeTextCompaction(c,d,f,l),o}static decodeTextCompaction(i,o,l,c){let d=ze.ALPHA,f=ze.ALPHA,y=0;for(;y<l;){let v=i[y],E="";switch(d){case ze.ALPHA:if(v<26)E=String.fromCharCode(65+v);else switch(v){case 26:E=" ";break;case j.LL:d=ze.LOWER;break;case j.ML:d=ze.MIXED;break;case j.PS:f=d,d=ze.PUNCT_SHIFT;break;case j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[y]);break;case j.TEXT_COMPACTION_MODE_LATCH:d=ze.ALPHA;break}break;case ze.LOWER:if(v<26)E=String.fromCharCode(97+v);else switch(v){case 26:E=" ";break;case j.AS:f=d,d=ze.ALPHA_SHIFT;break;case j.ML:d=ze.MIXED;break;case j.PS:f=d,d=ze.PUNCT_SHIFT;break;case j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[y]);break;case j.TEXT_COMPACTION_MODE_LATCH:d=ze.ALPHA;break}break;case ze.MIXED:if(v<j.PL)E=j.MIXED_CHARS[v];else switch(v){case j.PL:d=ze.PUNCT;break;case 26:E=" ";break;case j.LL:d=ze.LOWER;break;case j.AL:d=ze.ALPHA;break;case j.PS:f=d,d=ze.PUNCT_SHIFT;break;case j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[y]);break;case j.TEXT_COMPACTION_MODE_LATCH:d=ze.ALPHA;break}break;case ze.PUNCT:if(v<j.PAL)E=j.PUNCT_CHARS[v];else switch(v){case j.PAL:d=ze.ALPHA;break;case j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[y]);break;case j.TEXT_COMPACTION_MODE_LATCH:d=ze.ALPHA;break}break;case ze.ALPHA_SHIFT:if(d=f,v<26)E=String.fromCharCode(65+v);else switch(v){case 26:E=" ";break;case j.TEXT_COMPACTION_MODE_LATCH:d=ze.ALPHA;break}break;case ze.PUNCT_SHIFT:if(d=f,v<j.PAL)E=j.PUNCT_CHARS[v];else switch(v){case j.PAL:d=ze.ALPHA;break;case j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[y]);break;case j.TEXT_COMPACTION_MODE_LATCH:d=ze.ALPHA;break}break}E!==""&&c.append(E),y++}}static byteCompaction(i,o,l,c,d){let f=new nw,y=0,v=0,E=!1;switch(i){case j.BYTE_COMPACTION_MODE_LATCH:let A=new Int32Array(6),N=o[c++];for(;c<o[0]&&!E;)switch(A[y++]=N,v=900*v+N,N=o[c++],N){case j.TEXT_COMPACTION_MODE_LATCH:case j.BYTE_COMPACTION_MODE_LATCH:case j.NUMERIC_COMPACTION_MODE_LATCH:case j.BYTE_COMPACTION_MODE_LATCH_6:case j.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case j.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case j.MACRO_PDF417_TERMINATOR:c--,E=!0;break;default:if(y%5===0&&y>0){for(let b=0;b<6;++b)f.write(Number(Pr(v)>>Pr(8*(5-b))));v=0,y=0}break}c===o[0]&&N<j.TEXT_COMPACTION_MODE_LATCH&&(A[y++]=N);for(let b=0;b<y;b++)f.write(A[b]);break;case j.BYTE_COMPACTION_MODE_LATCH_6:for(;c<o[0]&&!E;){let b=o[c++];if(b<j.TEXT_COMPACTION_MODE_LATCH)y++,v=900*v+b;else switch(b){case j.TEXT_COMPACTION_MODE_LATCH:case j.BYTE_COMPACTION_MODE_LATCH:case j.NUMERIC_COMPACTION_MODE_LATCH:case j.BYTE_COMPACTION_MODE_LATCH_6:case j.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case j.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case j.MACRO_PDF417_TERMINATOR:c--,E=!0;break}if(y%5===0&&y>0){for(let L=0;L<6;++L)f.write(Number(Pr(v)>>Pr(8*(5-L))));v=0,y=0}}break}return d.append(Se.decode(f.toByteArray(),l)),c}static numericCompaction(i,o,l){let c=0,d=!1,f=new Int32Array(j.MAX_NUMERIC_CODEWORDS);for(;o<i[0]&&!d;){let y=i[o++];if(o===i[0]&&(d=!0),y<j.TEXT_COMPACTION_MODE_LATCH)f[c]=y,c++;else switch(y){case j.TEXT_COMPACTION_MODE_LATCH:case j.BYTE_COMPACTION_MODE_LATCH:case j.BYTE_COMPACTION_MODE_LATCH_6:case j.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case j.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case j.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(c%j.MAX_NUMERIC_CODEWORDS===0||y===j.NUMERIC_COMPACTION_MODE_LATCH||d)&&c>0&&(l.append(j.decodeBase900toBase10(f,c)),c=0)}return o}static decodeBase900toBase10(i,o){let l=Pr(0);for(let d=0;d<o;d++)l+=j.EXP900[o-d-1]*Pr(i[d]);let c=l.toString();if(c.charAt(0)!=="1")throw new B;return c.substring(1)}}j.TEXT_COMPACTION_MODE_LATCH=900,j.BYTE_COMPACTION_MODE_LATCH=901,j.NUMERIC_COMPACTION_MODE_LATCH=902,j.BYTE_COMPACTION_MODE_LATCH_6=924,j.ECI_USER_DEFINED=925,j.ECI_GENERAL_PURPOSE=926,j.ECI_CHARSET=927,j.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,j.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,j.MACRO_PDF417_TERMINATOR=922,j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,j.MAX_NUMERIC_CODEWORDS=15,j.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,j.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,j.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,j.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,j.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,j.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,j.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,j.PL=25,j.LL=27,j.AS=27,j.ML=28,j.AL=28,j.PS=29,j.PAL=29,j.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,j.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",j.EXP900=ah()?rw():[],j.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Re{constructor(){}static decode(i,o,l,c,d,f,y){let v=new ui(i,o,l,c,d),E=null,A=null,N;for(let U=!0;;U=!1){if(o!=null&&(E=Re.getRowIndicatorColumn(i,v,o,!0,f,y)),c!=null&&(A=Re.getRowIndicatorColumn(i,v,c,!1,f,y)),N=Re.merge(E,A),N==null)throw z.getNotFoundInstance();let G=N.getBoundingBox();if(U&&G!=null&&(G.getMinY()<v.getMinY()||G.getMaxY()>v.getMaxY()))v=G;else break}N.setBoundingBox(v);let b=N.getBarcodeColumnCount()+1;N.setDetectionResultColumn(0,E),N.setDetectionResultColumn(b,A);let L=E!=null;for(let U=1;U<=b;U++){let G=L?U:b-U;if(N.getDetectionResultColumn(G)!==void 0)continue;let W;G===0||G===b?W=new rh(v,G===0):W=new $s(v),N.setDetectionResultColumn(G,W);let X=-1,te=X;for(let ne=v.getMinY();ne<=v.getMaxY();ne++){if(X=Re.getStartColumn(N,G,ne,L),X<0||X>v.getMaxX()){if(te===-1)continue;X=te}let Z=Re.detectCodeword(i,v.getMinX(),v.getMaxX(),L,X,ne,f,y);Z!=null&&(W.setCodeword(ne,Z),te=X,f=Math.min(f,Z.getWidth()),y=Math.max(y,Z.getWidth()))}}return Re.createDecoderResult(N)}static merge(i,o){if(i==null&&o==null)return null;let l=Re.getBarcodeMetadata(i,o);if(l==null)return null;let c=ui.merge(Re.adjustBoundingBox(i),Re.adjustBoundingBox(o));return new js(l,c)}static adjustBoundingBox(i){if(i==null)return null;let o=i.getRowHeights();if(o==null)return null;let l=Re.getMax(o),c=0;for(let y of o)if(c+=l-y,y>0)break;let d=i.getCodewords();for(let y=0;c>0&&d[y]==null;y++)c--;let f=0;for(let y=o.length-1;y>=0&&(f+=l-o[y],!(o[y]>0));y--);for(let y=d.length-1;f>0&&d[y]==null;y--)f--;return i.getBoundingBox().addMissingRows(c,f,i.isLeft())}static getMax(i){let o=-1;for(let l of i)o=Math.max(o,l);return o}static getBarcodeMetadata(i,o){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let c;return o==null||(c=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==c.getColumnCount()&&l.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&l.getRowCount()!==c.getRowCount()?null:l}static getRowIndicatorColumn(i,o,l,c,d,f){let y=new rh(o,c);for(let v=0;v<2;v++){let E=v===0?1:-1,A=Math.trunc(Math.trunc(l.getX()));for(let N=Math.trunc(Math.trunc(l.getY()));N<=o.getMaxY()&&N>=o.getMinY();N+=E){let b=Re.detectCodeword(i,0,i.getWidth(),c,A,N,d,f);b!=null&&(y.setCodeword(N,b),c?A=b.getStartX():A=b.getEndX())}}return y}static adjustCodewordCount(i,o){let l=o[0][1],c=l.getValue(),d=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-Re.getNumberOfECCodeWords(i.getBarcodeECLevel());if(c.length===0){if(d<1||d>Ae.MAX_CODEWORDS_IN_BARCODE)throw z.getNotFoundInstance();l.setValue(d)}else c[0]!==d&&l.setValue(d)}static createDecoderResult(i){let o=Re.createBarcodeMatrix(i);Re.adjustCodewordCount(i,o);let l=new Array,c=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),d=[],f=new Array;for(let v=0;v<i.getBarcodeRowCount();v++)for(let E=0;E<i.getBarcodeColumnCount();E++){let A=o[v][E+1].getValue(),N=v*i.getBarcodeColumnCount()+E;A.length===0?l.push(N):A.length===1?c[N]=A[0]:(f.push(N),d.push(A))}let y=new Array(d.length);for(let v=0;v<y.length;v++)y[v]=d[v];return Re.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),c,Ae.toIntArray(l),Ae.toIntArray(f),y)}static createDecoderResultFromAmbiguousValues(i,o,l,c,d){let f=new Int32Array(c.length),y=100;for(;y-- >0;){for(let v=0;v<f.length;v++)o[c[v]]=d[v][f[v]];try{return Re.decodeCodewords(o,i,l)}catch(v){if(!(v instanceof T))throw v}if(f.length===0)throw T.getChecksumInstance();for(let v=0;v<f.length;v++)if(f[v]<d[v].length-1){f[v]++;break}else if(f[v]=0,v===f.length-1)throw T.getChecksumInstance()}throw T.getChecksumInstance()}static createBarcodeMatrix(i){let o=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let c=0;c<o.length;c++)for(let d=0;d<o[c].length;d++)o[c][d]=new Ys;let l=0;for(let c of i.getDetectionResultColumns()){if(c!=null){for(let d of c.getCodewords())if(d!=null){let f=d.getRowNumber();if(f>=0){if(f>=o.length)continue;o[f][l].setValue(d.getValue())}}}l++}return o}static isValidBarcodeColumn(i,o){return o>=0&&o<=i.getBarcodeColumnCount()+1}static getStartColumn(i,o,l,c){let d=c?1:-1,f=null;if(Re.isValidBarcodeColumn(i,o-d)&&(f=i.getDetectionResultColumn(o-d).getCodeword(l)),f!=null)return c?f.getEndX():f.getStartX();if(f=i.getDetectionResultColumn(o).getCodewordNearby(l),f!=null)return c?f.getStartX():f.getEndX();if(Re.isValidBarcodeColumn(i,o-d)&&(f=i.getDetectionResultColumn(o-d).getCodewordNearby(l)),f!=null)return c?f.getEndX():f.getStartX();let y=0;for(;Re.isValidBarcodeColumn(i,o-d);){o-=d;for(let v of i.getDetectionResultColumn(o).getCodewords())if(v!=null)return(c?v.getEndX():v.getStartX())+d*y*(v.getEndX()-v.getStartX());y++}return c?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,o,l,c,d,f,y,v){d=Re.adjustCodewordStartColumn(i,o,l,c,d,f);let E=Re.getModuleBitCount(i,o,l,c,d,f);if(E==null)return null;let A,N=Oe.sum(E);if(c)A=d+N;else{for(let U=0;U<E.length/2;U++){let G=E[U];E[U]=E[E.length-1-U],E[E.length-1-U]=G}A=d,d=A-N}if(!Re.checkCodewordSkew(N,y,v))return null;let b=sn.getDecodedValue(E),L=Ae.getCodeword(b);return L===-1?null:new Xs(d,A,Re.getCodewordBucketNumber(b),L)}static getModuleBitCount(i,o,l,c,d,f){let y=d,v=new Int32Array(8),E=0,A=c?1:-1,N=c;for(;(c?y<l:y>=o)&&E<v.length;)i.get(y,f)===N?(v[E]++,y+=A):(E++,N=!N);return E===v.length||y===(c?l:o)&&E===v.length-1?v:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,o,l,c,d,f){let y=d,v=c?-1:1;for(let E=0;E<2;E++){for(;(c?y>=o:y<l)&&c===i.get(y,f);){if(Math.abs(d-y)>Re.CODEWORD_SKEW_SIZE)return d;y+=v}v=-v,c=!c}return y}static checkCodewordSkew(i,o,l){return o-Re.CODEWORD_SKEW_SIZE<=i&&i<=l+Re.CODEWORD_SKEW_SIZE}static decodeCodewords(i,o,l){if(i.length===0)throw B.getFormatInstance();let c=1<<o+1,d=Re.correctErrors(i,l,c);Re.verifyCodewordCount(i,c);let f=j.decode(i,""+o);return f.setErrorsCorrected(d),f.setErasures(l.length),f}static correctErrors(i,o,l){if(o!=null&&o.length>l/2+Re.MAX_ERRORS||l<0||l>Re.MAX_EC_CODEWORDS)throw T.getChecksumInstance();return Re.errorCorrection.decode(i,l,o)}static verifyCodewordCount(i,o){if(i.length<4)throw B.getFormatInstance();let l=i[0];if(l>i.length)throw B.getFormatInstance();if(l===0)if(o<i.length)i[0]=i.length-o;else throw B.getFormatInstance()}static getBitCountForCodeword(i){let o=new Int32Array(8),l=0,c=o.length-1;for(;!((i&1)!==l&&(l=i&1,c--,c<0));)o[c]++,i>>=1;return o}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return Re.getCodewordBucketNumber(Re.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let o=new Ks;for(let l=0;l<i.length;l++){o.format("Row %2d: ",l);for(let c=0;c<i[l].length;c++){let d=i[l][c];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}Re.CODEWORD_SKEW_SIZE=2,Re.MAX_ERRORS=3,Re.MAX_EC_CODEWORDS=512,Re.errorCorrection=new nh;class Ot{decode(i,o=null){let l=Ot.decode(i,o,!1);if(l==null||l.length===0||l[0]==null)throw z.getNotFoundInstance();return l[0]}decodeMultiple(i,o=null){try{return Ot.decode(i,o,!0)}catch(l){throw l instanceof B||l instanceof T?z.getNotFoundInstance():l}}static decode(i,o,l){const c=new Array,d=be.detectMultiple(i,o,l);for(const f of d.getPoints()){const y=Re.decode(d.getBits(),f[4],f[5],f[6],f[7],Ot.getMinCodewordWidth(f),Ot.getMaxCodewordWidth(f)),v=new ot(y.getText(),y.getRawBytes(),void 0,f,ge.PDF_417);v.putMetadata(Nt.ERROR_CORRECTION_LEVEL,y.getECLevel());const E=y.getOther();E!=null&&v.putMetadata(Nt.PDF417_EXTRA_METADATA,E),c.push(v)}return c.map(f=>f)}static getMaxWidth(i,o){return i==null||o==null?0:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMinWidth(i,o){return i==null||o==null?R.MAX_VALUE:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Ot.getMaxWidth(i[0],i[4]),Ot.getMaxWidth(i[6],i[2])*Ae.MODULES_IN_CODEWORD/Ae.MODULES_IN_STOP_PATTERN),Math.max(Ot.getMaxWidth(i[1],i[5]),Ot.getMaxWidth(i[7],i[3])*Ae.MODULES_IN_CODEWORD/Ae.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Ot.getMinWidth(i[0],i[4]),Ot.getMinWidth(i[6],i[2])*Ae.MODULES_IN_CODEWORD/Ae.MODULES_IN_STOP_PATTERN),Math.min(Ot.getMinWidth(i[1],i[5]),Ot.getMinWidth(i[7],i[3])*Ae.MODULES_IN_CODEWORD/Ae.MODULES_IN_STOP_PATTERN)))}reset(){}}class ca extends p{}ca.kind="ReaderException";class lh{constructor(i,o){this.verbose=i===!0,o&&this.setHints(o)}decode(i,o){return o&&this.setHints(o),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const o=!r(i)&&i.get(H.TRY_HARDER)===!0,l=r(i)?null:i.get(H.POSSIBLE_FORMATS),c=new Array;if(!r(l)){const d=l.some(f=>f===ge.UPC_A||f===ge.UPC_E||f===ge.EAN_13||f===ge.EAN_8||f===ge.CODABAR||f===ge.CODE_39||f===ge.CODE_93||f===ge.CODE_128||f===ge.ITF||f===ge.RSS_14||f===ge.RSS_EXPANDED);d&&!o&&c.push(new Fi(i,this.verbose)),l.includes(ge.QR_CODE)&&c.push(new kr),l.includes(ge.DATA_MATRIX)&&c.push(new Rr),l.includes(ge.AZTEC)&&c.push(new ia),l.includes(ge.PDF_417)&&c.push(new Ot),d&&o&&c.push(new Fi(i,this.verbose))}c.length===0&&(o||c.push(new Fi(i,this.verbose)),c.push(new kr),c.push(new Rr),c.push(new ia),c.push(new Ot),o&&c.push(new Fi(i,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new ca("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(i,this.hints)}catch(l){if(l instanceof ca)continue}throw new z("No MultiFormat Readers were able to detect the code.")}}class iw extends Sn{constructor(i=null,o=500){const l=new lh;l.setHints(i),super(l,o)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class sw extends Sn{constructor(i=500){super(new Ot,i)}}class ow extends Sn{constructor(i=500){super(new kr,i)}}var wu;(function(I){I[I.ERROR_CORRECTION=0]="ERROR_CORRECTION",I[I.CHARACTER_SET=1]="CHARACTER_SET",I[I.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",I[I.MIN_SIZE=3]="MIN_SIZE",I[I.MAX_SIZE=4]="MAX_SIZE",I[I.MARGIN=5]="MARGIN",I[I.PDF417_COMPACT=6]="PDF417_COMPACT",I[I.PDF417_COMPACTION=7]="PDF417_COMPACTION",I[I.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",I[I.AZTEC_LAYERS=9]="AZTEC_LAYERS",I[I.QR_VERSION=10]="QR_VERSION"})(wu||(wu={}));var At=wu;class vu{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new tn(i,Int32Array.from([1])))}buildGenerator(i){const o=this.cachedGenerators;if(i>=o.length){let l=o[o.length-1];const c=this.field;for(let d=o.length;d<=i;d++){const f=l.multiply(new tn(c,Int32Array.from([1,c.exp(d-1+c.getGeneratorBase())])));o.push(f),l=f}}return o[i]}encode(i,o){if(o===0)throw new _("No error correction bytes");const l=i.length-o;if(l<=0)throw new _("No data bytes provided");const c=this.buildGenerator(o),d=new Int32Array(l);M.arraycopy(i,0,d,0,l);let f=new tn(this.field,d);f=f.multiplyByMonomial(o,1);const v=f.divide(c)[1].getCoefficients(),E=o-v.length;for(let A=0;A<E;A++)i[l+A]=0;M.arraycopy(v,0,i,l+E,v.length)}}class pt{constructor(){}static applyMaskPenaltyRule1(i){return pt.applyMaskPenaltyRule1Internal(i,!0)+pt.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let o=0;const l=i.getArray(),c=i.getWidth(),d=i.getHeight();for(let f=0;f<d-1;f++){const y=l[f];for(let v=0;v<c-1;v++){const E=y[v];E===y[v+1]&&E===l[f+1][v]&&E===l[f+1][v+1]&&o++}}return pt.N2*o}static applyMaskPenaltyRule3(i){let o=0;const l=i.getArray(),c=i.getWidth(),d=i.getHeight();for(let f=0;f<d;f++)for(let y=0;y<c;y++){const v=l[f];y+6<c&&v[y]===1&&v[y+1]===0&&v[y+2]===1&&v[y+3]===1&&v[y+4]===1&&v[y+5]===0&&v[y+6]===1&&(pt.isWhiteHorizontal(v,y-4,y)||pt.isWhiteHorizontal(v,y+7,y+11))&&o++,f+6<d&&l[f][y]===1&&l[f+1][y]===0&&l[f+2][y]===1&&l[f+3][y]===1&&l[f+4][y]===1&&l[f+5][y]===0&&l[f+6][y]===1&&(pt.isWhiteVertical(l,y,f-4,f)||pt.isWhiteVertical(l,y,f+7,f+11))&&o++}return o*pt.N3}static isWhiteHorizontal(i,o,l){o=Math.max(o,0),l=Math.min(l,i.length);for(let c=o;c<l;c++)if(i[c]===1)return!1;return!0}static isWhiteVertical(i,o,l,c){l=Math.max(l,0),c=Math.min(c,i.length);for(let d=l;d<c;d++)if(i[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let o=0;const l=i.getArray(),c=i.getWidth(),d=i.getHeight();for(let v=0;v<d;v++){const E=l[v];for(let A=0;A<c;A++)E[A]===1&&o++}const f=i.getHeight()*i.getWidth();return Math.floor(Math.abs(o*2-f)*10/f)*pt.N4}static getDataMaskBit(i,o,l){let c,d;switch(i){case 0:c=l+o&1;break;case 1:c=l&1;break;case 2:c=o%3;break;case 3:c=(l+o)%3;break;case 4:c=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:d=l*o,c=(d&1)+d%3;break;case 6:d=l*o,c=(d&1)+d%3&1;break;case 7:d=l*o,c=d%3+(l+o&1)&1;break;default:throw new _("Invalid mask pattern: "+i)}return c===0}static applyMaskPenaltyRule1Internal(i,o){let l=0;const c=o?i.getHeight():i.getWidth(),d=o?i.getWidth():i.getHeight(),f=i.getArray();for(let y=0;y<c;y++){let v=0,E=-1;for(let A=0;A<d;A++){const N=o?f[y][A]:f[A][y];N===E?v++:(v>=5&&(l+=pt.N1+(v-5)),v=1,E=N)}v>=5&&(l+=pt.N1+(v-5))}return l}}pt.N1=3,pt.N2=3,pt.N3=40,pt.N4=10;class da{constructor(i,o){this.width=i,this.height=o;const l=new Array(o);for(let c=0;c!==o;c++)l[c]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,o){return this.bytes[o][i]}getArray(){return this.bytes}setNumber(i,o,l){this.bytes[o][i]=l}setBoolean(i,o,l){this.bytes[o][i]=l?1:0}clear(i){for(const o of this.bytes)k.fill(o,i)}equals(i){if(!(i instanceof da))return!1;const o=i;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,c=this.height;l<c;++l){const d=this.bytes[l],f=o.bytes[l];for(let y=0,v=this.width;y<v;++y)if(d[y]!==f[y])return!1}return!0}toString(){const i=new le;for(let o=0,l=this.height;o<l;++o){const c=this.bytes[o];for(let d=0,f=this.width;d<f;++d)switch(c[d]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class ci{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new le;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<ci.NUM_MASK_PATTERNS}}ci.NUM_MASK_PATTERNS=8;class Ke extends p{}Ke.kind="WriterException";class Ee{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,o,l,c,d){Ee.clearMatrix(d),Ee.embedBasicPatterns(l,d),Ee.embedTypeInfo(o,c,d),Ee.maybeEmbedVersionInfo(l,d),Ee.embedDataBits(i,c,d)}static embedBasicPatterns(i,o){Ee.embedPositionDetectionPatternsAndSeparators(o),Ee.embedDarkDotAtLeftBottomCorner(o),Ee.maybeEmbedPositionAdjustmentPatterns(i,o),Ee.embedTimingPatterns(o)}static embedTypeInfo(i,o,l){const c=new F;Ee.makeTypeInfoBits(i,o,c);for(let d=0,f=c.getSize();d<f;++d){const y=c.get(c.getSize()-1-d),v=Ee.TYPE_INFO_COORDINATES[d],E=v[0],A=v[1];if(l.setBoolean(E,A,y),d<8){const N=l.getWidth()-d-1;l.setBoolean(N,8,y)}else{const b=l.getHeight()-7+(d-8);l.setBoolean(8,b,y)}}}static maybeEmbedVersionInfo(i,o){if(i.getVersionNumber()<7)return;const l=new F;Ee.makeVersionInfoBits(i,l);let c=6*3-1;for(let d=0;d<6;++d)for(let f=0;f<3;++f){const y=l.get(c);c--,o.setBoolean(d,o.getHeight()-11+f,y),o.setBoolean(o.getHeight()-11+f,d,y)}}static embedDataBits(i,o,l){let c=0,d=-1,f=l.getWidth()-1,y=l.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);y>=0&&y<l.getHeight();){for(let v=0;v<2;++v){const E=f-v;if(!Ee.isEmpty(l.get(E,y)))continue;let A;c<i.getSize()?(A=i.get(c),++c):A=!1,o!==255&&pt.getDataMaskBit(o,E,y)&&(A=!A),l.setBoolean(E,y,A)}y+=d}d=-d,y+=d,f-=2}if(c!==i.getSize())throw new Ke("Not all bits consumed: "+c+"/"+i.getSize())}static findMSBSet(i){return 32-R.numberOfLeadingZeros(i)}static calculateBCHCode(i,o){if(o===0)throw new _("0 polynomial");const l=Ee.findMSBSet(o);for(i<<=l-1;Ee.findMSBSet(i)>=l;)i^=o<<Ee.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,o,l){if(!ci.isValidMaskPattern(o))throw new Ke("Invalid mask pattern");const c=i.getBits()<<3|o;l.appendBits(c,5);const d=Ee.calculateBCHCode(c,Ee.TYPE_INFO_POLY);l.appendBits(d,10);const f=new F;if(f.appendBits(Ee.TYPE_INFO_MASK_PATTERN,15),l.xor(f),l.getSize()!==15)throw new Ke("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,o){o.appendBits(i.getVersionNumber(),6);const l=Ee.calculateBCHCode(i.getVersionNumber(),Ee.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new Ke("should not happen but we got: "+o.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let o=8;o<i.getWidth()-8;++o){const l=(o+1)%2;Ee.isEmpty(i.get(o,6))&&i.setNumber(o,6,l),Ee.isEmpty(i.get(6,o))&&i.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Ke;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,o,l){for(let c=0;c<8;++c){if(!Ee.isEmpty(l.get(i+c,o)))throw new Ke;l.setNumber(i+c,o,0)}}static embedVerticalSeparationPattern(i,o,l){for(let c=0;c<7;++c){if(!Ee.isEmpty(l.get(i,o+c)))throw new Ke;l.setNumber(i,o+c,0)}}static embedPositionAdjustmentPattern(i,o,l){for(let c=0;c<5;++c){const d=Ee.POSITION_ADJUSTMENT_PATTERN[c];for(let f=0;f<5;++f)l.setNumber(i+f,o+c,d[f])}}static embedPositionDetectionPattern(i,o,l){for(let c=0;c<7;++c){const d=Ee.POSITION_DETECTION_PATTERN[c];for(let f=0;f<7;++f)l.setNumber(i+f,o+c,d[f])}}static embedPositionDetectionPatternsAndSeparators(i){const o=Ee.POSITION_DETECTION_PATTERN[0].length;Ee.embedPositionDetectionPattern(0,0,i),Ee.embedPositionDetectionPattern(i.getWidth()-o,0,i),Ee.embedPositionDetectionPattern(0,i.getWidth()-o,i);const l=8;Ee.embedHorizontalSeparationPattern(0,l-1,i),Ee.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),Ee.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const c=7;Ee.embedVerticalSeparationPattern(c,0,i),Ee.embedVerticalSeparationPattern(i.getHeight()-c-1,0,i),Ee.embedVerticalSeparationPattern(c,i.getHeight()-c,i)}static maybeEmbedPositionAdjustmentPatterns(i,o){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,c=Ee.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,f=c.length;d!==f;d++){const y=c[d];if(y>=0)for(let v=0;v!==f;v++){const E=c[v];E>=0&&Ee.isEmpty(o.get(E,y))&&Ee.embedPositionAdjustmentPattern(E-2,y-2,o)}}}}Ee.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ee.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ee.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ee.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ee.VERSION_INFO_POLY=7973,Ee.TYPE_INFO_POLY=1335,Ee.TYPE_INFO_MASK_PATTERN=21522;class aw{constructor(i,o){this.dataBytes=i,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ze{constructor(){}static calculateMaskPenalty(i){return pt.applyMaskPenaltyRule1(i)+pt.applyMaskPenaltyRule2(i)+pt.applyMaskPenaltyRule3(i)+pt.applyMaskPenaltyRule4(i)}static encode(i,o,l=null){let c=Ze.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(At.CHARACTER_SET)!==void 0;d&&(c=l.get(At.CHARACTER_SET).toString());const f=this.chooseMode(i,c),y=new F;if(f===we.BYTE&&(d||Ze.DEFAULT_BYTE_MODE_ENCODING!==c)){const ne=q.getCharacterSetECIByName(c);ne!==void 0&&this.appendECI(ne,y)}this.appendModeInfo(f,y);const v=new F;this.appendBytes(i,f,v,c);let E;if(l!==null&&l.get(At.QR_VERSION)!==void 0){const ne=Number.parseInt(l.get(At.QR_VERSION).toString(),10);E=ye.getVersionForNumber(ne);const Z=this.calculateBitsNeeded(f,y,v,E);if(!this.willFit(Z,E,o))throw new Ke("Data too big for requested version")}else E=this.recommendVersion(o,f,y,v);const A=new F;A.appendBitArray(y);const N=f===we.BYTE?v.getSizeInBytes():i.length;this.appendLengthInfo(N,E,f,A),A.appendBitArray(v);const b=E.getECBlocksForLevel(o),L=E.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(L,A);const U=this.interleaveWithECBytes(A,E.getTotalCodewords(),L,b.getNumBlocks()),G=new ci;G.setECLevel(o),G.setMode(f),G.setVersion(E);const W=E.getDimensionForVersion(),X=new da(W,W),te=this.chooseMaskPattern(U,o,E,X);return G.setMaskPattern(te),Ee.buildMatrix(U,o,E,te,X),G.setMatrix(X),G}static recommendVersion(i,o,l,c){const d=this.calculateBitsNeeded(o,l,c,ye.getVersionForNumber(1)),f=this.chooseVersion(d,i),y=this.calculateBitsNeeded(o,l,c,f);return this.chooseVersion(y,i)}static calculateBitsNeeded(i,o,l,c){return o.getSize()+i.getCharacterCountBits(c)+l.getSize()}static getAlphanumericCode(i){return i<Ze.ALPHANUMERIC_TABLE.length?Ze.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,o=null){if(q.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(i))return we.KANJI;let l=!1,c=!1;for(let d=0,f=i.length;d<f;++d){const y=i.charAt(d);if(Ze.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)c=!0;else return we.BYTE}return c?we.ALPHANUMERIC:l?we.NUMERIC:we.BYTE}static isOnlyDoubleByteKanji(i){let o;try{o=Se.encode(i,q.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let c=0;c<l;c+=2){const d=o[c]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(i,o,l,c){let d=Number.MAX_SAFE_INTEGER,f=-1;for(let y=0;y<ci.NUM_MASK_PATTERNS;y++){Ee.buildMatrix(i,o,l,y,c);let v=this.calculateMaskPenalty(c);v<d&&(d=v,f=y)}return f}static chooseVersion(i,o){for(let l=1;l<=40;l++){const c=ye.getVersionForNumber(l);if(Ze.willFit(i,c,o))return c}throw new Ke("Data too big")}static willFit(i,o,l){const c=o.getTotalCodewords(),f=o.getECBlocksForLevel(l).getTotalECCodewords(),y=c-f,v=(i+7)/8;return y>=v}static terminateBits(i,o){const l=i*8;if(o.getSize()>l)throw new Ke("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let f=0;f<4&&o.getSize()<l;++f)o.appendBit(!1);const c=o.getSize()&7;if(c>0)for(let f=c;f<8;f++)o.appendBit(!1);const d=i-o.getSizeInBytes();for(let f=0;f<d;++f)o.appendBits(f&1?17:236,8);if(o.getSize()!==l)throw new Ke("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,o,l,c,d,f){if(c>=l)throw new Ke("Block ID too large");const y=i%l,v=l-y,E=Math.floor(i/l),A=E+1,N=Math.floor(o/l),b=N+1,L=E-N,U=A-b;if(L!==U)throw new Ke("EC bytes mismatch");if(l!==v+y)throw new Ke("RS blocks mismatch");if(i!==(N+L)*v+(b+U)*y)throw new Ke("Total bytes mismatch");c<v?(d[0]=N,f[0]=L):(d[0]=b,f[0]=U)}static interleaveWithECBytes(i,o,l,c){if(i.getSizeInBytes()!==l)throw new Ke("Number of bits and data bytes does not match");let d=0,f=0,y=0;const v=new Array;for(let A=0;A<c;++A){const N=new Int32Array(1),b=new Int32Array(1);Ze.getNumDataBytesAndNumECBytesForBlockID(o,l,c,A,N,b);const L=N[0],U=new Uint8Array(L);i.toBytes(8*d,U,0,L);const G=Ze.generateECBytes(U,b[0]);v.push(new aw(U,G)),f=Math.max(f,L),y=Math.max(y,G.length),d+=N[0]}if(l!==d)throw new Ke("Data bytes does not match offset");const E=new F;for(let A=0;A<f;++A)for(const N of v){const b=N.getDataBytes();A<b.length&&E.appendBits(b[A],8)}for(let A=0;A<y;++A)for(const N of v){const b=N.getErrorCorrectionBytes();A<b.length&&E.appendBits(b[A],8)}if(o!==E.getSizeInBytes())throw new Ke("Interleaving error: "+o+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(i,o){const l=i.length,c=new Int32Array(l+o);for(let f=0;f<l;f++)c[f]=i[f]&255;new vu(Ue.QR_CODE_FIELD_256).encode(c,o);const d=new Uint8Array(o);for(let f=0;f<o;f++)d[f]=c[l+f];return d}static appendModeInfo(i,o){o.appendBits(i.getBits(),4)}static appendLengthInfo(i,o,l,c){const d=l.getCharacterCountBits(o);if(i>=1<<d)throw new Ke(i+" is bigger than "+((1<<d)-1));c.appendBits(i,d)}static appendBytes(i,o,l,c){switch(o){case we.NUMERIC:Ze.appendNumericBytes(i,l);break;case we.ALPHANUMERIC:Ze.appendAlphanumericBytes(i,l);break;case we.BYTE:Ze.append8BitBytes(i,l,c);break;case we.KANJI:Ze.appendKanjiBytes(i,l);break;default:throw new Ke("Invalid mode: "+o)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const o=Ze.getDigit(i);return o>=0&&o<=9}static appendNumericBytes(i,o){const l=i.length;let c=0;for(;c<l;){const d=Ze.getDigit(i.charAt(c));if(c+2<l){const f=Ze.getDigit(i.charAt(c+1)),y=Ze.getDigit(i.charAt(c+2));o.appendBits(d*100+f*10+y,10),c+=3}else if(c+1<l){const f=Ze.getDigit(i.charAt(c+1));o.appendBits(d*10+f,7),c+=2}else o.appendBits(d,4),c++}}static appendAlphanumericBytes(i,o){const l=i.length;let c=0;for(;c<l;){const d=Ze.getAlphanumericCode(i.charCodeAt(c));if(d===-1)throw new Ke;if(c+1<l){const f=Ze.getAlphanumericCode(i.charCodeAt(c+1));if(f===-1)throw new Ke;o.appendBits(d*45+f,11),c+=2}else o.appendBits(d,6),c++}}static append8BitBytes(i,o,l){let c;try{c=Se.encode(i,l)}catch(d){throw new Ke(d)}for(let d=0,f=c.length;d!==f;d++){const y=c[d];o.appendBits(y,8)}}static appendKanjiBytes(i,o){let l;try{l=Se.encode(i,q.SJIS)}catch(d){throw new Ke(d)}const c=l.length;for(let d=0;d<c;d+=2){const f=l[d]&255,y=l[d+1]&255,v=f<<8&4294967295|y;let E=-1;if(v>=33088&&v<=40956?E=v-33088:v>=57408&&v<=60351&&(E=v-49472),E===-1)throw new Ke("Invalid byte sequence");const A=(E>>8)*192+(E&255);o.appendBits(A,13)}}static appendECI(i,o){o.appendBits(we.ECI.getBits(),4),o.appendBits(i.getValue(),8)}}Ze.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ze.DEFAULT_BYTE_MODE_ENCODING=q.UTF8.getName();class di{write(i,o,l,c=null){if(i.length===0)throw new _("Found empty contents");if(o<0||l<0)throw new _("Requested dimensions are too small: "+o+"x"+l);let d=je.L,f=di.QUIET_ZONE_SIZE;c!==null&&(c.get(At.ERROR_CORRECTION)!==void 0&&(d=je.fromString(c.get(At.ERROR_CORRECTION).toString())),c.get(At.MARGIN)!==void 0&&(f=Number.parseInt(c.get(At.MARGIN).toString(),10)));const y=Ze.encode(i,d,c);return this.renderResult(y,o,l,f)}writeToDom(i,o,l,c,d=null){typeof i=="string"&&(i=document.querySelector(i));const f=this.write(o,l,c,d);i&&i.appendChild(f)}renderResult(i,o,l,c){const d=i.getMatrix();if(d===null)throw new Jn;const f=d.getWidth(),y=d.getHeight(),v=f+c*2,E=y+c*2,A=Math.max(o,v),N=Math.max(l,E),b=Math.min(Math.floor(A/v),Math.floor(N/E)),L=Math.floor((A-f*b)/2),U=Math.floor((N-y*b)/2),G=this.createSVGElement(A,N);for(let W=0,X=U;W<y;W++,X+=b)for(let te=0,ne=L;te<f;te++,ne+=b)if(d.get(te,W)===1){const Z=this.createSvgRectElement(ne,X,b,b);G.appendChild(Z)}return G}createSVGElement(i,o){const l=document.createElementNS(di.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(i,o,l,c){const d=document.createElementNS(di.SVG_NS,"rect");return d.setAttributeNS(null,"x",i.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",c.toString()),d.setAttributeNS(null,"fill","#000000"),d}}di.QUIET_ZONE_SIZE=4,di.SVG_NS="http://www.w3.org/2000/svg";class Vi{encode(i,o,l,c,d){if(i.length===0)throw new _("Found empty contents");if(o!==ge.QR_CODE)throw new _("Can only encode QR_CODE, but got "+o);if(l<0||c<0)throw new _(`Requested dimensions are too small: ${l}x${c}`);let f=je.L,y=Vi.QUIET_ZONE_SIZE;d!==null&&(d.get(At.ERROR_CORRECTION)!==void 0&&(f=je.fromString(d.get(At.ERROR_CORRECTION).toString())),d.get(At.MARGIN)!==void 0&&(y=Number.parseInt(d.get(At.MARGIN).toString(),10)));const v=Ze.encode(i,f,d);return Vi.renderResult(v,l,c,y)}static renderResult(i,o,l,c){const d=i.getMatrix();if(d===null)throw new Jn;const f=d.getWidth(),y=d.getHeight(),v=f+c*2,E=y+c*2,A=Math.max(o,v),N=Math.max(l,E),b=Math.min(Math.floor(A/v),Math.floor(N/E)),L=Math.floor((A-f*b)/2),U=Math.floor((N-y*b)/2),G=new ue(A,N);for(let W=0,X=U;W<y;W++,X+=b)for(let te=0,ne=L;te<f;te++,ne+=b)d.get(te,W)===1&&G.setRegion(ne,X,b,b);return G}}Vi.QUIET_ZONE_SIZE=4;class lw{encode(i,o,l,c,d){let f;switch(o){case ge.QR_CODE:f=new Vi;break;default:throw new _("No encoder available for format "+o)}return f.encode(i,o,l,c,d)}}class tr extends Q{constructor(i,o,l,c,d,f,y,v){if(super(f,y),this.yuvData=i,this.dataWidth=o,this.dataHeight=l,this.left=c,this.top=d,c+f>o||d+y>l)throw new _("Crop rectangle does not fit within image data.");v&&this.reverseHorizontal(f,y)}getRow(i,o){if(i<0||i>=this.getHeight())throw new _("Requested row is outside the image: "+i);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const c=(i+this.top)*this.dataWidth+this.left;return M.arraycopy(this.yuvData,c,o,0,l),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=i*o,c=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return M.arraycopy(this.yuvData,d,c,0,l),c;for(let f=0;f<o;f++){const y=f*i;M.arraycopy(this.yuvData,d,c,y,i),d+=this.dataWidth}return c}isCropSupported(){return!0}crop(i,o,l,c){return new tr(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+o,l,c,!1)}renderThumbnail(){const i=this.getWidth()/tr.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/tr.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*o),c=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let f=0;f<o;f++){const y=f*i;for(let v=0;v<i;v++){const E=c[d+v*tr.THUMBNAIL_SCALE_FACTOR]&255;l[y+v]=4278190080|E*65793}d+=this.dataWidth*tr.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/tr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/tr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,o){const l=this.yuvData;for(let c=0,d=this.top*this.dataWidth+this.left;c<o;c++,d+=this.dataWidth){const f=d+i/2;for(let y=d,v=d+i-1;y<f;y++,v--){const E=l[y];l[y]=l[v],l[v]=E}}}invert(){return new xe(this)}}tr.THUMBNAIL_SCALE_FACTOR=2;class Eu extends Q{constructor(i,o,l,c,d,f,y){if(super(o,l),this.dataWidth=c,this.dataHeight=d,this.left=f,this.top=y,i.BYTES_PER_ELEMENT===4){const v=o*l,E=new Uint8ClampedArray(v);for(let A=0;A<v;A++){const N=i[A],b=N>>16&255,L=N>>7&510,U=N&255;E[A]=(b+L+U)/4&255}this.luminances=E}else this.luminances=i;if(c===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=l),f===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new _("Crop rectangle does not fit within image data.")}getRow(i,o){if(i<0||i>=this.getHeight())throw new _("Requested row is outside the image: "+i);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const c=(i+this.top)*this.dataWidth+this.left;return M.arraycopy(this.luminances,c,o,0,l),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=i*o,c=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return M.arraycopy(this.luminances,d,c,0,l),c;for(let f=0;f<o;f++){const y=f*i;M.arraycopy(this.luminances,d,c,y,i),d+=this.dataWidth}return c}isCropSupported(){return!0}crop(i,o,l,c){return new Eu(this.luminances,l,c,this.dataWidth,this.dataHeight,this.left+i,this.top+o)}invert(){return new xe(this)}}class uh extends q{static forName(i){return this.getCharacterSetECIByName(i)}}class _u{}_u.ISO_8859_1=q.ISO8859_1;class ch{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class dh{static singletonList(i){return[i]}static min(i,o){return i.sort(o)[0]}}class uw{constructor(i){this.previous=i}getPrevious(){return this.previous}}class Gi extends uw{constructor(i,o,l){super(i),this.value=o,this.bitCount=l}appendTo(i,o){i.appendBits(this.value,this.bitCount)}add(i,o){return new Gi(this,i,o)}addBinaryShift(i,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Gi(this,i,o)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+R.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Cu extends Gi{constructor(i,o,l){super(i,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(i,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(i,o){return new Cu(this,i,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function cw(I,i,o){return new Cu(I,i,o)}function Js(I,i,o){return new Gi(I,i,o)}const dw=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Mr=0,fa=1,bn=2,fh=3,nr=4,fw=new Gi(null,0,0),Au=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function hw(I){for(let i of I)k.fill(i,-1);return I[Mr][nr]=0,I[fa][nr]=0,I[fa][Mr]=28,I[fh][nr]=0,I[bn][nr]=0,I[bn][Mr]=15,I}const hh=hw(k.createInt32Array(6,6));class rr{constructor(i,o,l,c){this.token=i,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,o){let l=this.bitCount,c=this.token;if(i!==this.mode){let f=Au[this.mode][i];c=Js(c,f&65535,f>>16),l+=f>>16}let d=i===bn?4:5;return c=Js(c,o,d),new rr(c,i,0,l+d)}shiftAndAppend(i,o){let l=this.token,c=this.mode===bn?4:5;return l=Js(l,hh[this.mode][i],c),l=Js(l,o,5),new rr(l,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(i){let o=this.token,l=this.mode,c=this.bitCount;if(this.mode===nr||this.mode===bn){let y=Au[l][Mr];o=Js(o,y&65535,y>>16),c+=y>>16,l=Mr}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new rr(o,l,this.binaryShiftByteCount+1,c+d);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(i+1)),f}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=cw(o,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new rr(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let o=this.bitCount+(Au[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?o+=rr.calculateBinaryShiftCost(i)-rr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(o+=10),o<=i.bitCount}toBitArray(i){let o=[];for(let c=this.endBinaryShift(i.length).token;c!==null;c=c.getPrevious())o.unshift(c);let l=new F;for(const c of o)c.appendTo(l,i);return l}toString(){return se.format("%s bits=%d bytes=%d",dw[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}rr.INITIAL_STATE=new rr(fw,Mr,0,0);function pw(I){const i=se.getCharCode(" "),o=se.getCharCode("."),l=se.getCharCode(",");I[Mr][i]=1;const c=se.getCharCode("Z"),d=se.getCharCode("A");for(let b=d;b<=c;b++)I[Mr][b]=b-d+2;I[fa][i]=1;const f=se.getCharCode("z"),y=se.getCharCode("a");for(let b=y;b<=f;b++)I[fa][b]=b-y+2;I[bn][i]=1;const v=se.getCharCode("9"),E=se.getCharCode("0");for(let b=E;b<=v;b++)I[bn][b]=b-E+2;I[bn][l]=12,I[bn][o]=13;const A=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let b=0;b<A.length;b++)I[fh][se.getCharCode(A[b])]=b;const N=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let b=0;b<N.length;b++)se.getCharCode(N[b])>0&&(I[nr][se.getCharCode(N[b])]=b);return I}const Su=pw(k.createInt32Array(5,256));class Zs{constructor(i){this.text=i}encode(){const i=se.getCharCode(" "),o=se.getCharCode(`
`);let l=dh.singletonList(rr.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let f,y=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case se.getCharCode("\r"):f=y===o?2:0;break;case se.getCharCode("."):f=y===i?3:0;break;case se.getCharCode(","):f=y===i?4:0;break;case se.getCharCode(":"):f=y===i?5:0;break;default:f=0}f>0?(l=Zs.updateStateListForPair(l,d,f),d++):l=this.updateStateListForChar(l,d)}return dh.min(l,(d,f)=>d.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,o){const l=[];for(let c of i)this.updateStateForChar(c,o,l);return Zs.simplifyStates(l)}updateStateForChar(i,o,l){let c=this.text[o]&255,d=Su[i.getMode()][c]>0,f=null;for(let y=0;y<=nr;y++){let v=Su[y][c];if(v>0){if(f==null&&(f=i.endBinaryShift(o)),!d||y===i.getMode()||y===bn){const E=f.latchAndAppend(y,v);l.push(E)}if(!d&&hh[i.getMode()][y]>=0){const E=f.shiftAndAppend(y,v);l.push(E)}}}if(i.getBinaryShiftByteCount()>0||Su[i.getMode()][c]===0){let y=i.addBinaryShiftChar(o);l.push(y)}}static updateStateListForPair(i,o,l){const c=[];for(let d of i)this.updateStateForPair(d,o,l,c);return this.simplifyStates(c)}static updateStateForPair(i,o,l,c){let d=i.endBinaryShift(o);if(c.push(d.latchAndAppend(nr,l)),i.getMode()!==nr&&c.push(d.shiftAndAppend(nr,l)),l===3||l===4){let f=d.latchAndAppend(bn,16-l).latchAndAppend(bn,1);c.push(f)}if(i.getBinaryShiftByteCount()>0){let f=i.addBinaryShiftChar(o).addBinaryShiftChar(o+1);c.push(f)}}static simplifyStates(i){let o=[];for(const l of i){let c=!0;for(const d of o){if(d.isBetterThanOrEqualTo(l)){c=!1;break}l.isBetterThanOrEqualTo(d)&&(o=o.filter(f=>f!==d))}c&&o.push(l)}return o}}class Le{constructor(){}static encodeBytes(i){return Le.encode(i,Le.DEFAULT_EC_PERCENT,Le.DEFAULT_AZTEC_LAYERS)}static encode(i,o,l){let c=new Zs(i).encode(),d=R.truncDivision(c.getSize()*o,100)+11,f=c.getSize()+d,y,v,E,A,N;if(l!==Le.DEFAULT_AZTEC_LAYERS){if(y=l<0,v=Math.abs(l),v>(y?Le.MAX_NB_BITS_COMPACT:Le.MAX_NB_BITS))throw new _(se.format("Illegal value %s for layers",l));E=Le.totalBitsInLayer(v,y),A=Le.WORD_SIZE[v];let Z=E-E%A;if(N=Le.stuffBits(c,A),N.getSize()+d>Z)throw new _("Data to large for user specified layer");if(y&&N.getSize()>A*64)throw new _("Data to large for user specified layer")}else{A=0,N=null;for(let Z=0;;Z++){if(Z>Le.MAX_NB_BITS)throw new _("Data too large for an Aztec code");if(y=Z<=3,v=y?Z+1:Z,E=Le.totalBitsInLayer(v,y),f>E)continue;(N==null||A!==Le.WORD_SIZE[v])&&(A=Le.WORD_SIZE[v],N=Le.stuffBits(c,A));let Pe=E-E%A;if(!(y&&N.getSize()>A*64)&&N.getSize()+d<=Pe)break}}let b=Le.generateCheckWords(N,E,A),L=N.getSize()/A,U=Le.generateModeMessage(y,v,L),G=(y?11:14)+v*4,W=new Int32Array(G),X;if(y){X=G;for(let Z=0;Z<W.length;Z++)W[Z]=Z}else{X=G+1+2*R.truncDivision(R.truncDivision(G,2)-1,15);let Z=R.truncDivision(G,2),Pe=R.truncDivision(X,2);for(let Ne=0;Ne<Z;Ne++){let on=Ne+R.truncDivision(Ne,15);W[Z-Ne-1]=Pe-on-1,W[Z+Ne]=Pe+on+1}}let te=new ue(X);for(let Z=0,Pe=0;Z<v;Z++){let Ne=(v-Z)*4+(y?9:12);for(let on=0;on<Ne;on++){let Un=on*2;for(let an=0;an<2;an++)b.get(Pe+Un+an)&&te.set(W[Z*2+an],W[Z*2+on]),b.get(Pe+Ne*2+Un+an)&&te.set(W[Z*2+on],W[G-1-Z*2-an]),b.get(Pe+Ne*4+Un+an)&&te.set(W[G-1-Z*2-an],W[G-1-Z*2-on]),b.get(Pe+Ne*6+Un+an)&&te.set(W[G-1-Z*2-on],W[Z*2+an])}Pe+=Ne*8}if(Le.drawModeMessage(te,y,X,U),y)Le.drawBullsEye(te,R.truncDivision(X,2),5);else{Le.drawBullsEye(te,R.truncDivision(X,2),7);for(let Z=0,Pe=0;Z<R.truncDivision(G,2)-1;Z+=15,Pe+=16)for(let Ne=R.truncDivision(X,2)&1;Ne<X;Ne+=2)te.set(R.truncDivision(X,2)-Pe,Ne),te.set(R.truncDivision(X,2)+Pe,Ne),te.set(Ne,R.truncDivision(X,2)-Pe),te.set(Ne,R.truncDivision(X,2)+Pe)}let ne=new ch;return ne.setCompact(y),ne.setSize(X),ne.setLayers(v),ne.setCodeWords(L),ne.setMatrix(te),ne}static drawBullsEye(i,o,l){for(let c=0;c<l;c+=2)for(let d=o-c;d<=o+c;d++)i.set(d,o-c),i.set(d,o+c),i.set(o-c,d),i.set(o+c,d);i.set(o-l,o-l),i.set(o-l+1,o-l),i.set(o-l,o-l+1),i.set(o+l,o-l),i.set(o+l,o-l+1),i.set(o+l,o+l-1)}static generateModeMessage(i,o,l){let c=new F;return i?(c.appendBits(o-1,2),c.appendBits(l-1,6),c=Le.generateCheckWords(c,28,4)):(c.appendBits(o-1,5),c.appendBits(l-1,11),c=Le.generateCheckWords(c,40,4)),c}static drawModeMessage(i,o,l,c){let d=R.truncDivision(l,2);if(o)for(let f=0;f<7;f++){let y=d-3+f;c.get(f)&&i.set(y,d-5),c.get(f+7)&&i.set(d+5,y),c.get(20-f)&&i.set(y,d+5),c.get(27-f)&&i.set(d-5,y)}else for(let f=0;f<10;f++){let y=d-5+f+R.truncDivision(f,5);c.get(f)&&i.set(y,d-7),c.get(f+10)&&i.set(d+7,y),c.get(29-f)&&i.set(y,d+7),c.get(39-f)&&i.set(d-7,y)}}static generateCheckWords(i,o,l){let c=i.getSize()/l,d=new vu(Le.getGF(l)),f=R.truncDivision(o,l),y=Le.bitsToWords(i,l,f);d.encode(y,f-c);let v=o%l,E=new F;E.appendBits(0,v);for(const A of Array.from(y))E.appendBits(A,l);return E}static bitsToWords(i,o,l){let c=new Int32Array(l),d,f;for(d=0,f=i.getSize()/o;d<f;d++){let y=0;for(let v=0;v<o;v++)y|=i.get(d*o+v)?1<<o-v-1:0;c[d]=y}return c}static getGF(i){switch(i){case 4:return Ue.AZTEC_PARAM;case 6:return Ue.AZTEC_DATA_6;case 8:return Ue.AZTEC_DATA_8;case 10:return Ue.AZTEC_DATA_10;case 12:return Ue.AZTEC_DATA_12;default:throw new _("Unsupported word size "+i)}}static stuffBits(i,o){let l=new F,c=i.getSize(),d=(1<<o)-2;for(let f=0;f<c;f+=o){let y=0;for(let v=0;v<o;v++)(f+v>=c||i.get(f+v))&&(y|=1<<o-1-v);(y&d)===d?(l.appendBits(y&d,o),f--):y&d?l.appendBits(y,o):(l.appendBits(y|1,o),f--)}return l}static totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}Le.DEFAULT_EC_PERCENT=33,Le.DEFAULT_AZTEC_LAYERS=0,Le.MAX_NB_BITS=32,Le.MAX_NB_BITS_COMPACT=4,Le.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ha{encode(i,o,l,c){return this.encodeWithHints(i,o,l,c,null)}encodeWithHints(i,o,l,c,d){let f=_u.ISO_8859_1,y=Le.DEFAULT_EC_PERCENT,v=Le.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(At.CHARACTER_SET)&&(f=uh.forName(d.get(At.CHARACTER_SET).toString())),d.has(At.ERROR_CORRECTION)&&(y=R.parseInt(d.get(At.ERROR_CORRECTION).toString())),d.has(At.AZTEC_LAYERS)&&(v=R.parseInt(d.get(At.AZTEC_LAYERS).toString()))),ha.encodeLayers(i,o,l,c,f,y,v)}static encodeLayers(i,o,l,c,d,f,y){if(o!==ge.AZTEC)throw new _("Can only encode AZTEC, but got "+o);let v=Le.encode(se.getBytes(i,d),f,y);return ha.renderResult(v,l,c)}static renderResult(i,o,l){let c=i.getMatrix();if(c==null)throw new Jn;let d=c.getWidth(),f=c.getHeight(),y=Math.max(o,d),v=Math.max(l,f),E=Math.min(y/d,v/f),A=(y-d*E)/2,N=(v-f*E)/2,b=new ue(y,v);for(let L=0,U=N;L<f;L++,U+=E)for(let G=0,W=A;G<d;G++,W+=E)c.get(G,L)&&b.setRegion(W,U,E,E);return b}}n.AbstractExpandedDecoder=cu,n.ArgumentException=w,n.ArithmeticException=ta,n.AztecCode=ch,n.AztecCodeReader=ia,n.AztecCodeWriter=ha,n.AztecDecoder=Ye,n.AztecDetector=Xf,n.AztecDetectorResult=Yf,n.AztecEncoder=Le,n.AztecHighLevelEncoder=Zs,n.AztecPoint=Yt,n.BarcodeFormat=ge,n.Binarizer=P,n.BinaryBitmap=C,n.BitArray=F,n.BitMatrix=ue,n.BitSource=pu,n.BrowserAztecCodeReader=Vx,n.BrowserBarcodeReader=Wx,n.BrowserCodeReader=Sn,n.BrowserDatamatrixCodeReader=$x,n.BrowserMultiFormatReader=iw,n.BrowserPDF417Reader=sw,n.BrowserQRCodeReader=ow,n.BrowserQRCodeSvgWriter=di,n.CharacterSetECI=q,n.ChecksumException=T,n.Code128Reader=ie,n.Code39Reader=_t,n.DataMatrixDecodedBitStreamParser=br,n.DataMatrixReader=Rr,n.DecodeHintType=H,n.DecoderResult=Gs,n.DefaultGridSampler=jf,n.DetectorResult=ra,n.EAN13Reader=oi,n.EncodeHintType=At,n.Exception=p,n.FormatException=B,n.GenericGF=Ue,n.GenericGFPoly=tn,n.GlobalHistogramBinarizer=ve,n.GridSampler=ou,n.GridSamplerInstance=Ir,n.HTMLCanvasElementLuminanceSource=Te,n.HybridBinarizer=oe,n.ITFReader=We,n.IllegalArgumentException=_,n.IllegalStateException=Jn,n.InvertedLuminanceSource=xe,n.LuminanceSource=Q,n.MathUtils=Oe,n.MultiFormatOneDReader=Fi,n.MultiFormatReader=lh,n.MultiFormatWriter=lw,n.NotFoundException=z,n.OneDReader=wt,n.PDF417DecodedBitStreamParser=j,n.PDF417DecoderErrorCorrection=nh,n.PDF417Reader=Ot,n.PDF417ResultMetadata=ih,n.PerspectiveTransform=Bn,n.PlanarYUVLuminanceSource=tr,n.QRCodeByteMatrix=da,n.QRCodeDataMask=In,n.QRCodeDecodedBitStreamParser=at,n.QRCodeDecoderErrorCorrectionLevel=je,n.QRCodeDecoderFormatInformation=Ht,n.QRCodeEncoder=Ze,n.QRCodeEncoderQRCode=ci,n.QRCodeMaskUtil=pt,n.QRCodeMatrixUtil=Ee,n.QRCodeMode=we,n.QRCodeReader=kr,n.QRCodeVersion=ye,n.QRCodeWriter=Vi,n.RGBLuminanceSource=Eu,n.RSS14Reader=ht,n.RSSExpandedReader=J,n.ReaderException=ca,n.ReedSolomonDecoder=qs,n.ReedSolomonEncoder=vu,n.ReedSolomonException=Di,n.Result=ot,n.ResultMetadataType=Nt,n.ResultPoint=pe,n.StringUtils=se,n.UnsupportedOperationException=re,n.VideoInputDevice=rt,n.WhiteRectangleDetector=cr,n.WriterException=Ke,n.ZXingArrays=k,n.ZXingCharset=uh,n.ZXingInteger=R,n.ZXingStandardCharsets=_u,n.ZXingStringBuilder=le,n.ZXingStringEncoding=Se,n.ZXingSystem=M,n.createAbstractExpandedDecoder=eh,Object.defineProperty(n,"__esModule",{value:!0})})})(vd,vd.exports);var et=vd.exports;const $C=Up(et),YC=Fp({__proto__:null,default:$C},[et]);var i1=function(){function t(e,n,r){if(this.formatMap=new Map([[ae.QR_CODE,et.BarcodeFormat.QR_CODE],[ae.AZTEC,et.BarcodeFormat.AZTEC],[ae.CODABAR,et.BarcodeFormat.CODABAR],[ae.CODE_39,et.BarcodeFormat.CODE_39],[ae.CODE_93,et.BarcodeFormat.CODE_93],[ae.CODE_128,et.BarcodeFormat.CODE_128],[ae.DATA_MATRIX,et.BarcodeFormat.DATA_MATRIX],[ae.MAXICODE,et.BarcodeFormat.MAXICODE],[ae.ITF,et.BarcodeFormat.ITF],[ae.EAN_13,et.BarcodeFormat.EAN_13],[ae.EAN_8,et.BarcodeFormat.EAN_8],[ae.PDF_417,et.BarcodeFormat.PDF_417],[ae.RSS_14,et.BarcodeFormat.RSS_14],[ae.RSS_EXPANDED,et.BarcodeFormat.RSS_EXPANDED],[ae.UPC_A,et.BarcodeFormat.UPC_A],[ae.UPC_E,et.BarcodeFormat.UPC_E],[ae.UPC_EAN_EXTENSION,et.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!YC)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var s=this.createZXingFormats(e),a=new Map;a.set(et.DecodeHintType.POSSIBLE_FORMATS,s),a.set(et.DecodeHintType.TRY_HARDER,!1),this.hints=a}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,s){try{r(n.decode(e))}catch(a){s(a)}})},t.prototype.decode=function(e){var n=new et.MultiFormatReader(this.verbose,this.hints),r=new et.HTMLCanvasElementLuminanceSource(e),s=new et.BinaryBitmap(new et.HybridBinarizer(r)),a=n.decode(s);return{text:a.text,format:lx.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,s){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,s=e;r<s.length;r++){var a=s[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),jC=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(w){try{p(r.next(w))}catch(_){u(_)}}function m(w){try{p(r.throw(w))}catch(_){u(_)}}function p(w){w.done?a(w.value):s(w.value).then(h,m)}p((r=r.apply(t,e||[])).next())})},XC=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(p){return function(w){return m([p,w])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(r=1,s&&(a=p[0]&2?s.return:p[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,p[1])).done)return a;switch(s=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,s=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(w){p=[6,w],s=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},s1=function(){function t(e,n,r){if(this.formatMap=new Map([[ae.QR_CODE,"qr_code"],[ae.AZTEC,"aztec"],[ae.CODABAR,"codabar"],[ae.CODE_39,"code_39"],[ae.CODE_93,"code_93"],[ae.CODE_128,"code_128"],[ae.DATA_MATRIX,"data_matrix"],[ae.ITF,"itf"],[ae.EAN_13,"ean_13"],[ae.EAN_8,"ean_8"],[ae.PDF_417,"pdf417"],[ae.UPC_A,"upc_a"],[ae.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var s=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return jC(this,void 0,void 0,function(){var n,r;return XC(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=s.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:lx.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,s=0,a=e;s<a.length;s++){var u=a[s],h=u.boundingBox.width*u.boundingBox.height;h>r&&(r=h,n=u)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,s=e;r<s.length;r++){var a=s[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,s){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),o1=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(w){try{p(r.next(w))}catch(_){u(_)}}function m(w){try{p(r.throw(w))}catch(_){u(_)}}function p(w){w.done?a(w.value):s(w.value).then(h,m)}p((r=r.apply(t,e||[])).next())})},a1=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(p){return function(w){return m([p,w])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(r=1,s&&(a=p[0]&2?s.return:p[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,p[1])).done)return a;switch(s=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,s=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(w){p=[6,w],s=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},JC=function(){function t(e,n,r,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&s1.isSupported()?(this.primaryDecoder=new s1(e,r,s),this.secondaryDecoder=new i1(e,r,s)):this.primaryDecoder=new i1(e,r,s)}return t.prototype.decodeAsync=function(e){return o1(this,void 0,void 0,function(){var n;return a1(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return o1(this,void 0,void 0,function(){var n,r;return a1(this,function(s){switch(s.label){case 0:n=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,s.sent()];case 3:if(r=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var s=r[n];e+=s}var a=e/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Ff=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kl=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(w){try{p(r.next(w))}catch(_){u(_)}}function m(w){try{p(r.throw(w))}catch(_){u(_)}}function p(w){w.done?a(w.value):s(w.value).then(h,m)}p((r=r.apply(t,e||[])).next())})},Pl=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(p){return function(w){return m([p,w])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(r=1,s&&(a=p[0]&2?s.return:p[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,p[1])).done)return a;switch(s=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,s=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(w){p=[6,w],s=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},cx=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),ZC=function(t){Ff(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var s={advanced:[r]};return this.track.applyConstraints(s)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(cx),QC=function(t){Ff(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(ZC),eA=function(t){Ff(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(cx),tA=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new QC(this.track)},t.prototype.torchFeature=function(){return new eA(this.track)},t}(),nA=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,s=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,s),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,s){return kl(this,void 0,void 0,function(){var a,u;return Pl(this,function(h){switch(h.label){case 0:return a=new t(e,n,s),r.aspectRatio?(u={aspectRatio:r.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(u)]):[3,2];case 1:h.sent(),h.label=2;case 2:return a.setupSurface(),[2,a]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return kl(this,void 0,void 0,function(){return Pl(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var s=e.mediaStream.getVideoTracks(),a=s.length,u=0;e.mediaStream.getVideoTracks().forEach(function(h){e.mediaStream.removeTrack(h),h.stop(),++u,u>=a&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new tA(this.getFirstTrackOrFail())},t}(),rA=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return kl(this,void 0,void 0,function(){return Pl(this,function(s){return[2,nA.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return kl(this,void 0,void 0,function(){var n,r;return Pl(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=s.sent(),[2,new t(r)]}})})},t}(),l1=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(w){try{p(r.next(w))}catch(_){u(_)}}function m(w){try{p(r.throw(w))}catch(_){u(_)}}function p(w){w.done?a(w.value):s(w.value).then(h,m)}p((r=r.apply(t,e||[])).next())})},u1=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(p){return function(w){return m([p,w])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(r=1,s&&(a=p[0]&2?s.return:p[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,p[1])).done)return a;switch(s=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,s=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(w){p=[6,w],s=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},iA=function(){function t(){}return t.failIfNotSupported=function(){return l1(this,void 0,void 0,function(){return u1(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return l1(this,void 0,void 0,function(){return u1(this,function(n){return[2,rA.create(e)]})})},t}(),sA=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(w){try{p(r.next(w))}catch(_){u(_)}}function m(w){try{p(r.throw(w))}catch(_){u(_)}}function p(w){w.done?a(w.value):s(w.value).then(h,m)}p((r=r.apply(t,e||[])).next())})},oA=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(p){return function(w){return m([p,w])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(r=1,s&&(a=p[0]&2?s.return:p[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,p[1])).done)return a;switch(s=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,s=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(w){p=[6,w],s=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},aA=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=ds.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=ds.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return sA(this,void 0,void 0,function(){var e,n,r,s,a,u,h;return oA(this,function(m){switch(m.label){case 0:return e=function(p){for(var w=p.getVideoTracks(),_=0,C=w;_<C.length;_++){var T=C[_];T.enabled=!1,T.stop(),p.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=m.sent(),s=[],a=0,u=r;a<u.length;a++)h=u[a],h.kind==="videoinput"&&s.push({id:h.deviceId,label:h.label});return e(n),[2,s]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(a){for(var u=[],h=0,m=a;h<m.length;h++){var p=m[h];p.kind==="video"&&u.push({id:p.id,label:p.label})}e(u)},s=MediaStreamTrack;s.getSources(r)})},t}(),gt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(gt||(gt={}));var lA=function(){function t(){this.state=gt.NOT_STARTED,this.onGoingTransactionNewState=gt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===gt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=gt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===gt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=gt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==gt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case gt.UNKNOWN:throw"Transition from unknown is not allowed";case gt.NOT_STARTED:this.failIfNewStateIs(e,[gt.PAUSED]);break;case gt.SCANNING:break;case gt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,s=n;r<s.length;r++){var a=s[r];if(e===a)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),uA=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===gt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==gt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===gt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===gt.PAUSED},t}(),cA=function(){function t(){}return t.create=function(){return new uA(new lA)},t}(),dA=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mn=function(t){dA(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(zC),fA=function(){function t(e,n){this.logger=n,this.fps=mn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=mn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?ux.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!dr(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),hA=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new KC(this.verbose),this.qrcode=new JC(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=cA.create()}return t.prototype.start=function(e,n,r,s){var a=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var u;s?u=s:u=this.verbose?this.logger.log:function(){};var h=fA.create(n,this.logger);this.clearElement();var m=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=m,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:mn.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var _=this,C=this.stateManagerProxy.startTransition(gt.SCANNING);return new Promise(function(T,P){var M=p?h.videoConstraints:_.createVideoConstraints(e);if(!M){C.cancel(),P("videoConstraints should be defined");return}var V={};(!p||h.aspectRatio)&&(V.aspectRatio=h.aspectRatio);var D={onRenderSurfaceReady:function(k,R){_.setupUi(k,R,h),_.isScanning=!0,_.foreverScan(h,r,u)}};iA.failIfNotSupported().then(function(k){k.create(M).then(function(R){return R.render(a.element,V,D).then(function(F){_.renderedCamera=F,C.execute(),T(null)}).catch(function(F){C.cancel(),P(F)})}).catch(function(R){C.cancel(),P(ds.errorGettingUserMedia(R))})}).catch(function(k){C.cancel(),P(ds.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(gt.PAUSED),this.showPausedState(),(dr(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(gt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(gt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var a=document.getElementById(mn.SHADED_REGION_ELEMENT_ID);a&&e.element.removeChild(a)}},s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),r(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),n.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(dr(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,a){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var u=new Image;u.onload=function(){var h=u.width,m=u.height,p=document.getElementById(r.elementId),w=p.clientWidth?p.clientWidth:mn.DEFAULT_WIDTH,_=Math.max(p.clientHeight?p.clientHeight:m,mn.FILE_SCAN_MIN_HEIGHT),C=r.computeCanvasDrawConfig(h,m,w,_);if(n){var T=r.createCanvasElement(w,_,"qr-canvas-visible");T.style.display="inline-block",p.appendChild(T);var P=T.getContext("2d");if(!P)throw"Unable to get 2d context from canvas";P.canvas.width=w,P.canvas.height=_,P.drawImage(u,0,0,h,m,C.x,C.y,C.width,C.height)}var M=mn.FILE_SCAN_HIDDEN_CANVAS_PADDING,V=Math.max(u.width,C.width),D=Math.max(u.height,C.height),k=V+2*M,R=D+2*M,F=r.createCanvasElement(k,R);p.appendChild(F);var Y=F.getContext("2d");if(!Y)throw"Unable to get 2d context from canvas";Y.canvas.width=k,Y.canvas.height=R,Y.drawImage(u,0,0,h,m,M,M,V,D);try{r.qrcode.decodeRobustlyAsync(F).then(function(H){s(r1.createFromQrcodeResult(H))}).catch(a)}catch(H){a("QR code parse error, error = ".concat(H))}},u.onerror=a,u.onabort=a,u.onstalled=a,u.onsuspend=a,u.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return aA.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!ux.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[ae.QR_CODE,ae.AZTEC,ae.CODABAR,ae.CODE_39,ae.CODE_93,ae.CODE_128,ae.DATA_MATRIX,ae.MAXICODE,ae.ITF,ae.EAN_13,ae.EAN_8,ae.PDF_417,ae.RSS_14,ae.RSS_EXPANDED,ae.UPC_A,ae.UPC_E,ae.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],s=0,a=e.formatsToSupport;s<a.length;s++){var u=a[s];qC(u)?r.push(u):this.logger.warn("Invalid format: ".concat(u," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(dr(e))return!0;if(!dr(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(dr(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return dr(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var s=this,a=r.qrbox;this.validateQrboxConfig(a);var u=this.toQrdimensions(e,n,a),h=function(p){if(p<mn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(mn.MIN_QR_BOX_SIZE,"px.")},m=function(p){return p>e&&(s.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=e),p};h(u.width),h(u.height),u.width=m(u.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var s=dr(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(s);var a=this.toQrdimensions(e,n,s);a.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var u=r.isShadedBoxEnabled()&&a.height<=n,h={x:0,y:0,width:e,height:n},m=u?this.getShadedRegionBounds(e,n,a):h,p=this.createCanvasElement(m.width,m.height),w={willReadFrequently:!0},_=p.getContext("2d",w);_.canvas.width=m.width,_.canvas.height=m.height,this.element.append(p),u&&this.possiblyInsertShadingElement(this.element,e,n,a),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=_,this.canvasElement=p},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=ds.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return e(s.text,r1.createFromQrcodeResult(s)),r.possiblyUpdateShaders(!0),!0}).catch(function(s){r.possiblyUpdateShaders(!1);var a=ds.codeParseError(s);return n(a,WC.createFrom(a)),!1})},t.prototype.foreverScan=function(e,n,r){var s=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),u=a.videoWidth/a.clientWidth,h=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*u,p=this.qrRegion.height*h,w=this.qrRegion.x*u,_=this.qrRegion.y*h;this.context.drawImage(a,w,_,m,p,0,0,this.qrRegion.width,this.qrRegion.height);var C=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(e,n,r)},s.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(T){!T&&e.disableFlip!==!0?(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(n,r).finally(function(){C()})):C()}).catch(function(T){s.logger.logError("Error happend while scanning context",T),C()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",s={user:!0,environment:!0},a="exact",u=function(P){if(P in s)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(P,"'")},h=Object.keys(e);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var m=Object.keys(e)[0];if(m!==n&&m!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(m===n){var p=e.facingMode;if(typeof p=="string"){if(u(p))return{facingMode:p}}else if(typeof p=="object")if(a in p){if(u(p["".concat(a)]))return{facingMode:{exact:p["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var w=typeof p;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var _=e.deviceId;if(typeof _=="string")return{deviceId:_};if(typeof _=="object"){if(a in _)return{deviceId:{exact:_["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var C=typeof _;throw"Invalid type of 'deviceId' = ".concat(C)}}}var T=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},t.prototype.computeCanvasDrawConfig=function(e,n,r,s){if(e<=r&&n<=s){var a=(r-e)/2,u=(s-n)/2;return{x:a,y:u,width:e,height:n}}else{var h=e,m=n;return e>r&&(n=r/e*n,e=r),n>s&&(e=s/n*e,n=s),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(m)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,s)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?mn.BORDER_SHADER_MATCH_COLOR:mn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var s=e,a=n,u=document.createElement("canvas");return u.style.width="".concat(s,"px"),u.style.height="".concat(a,"px"),u.style.display="none",u.id=dr(r)?"qr-canvas":r,u},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,s){if(!(n-s.width<1||r-s.height<1)){var a=document.createElement("div");a.style.position="absolute";var u=(n-s.width)/2,h=(r-s.height)/2;if(a.style.borderLeft="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(mn.SHADED_REGION_ELEMENT_ID),n-s.width<11||r-s.height<11)this.hasBorderShaders=!1;else{var m=5,p=40;this.insertShaderBorders(a,p,m,-m,null,0,!0),this.insertShaderBorders(a,p,m,-m,null,0,!1),this.insertShaderBorders(a,p,m,null,-m,0,!0),this.insertShaderBorders(a,p,m,null,-m,0,!1),this.insertShaderBorders(a,m,p+m,-m,null,-m,!0),this.insertShaderBorders(a,m,p+m,null,-m,-m,!0),this.insertShaderBorders(a,m,p+m,-m,null,-m,!1),this.insertShaderBorders(a,m,p+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(a)}},t.prototype.insertShaderBorders=function(e,n,r,s,a,u,h){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=mn.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(n,"px"),m.style.height="".concat(r,"px"),s!==null&&(m.style.top="".concat(s,"px")),a!==null&&(m.style.bottom="".concat(a,"px")),h?m.style.left="".concat(u,"px"):m.style.right="".concat(u,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),c1;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(c1||(c1={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let pA,gA;function mA(){return{geminiUrl:pA,vertexUrl:gA}}function yA(t,e,n,r){var s,a;if(!(t!=null&&t.baseUrl)){const u=mA();return e?(s=u.vertexUrl)!==null&&s!==void 0?s:n:(a=u.geminiUrl)!==null&&a!==void 0?a:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ar{}function ce(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function x(t,e,n){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const h=u.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[h])){const m=t[h];if(Array.isArray(n))for(let p=0;p<m.length;p++){const w=m[p];x(w,e.slice(a+1),n[p])}else for(const p of m)x(p,e.slice(a+1),n)}return}else if(u.endsWith("[0]")){const h=u.slice(0,-3);h in t||(t[h]=[{}]);const m=t[h];x(m[0],e.slice(a+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function g(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const s=e[r];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in t){const u=t[a];return Array.isArray(u)?u.map(h=>g(h,e.slice(r+1),n)):n}else return n}else t=t[s]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function xA(t,e){for(const[n,r]of Object.entries(e)){const s=n.split("."),a=r.split("."),u=new Set;let h=-1;for(let m=0;m<s.length;m++)if(s[m]==="*"){h=m;break}if(h!==-1&&a.length>h)for(let m=h;m<a.length;m++){const p=a[m];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&u.add(p)}Ed(t,s,a,0,u)}}function Ed(t,e,n,r,s){if(r>=e.length||typeof t!="object"||t===null)return;const a=e[r];if(a.endsWith("[]")){const u=a.slice(0,-2),h=t;if(u in h&&Array.isArray(h[u]))for(const m of h[u])Ed(m,e,n,r+1,s)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,h=Object.keys(u).filter(p=>!p.startsWith("_")&&!s.has(p)),m={};for(const p of h)m[p]=u[p];for(const[p,w]of Object.entries(m)){const _=[];for(const C of n.slice(r))C==="*"?_.push(p):_.push(C);x(u,_,w)}for(const p of h)delete u[p]}}else{const u=t;a in u&&Ed(u[a],e,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wA(t){const e={},n=g(t,["operationName"]);n!=null&&x(e,["operationName"],n);const r=g(t,["resourceName"]);return r!=null&&x(e,["_url","resourceName"],r),e}function vA(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const r=g(t,["metadata"]);r!=null&&x(e,["metadata"],r);const s=g(t,["done"]);s!=null&&x(e,["done"],s);const a=g(t,["error"]);a!=null&&x(e,["error"],a);const u=g(t,["response","generateVideoResponse"]);return u!=null&&x(e,["response"],_A(u)),e}function EA(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const r=g(t,["metadata"]);r!=null&&x(e,["metadata"],r);const s=g(t,["done"]);s!=null&&x(e,["done"],s);const a=g(t,["error"]);a!=null&&x(e,["error"],a);const u=g(t,["response"]);return u!=null&&x(e,["response"],CA(u)),e}function _A(t){const e={},n=g(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>AA(u))),x(e,["generatedVideos"],a)}const r=g(t,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const s=g(t,["raiMediaFilteredReasons"]);return s!=null&&x(e,["raiMediaFilteredReasons"],s),e}function CA(t){const e={},n=g(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>SA(u))),x(e,["generatedVideos"],a)}const r=g(t,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const s=g(t,["raiMediaFilteredReasons"]);return s!=null&&x(e,["raiMediaFilteredReasons"],s),e}function AA(t){const e={},n=g(t,["video"]);return n!=null&&x(e,["video"],kA(n)),e}function SA(t){const e={},n=g(t,["_self"]);return n!=null&&x(e,["video"],PA(n)),e}function TA(t){const e={},n=g(t,["operationName"]);return n!=null&&x(e,["_url","operationName"],n),e}function IA(t){const e={},n=g(t,["operationName"]);return n!=null&&x(e,["_url","operationName"],n),e}function NA(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const r=g(t,["metadata"]);r!=null&&x(e,["metadata"],r);const s=g(t,["done"]);s!=null&&x(e,["done"],s);const a=g(t,["error"]);a!=null&&x(e,["error"],a);const u=g(t,["response"]);return u!=null&&x(e,["response"],bA(u)),e}function bA(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["parent"]);r!=null&&x(e,["parent"],r);const s=g(t,["documentName"]);return s!=null&&x(e,["documentName"],s),e}function dx(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const r=g(t,["metadata"]);r!=null&&x(e,["metadata"],r);const s=g(t,["done"]);s!=null&&x(e,["done"],s);const a=g(t,["error"]);a!=null&&x(e,["error"],a);const u=g(t,["response"]);return u!=null&&x(e,["response"],RA(u)),e}function RA(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["parent"]);r!=null&&x(e,["parent"],r);const s=g(t,["documentName"]);return s!=null&&x(e,["documentName"],s),e}function kA(t){const e={},n=g(t,["uri"]);n!=null&&x(e,["uri"],n);const r=g(t,["encodedVideo"]);r!=null&&x(e,["videoBytes"],Uf(r));const s=g(t,["encoding"]);return s!=null&&x(e,["mimeType"],s),e}function PA(t){const e={},n=g(t,["gcsUri"]);n!=null&&x(e,["uri"],n);const r=g(t,["bytesBase64Encoded"]);r!=null&&x(e,["videoBytes"],Uf(r));const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var d1;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(d1||(d1={}));var f1;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(f1||(f1={}));var h1;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(h1||(h1={}));var qr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(qr||(qr={}));var p1;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(p1||(p1={}));var g1;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(g1||(g1={}));var m1;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(m1||(m1={}));var y1;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(y1||(y1={}));var x1;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(x1||(x1={}));var w1;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(w1||(w1={}));var v1;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(v1||(v1={}));var E1;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(E1||(E1={}));var _1;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(_1||(_1={}));var C1;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(C1||(C1={}));var A1;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(A1||(A1={}));var S1;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(S1||(S1={}));var T1;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(T1||(T1={}));var I1;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(I1||(I1={}));var N1;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(N1||(N1={}));var Ml;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ml||(Ml={}));var b1;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(b1||(b1={}));var R1;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(R1||(R1={}));var k1;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(k1||(k1={}));var _d;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(_d||(_d={}));var P1;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(P1||(P1={}));var M1;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(M1||(M1={}));var D1;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(D1||(D1={}));var O1;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(O1||(O1={}));var L1;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(L1||(L1={}));var B1;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(B1||(B1={}));var F1;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(F1||(F1={}));var U1;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(U1||(U1={}));var V1;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(V1||(V1={}));var G1;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(G1||(G1={}));var H1;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(H1||(H1={}));var q1;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(q1||(q1={}));var z1;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(z1||(z1={}));var W1;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(W1||(W1={}));var K1;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(K1||(K1={}));var $1;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})($1||($1={}));var Y1;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Y1||(Y1={}));var j1;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(j1||(j1={}));var X1;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(X1||(X1={}));var J1;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(J1||(J1={}));var Z1;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Z1||(Z1={}));var Q1;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Q1||(Q1={}));var ep;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ep||(ep={}));var tp;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(tp||(tp={}));var np;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(np||(np={}));var rp;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(rp||(rp={}));var ip;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ip||(ip={}));var sp;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(sp||(sp={}));var op;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(op||(op={}));var ap;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(ap||(ap={}));var fs;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(fs||(fs={}));class Cd{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class lo{get text(){var e,n,r,s,a,u,h,m;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",w=!1;const _=[];for(const C of(m=(h=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[T,P]of Object.entries(C))T!=="text"&&T!=="thought"&&T!=="thoughtSignature"&&(P!==null||P!==void 0)&&_.push(T);if(typeof C.text=="string"){if(typeof C.thought=="boolean"&&C.thought)continue;w=!0,p+=C.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),w?p:void 0}get data(){var e,n,r,s,a,u,h,m;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const w=[];for(const _ of(m=(h=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[C,T]of Object.entries(_))C!=="inlineData"&&(T!==null||T!==void 0)&&w.push(C);_.inlineData&&typeof _.inlineData.data=="string"&&(p+=atob(_.inlineData.data))}return w.length>0&&console.warn(`there are non-data parts ${w} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,r,s,a,u,h,m;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(h=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(w=>w.functionCall).map(w=>w.functionCall).filter(w=>w!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,r,s,a,u,h,m,p;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const w=(m=(h=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((w==null?void 0:w.length)!==0)return(p=w==null?void 0:w[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,r,s,a,u,h,m,p;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const w=(m=(h=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((w==null?void 0:w.length)!==0)return(p=w==null?void 0:w[0])===null||p===void 0?void 0:p.output}}class lp{}class up{}class MA{}class DA{}class OA{}class LA{}class cp{}class dp{}class fp{}class BA{}class Dl{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Dl;let s;const a=e;return n?s=EA(a):s=vA(a),Object.assign(r,s),r}}class hp{}class pp{}class gp{}class FA{}class UA{}class VA{}class Vf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Vf,a=NA(e);return Object.assign(r,a),r}}class GA{}class HA{}class qA{}class mp{}class zA{get text(){var e,n,r;let s="",a=!1;const u=[];for(const h of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[m,p]of Object.entries(h))m!=="text"&&m!=="thought"&&p!==null&&u.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,s+=h.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,r;let s="";const a=[];for(const u of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[h,m]of Object.entries(u))h!=="inlineData"&&m!==null&&a.push(h);u.inlineData&&typeof u.inlineData.data=="string"&&(s+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class WA{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Gf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Gf,a=dx(e);return Object.assign(r,a),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function fx(t,e){const n=Fe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function hx(t){return Array.isArray(t)?t.map(e=>Ol(e)):[Ol(t)]}function Ol(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function px(t){const e=Ol(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function gx(t){const e=Ol(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function yp(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function mx(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>yp(e)):[yp(t)]}function Ad(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function xp(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function wp(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Kt(t){if(t==null)throw new Error("ContentUnion is required");return Ad(t)?t:{role:"user",parts:mx(t)}}function Hf(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Kt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Kt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Kt(n)):[Kt(e)]}function Dn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(xp(t)||wp(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Kt(t)]}const e=[],n=[],r=Ad(t[0]);for(const s of t){const a=Ad(s);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(xp(s)||wp(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:mx(n)}),e}function KA(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(qr).includes(n[0].toUpperCase())?n[0].toUpperCase():qr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(qr).includes(r.toUpperCase())?r.toUpperCase():qr.TYPE_UNSPECIFIED})}}function vs(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&KA(t.type,e);for(const[u,h]of Object.entries(t))if(h!=null)if(u=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(qr).includes(h.toUpperCase())?h.toUpperCase():qr.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=vs(h);else if(r.includes(u)){const m=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}m.push(vs(p))}e[u]=m}else if(s.includes(u)){const m={};for(const[p,w]of Object.entries(h))m[p]=vs(w);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=h}return e}function qf(t){return vs(t)}function zf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Wf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Fs(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=vs(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=vs(e.response));return t}function Us(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function $A(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Sr(t,e){if(typeof e!="string")throw new Error("name must be a string");return $A(t,e,"cachedContents")}function yx(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ii(t){return Uf(t)}function YA(t){return t!=null&&typeof t=="object"&&"name"in t}function jA(t){return t!=null&&typeof t=="object"&&"video"in t}function XA(t){return t!=null&&typeof t=="object"&&"uri"in t}function xx(t){var e;let n;if(YA(t)&&(n=t.name),!(XA(t)&&(n=t.uri,n===void 0))&&!(jA(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function wx(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function vx(t){for(const e of["models","tunedModels","publisherModels"])if(JA(t,e))return t[e];return[]}function JA(t,e){return t!==null&&typeof t=="object"&&e in t}function ZA(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function QA(t,e={}){const n=[],r=new Set;for(const s of t){const a=s.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const u=ZA(s,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function Ex(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function eS(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function _x(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let a=!1;for(const u of s){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Vs(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Cx(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tS(t){const e={},n=g(t,["responsesFile"]);n!=null&&x(e,["fileName"],n);const r=g(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>OS(u))),x(e,["inlinedResponses"],a)}const s=g(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),x(e,["inlinedEmbedContentResponses"],a)}return e}function nS(t){const e={},n=g(t,["predictionsFormat"]);n!=null&&x(e,["format"],n);const r=g(t,["gcsDestination","outputUriPrefix"]);r!=null&&x(e,["gcsUri"],r);const s=g(t,["bigqueryDestination","outputUri"]);return s!=null&&x(e,["bigqueryUri"],s),e}function rS(t){const e={},n=g(t,["format"]);n!=null&&x(e,["predictionsFormat"],n);const r=g(t,["gcsUri"]);r!=null&&x(e,["gcsDestination","outputUriPrefix"],r);const s=g(t,["bigqueryUri"]);if(s!=null&&x(e,["bigqueryDestination","outputUri"],s),g(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(g(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Qa(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const r=g(t,["metadata","displayName"]);r!=null&&x(e,["displayName"],r);const s=g(t,["metadata","state"]);s!=null&&x(e,["state"],Cx(s));const a=g(t,["metadata","createTime"]);a!=null&&x(e,["createTime"],a);const u=g(t,["metadata","endTime"]);u!=null&&x(e,["endTime"],u);const h=g(t,["metadata","updateTime"]);h!=null&&x(e,["updateTime"],h);const m=g(t,["metadata","model"]);m!=null&&x(e,["model"],m);const p=g(t,["metadata","output"]);return p!=null&&x(e,["dest"],tS(_x(p))),e}function Sd(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const r=g(t,["displayName"]);r!=null&&x(e,["displayName"],r);const s=g(t,["state"]);s!=null&&x(e,["state"],Cx(s));const a=g(t,["error"]);a!=null&&x(e,["error"],a);const u=g(t,["createTime"]);u!=null&&x(e,["createTime"],u);const h=g(t,["startTime"]);h!=null&&x(e,["startTime"],h);const m=g(t,["endTime"]);m!=null&&x(e,["endTime"],m);const p=g(t,["updateTime"]);p!=null&&x(e,["updateTime"],p);const w=g(t,["model"]);w!=null&&x(e,["model"],w);const _=g(t,["inputConfig"]);_!=null&&x(e,["src"],iS(_));const C=g(t,["outputConfig"]);C!=null&&x(e,["dest"],nS(_x(C)));const T=g(t,["completionStats"]);return T!=null&&x(e,["completionStats"],T),e}function iS(t){const e={},n=g(t,["instancesFormat"]);n!=null&&x(e,["format"],n);const r=g(t,["gcsSource","uris"]);r!=null&&x(e,["gcsUri"],r);const s=g(t,["bigquerySource","inputUri"]);return s!=null&&x(e,["bigqueryUri"],s),e}function sS(t,e){const n={};if(g(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=g(e,["fileName"]);r!=null&&x(n,["fileName"],r);const s=g(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>DS(t,u))),x(n,["requests","requests"],a)}return n}function oS(t){const e={},n=g(t,["format"]);n!=null&&x(e,["instancesFormat"],n);const r=g(t,["gcsUri"]);r!=null&&x(e,["gcsSource","uris"],r);const s=g(t,["bigqueryUri"]);if(s!=null&&x(e,["bigquerySource","inputUri"],s),g(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function aS(t){const e={},n=g(t,["data"]);if(n!=null&&x(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function lS(t,e){const n={},r=g(e,["name"]);return r!=null&&x(n,["_url","name"],Vs(t,r)),n}function uS(t,e){const n={},r=g(e,["name"]);return r!=null&&x(n,["_url","name"],Vs(t,r)),n}function cS(t){const e={},n=g(t,["content"]);n!=null&&x(e,["content"],n);const r=g(t,["citationMetadata"]);r!=null&&x(e,["citationMetadata"],dS(r));const s=g(t,["tokenCount"]);s!=null&&x(e,["tokenCount"],s);const a=g(t,["finishReason"]);a!=null&&x(e,["finishReason"],a);const u=g(t,["avgLogprobs"]);u!=null&&x(e,["avgLogprobs"],u);const h=g(t,["groundingMetadata"]);h!=null&&x(e,["groundingMetadata"],h);const m=g(t,["index"]);m!=null&&x(e,["index"],m);const p=g(t,["logprobsResult"]);p!=null&&x(e,["logprobsResult"],p);const w=g(t,["safetyRatings"]);if(w!=null){let C=w;Array.isArray(C)&&(C=C.map(T=>T)),x(e,["safetyRatings"],C)}const _=g(t,["urlContextMetadata"]);return _!=null&&x(e,["urlContextMetadata"],_),e}function dS(t){const e={},n=g(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),x(e,["citations"],r)}return e}function Ax(t){const e={},n=g(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>HS(a))),x(e,["parts"],s)}const r=g(t,["role"]);return r!=null&&x(e,["role"],r),e}function fS(t,e){const n={},r=g(t,["displayName"]);if(e!==void 0&&r!=null&&x(e,["batch","displayName"],r),g(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function hS(t,e){const n={},r=g(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const s=g(t,["dest"]);return e!==void 0&&s!=null&&x(e,["outputConfig"],rS(eS(s))),n}function vp(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["src"]);s!=null&&x(n,["batch","inputConfig"],sS(t,Ex(t,s)));const a=g(e,["config"]);return a!=null&&fS(a,n),n}function pS(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["model"],Fe(t,r));const s=g(e,["src"]);s!=null&&x(n,["inputConfig"],oS(Ex(t,s)));const a=g(e,["config"]);return a!=null&&hS(a,n),n}function gS(t,e){const n={},r=g(t,["displayName"]);return e!==void 0&&r!=null&&x(e,["batch","displayName"],r),n}function mS(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["src"]);s!=null&&x(n,["batch","inputConfig"],CS(t,s));const a=g(e,["config"]);return a!=null&&gS(a,n),n}function yS(t,e){const n={},r=g(e,["name"]);return r!=null&&x(n,["_url","name"],Vs(t,r)),n}function xS(t,e){const n={},r=g(e,["name"]);return r!=null&&x(n,["_url","name"],Vs(t,r)),n}function wS(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["name"]);r!=null&&x(e,["name"],r);const s=g(t,["done"]);s!=null&&x(e,["done"],s);const a=g(t,["error"]);return a!=null&&x(e,["error"],a),e}function vS(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["name"]);r!=null&&x(e,["name"],r);const s=g(t,["done"]);s!=null&&x(e,["done"],s);const a=g(t,["error"]);return a!=null&&x(e,["error"],a),e}function ES(t,e){const n={},r=g(e,["contents"]);if(r!=null){let a=Hf(t,r);Array.isArray(a)&&(a=a.map(u=>u)),x(n,["requests[]","request","content"],a)}const s=g(e,["config"]);return s!=null&&(x(n,["_self"],_S(s,n)),xA(n,{"requests[].*":"requests[].request.*"})),n}function _S(t,e){const n={},r=g(t,["taskType"]);e!==void 0&&r!=null&&x(e,["requests[]","taskType"],r);const s=g(t,["title"]);e!==void 0&&s!=null&&x(e,["requests[]","title"],s);const a=g(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&x(e,["requests[]","outputDimensionality"],a),g(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function CS(t,e){const n={},r=g(e,["fileName"]);r!=null&&x(n,["file_name"],r);const s=g(e,["inlinedRequests"]);return s!=null&&x(n,["requests"],ES(t,s)),n}function AS(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function SS(t){const e={},n=g(t,["id"]);n!=null&&x(e,["id"],n);const r=g(t,["args"]);r!=null&&x(e,["args"],r);const s=g(t,["name"]);if(s!=null&&x(e,["name"],s),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function TS(t){const e={},n=g(t,["mode"]);n!=null&&x(e,["mode"],n);const r=g(t,["allowedFunctionNames"]);if(r!=null&&x(e,["allowedFunctionNames"],r),g(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function IS(t,e,n){const r={},s=g(e,["systemInstruction"]);n!==void 0&&s!=null&&x(n,["systemInstruction"],Ax(Kt(s)));const a=g(e,["temperature"]);a!=null&&x(r,["temperature"],a);const u=g(e,["topP"]);u!=null&&x(r,["topP"],u);const h=g(e,["topK"]);h!=null&&x(r,["topK"],h);const m=g(e,["candidateCount"]);m!=null&&x(r,["candidateCount"],m);const p=g(e,["maxOutputTokens"]);p!=null&&x(r,["maxOutputTokens"],p);const w=g(e,["stopSequences"]);w!=null&&x(r,["stopSequences"],w);const _=g(e,["responseLogprobs"]);_!=null&&x(r,["responseLogprobs"],_);const C=g(e,["logprobs"]);C!=null&&x(r,["logprobs"],C);const T=g(e,["presencePenalty"]);T!=null&&x(r,["presencePenalty"],T);const P=g(e,["frequencyPenalty"]);P!=null&&x(r,["frequencyPenalty"],P);const M=g(e,["seed"]);M!=null&&x(r,["seed"],M);const V=g(e,["responseMimeType"]);V!=null&&x(r,["responseMimeType"],V);const D=g(e,["responseSchema"]);D!=null&&x(r,["responseSchema"],qf(D));const k=g(e,["responseJsonSchema"]);if(k!=null&&x(r,["responseJsonSchema"],k),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=g(e,["safetySettings"]);if(n!==void 0&&R!=null){let se=R;Array.isArray(se)&&(se=se.map(le=>qS(le))),x(n,["safetySettings"],se)}const F=g(e,["tools"]);if(n!==void 0&&F!=null){let se=Us(F);Array.isArray(se)&&(se=se.map(le=>WS(Fs(le)))),x(n,["tools"],se)}const Y=g(e,["toolConfig"]);if(n!==void 0&&Y!=null&&x(n,["toolConfig"],zS(Y)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=g(e,["cachedContent"]);n!==void 0&&H!=null&&x(n,["cachedContent"],Sr(t,H));const B=g(e,["responseModalities"]);B!=null&&x(r,["responseModalities"],B);const $=g(e,["mediaResolution"]);$!=null&&x(r,["mediaResolution"],$);const q=g(e,["speechConfig"]);if(q!=null&&x(r,["speechConfig"],zf(q)),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const re=g(e,["thinkingConfig"]);re!=null&&x(r,["thinkingConfig"],re);const Se=g(e,["imageConfig"]);return Se!=null&&x(r,["imageConfig"],MS(Se)),r}function NS(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(p=>cS(p))),x(e,["candidates"],m)}const s=g(t,["modelVersion"]);s!=null&&x(e,["modelVersion"],s);const a=g(t,["promptFeedback"]);a!=null&&x(e,["promptFeedback"],a);const u=g(t,["responseId"]);u!=null&&x(e,["responseId"],u);const h=g(t,["usageMetadata"]);return h!=null&&x(e,["usageMetadata"],h),e}function bS(t,e){const n={},r=g(e,["name"]);return r!=null&&x(n,["_url","name"],Vs(t,r)),n}function RS(t,e){const n={},r=g(e,["name"]);return r!=null&&x(n,["_url","name"],Vs(t,r)),n}function kS(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function PS(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function MS(t){const e={},n=g(t,["aspectRatio"]);n!=null&&x(e,["aspectRatio"],n);const r=g(t,["imageSize"]);if(r!=null&&x(e,["imageSize"],r),g(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function DS(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["request","model"],Fe(t,r));const s=g(e,["contents"]);if(s!=null){let h=Dn(s);Array.isArray(h)&&(h=h.map(m=>Ax(m))),x(n,["request","contents"],h)}const a=g(e,["metadata"]);a!=null&&x(n,["metadata"],a);const u=g(e,["config"]);return u!=null&&x(n,["request","generationConfig"],IS(t,u,g(n,["request"],{}))),n}function OS(t){const e={},n=g(t,["response"]);n!=null&&x(e,["response"],NS(n));const r=g(t,["error"]);return r!=null&&x(e,["error"],r),e}function LS(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const s=g(t,["pageToken"]);if(e!==void 0&&s!=null&&x(e,["_query","pageToken"],s),g(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function BS(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const s=g(t,["pageToken"]);e!==void 0&&s!=null&&x(e,["_query","pageToken"],s);const a=g(t,["filter"]);return e!==void 0&&a!=null&&x(e,["_query","filter"],a),n}function FS(t){const e={},n=g(t,["config"]);return n!=null&&LS(n,e),e}function US(t){const e={},n=g(t,["config"]);return n!=null&&BS(n,e),e}function VS(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const s=g(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Qa(u))),x(e,["batchJobs"],a)}return e}function GS(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const s=g(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Sd(u))),x(e,["batchJobs"],a)}return e}function HS(t){const e={},n=g(t,["mediaResolution"]);n!=null&&x(e,["mediaResolution"],n);const r=g(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const s=g(t,["executableCode"]);s!=null&&x(e,["executableCode"],s);const a=g(t,["fileData"]);a!=null&&x(e,["fileData"],AS(a));const u=g(t,["functionCall"]);u!=null&&x(e,["functionCall"],SS(u));const h=g(t,["functionResponse"]);h!=null&&x(e,["functionResponse"],h);const m=g(t,["inlineData"]);m!=null&&x(e,["inlineData"],aS(m));const p=g(t,["text"]);p!=null&&x(e,["text"],p);const w=g(t,["thought"]);w!=null&&x(e,["thought"],w);const _=g(t,["thoughtSignature"]);_!=null&&x(e,["thoughtSignature"],_);const C=g(t,["videoMetadata"]);return C!=null&&x(e,["videoMetadata"],C),e}function qS(t){const e={},n=g(t,["category"]);if(n!=null&&x(e,["category"],n),g(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=g(t,["threshold"]);return r!=null&&x(e,["threshold"],r),e}function zS(t){const e={},n=g(t,["functionCallingConfig"]);n!=null&&x(e,["functionCallingConfig"],TS(n));const r=g(t,["retrievalConfig"]);return r!=null&&x(e,["retrievalConfig"],r),e}function WS(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let w=n;Array.isArray(w)&&(w=w.map(_=>_)),x(e,["functionDeclarations"],w)}if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const s=g(t,["computerUse"]);s!=null&&x(e,["computerUse"],s);const a=g(t,["fileSearch"]);a!=null&&x(e,["fileSearch"],a);const u=g(t,["codeExecution"]);if(u!=null&&x(e,["codeExecution"],u),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=g(t,["googleMaps"]);h!=null&&x(e,["googleMaps"],kS(h));const m=g(t,["googleSearch"]);m!=null&&x(e,["googleSearch"],PS(m));const p=g(t,["urlContext"]);return p!=null&&x(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _r;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(_r||(_r={}));class Mi{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!r||Object.keys(r).length===0?u={config:{}}:typeof r=="object"?u=Object.assign({},r):u=r,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(s=u.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KS extends Ar{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Mi(_r.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=vp(this.apiClient,e),r=n._url,s=ce("{model}:batchGenerateContent",r),h=n.batch.inputConfig.requests,m=h.requests,p=[];for(const w of m){const _=Object.assign({},w);if(_.systemInstruction){const C=_.systemInstruction;delete _.systemInstruction;const T=_.request;T.systemInstruction=C,_.request=T}p.push(_)}return h.requests=p,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${s}`;else if(u)r.dest=`${u}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=pS(this.apiClient,e);return h=ce("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json()),u.then(w=>Sd(w))}else{const p=vp(this.apiClient,e);return h=ce("{model}:batchGenerateContent",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json()),u.then(w=>Qa(w))}}async createEmbeddingsInternal(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=mS(this.apiClient,e);return a=ce("{model}:asyncBatchEmbedContent",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>Qa(m))}}async get(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=RS(this.apiClient,e);return h=ce("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json()),u.then(w=>Sd(w))}else{const p=bS(this.apiClient,e);return h=ce("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json()),u.then(w=>Qa(w))}}async cancel(e){var n,r,s,a;let u="",h={};if(this.apiClient.isVertexAI()){const m=uS(this.apiClient,e);u=ce("batchPredictionJobs/{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const m=lS(this.apiClient,e);u=ce("batches/{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=US(e);return h=ce("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=GS(w),C=new mp;return Object.assign(C,_),C})}else{const p=FS(e);return h=ce("batches",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=VS(w),C=new mp;return Object.assign(C,_),C})}}async delete(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=xS(this.apiClient,e);return h=ce("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>vS(w))}else{const p=yS(this.apiClient,e);return h=ce("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>wS(w))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $S(t){const e={},n=g(t,["data"]);if(n!=null&&x(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function Ep(t){const e={},n=g(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>mT(a))),x(e,["parts"],s)}const r=g(t,["role"]);return r!=null&&x(e,["role"],r),e}function YS(t,e){const n={},r=g(t,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const s=g(t,["expireTime"]);e!==void 0&&s!=null&&x(e,["expireTime"],s);const a=g(t,["displayName"]);e!==void 0&&a!=null&&x(e,["displayName"],a);const u=g(t,["contents"]);if(e!==void 0&&u!=null){let w=Dn(u);Array.isArray(w)&&(w=w.map(_=>Ep(_))),x(e,["contents"],w)}const h=g(t,["systemInstruction"]);e!==void 0&&h!=null&&x(e,["systemInstruction"],Ep(Kt(h)));const m=g(t,["tools"]);if(e!==void 0&&m!=null){let w=m;Array.isArray(w)&&(w=w.map(_=>xT(_))),x(e,["tools"],w)}const p=g(t,["toolConfig"]);if(e!==void 0&&p!=null&&x(e,["toolConfig"],yT(p)),g(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function jS(t,e){const n={},r=g(t,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const s=g(t,["expireTime"]);e!==void 0&&s!=null&&x(e,["expireTime"],s);const a=g(t,["displayName"]);e!==void 0&&a!=null&&x(e,["displayName"],a);const u=g(t,["contents"]);if(e!==void 0&&u!=null){let _=Dn(u);Array.isArray(_)&&(_=_.map(C=>C)),x(e,["contents"],_)}const h=g(t,["systemInstruction"]);e!==void 0&&h!=null&&x(e,["systemInstruction"],Kt(h));const m=g(t,["tools"]);if(e!==void 0&&m!=null){let _=m;Array.isArray(_)&&(_=_.map(C=>wT(C))),x(e,["tools"],_)}const p=g(t,["toolConfig"]);e!==void 0&&p!=null&&x(e,["toolConfig"],p);const w=g(t,["kmsKeyName"]);return e!==void 0&&w!=null&&x(e,["encryption_spec","kmsKeyName"],w),n}function XS(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["model"],fx(t,r));const s=g(e,["config"]);return s!=null&&YS(s,n),n}function JS(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["model"],fx(t,r));const s=g(e,["config"]);return s!=null&&jS(s,n),n}function ZS(t,e){const n={},r=g(e,["name"]);return r!=null&&x(n,["_url","name"],Sr(t,r)),n}function QS(t,e){const n={},r=g(e,["name"]);return r!=null&&x(n,["_url","name"],Sr(t,r)),n}function eT(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function tT(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function nT(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function rT(t){const e={},n=g(t,["id"]);n!=null&&x(e,["id"],n);const r=g(t,["args"]);r!=null&&x(e,["args"],r);const s=g(t,["name"]);if(s!=null&&x(e,["name"],s),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iT(t){const e={},n=g(t,["mode"]);n!=null&&x(e,["mode"],n);const r=g(t,["allowedFunctionNames"]);if(r!=null&&x(e,["allowedFunctionNames"],r),g(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function sT(t){const e={};if(g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(t,["description"]);n!=null&&x(e,["description"],n);const r=g(t,["name"]);r!=null&&x(e,["name"],r);const s=g(t,["parameters"]);s!=null&&x(e,["parameters"],s);const a=g(t,["parametersJsonSchema"]);a!=null&&x(e,["parametersJsonSchema"],a);const u=g(t,["response"]);u!=null&&x(e,["response"],u);const h=g(t,["responseJsonSchema"]);return h!=null&&x(e,["responseJsonSchema"],h),e}function oT(t,e){const n={},r=g(e,["name"]);return r!=null&&x(n,["_url","name"],Sr(t,r)),n}function aT(t,e){const n={},r=g(e,["name"]);return r!=null&&x(n,["_url","name"],Sr(t,r)),n}function lT(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function uT(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function cT(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const s=g(t,["pageToken"]);return e!==void 0&&s!=null&&x(e,["_query","pageToken"],s),n}function dT(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const s=g(t,["pageToken"]);return e!==void 0&&s!=null&&x(e,["_query","pageToken"],s),n}function fT(t){const e={},n=g(t,["config"]);return n!=null&&cT(n,e),e}function hT(t){const e={},n=g(t,["config"]);return n!=null&&dT(n,e),e}function pT(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const s=g(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),x(e,["cachedContents"],a)}return e}function gT(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const s=g(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),x(e,["cachedContents"],a)}return e}function mT(t){const e={},n=g(t,["mediaResolution"]);n!=null&&x(e,["mediaResolution"],n);const r=g(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const s=g(t,["executableCode"]);s!=null&&x(e,["executableCode"],s);const a=g(t,["fileData"]);a!=null&&x(e,["fileData"],nT(a));const u=g(t,["functionCall"]);u!=null&&x(e,["functionCall"],rT(u));const h=g(t,["functionResponse"]);h!=null&&x(e,["functionResponse"],h);const m=g(t,["inlineData"]);m!=null&&x(e,["inlineData"],$S(m));const p=g(t,["text"]);p!=null&&x(e,["text"],p);const w=g(t,["thought"]);w!=null&&x(e,["thought"],w);const _=g(t,["thoughtSignature"]);_!=null&&x(e,["thoughtSignature"],_);const C=g(t,["videoMetadata"]);return C!=null&&x(e,["videoMetadata"],C),e}function yT(t){const e={},n=g(t,["functionCallingConfig"]);n!=null&&x(e,["functionCallingConfig"],iT(n));const r=g(t,["retrievalConfig"]);return r!=null&&x(e,["retrievalConfig"],r),e}function xT(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let w=n;Array.isArray(w)&&(w=w.map(_=>_)),x(e,["functionDeclarations"],w)}if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const s=g(t,["computerUse"]);s!=null&&x(e,["computerUse"],s);const a=g(t,["fileSearch"]);a!=null&&x(e,["fileSearch"],a);const u=g(t,["codeExecution"]);if(u!=null&&x(e,["codeExecution"],u),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=g(t,["googleMaps"]);h!=null&&x(e,["googleMaps"],lT(h));const m=g(t,["googleSearch"]);m!=null&&x(e,["googleSearch"],uT(m));const p=g(t,["urlContext"]);return p!=null&&x(e,["urlContext"],p),e}function wT(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(C=>sT(C))),x(e,["functionDeclarations"],_)}const r=g(t,["retrieval"]);r!=null&&x(e,["retrieval"],r);const s=g(t,["googleSearchRetrieval"]);s!=null&&x(e,["googleSearchRetrieval"],s);const a=g(t,["computerUse"]);if(a!=null&&x(e,["computerUse"],a),g(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=g(t,["codeExecution"]);u!=null&&x(e,["codeExecution"],u);const h=g(t,["enterpriseWebSearch"]);h!=null&&x(e,["enterpriseWebSearch"],h);const m=g(t,["googleMaps"]);m!=null&&x(e,["googleMaps"],m);const p=g(t,["googleSearch"]);p!=null&&x(e,["googleSearch"],p);const w=g(t,["urlContext"]);return w!=null&&x(e,["urlContext"],w),e}function vT(t,e){const n={},r=g(t,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const s=g(t,["expireTime"]);return e!==void 0&&s!=null&&x(e,["expireTime"],s),n}function ET(t,e){const n={},r=g(t,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const s=g(t,["expireTime"]);return e!==void 0&&s!=null&&x(e,["expireTime"],s),n}function _T(t,e){const n={},r=g(e,["name"]);r!=null&&x(n,["_url","name"],Sr(t,r));const s=g(e,["config"]);return s!=null&&vT(s,n),n}function CT(t,e){const n={},r=g(e,["name"]);r!=null&&x(n,["_url","name"],Sr(t,r));const s=g(e,["config"]);return s!=null&&ET(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AT extends Ar{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Mi(_r.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=JS(this.apiClient,e);return h=ce("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json()),u.then(w=>w)}else{const p=XS(this.apiClient,e);return h=ce("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json()),u.then(w=>w)}}async get(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=aT(this.apiClient,e);return h=ce("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json()),u.then(w=>w)}else{const p=oT(this.apiClient,e);return h=ce("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json()),u.then(w=>w)}}async delete(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=QS(this.apiClient,e);return h=ce("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=tT(w),C=new pp;return Object.assign(C,_),C})}else{const p=ZS(this.apiClient,e);return h=ce("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=eT(w),C=new pp;return Object.assign(C,_),C})}}async update(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=CT(this.apiClient,e);return h=ce("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json()),u.then(w=>w)}else{const p=_T(this.apiClient,e);return h=ce("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json()),u.then(w=>w)}}async listInternal(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=hT(e);return h=ce("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=gT(w),C=new gp;return Object.assign(C,_),C})}else{const p=fT(e);return h=ce("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=pT(w),C=new gp;return Object.assign(C,_),C})}}}function _p(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tt(t){return this instanceof tt?(this.v=t,this):new tt(t)}function Es(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),s[Symbol.asyncIterator]=function(){return this},s;function u(T){return function(P){return Promise.resolve(P).then(T,_)}}function h(T,P){r[T]&&(s[T]=function(M){return new Promise(function(V,D){a.push([T,M,V,D])>1||m(T,M)})},P&&(s[T]=P(s[T])))}function m(T,P){try{p(r[T](P))}catch(M){C(a[0][3],M)}}function p(T){T.value instanceof tt?Promise.resolve(T.value.v).then(w,_):C(a[0][2],T)}function w(T){m("next",T)}function _(T){m("throw",T)}function C(T,P){T(P),a.shift(),a.length&&m(a[0][0],a[0][1])}}function Io(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof _p=="function"?_p(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(u){return new Promise(function(h,m){u=t[a](u),s(h,m,u.done,u.value)})}}function s(a,u,h,m){Promise.resolve(m).then(function(p){a({value:p,done:h})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ST(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Sx(n)}function Sx(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function TT(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Cp(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let a=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),a&&!Sx(t[r])&&(a=!1),r++;a?e.push(...s):e.pop()}return e}class IT{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new NT(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class NT{constructor(e,n,r,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),TT(a)}async sendMessage(e){var n;await this.sendPromise;const r=Kt(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,u,h;const m=await s,p=(u=(a=m.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,w=m.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let C=[];w!=null&&(C=(h=w.slice(_))!==null&&h!==void 0?h:[]);const T=p?[p]:[];this.recordHistory(r,T,C)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=Kt(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?Cp(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,s;return Es(this,arguments,function*(){var u,h,m,p;const w=[];try{for(var _=!0,C=Io(e),T;T=yield tt(C.next()),u=T.done,!u;_=!0){p=T.value,_=!1;const P=p;if(ST(P)){const M=(s=(r=P.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content;M!==void 0&&w.push(M)}yield yield tt(P)}}catch(P){h={error:P}}finally{try{!_&&!u&&(m=C.return)&&(yield tt(m.call(C)))}finally{if(h)throw h.error}}this.recordHistory(n,w)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Cp(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,nu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bT(t){const e={},n=g(t,["file"]);return n!=null&&x(e,["file"],n),e}function RT(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function kT(t){const e={},n=g(t,["name"]);return n!=null&&x(e,["_url","file"],xx(n)),e}function PT(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function MT(t){const e={},n=g(t,["name"]);return n!=null&&x(e,["_url","file"],xx(n)),e}function DT(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const s=g(t,["pageToken"]);return e!==void 0&&s!=null&&x(e,["_query","pageToken"],s),n}function OT(t){const e={},n=g(t,["config"]);return n!=null&&DT(n,e),e}function LT(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const s=g(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),x(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BT extends Ar{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Mi(_r.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=OT(e);return a=ce("files",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const w=p;return w.sdkHttpResponse={headers:m.headers},w})),s.then(m=>{const p=LT(m),w=new GA;return Object.assign(w,p),w})}}async createInternal(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=bT(e);return a=ce("upload/v1beta/files",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>{const p=RT(m),w=new HA;return Object.assign(w,p),w})}}async get(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=MT(e);return a=ce("files/{file}",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async delete(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=kT(e);return a=ce("files/{file}",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const w=p;return w.sdkHttpResponse={headers:m.headers},w})),s.then(m=>{const p=PT(m),w=new qA;return Object.assign(w,p),w})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function el(t){const e={},n=g(t,["data"]);if(n!=null&&x(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function FT(t){const e={},n=g(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>eI(a))),x(e,["parts"],s)}const r=g(t,["role"]);return r!=null&&x(e,["role"],r),e}function UT(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function VT(t){const e={},n=g(t,["id"]);n!=null&&x(e,["id"],n);const r=g(t,["args"]);r!=null&&x(e,["args"],r);const s=g(t,["name"]);if(s!=null&&x(e,["name"],s),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function GT(t){const e={};if(g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(t,["description"]);n!=null&&x(e,["description"],n);const r=g(t,["name"]);r!=null&&x(e,["name"],r);const s=g(t,["parameters"]);s!=null&&x(e,["parameters"],s);const a=g(t,["parametersJsonSchema"]);a!=null&&x(e,["parametersJsonSchema"],a);const u=g(t,["response"]);u!=null&&x(e,["response"],u);const h=g(t,["responseJsonSchema"]);return h!=null&&x(e,["responseJsonSchema"],h),e}function HT(t){const e={},n=g(t,["modelSelectionConfig"]);n!=null&&x(e,["modelConfig"],n);const r=g(t,["responseJsonSchema"]);r!=null&&x(e,["responseJsonSchema"],r);const s=g(t,["audioTimestamp"]);s!=null&&x(e,["audioTimestamp"],s);const a=g(t,["candidateCount"]);a!=null&&x(e,["candidateCount"],a);const u=g(t,["enableAffectiveDialog"]);u!=null&&x(e,["enableAffectiveDialog"],u);const h=g(t,["frequencyPenalty"]);h!=null&&x(e,["frequencyPenalty"],h);const m=g(t,["logprobs"]);m!=null&&x(e,["logprobs"],m);const p=g(t,["maxOutputTokens"]);p!=null&&x(e,["maxOutputTokens"],p);const w=g(t,["mediaResolution"]);w!=null&&x(e,["mediaResolution"],w);const _=g(t,["presencePenalty"]);_!=null&&x(e,["presencePenalty"],_);const C=g(t,["responseLogprobs"]);C!=null&&x(e,["responseLogprobs"],C);const T=g(t,["responseMimeType"]);T!=null&&x(e,["responseMimeType"],T);const P=g(t,["responseModalities"]);P!=null&&x(e,["responseModalities"],P);const M=g(t,["responseSchema"]);M!=null&&x(e,["responseSchema"],M);const V=g(t,["routingConfig"]);V!=null&&x(e,["routingConfig"],V);const D=g(t,["seed"]);D!=null&&x(e,["seed"],D);const k=g(t,["speechConfig"]);k!=null&&x(e,["speechConfig"],Tx(k));const R=g(t,["stopSequences"]);R!=null&&x(e,["stopSequences"],R);const F=g(t,["temperature"]);F!=null&&x(e,["temperature"],F);const Y=g(t,["thinkingConfig"]);Y!=null&&x(e,["thinkingConfig"],Y);const H=g(t,["topK"]);H!=null&&x(e,["topK"],H);const B=g(t,["topP"]);if(B!=null&&x(e,["topP"],B),g(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function qT(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function zT(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function WT(t,e){const n={},r=g(t,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],r);const s=g(t,["responseModalities"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","responseModalities"],s);const a=g(t,["temperature"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","temperature"],a);const u=g(t,["topP"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","topP"],u);const h=g(t,["topK"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","topK"],h);const m=g(t,["maxOutputTokens"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","maxOutputTokens"],m);const p=g(t,["mediaResolution"]);e!==void 0&&p!=null&&x(e,["setup","generationConfig","mediaResolution"],p);const w=g(t,["seed"]);e!==void 0&&w!=null&&x(e,["setup","generationConfig","seed"],w);const _=g(t,["speechConfig"]);e!==void 0&&_!=null&&x(e,["setup","generationConfig","speechConfig"],Wf(_));const C=g(t,["thinkingConfig"]);e!==void 0&&C!=null&&x(e,["setup","generationConfig","thinkingConfig"],C);const T=g(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],T);const P=g(t,["systemInstruction"]);e!==void 0&&P!=null&&x(e,["setup","systemInstruction"],FT(Kt(P)));const M=g(t,["tools"]);if(e!==void 0&&M!=null){let H=Us(M);Array.isArray(H)&&(H=H.map(B=>nI(Fs(B)))),x(e,["setup","tools"],H)}const V=g(t,["sessionResumption"]);e!==void 0&&V!=null&&x(e,["setup","sessionResumption"],tI(V));const D=g(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&x(e,["setup","inputAudioTranscription"],D);const k=g(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&x(e,["setup","outputAudioTranscription"],k);const R=g(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&x(e,["setup","realtimeInputConfig"],R);const F=g(t,["contextWindowCompression"]);e!==void 0&&F!=null&&x(e,["setup","contextWindowCompression"],F);const Y=g(t,["proactivity"]);return e!==void 0&&Y!=null&&x(e,["setup","proactivity"],Y),n}function KT(t,e){const n={},r=g(t,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],HT(r));const s=g(t,["responseModalities"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","responseModalities"],s);const a=g(t,["temperature"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","temperature"],a);const u=g(t,["topP"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","topP"],u);const h=g(t,["topK"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","topK"],h);const m=g(t,["maxOutputTokens"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","maxOutputTokens"],m);const p=g(t,["mediaResolution"]);e!==void 0&&p!=null&&x(e,["setup","generationConfig","mediaResolution"],p);const w=g(t,["seed"]);e!==void 0&&w!=null&&x(e,["setup","generationConfig","seed"],w);const _=g(t,["speechConfig"]);e!==void 0&&_!=null&&x(e,["setup","generationConfig","speechConfig"],Tx(Wf(_)));const C=g(t,["thinkingConfig"]);e!==void 0&&C!=null&&x(e,["setup","generationConfig","thinkingConfig"],C);const T=g(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],T);const P=g(t,["systemInstruction"]);e!==void 0&&P!=null&&x(e,["setup","systemInstruction"],Kt(P));const M=g(t,["tools"]);if(e!==void 0&&M!=null){let H=Us(M);Array.isArray(H)&&(H=H.map(B=>rI(Fs(B)))),x(e,["setup","tools"],H)}const V=g(t,["sessionResumption"]);e!==void 0&&V!=null&&x(e,["setup","sessionResumption"],V);const D=g(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&x(e,["setup","inputAudioTranscription"],D);const k=g(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&x(e,["setup","outputAudioTranscription"],k);const R=g(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&x(e,["setup","realtimeInputConfig"],R);const F=g(t,["contextWindowCompression"]);e!==void 0&&F!=null&&x(e,["setup","contextWindowCompression"],F);const Y=g(t,["proactivity"]);return e!==void 0&&Y!=null&&x(e,["setup","proactivity"],Y),n}function $T(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["setup","model"],Fe(t,r));const s=g(e,["config"]);return s!=null&&x(n,["config"],WT(s,n)),n}function YT(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["setup","model"],Fe(t,r));const s=g(e,["config"]);return s!=null&&x(n,["config"],KT(s,n)),n}function jT(t){const e={},n=g(t,["musicGenerationConfig"]);return n!=null&&x(e,["musicGenerationConfig"],n),e}function XT(t){const e={},n=g(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),x(e,["weightedPrompts"],r)}return e}function JT(t){const e={},n=g(t,["media"]);if(n!=null){let p=hx(n);Array.isArray(p)&&(p=p.map(w=>el(w))),x(e,["mediaChunks"],p)}const r=g(t,["audio"]);r!=null&&x(e,["audio"],el(gx(r)));const s=g(t,["audioStreamEnd"]);s!=null&&x(e,["audioStreamEnd"],s);const a=g(t,["video"]);a!=null&&x(e,["video"],el(px(a)));const u=g(t,["text"]);u!=null&&x(e,["text"],u);const h=g(t,["activityStart"]);h!=null&&x(e,["activityStart"],h);const m=g(t,["activityEnd"]);return m!=null&&x(e,["activityEnd"],m),e}function ZT(t){const e={},n=g(t,["media"]);if(n!=null){let p=hx(n);Array.isArray(p)&&(p=p.map(w=>w)),x(e,["mediaChunks"],p)}const r=g(t,["audio"]);r!=null&&x(e,["audio"],gx(r));const s=g(t,["audioStreamEnd"]);s!=null&&x(e,["audioStreamEnd"],s);const a=g(t,["video"]);a!=null&&x(e,["video"],px(a));const u=g(t,["text"]);u!=null&&x(e,["text"],u);const h=g(t,["activityStart"]);h!=null&&x(e,["activityStart"],h);const m=g(t,["activityEnd"]);return m!=null&&x(e,["activityEnd"],m),e}function QT(t){const e={},n=g(t,["setupComplete"]);n!=null&&x(e,["setupComplete"],n);const r=g(t,["serverContent"]);r!=null&&x(e,["serverContent"],r);const s=g(t,["toolCall"]);s!=null&&x(e,["toolCall"],s);const a=g(t,["toolCallCancellation"]);a!=null&&x(e,["toolCallCancellation"],a);const u=g(t,["usageMetadata"]);u!=null&&x(e,["usageMetadata"],iI(u));const h=g(t,["goAway"]);h!=null&&x(e,["goAway"],h);const m=g(t,["sessionResumptionUpdate"]);return m!=null&&x(e,["sessionResumptionUpdate"],m),e}function eI(t){const e={},n=g(t,["mediaResolution"]);n!=null&&x(e,["mediaResolution"],n);const r=g(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const s=g(t,["executableCode"]);s!=null&&x(e,["executableCode"],s);const a=g(t,["fileData"]);a!=null&&x(e,["fileData"],UT(a));const u=g(t,["functionCall"]);u!=null&&x(e,["functionCall"],VT(u));const h=g(t,["functionResponse"]);h!=null&&x(e,["functionResponse"],h);const m=g(t,["inlineData"]);m!=null&&x(e,["inlineData"],el(m));const p=g(t,["text"]);p!=null&&x(e,["text"],p);const w=g(t,["thought"]);w!=null&&x(e,["thought"],w);const _=g(t,["thoughtSignature"]);_!=null&&x(e,["thoughtSignature"],_);const C=g(t,["videoMetadata"]);return C!=null&&x(e,["videoMetadata"],C),e}function tI(t){const e={},n=g(t,["handle"]);if(n!=null&&x(e,["handle"],n),g(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Tx(t){const e={},n=g(t,["languageCode"]);n!=null&&x(e,["languageCode"],n);const r=g(t,["voiceConfig"]);if(r!=null&&x(e,["voiceConfig"],r),g(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function nI(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let w=n;Array.isArray(w)&&(w=w.map(_=>_)),x(e,["functionDeclarations"],w)}if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const s=g(t,["computerUse"]);s!=null&&x(e,["computerUse"],s);const a=g(t,["fileSearch"]);a!=null&&x(e,["fileSearch"],a);const u=g(t,["codeExecution"]);if(u!=null&&x(e,["codeExecution"],u),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=g(t,["googleMaps"]);h!=null&&x(e,["googleMaps"],qT(h));const m=g(t,["googleSearch"]);m!=null&&x(e,["googleSearch"],zT(m));const p=g(t,["urlContext"]);return p!=null&&x(e,["urlContext"],p),e}function rI(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(C=>GT(C))),x(e,["functionDeclarations"],_)}const r=g(t,["retrieval"]);r!=null&&x(e,["retrieval"],r);const s=g(t,["googleSearchRetrieval"]);s!=null&&x(e,["googleSearchRetrieval"],s);const a=g(t,["computerUse"]);if(a!=null&&x(e,["computerUse"],a),g(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=g(t,["codeExecution"]);u!=null&&x(e,["codeExecution"],u);const h=g(t,["enterpriseWebSearch"]);h!=null&&x(e,["enterpriseWebSearch"],h);const m=g(t,["googleMaps"]);m!=null&&x(e,["googleMaps"],m);const p=g(t,["googleSearch"]);p!=null&&x(e,["googleSearch"],p);const w=g(t,["urlContext"]);return w!=null&&x(e,["urlContext"],w),e}function iI(t){const e={},n=g(t,["promptTokenCount"]);n!=null&&x(e,["promptTokenCount"],n);const r=g(t,["cachedContentTokenCount"]);r!=null&&x(e,["cachedContentTokenCount"],r);const s=g(t,["candidatesTokenCount"]);s!=null&&x(e,["responseTokenCount"],s);const a=g(t,["toolUsePromptTokenCount"]);a!=null&&x(e,["toolUsePromptTokenCount"],a);const u=g(t,["thoughtsTokenCount"]);u!=null&&x(e,["thoughtsTokenCount"],u);const h=g(t,["totalTokenCount"]);h!=null&&x(e,["totalTokenCount"],h);const m=g(t,["promptTokensDetails"]);if(m!=null){let T=m;Array.isArray(T)&&(T=T.map(P=>P)),x(e,["promptTokensDetails"],T)}const p=g(t,["cacheTokensDetails"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(P=>P)),x(e,["cacheTokensDetails"],T)}const w=g(t,["candidatesTokensDetails"]);if(w!=null){let T=w;Array.isArray(T)&&(T=T.map(P=>P)),x(e,["responseTokensDetails"],T)}const _=g(t,["toolUsePromptTokensDetails"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(P=>P)),x(e,["toolUsePromptTokensDetails"],T)}const C=g(t,["trafficType"]);return C!=null&&x(e,["trafficType"],C),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sI(t){const e={},n=g(t,["data"]);if(n!=null&&x(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function oI(t){const e={},n=g(t,["content"]);n!=null&&x(e,["content"],n);const r=g(t,["citationMetadata"]);r!=null&&x(e,["citationMetadata"],aI(r));const s=g(t,["tokenCount"]);s!=null&&x(e,["tokenCount"],s);const a=g(t,["finishReason"]);a!=null&&x(e,["finishReason"],a);const u=g(t,["avgLogprobs"]);u!=null&&x(e,["avgLogprobs"],u);const h=g(t,["groundingMetadata"]);h!=null&&x(e,["groundingMetadata"],h);const m=g(t,["index"]);m!=null&&x(e,["index"],m);const p=g(t,["logprobsResult"]);p!=null&&x(e,["logprobsResult"],p);const w=g(t,["safetyRatings"]);if(w!=null){let C=w;Array.isArray(C)&&(C=C.map(T=>T)),x(e,["safetyRatings"],C)}const _=g(t,["urlContextMetadata"]);return _!=null&&x(e,["urlContextMetadata"],_),e}function aI(t){const e={},n=g(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),x(e,["citations"],r)}return e}function lI(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["contents"]);if(s!=null){let a=Dn(s);Array.isArray(a)&&(a=a.map(u=>u)),x(n,["contents"],a)}return n}function uI(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["tokensInfo"],s)}return e}function cI(t){const e={},n=g(t,["values"]);n!=null&&x(e,["values"],n);const r=g(t,["statistics"]);return r!=null&&x(e,["statistics"],dI(r)),e}function dI(t){const e={},n=g(t,["truncated"]);n!=null&&x(e,["truncated"],n);const r=g(t,["token_count"]);return r!=null&&x(e,["tokenCount"],r),e}function ru(t){const e={},n=g(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>v3(a))),x(e,["parts"],s)}const r=g(t,["role"]);return r!=null&&x(e,["role"],r),e}function fI(t){const e={},n=g(t,["controlType"]);n!=null&&x(e,["controlType"],n);const r=g(t,["enableControlImageComputation"]);return r!=null&&x(e,["computeControl"],r),e}function hI(t){const e={};if(g(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function pI(t,e){const n={},r=g(t,["systemInstruction"]);e!==void 0&&r!=null&&x(e,["systemInstruction"],Kt(r));const s=g(t,["tools"]);if(e!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>kx(h))),x(e,["tools"],u)}const a=g(t,["generationConfig"]);return e!==void 0&&a!=null&&x(e,["generationConfig"],s3(a)),n}function gI(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["contents"]);if(s!=null){let u=Dn(s);Array.isArray(u)&&(u=u.map(h=>ru(h))),x(n,["contents"],u)}const a=g(e,["config"]);return a!=null&&hI(a),n}function mI(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["contents"]);if(s!=null){let u=Dn(s);Array.isArray(u)&&(u=u.map(h=>h)),x(n,["contents"],u)}const a=g(e,["config"]);return a!=null&&pI(a,n),n}function yI(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["totalTokens"]);r!=null&&x(e,["totalTokens"],r);const s=g(t,["cachedContentTokenCount"]);return s!=null&&x(e,["cachedContentTokenCount"],s),e}function xI(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["totalTokens"]);return r!=null&&x(e,["totalTokens"],r),e}function wI(t,e){const n={},r=g(e,["model"]);return r!=null&&x(n,["_url","name"],Fe(t,r)),n}function vI(t,e){const n={},r=g(e,["model"]);return r!=null&&x(n,["_url","name"],Fe(t,r)),n}function EI(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function _I(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function CI(t,e){const n={},r=g(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const s=g(t,["negativePrompt"]);e!==void 0&&s!=null&&x(e,["parameters","negativePrompt"],s);const a=g(t,["numberOfImages"]);e!==void 0&&a!=null&&x(e,["parameters","sampleCount"],a);const u=g(t,["aspectRatio"]);e!==void 0&&u!=null&&x(e,["parameters","aspectRatio"],u);const h=g(t,["guidanceScale"]);e!==void 0&&h!=null&&x(e,["parameters","guidanceScale"],h);const m=g(t,["seed"]);e!==void 0&&m!=null&&x(e,["parameters","seed"],m);const p=g(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&x(e,["parameters","safetySetting"],p);const w=g(t,["personGeneration"]);e!==void 0&&w!=null&&x(e,["parameters","personGeneration"],w);const _=g(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&x(e,["parameters","includeSafetyAttributes"],_);const C=g(t,["includeRaiReason"]);e!==void 0&&C!=null&&x(e,["parameters","includeRaiReason"],C);const T=g(t,["language"]);e!==void 0&&T!=null&&x(e,["parameters","language"],T);const P=g(t,["outputMimeType"]);e!==void 0&&P!=null&&x(e,["parameters","outputOptions","mimeType"],P);const M=g(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&x(e,["parameters","outputOptions","compressionQuality"],M);const V=g(t,["addWatermark"]);e!==void 0&&V!=null&&x(e,["parameters","addWatermark"],V);const D=g(t,["labels"]);e!==void 0&&D!=null&&x(e,["labels"],D);const k=g(t,["editMode"]);e!==void 0&&k!=null&&x(e,["parameters","editMode"],k);const R=g(t,["baseSteps"]);return e!==void 0&&R!=null&&x(e,["parameters","editConfig","baseSteps"],R),n}function AI(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["prompt"]);s!=null&&x(n,["instances[0]","prompt"],s);const a=g(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(m=>T3(m))),x(n,["instances[0]","referenceImages"],h)}const u=g(e,["config"]);return u!=null&&CI(u,n),n}function SI(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>iu(a))),x(e,["generatedImages"],s)}return e}function TI(t,e){const n={},r=g(t,["taskType"]);e!==void 0&&r!=null&&x(e,["requests[]","taskType"],r);const s=g(t,["title"]);e!==void 0&&s!=null&&x(e,["requests[]","title"],s);const a=g(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&x(e,["requests[]","outputDimensionality"],a),g(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function II(t,e){const n={},r=g(t,["taskType"]);e!==void 0&&r!=null&&x(e,["instances[]","task_type"],r);const s=g(t,["title"]);e!==void 0&&s!=null&&x(e,["instances[]","title"],s);const a=g(t,["outputDimensionality"]);e!==void 0&&a!=null&&x(e,["parameters","outputDimensionality"],a);const u=g(t,["mimeType"]);e!==void 0&&u!=null&&x(e,["instances[]","mimeType"],u);const h=g(t,["autoTruncate"]);return e!==void 0&&h!=null&&x(e,["parameters","autoTruncate"],h),n}function NI(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["contents"]);if(s!=null){let h=Hf(t,s);Array.isArray(h)&&(h=h.map(m=>m)),x(n,["requests[]","content"],h)}const a=g(e,["config"]);a!=null&&TI(a,n);const u=g(e,["model"]);return u!==void 0&&x(n,["requests[]","model"],Fe(t,u)),n}function bI(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["contents"]);if(s!=null){let u=Hf(t,s);Array.isArray(u)&&(u=u.map(h=>h)),x(n,["instances[]","content"],u)}const a=g(e,["config"]);return a!=null&&II(a,n),n}function RI(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),x(e,["embeddings"],a)}const s=g(t,["metadata"]);return s!=null&&x(e,["metadata"],s),e}function kI(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>cI(u))),x(e,["embeddings"],a)}const s=g(t,["metadata"]);return s!=null&&x(e,["metadata"],s),e}function PI(t){const e={},n=g(t,["endpoint"]);n!=null&&x(e,["name"],n);const r=g(t,["deployedModelId"]);return r!=null&&x(e,["deployedModelId"],r),e}function MI(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function DI(t){const e={},n=g(t,["id"]);n!=null&&x(e,["id"],n);const r=g(t,["args"]);r!=null&&x(e,["args"],r);const s=g(t,["name"]);if(s!=null&&x(e,["name"],s),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function OI(t){const e={},n=g(t,["mode"]);n!=null&&x(e,["mode"],n);const r=g(t,["allowedFunctionNames"]);if(r!=null&&x(e,["allowedFunctionNames"],r),g(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function LI(t){const e={};if(g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(t,["description"]);n!=null&&x(e,["description"],n);const r=g(t,["name"]);r!=null&&x(e,["name"],r);const s=g(t,["parameters"]);s!=null&&x(e,["parameters"],s);const a=g(t,["parametersJsonSchema"]);a!=null&&x(e,["parametersJsonSchema"],a);const u=g(t,["response"]);u!=null&&x(e,["response"],u);const h=g(t,["responseJsonSchema"]);return h!=null&&x(e,["responseJsonSchema"],h),e}function BI(t,e,n){const r={},s=g(e,["systemInstruction"]);n!==void 0&&s!=null&&x(n,["systemInstruction"],ru(Kt(s)));const a=g(e,["temperature"]);a!=null&&x(r,["temperature"],a);const u=g(e,["topP"]);u!=null&&x(r,["topP"],u);const h=g(e,["topK"]);h!=null&&x(r,["topK"],h);const m=g(e,["candidateCount"]);m!=null&&x(r,["candidateCount"],m);const p=g(e,["maxOutputTokens"]);p!=null&&x(r,["maxOutputTokens"],p);const w=g(e,["stopSequences"]);w!=null&&x(r,["stopSequences"],w);const _=g(e,["responseLogprobs"]);_!=null&&x(r,["responseLogprobs"],_);const C=g(e,["logprobs"]);C!=null&&x(r,["logprobs"],C);const T=g(e,["presencePenalty"]);T!=null&&x(r,["presencePenalty"],T);const P=g(e,["frequencyPenalty"]);P!=null&&x(r,["frequencyPenalty"],P);const M=g(e,["seed"]);M!=null&&x(r,["seed"],M);const V=g(e,["responseMimeType"]);V!=null&&x(r,["responseMimeType"],V);const D=g(e,["responseSchema"]);D!=null&&x(r,["responseSchema"],qf(D));const k=g(e,["responseJsonSchema"]);if(k!=null&&x(r,["responseJsonSchema"],k),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=g(e,["safetySettings"]);if(n!==void 0&&R!=null){let se=R;Array.isArray(se)&&(se=se.map(le=>I3(le))),x(n,["safetySettings"],se)}const F=g(e,["tools"]);if(n!==void 0&&F!=null){let se=Us(F);Array.isArray(se)&&(se=se.map(le=>D3(Fs(le)))),x(n,["tools"],se)}const Y=g(e,["toolConfig"]);if(n!==void 0&&Y!=null&&x(n,["toolConfig"],M3(Y)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=g(e,["cachedContent"]);n!==void 0&&H!=null&&x(n,["cachedContent"],Sr(t,H));const B=g(e,["responseModalities"]);B!=null&&x(r,["responseModalities"],B);const $=g(e,["mediaResolution"]);$!=null&&x(r,["mediaResolution"],$);const q=g(e,["speechConfig"]);if(q!=null&&x(r,["speechConfig"],zf(q)),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const re=g(e,["thinkingConfig"]);re!=null&&x(r,["thinkingConfig"],re);const Se=g(e,["imageConfig"]);return Se!=null&&x(r,["imageConfig"],c3(Se)),r}function FI(t,e,n){const r={},s=g(e,["systemInstruction"]);n!==void 0&&s!=null&&x(n,["systemInstruction"],Kt(s));const a=g(e,["temperature"]);a!=null&&x(r,["temperature"],a);const u=g(e,["topP"]);u!=null&&x(r,["topP"],u);const h=g(e,["topK"]);h!=null&&x(r,["topK"],h);const m=g(e,["candidateCount"]);m!=null&&x(r,["candidateCount"],m);const p=g(e,["maxOutputTokens"]);p!=null&&x(r,["maxOutputTokens"],p);const w=g(e,["stopSequences"]);w!=null&&x(r,["stopSequences"],w);const _=g(e,["responseLogprobs"]);_!=null&&x(r,["responseLogprobs"],_);const C=g(e,["logprobs"]);C!=null&&x(r,["logprobs"],C);const T=g(e,["presencePenalty"]);T!=null&&x(r,["presencePenalty"],T);const P=g(e,["frequencyPenalty"]);P!=null&&x(r,["frequencyPenalty"],P);const M=g(e,["seed"]);M!=null&&x(r,["seed"],M);const V=g(e,["responseMimeType"]);V!=null&&x(r,["responseMimeType"],V);const D=g(e,["responseSchema"]);D!=null&&x(r,["responseSchema"],qf(D));const k=g(e,["responseJsonSchema"]);k!=null&&x(r,["responseJsonSchema"],k);const R=g(e,["routingConfig"]);R!=null&&x(r,["routingConfig"],R);const F=g(e,["modelSelectionConfig"]);F!=null&&x(r,["modelConfig"],F);const Y=g(e,["safetySettings"]);if(n!==void 0&&Y!=null){let ve=Y;Array.isArray(ve)&&(ve=ve.map(oe=>oe)),x(n,["safetySettings"],ve)}const H=g(e,["tools"]);if(n!==void 0&&H!=null){let ve=Us(H);Array.isArray(ve)&&(ve=ve.map(oe=>kx(Fs(oe)))),x(n,["tools"],ve)}const B=g(e,["toolConfig"]);n!==void 0&&B!=null&&x(n,["toolConfig"],B);const $=g(e,["labels"]);n!==void 0&&$!=null&&x(n,["labels"],$);const q=g(e,["cachedContent"]);n!==void 0&&q!=null&&x(n,["cachedContent"],Sr(t,q));const re=g(e,["responseModalities"]);re!=null&&x(r,["responseModalities"],re);const Se=g(e,["mediaResolution"]);Se!=null&&x(r,["mediaResolution"],Se);const se=g(e,["speechConfig"]);se!=null&&x(r,["speechConfig"],Rx(zf(se)));const le=g(e,["audioTimestamp"]);le!=null&&x(r,["audioTimestamp"],le);const ue=g(e,["thinkingConfig"]);ue!=null&&x(r,["thinkingConfig"],ue);const z=g(e,["imageConfig"]);return z!=null&&x(r,["imageConfig"],d3(z)),r}function Ap(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["contents"]);if(s!=null){let u=Dn(s);Array.isArray(u)&&(u=u.map(h=>ru(h))),x(n,["contents"],u)}const a=g(e,["config"]);return a!=null&&x(n,["generationConfig"],BI(t,a,n)),n}function Sp(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["contents"]);if(s!=null){let u=Dn(s);Array.isArray(u)&&(u=u.map(h=>h)),x(n,["contents"],u)}const a=g(e,["config"]);return a!=null&&x(n,["generationConfig"],FI(t,a,n)),n}function Tp(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(p=>oI(p))),x(e,["candidates"],m)}const s=g(t,["modelVersion"]);s!=null&&x(e,["modelVersion"],s);const a=g(t,["promptFeedback"]);a!=null&&x(e,["promptFeedback"],a);const u=g(t,["responseId"]);u!=null&&x(e,["responseId"],u);const h=g(t,["usageMetadata"]);return h!=null&&x(e,["usageMetadata"],h),e}function Ip(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(w=>w)),x(e,["candidates"],p)}const s=g(t,["createTime"]);s!=null&&x(e,["createTime"],s);const a=g(t,["modelVersion"]);a!=null&&x(e,["modelVersion"],a);const u=g(t,["promptFeedback"]);u!=null&&x(e,["promptFeedback"],u);const h=g(t,["responseId"]);h!=null&&x(e,["responseId"],h);const m=g(t,["usageMetadata"]);return m!=null&&x(e,["usageMetadata"],m),e}function UI(t,e){const n={};if(g(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=g(t,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const s=g(t,["aspectRatio"]);e!==void 0&&s!=null&&x(e,["parameters","aspectRatio"],s);const a=g(t,["guidanceScale"]);if(e!==void 0&&a!=null&&x(e,["parameters","guidanceScale"],a),g(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=g(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&x(e,["parameters","safetySetting"],u);const h=g(t,["personGeneration"]);e!==void 0&&h!=null&&x(e,["parameters","personGeneration"],h);const m=g(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&x(e,["parameters","includeSafetyAttributes"],m);const p=g(t,["includeRaiReason"]);e!==void 0&&p!=null&&x(e,["parameters","includeRaiReason"],p);const w=g(t,["language"]);e!==void 0&&w!=null&&x(e,["parameters","language"],w);const _=g(t,["outputMimeType"]);e!==void 0&&_!=null&&x(e,["parameters","outputOptions","mimeType"],_);const C=g(t,["outputCompressionQuality"]);if(e!==void 0&&C!=null&&x(e,["parameters","outputOptions","compressionQuality"],C),g(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=g(t,["imageSize"]);if(e!==void 0&&T!=null&&x(e,["parameters","sampleImageSize"],T),g(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function VI(t,e){const n={},r=g(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const s=g(t,["negativePrompt"]);e!==void 0&&s!=null&&x(e,["parameters","negativePrompt"],s);const a=g(t,["numberOfImages"]);e!==void 0&&a!=null&&x(e,["parameters","sampleCount"],a);const u=g(t,["aspectRatio"]);e!==void 0&&u!=null&&x(e,["parameters","aspectRatio"],u);const h=g(t,["guidanceScale"]);e!==void 0&&h!=null&&x(e,["parameters","guidanceScale"],h);const m=g(t,["seed"]);e!==void 0&&m!=null&&x(e,["parameters","seed"],m);const p=g(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&x(e,["parameters","safetySetting"],p);const w=g(t,["personGeneration"]);e!==void 0&&w!=null&&x(e,["parameters","personGeneration"],w);const _=g(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&x(e,["parameters","includeSafetyAttributes"],_);const C=g(t,["includeRaiReason"]);e!==void 0&&C!=null&&x(e,["parameters","includeRaiReason"],C);const T=g(t,["language"]);e!==void 0&&T!=null&&x(e,["parameters","language"],T);const P=g(t,["outputMimeType"]);e!==void 0&&P!=null&&x(e,["parameters","outputOptions","mimeType"],P);const M=g(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&x(e,["parameters","outputOptions","compressionQuality"],M);const V=g(t,["addWatermark"]);e!==void 0&&V!=null&&x(e,["parameters","addWatermark"],V);const D=g(t,["labels"]);e!==void 0&&D!=null&&x(e,["labels"],D);const k=g(t,["imageSize"]);e!==void 0&&k!=null&&x(e,["parameters","sampleImageSize"],k);const R=g(t,["enhancePrompt"]);return e!==void 0&&R!=null&&x(e,["parameters","enhancePrompt"],R),n}function GI(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["prompt"]);s!=null&&x(n,["instances[0]","prompt"],s);const a=g(e,["config"]);return a!=null&&UI(a,n),n}function HI(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["prompt"]);s!=null&&x(n,["instances[0]","prompt"],s);const a=g(e,["config"]);return a!=null&&VI(a,n),n}function qI(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>t3(u))),x(e,["generatedImages"],a)}const s=g(t,["positivePromptSafetyAttributes"]);return s!=null&&x(e,["positivePromptSafetyAttributes"],Nx(s)),e}function zI(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>iu(u))),x(e,["generatedImages"],a)}const s=g(t,["positivePromptSafetyAttributes"]);return s!=null&&x(e,["positivePromptSafetyAttributes"],bx(s)),e}function WI(t,e){const n={},r=g(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r),g(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=g(t,["durationSeconds"]);if(e!==void 0&&s!=null&&x(e,["parameters","durationSeconds"],s),g(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=g(t,["aspectRatio"]);e!==void 0&&a!=null&&x(e,["parameters","aspectRatio"],a);const u=g(t,["resolution"]);e!==void 0&&u!=null&&x(e,["parameters","resolution"],u);const h=g(t,["personGeneration"]);if(e!==void 0&&h!=null&&x(e,["parameters","personGeneration"],h),g(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=g(t,["negativePrompt"]);e!==void 0&&m!=null&&x(e,["parameters","negativePrompt"],m);const p=g(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&x(e,["parameters","enhancePrompt"],p),g(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const w=g(t,["lastFrame"]);e!==void 0&&w!=null&&x(e,["instances[0]","lastFrame"],su(w));const _=g(t,["referenceImages"]);if(e!==void 0&&_!=null){let C=_;Array.isArray(C)&&(C=C.map(T=>$3(T))),x(e,["instances[0]","referenceImages"],C)}if(g(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(g(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function KI(t,e){const n={},r=g(t,["numberOfVideos"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const s=g(t,["outputGcsUri"]);e!==void 0&&s!=null&&x(e,["parameters","storageUri"],s);const a=g(t,["fps"]);e!==void 0&&a!=null&&x(e,["parameters","fps"],a);const u=g(t,["durationSeconds"]);e!==void 0&&u!=null&&x(e,["parameters","durationSeconds"],u);const h=g(t,["seed"]);e!==void 0&&h!=null&&x(e,["parameters","seed"],h);const m=g(t,["aspectRatio"]);e!==void 0&&m!=null&&x(e,["parameters","aspectRatio"],m);const p=g(t,["resolution"]);e!==void 0&&p!=null&&x(e,["parameters","resolution"],p);const w=g(t,["personGeneration"]);e!==void 0&&w!=null&&x(e,["parameters","personGeneration"],w);const _=g(t,["pubsubTopic"]);e!==void 0&&_!=null&&x(e,["parameters","pubsubTopic"],_);const C=g(t,["negativePrompt"]);e!==void 0&&C!=null&&x(e,["parameters","negativePrompt"],C);const T=g(t,["enhancePrompt"]);e!==void 0&&T!=null&&x(e,["parameters","enhancePrompt"],T);const P=g(t,["generateAudio"]);e!==void 0&&P!=null&&x(e,["parameters","generateAudio"],P);const M=g(t,["lastFrame"]);e!==void 0&&M!=null&&x(e,["instances[0]","lastFrame"],Xn(M));const V=g(t,["referenceImages"]);if(e!==void 0&&V!=null){let R=V;Array.isArray(R)&&(R=R.map(F=>Y3(F))),x(e,["instances[0]","referenceImages"],R)}const D=g(t,["mask"]);e!==void 0&&D!=null&&x(e,["instances[0]","mask"],K3(D));const k=g(t,["compressionQuality"]);return e!==void 0&&k!=null&&x(e,["parameters","compressionQuality"],k),n}function $I(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const r=g(t,["metadata"]);r!=null&&x(e,["metadata"],r);const s=g(t,["done"]);s!=null&&x(e,["done"],s);const a=g(t,["error"]);a!=null&&x(e,["error"],a);const u=g(t,["response","generateVideoResponse"]);return u!=null&&x(e,["response"],JI(u)),e}function YI(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const r=g(t,["metadata"]);r!=null&&x(e,["metadata"],r);const s=g(t,["done"]);s!=null&&x(e,["done"],s);const a=g(t,["error"]);a!=null&&x(e,["error"],a);const u=g(t,["response"]);return u!=null&&x(e,["response"],ZI(u)),e}function jI(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["prompt"]);s!=null&&x(n,["instances[0]","prompt"],s);const a=g(e,["image"]);a!=null&&x(n,["instances[0]","image"],su(a));const u=g(e,["video"]);u!=null&&x(n,["instances[0]","video"],Px(u));const h=g(e,["source"]);h!=null&&QI(h,n);const m=g(e,["config"]);return m!=null&&WI(m,n),n}function XI(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["prompt"]);s!=null&&x(n,["instances[0]","prompt"],s);const a=g(e,["image"]);a!=null&&x(n,["instances[0]","image"],Xn(a));const u=g(e,["video"]);u!=null&&x(n,["instances[0]","video"],Mx(u));const h=g(e,["source"]);h!=null&&e3(h,n);const m=g(e,["config"]);return m!=null&&KI(m,n),n}function JI(t){const e={},n=g(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>r3(u))),x(e,["generatedVideos"],a)}const r=g(t,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const s=g(t,["raiMediaFilteredReasons"]);return s!=null&&x(e,["raiMediaFilteredReasons"],s),e}function ZI(t){const e={},n=g(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>i3(u))),x(e,["generatedVideos"],a)}const r=g(t,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const s=g(t,["raiMediaFilteredReasons"]);return s!=null&&x(e,["raiMediaFilteredReasons"],s),e}function QI(t,e){const n={},r=g(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const s=g(t,["image"]);e!==void 0&&s!=null&&x(e,["instances[0]","image"],su(s));const a=g(t,["video"]);return e!==void 0&&a!=null&&x(e,["instances[0]","video"],Px(a)),n}function e3(t,e){const n={},r=g(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const s=g(t,["image"]);e!==void 0&&s!=null&&x(e,["instances[0]","image"],Xn(s));const a=g(t,["video"]);return e!==void 0&&a!=null&&x(e,["instances[0]","video"],Mx(a)),n}function t3(t){const e={},n=g(t,["_self"]);n!=null&&x(e,["image"],f3(n));const r=g(t,["raiFilteredReason"]);r!=null&&x(e,["raiFilteredReason"],r);const s=g(t,["_self"]);return s!=null&&x(e,["safetyAttributes"],Nx(s)),e}function iu(t){const e={},n=g(t,["_self"]);n!=null&&x(e,["image"],Ix(n));const r=g(t,["raiFilteredReason"]);r!=null&&x(e,["raiFilteredReason"],r);const s=g(t,["_self"]);s!=null&&x(e,["safetyAttributes"],bx(s));const a=g(t,["prompt"]);return a!=null&&x(e,["enhancedPrompt"],a),e}function n3(t){const e={},n=g(t,["_self"]);n!=null&&x(e,["mask"],Ix(n));const r=g(t,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),x(e,["labels"],s)}return e}function r3(t){const e={},n=g(t,["video"]);return n!=null&&x(e,["video"],z3(n)),e}function i3(t){const e={},n=g(t,["_self"]);return n!=null&&x(e,["video"],W3(n)),e}function s3(t){const e={},n=g(t,["modelSelectionConfig"]);n!=null&&x(e,["modelConfig"],n);const r=g(t,["responseJsonSchema"]);r!=null&&x(e,["responseJsonSchema"],r);const s=g(t,["audioTimestamp"]);s!=null&&x(e,["audioTimestamp"],s);const a=g(t,["candidateCount"]);a!=null&&x(e,["candidateCount"],a);const u=g(t,["enableAffectiveDialog"]);u!=null&&x(e,["enableAffectiveDialog"],u);const h=g(t,["frequencyPenalty"]);h!=null&&x(e,["frequencyPenalty"],h);const m=g(t,["logprobs"]);m!=null&&x(e,["logprobs"],m);const p=g(t,["maxOutputTokens"]);p!=null&&x(e,["maxOutputTokens"],p);const w=g(t,["mediaResolution"]);w!=null&&x(e,["mediaResolution"],w);const _=g(t,["presencePenalty"]);_!=null&&x(e,["presencePenalty"],_);const C=g(t,["responseLogprobs"]);C!=null&&x(e,["responseLogprobs"],C);const T=g(t,["responseMimeType"]);T!=null&&x(e,["responseMimeType"],T);const P=g(t,["responseModalities"]);P!=null&&x(e,["responseModalities"],P);const M=g(t,["responseSchema"]);M!=null&&x(e,["responseSchema"],M);const V=g(t,["routingConfig"]);V!=null&&x(e,["routingConfig"],V);const D=g(t,["seed"]);D!=null&&x(e,["seed"],D);const k=g(t,["speechConfig"]);k!=null&&x(e,["speechConfig"],Rx(k));const R=g(t,["stopSequences"]);R!=null&&x(e,["stopSequences"],R);const F=g(t,["temperature"]);F!=null&&x(e,["temperature"],F);const Y=g(t,["thinkingConfig"]);Y!=null&&x(e,["thinkingConfig"],Y);const H=g(t,["topK"]);H!=null&&x(e,["topK"],H);const B=g(t,["topP"]);if(B!=null&&x(e,["topP"],B),g(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function o3(t,e){const n={},r=g(e,["model"]);return r!=null&&x(n,["_url","name"],Fe(t,r)),n}function a3(t,e){const n={},r=g(e,["model"]);return r!=null&&x(n,["_url","name"],Fe(t,r)),n}function l3(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function u3(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function c3(t){const e={},n=g(t,["aspectRatio"]);n!=null&&x(e,["aspectRatio"],n);const r=g(t,["imageSize"]);if(r!=null&&x(e,["imageSize"],r),g(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function d3(t){const e={},n=g(t,["aspectRatio"]);n!=null&&x(e,["aspectRatio"],n);const r=g(t,["imageSize"]);r!=null&&x(e,["imageSize"],r);const s=g(t,["outputMimeType"]);s!=null&&x(e,["imageOutputOptions","mimeType"],s);const a=g(t,["outputCompressionQuality"]);return a!=null&&x(e,["imageOutputOptions","compressionQuality"],a),e}function f3(t){const e={},n=g(t,["bytesBase64Encoded"]);n!=null&&x(e,["imageBytes"],ii(n));const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function Ix(t){const e={},n=g(t,["gcsUri"]);n!=null&&x(e,["gcsUri"],n);const r=g(t,["bytesBase64Encoded"]);r!=null&&x(e,["imageBytes"],ii(r));const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function su(t){const e={};if(g(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=g(t,["imageBytes"]);n!=null&&x(e,["bytesBase64Encoded"],ii(n));const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function Xn(t){const e={},n=g(t,["gcsUri"]);n!=null&&x(e,["gcsUri"],n);const r=g(t,["imageBytes"]);r!=null&&x(e,["bytesBase64Encoded"],ii(r));const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function h3(t,e,n){const r={},s=g(e,["pageSize"]);n!==void 0&&s!=null&&x(n,["_query","pageSize"],s);const a=g(e,["pageToken"]);n!==void 0&&a!=null&&x(n,["_query","pageToken"],a);const u=g(e,["filter"]);n!==void 0&&u!=null&&x(n,["_query","filter"],u);const h=g(e,["queryBase"]);return n!==void 0&&h!=null&&x(n,["_url","models_url"],wx(t,h)),r}function p3(t,e,n){const r={},s=g(e,["pageSize"]);n!==void 0&&s!=null&&x(n,["_query","pageSize"],s);const a=g(e,["pageToken"]);n!==void 0&&a!=null&&x(n,["_query","pageToken"],a);const u=g(e,["filter"]);n!==void 0&&u!=null&&x(n,["_query","filter"],u);const h=g(e,["queryBase"]);return n!==void 0&&h!=null&&x(n,["_url","models_url"],wx(t,h)),r}function g3(t,e){const n={},r=g(e,["config"]);return r!=null&&h3(t,r,n),n}function m3(t,e){const n={},r=g(e,["config"]);return r!=null&&p3(t,r,n),n}function y3(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const s=g(t,["_self"]);if(s!=null){let a=vx(s);Array.isArray(a)&&(a=a.map(u=>Td(u))),x(e,["models"],a)}return e}function x3(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const s=g(t,["_self"]);if(s!=null){let a=vx(s);Array.isArray(a)&&(a=a.map(u=>Id(u))),x(e,["models"],a)}return e}function w3(t){const e={},n=g(t,["maskMode"]);n!=null&&x(e,["maskMode"],n);const r=g(t,["segmentationClasses"]);r!=null&&x(e,["maskClasses"],r);const s=g(t,["maskDilation"]);return s!=null&&x(e,["dilation"],s),e}function Td(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const r=g(t,["displayName"]);r!=null&&x(e,["displayName"],r);const s=g(t,["description"]);s!=null&&x(e,["description"],s);const a=g(t,["version"]);a!=null&&x(e,["version"],a);const u=g(t,["_self"]);u!=null&&x(e,["tunedModelInfo"],O3(u));const h=g(t,["inputTokenLimit"]);h!=null&&x(e,["inputTokenLimit"],h);const m=g(t,["outputTokenLimit"]);m!=null&&x(e,["outputTokenLimit"],m);const p=g(t,["supportedGenerationMethods"]);p!=null&&x(e,["supportedActions"],p);const w=g(t,["temperature"]);w!=null&&x(e,["temperature"],w);const _=g(t,["maxTemperature"]);_!=null&&x(e,["maxTemperature"],_);const C=g(t,["topP"]);C!=null&&x(e,["topP"],C);const T=g(t,["topK"]);T!=null&&x(e,["topK"],T);const P=g(t,["thinking"]);return P!=null&&x(e,["thinking"],P),e}function Id(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const r=g(t,["displayName"]);r!=null&&x(e,["displayName"],r);const s=g(t,["description"]);s!=null&&x(e,["description"],s);const a=g(t,["versionId"]);a!=null&&x(e,["version"],a);const u=g(t,["deployedModels"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(C=>PI(C))),x(e,["endpoints"],_)}const h=g(t,["labels"]);h!=null&&x(e,["labels"],h);const m=g(t,["_self"]);m!=null&&x(e,["tunedModelInfo"],L3(m));const p=g(t,["defaultCheckpointId"]);p!=null&&x(e,["defaultCheckpointId"],p);const w=g(t,["checkpoints"]);if(w!=null){let _=w;Array.isArray(_)&&(_=_.map(C=>C)),x(e,["checkpoints"],_)}return e}function v3(t){const e={},n=g(t,["mediaResolution"]);n!=null&&x(e,["mediaResolution"],n);const r=g(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const s=g(t,["executableCode"]);s!=null&&x(e,["executableCode"],s);const a=g(t,["fileData"]);a!=null&&x(e,["fileData"],MI(a));const u=g(t,["functionCall"]);u!=null&&x(e,["functionCall"],DI(u));const h=g(t,["functionResponse"]);h!=null&&x(e,["functionResponse"],h);const m=g(t,["inlineData"]);m!=null&&x(e,["inlineData"],sI(m));const p=g(t,["text"]);p!=null&&x(e,["text"],p);const w=g(t,["thought"]);w!=null&&x(e,["thought"],w);const _=g(t,["thoughtSignature"]);_!=null&&x(e,["thoughtSignature"],_);const C=g(t,["videoMetadata"]);return C!=null&&x(e,["videoMetadata"],C),e}function E3(t){const e={},n=g(t,["productImage"]);return n!=null&&x(e,["image"],Xn(n)),e}function _3(t,e){const n={},r=g(t,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const s=g(t,["baseSteps"]);e!==void 0&&s!=null&&x(e,["parameters","baseSteps"],s);const a=g(t,["outputGcsUri"]);e!==void 0&&a!=null&&x(e,["parameters","storageUri"],a);const u=g(t,["seed"]);e!==void 0&&u!=null&&x(e,["parameters","seed"],u);const h=g(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&x(e,["parameters","safetySetting"],h);const m=g(t,["personGeneration"]);e!==void 0&&m!=null&&x(e,["parameters","personGeneration"],m);const p=g(t,["addWatermark"]);e!==void 0&&p!=null&&x(e,["parameters","addWatermark"],p);const w=g(t,["outputMimeType"]);e!==void 0&&w!=null&&x(e,["parameters","outputOptions","mimeType"],w);const _=g(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&x(e,["parameters","outputOptions","compressionQuality"],_);const C=g(t,["enhancePrompt"]);e!==void 0&&C!=null&&x(e,["parameters","enhancePrompt"],C);const T=g(t,["labels"]);return e!==void 0&&T!=null&&x(e,["labels"],T),n}function C3(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["source"]);s!=null&&S3(s,n);const a=g(e,["config"]);return a!=null&&_3(a,n),n}function A3(t){const e={},n=g(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>iu(s))),x(e,["generatedImages"],r)}return e}function S3(t,e){const n={},r=g(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const s=g(t,["personImage"]);e!==void 0&&s!=null&&x(e,["instances[0]","personImage","image"],Xn(s));const a=g(t,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>E3(h))),x(e,["instances[0]","productImages"],u)}return n}function T3(t){const e={},n=g(t,["referenceImage"]);n!=null&&x(e,["referenceImage"],Xn(n));const r=g(t,["referenceId"]);r!=null&&x(e,["referenceId"],r);const s=g(t,["referenceType"]);s!=null&&x(e,["referenceType"],s);const a=g(t,["maskImageConfig"]);a!=null&&x(e,["maskImageConfig"],w3(a));const u=g(t,["controlImageConfig"]);u!=null&&x(e,["controlImageConfig"],fI(u));const h=g(t,["styleImageConfig"]);h!=null&&x(e,["styleImageConfig"],h);const m=g(t,["subjectImageConfig"]);return m!=null&&x(e,["subjectImageConfig"],m),e}function Nx(t){const e={},n=g(t,["safetyAttributes","categories"]);n!=null&&x(e,["categories"],n);const r=g(t,["safetyAttributes","scores"]);r!=null&&x(e,["scores"],r);const s=g(t,["contentType"]);return s!=null&&x(e,["contentType"],s),e}function bx(t){const e={},n=g(t,["safetyAttributes","categories"]);n!=null&&x(e,["categories"],n);const r=g(t,["safetyAttributes","scores"]);r!=null&&x(e,["scores"],r);const s=g(t,["contentType"]);return s!=null&&x(e,["contentType"],s),e}function I3(t){const e={},n=g(t,["category"]);if(n!=null&&x(e,["category"],n),g(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=g(t,["threshold"]);return r!=null&&x(e,["threshold"],r),e}function N3(t){const e={},n=g(t,["image"]);return n!=null&&x(e,["image"],Xn(n)),e}function b3(t,e){const n={},r=g(t,["mode"]);e!==void 0&&r!=null&&x(e,["parameters","mode"],r);const s=g(t,["maxPredictions"]);e!==void 0&&s!=null&&x(e,["parameters","maxPredictions"],s);const a=g(t,["confidenceThreshold"]);e!==void 0&&a!=null&&x(e,["parameters","confidenceThreshold"],a);const u=g(t,["maskDilation"]);e!==void 0&&u!=null&&x(e,["parameters","maskDilation"],u);const h=g(t,["binaryColorThreshold"]);e!==void 0&&h!=null&&x(e,["parameters","binaryColorThreshold"],h);const m=g(t,["labels"]);return e!==void 0&&m!=null&&x(e,["labels"],m),n}function R3(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["source"]);s!=null&&P3(s,n);const a=g(e,["config"]);return a!=null&&b3(a,n),n}function k3(t){const e={},n=g(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>n3(s))),x(e,["generatedMasks"],r)}return e}function P3(t,e){const n={},r=g(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const s=g(t,["image"]);e!==void 0&&s!=null&&x(e,["instances[0]","image"],Xn(s));const a=g(t,["scribbleImage"]);return e!==void 0&&a!=null&&x(e,["instances[0]","scribble"],N3(a)),n}function Rx(t){const e={},n=g(t,["languageCode"]);n!=null&&x(e,["languageCode"],n);const r=g(t,["voiceConfig"]);if(r!=null&&x(e,["voiceConfig"],r),g(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function M3(t){const e={},n=g(t,["functionCallingConfig"]);n!=null&&x(e,["functionCallingConfig"],OI(n));const r=g(t,["retrievalConfig"]);return r!=null&&x(e,["retrievalConfig"],r),e}function D3(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let w=n;Array.isArray(w)&&(w=w.map(_=>_)),x(e,["functionDeclarations"],w)}if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const s=g(t,["computerUse"]);s!=null&&x(e,["computerUse"],s);const a=g(t,["fileSearch"]);a!=null&&x(e,["fileSearch"],a);const u=g(t,["codeExecution"]);if(u!=null&&x(e,["codeExecution"],u),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=g(t,["googleMaps"]);h!=null&&x(e,["googleMaps"],l3(h));const m=g(t,["googleSearch"]);m!=null&&x(e,["googleSearch"],u3(m));const p=g(t,["urlContext"]);return p!=null&&x(e,["urlContext"],p),e}function kx(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(C=>LI(C))),x(e,["functionDeclarations"],_)}const r=g(t,["retrieval"]);r!=null&&x(e,["retrieval"],r);const s=g(t,["googleSearchRetrieval"]);s!=null&&x(e,["googleSearchRetrieval"],s);const a=g(t,["computerUse"]);if(a!=null&&x(e,["computerUse"],a),g(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=g(t,["codeExecution"]);u!=null&&x(e,["codeExecution"],u);const h=g(t,["enterpriseWebSearch"]);h!=null&&x(e,["enterpriseWebSearch"],h);const m=g(t,["googleMaps"]);m!=null&&x(e,["googleMaps"],m);const p=g(t,["googleSearch"]);p!=null&&x(e,["googleSearch"],p);const w=g(t,["urlContext"]);return w!=null&&x(e,["urlContext"],w),e}function O3(t){const e={},n=g(t,["baseModel"]);n!=null&&x(e,["baseModel"],n);const r=g(t,["createTime"]);r!=null&&x(e,["createTime"],r);const s=g(t,["updateTime"]);return s!=null&&x(e,["updateTime"],s),e}function L3(t){const e={},n=g(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&x(e,["baseModel"],n);const r=g(t,["createTime"]);r!=null&&x(e,["createTime"],r);const s=g(t,["updateTime"]);return s!=null&&x(e,["updateTime"],s),e}function B3(t,e){const n={},r=g(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const s=g(t,["description"]);e!==void 0&&s!=null&&x(e,["description"],s);const a=g(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&x(e,["defaultCheckpointId"],a),n}function F3(t,e){const n={},r=g(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const s=g(t,["description"]);e!==void 0&&s!=null&&x(e,["description"],s);const a=g(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&x(e,["defaultCheckpointId"],a),n}function U3(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","name"],Fe(t,r));const s=g(e,["config"]);return s!=null&&B3(s,n),n}function V3(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["config"]);return s!=null&&F3(s,n),n}function G3(t,e){const n={},r=g(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const s=g(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&x(e,["parameters","safetySetting"],s);const a=g(t,["personGeneration"]);e!==void 0&&a!=null&&x(e,["parameters","personGeneration"],a);const u=g(t,["includeRaiReason"]);e!==void 0&&u!=null&&x(e,["parameters","includeRaiReason"],u);const h=g(t,["outputMimeType"]);e!==void 0&&h!=null&&x(e,["parameters","outputOptions","mimeType"],h);const m=g(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&x(e,["parameters","outputOptions","compressionQuality"],m);const p=g(t,["enhanceInputImage"]);e!==void 0&&p!=null&&x(e,["parameters","upscaleConfig","enhanceInputImage"],p);const w=g(t,["imagePreservationFactor"]);e!==void 0&&w!=null&&x(e,["parameters","upscaleConfig","imagePreservationFactor"],w);const _=g(t,["labels"]);e!==void 0&&_!=null&&x(e,["labels"],_);const C=g(t,["numberOfImages"]);e!==void 0&&C!=null&&x(e,["parameters","sampleCount"],C);const T=g(t,["mode"]);return e!==void 0&&T!=null&&x(e,["parameters","mode"],T),n}function H3(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["_url","model"],Fe(t,r));const s=g(e,["image"]);s!=null&&x(n,["instances[0]","image"],Xn(s));const a=g(e,["upscaleFactor"]);a!=null&&x(n,["parameters","upscaleConfig","upscaleFactor"],a);const u=g(e,["config"]);return u!=null&&G3(u,n),n}function q3(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>iu(a))),x(e,["generatedImages"],s)}return e}function z3(t){const e={},n=g(t,["uri"]);n!=null&&x(e,["uri"],n);const r=g(t,["encodedVideo"]);r!=null&&x(e,["videoBytes"],ii(r));const s=g(t,["encoding"]);return s!=null&&x(e,["mimeType"],s),e}function W3(t){const e={},n=g(t,["gcsUri"]);n!=null&&x(e,["uri"],n);const r=g(t,["bytesBase64Encoded"]);r!=null&&x(e,["videoBytes"],ii(r));const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function K3(t){const e={},n=g(t,["image"]);n!=null&&x(e,["_self"],Xn(n));const r=g(t,["maskMode"]);return r!=null&&x(e,["maskMode"],r),e}function $3(t){const e={},n=g(t,["image"]);n!=null&&x(e,["image"],su(n));const r=g(t,["referenceType"]);return r!=null&&x(e,["referenceType"],r),e}function Y3(t){const e={},n=g(t,["image"]);n!=null&&x(e,["image"],Xn(n));const r=g(t,["referenceType"]);return r!=null&&x(e,["referenceType"],r),e}function Px(t){const e={},n=g(t,["uri"]);n!=null&&x(e,["uri"],n);const r=g(t,["videoBytes"]);r!=null&&x(e,["encodedVideo"],ii(r));const s=g(t,["mimeType"]);return s!=null&&x(e,["encoding"],s),e}function Mx(t){const e={},n=g(t,["uri"]);n!=null&&x(e,["gcsUri"],n);const r=g(t,["videoBytes"]);r!=null&&x(e,["bytesBase64Encoded"],ii(r));const s=g(t,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const j3="Content-Type",X3="X-Server-Timeout",J3="User-Agent",Nd="x-goog-api-client",Z3="1.30.0",Q3=`google-genai-sdk/${Z3}`,eN="v1beta1",tN="v1beta",Np=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class nN{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:eN,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:tN,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[u,h]of Object.entries(e.queryParams))s.searchParams.append(u,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?r[s]=Object.assign(Object.assign({},r[s]),a):a!==void 0&&(r[s]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,s){if(n&&n.timeout||s){const a=new AbortController,u=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const h=setTimeout(()=>a.abort(),n.timeout);h&&typeof h.unref=="function"&&h.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=u}return n&&n.extraBody!==null&&rN(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await bp(s),new Cd(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await bp(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return Es(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let u="";for(;;){const{done:h,value:m}=yield tt(s.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=a.decode(m,{stream:!0});try{const _=JSON.parse(p);if("error"in _){const C=JSON.parse(JSON.stringify(_.error)),T=C.status,P=C.code,M=`got status: ${T}. ${JSON.stringify(_)}`;if(P>=400&&P<600)throw new nu({message:M,status:P})}}catch(_){if(_.name==="ApiError")throw _}u+=p;let w=u.match(Np);for(;w;){const _=w[1];try{const C=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield tt(new Cd(C)),u=u.slice(w[0].length),w=u.match(Np)}catch(C){throw new Error(`exception parsing stream chunk ${_}. ${C}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Q3+" "+this.clientOptions.userAgentExtra;return e[J3]=n,e[Nd]=n,e[j3]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))r.append(s,a);e.timeout&&e.timeout>0&&r.append(X3,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);s.sizeBytes=String(u.size);const h=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=h;const m={file:s},p=this.getFileName(e),w=ce("upload/v1beta/files",m._url),_=await this.fetchUploadUrl(w,s.sizeBytes,s.mimeType,p,m,n==null?void 0:n.httpOptions);return a.upload(e,_,this)}async uploadFileToFileSearchStore(e,n,r){var s;const a=this.clientOptions.uploader,u=await a.stat(n),h=String(u.size),m=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:u.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,w=this.getFileName(n),_={};r!=null&&r.customMetadata&&(_.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(_.chunkingConfig=r.chunkingConfig);const C=await this.fetchUploadUrl(p,h,m,w,_,r==null?void 0:r.httpOptions);return a.uploadToFileSearchStore(n,C,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,s,a,u){var h;let m={};u?m=u:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const p=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:m});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const w=(h=p==null?void 0:p.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(w===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return w}}async function bp(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new nu({message:s,status:n}):new Error(s)}}function rN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,u){const h=Object.assign({},a);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const p=u[m],w=h[m];p&&typeof p=="object"&&!Array.isArray(p)&&w&&typeof w=="object"&&!Array.isArray(w)?h[m]=r(w,p):(w&&p&&typeof w!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof w}, New type: ${typeof p}. Overwriting.`),h[m]=p)}return h}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iN="mcp_used/unknown";let sN=!1;function Dx(t){for(const e of t)if(oN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return sN}function Ox(t){var e;const n=(e=t[Nd])!==null&&e!==void 0?e:"";t[Nd]=(n+` ${iN}`).trimStart()}function oN(t){return t!==null&&typeof t=="object"&&t instanceof Kf}function aN(t,e=100){return Es(this,arguments,function*(){let r,s=0;for(;s<e;){const a=yield tt(t.listTools({cursor:r}));for(const u of a.tools)yield yield tt(u),s++;if(!a.nextCursor)break;r=a.nextCursor}})}class Kf{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Kf(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const a={},u=[];for(const w of this.mcpClients)try{for(var h=!0,m=(n=void 0,Io(aN(w))),p;p=await m.next(),e=p.done,!e;h=!0){s=p.value,h=!1;const _=s;u.push(_);const C=_.name;if(a[C])throw new Error(`Duplicate function name ${C} found in MCP tools. Please ensure function names are unique.`);a[C]=w}}catch(_){n={error:_}}finally{try{!h&&!e&&(r=m.return)&&await r.call(m)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),QA(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await s.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function lN(t,e,n){const r=new WA;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),e(r)}class uN{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=fN(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),m=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const w=new Promise(R=>{p=R}),_=e.callbacks,C=function(){p({})},T=this.apiClient,P={onopen:C,onmessage:R=>{lN(T,_.onmessage,R)},onerror:(n=_==null?void 0:_.onerror)!==null&&n!==void 0?n:function(R){},onclose:(r=_==null?void 0:_.onclose)!==null&&r!==void 0?r:function(R){}},M=this.webSocketFactory.create(m,dN(u),P);M.connect(),await w;const k={setup:{model:Fe(this.apiClient,e.model)}};return M.send(JSON.stringify(k)),new cN(M,this.apiClient)}}class cN{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=XT(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=jT(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(fs.PLAY)}pause(){this.sendPlaybackControl(fs.PAUSE)}stop(){this.sendPlaybackControl(fs.STOP)}resetContext(){this.sendPlaybackControl(fs.RESET_CONTEXT)}close(){this.conn.close()}}function dN(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function fN(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function pN(t,e,n){const r=new zA;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const u=QT(a);Object.assign(r,u)}else Object.assign(r,a);e(r)}class gN{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new uN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,a,u,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let w;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&Dx(e.config.tools)&&Ox(_);const C=wN(_);if(this.apiClient.isVertexAI())w=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(C,w);else{const q=this.apiClient.getApiKey();let re="BidiGenerateContent",Se="key";q!=null&&q.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),re="BidiGenerateContentConstrained",Se="access_token"),w=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${re}?${Se}=${q}`}let T=()=>{};const P=new Promise(q=>{T=q}),M=e.callbacks,V=function(){var q;(q=M==null?void 0:M.onopen)===null||q===void 0||q.call(M),T({})},D=this.apiClient,k={onopen:V,onmessage:q=>{pN(D,M.onmessage,q)},onerror:(n=M==null?void 0:M.onerror)!==null&&n!==void 0?n:function(q){},onclose:(r=M==null?void 0:M.onclose)!==null&&r!==void 0?r:function(q){}},R=this.webSocketFactory.create(w,xN(C),k);R.connect(),await P;let F=Fe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&F.startsWith("publishers/")){const q=this.apiClient.getProject(),re=this.apiClient.getLocation();F=`projects/${q}/locations/${re}/`+F}let Y={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ml.AUDIO]}:e.config.responseModalities=[Ml.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const H=(h=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[],B=[];for(const q of H)if(this.isCallableTool(q)){const re=q;B.push(await re.tool())}else B.push(q);B.length>0&&(e.config.tools=B);const $={model:F,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Y=YT(this.apiClient,$):Y=$T(this.apiClient,$),delete Y.config,R.send(JSON.stringify(Y)),new yN(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const mN={turnComplete:!0};class yN{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Dn(n.turns),e.isVertexAI()||(r=r.map(s=>ru(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(hN)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},mN),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:ZT(e)}:n={realtimeInput:JT(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function xN(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function wN(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rp=10;function kp(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(_s(u)){s=!0;break}if(!s)return!0;const a=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function _s(t){return"callTool"in t&&typeof t.callTool=="function"}function vN(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>_s(s)))!==null&&r!==void 0?r:!1}function Pp(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,s)=>{if(_s(r))return;const a=r;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(s)}),n}function Mp(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EN extends Ar{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,a,u,h;const m=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!vN(n)||kp(n.config))return await this.generateContentInternal(m);const p=Pp(n);if(p.length>0){const M=p.map(V=>`tools[${V}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let w,_;const C=Dn(m.contents),T=(a=(s=(r=m.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:Rp;let P=0;for(;P<T&&(w=await this.generateContentInternal(m),!(!w.functionCalls||w.functionCalls.length===0));){const M=w.candidates[0].content,V=[];for(const D of(h=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[])if(_s(D)){const R=await D.callTool(w.functionCalls);V.push(...R)}P++,_={role:"user",parts:V},m.contents=Dn(m.contents),m.contents.push(M),m.contents.push(_),Mp(m.config)&&(C.push(M),C.push(_))}return Mp(m.config)&&(w.automaticFunctionCallingHistory=C),w},this.generateContentStream=async n=>{var r,s,a,u,h;if(this.maybeMoveToResponseJsonSchem(n),kp(n.config)){const _=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(_)}const m=Pp(n);if(m.length>0){const _=m.map(C=>`tools[${C}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(a=(s=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,w=(h=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(p&&!w)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let a;const u=[];if(r!=null&&r.generatedImages)for(const m of r.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((s=m==null?void 0:m.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=m==null?void 0:m.safetyAttributes:u.push(m);let h;return a?h={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:h={generatedImages:u,sdkHttpResponse:r.sdkHttpResponse},h}),this.list=async n=>{var r;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((r=u.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Mi(_r.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(u),u)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,a,u,h,m;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((m=(h=n.source)===null||h===void 0?void 0:h.video)===null||m===void 0)&&m.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const u=await Promise.all(a.map(async m=>_s(m)?await m.tool():m)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(h.config.tools=u,e.config&&e.config.tools&&Dx(e.config.tools)){const m=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),Ox(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var n,r,s;const a=new Map;for(const u of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(_s(u)){const h=u,m=await h.tool();for(const p of(s=m.functionDeclarations)!==null&&s!==void 0?s:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,h)}}return a}async processAfcStream(e){var n,r,s;const a=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:Rp;let u=!1,h=0;const m=await this.initAfcToolsMap(e);return function(p,w,_){var C,T;return Es(this,arguments,function*(){for(var P,M,V,D;h<a;){u&&(h++,u=!1);const Y=yield tt(p.processParamsMaybeAddMcpUsage(_)),H=yield tt(p.generateContentStreamInternal(Y)),B=[],$=[];try{for(var k=!0,R=(M=void 0,Io(H)),F;F=yield tt(R.next()),P=F.done,!P;k=!0){D=F.value,k=!1;const q=D;if(yield yield tt(q),q.candidates&&(!((C=q.candidates[0])===null||C===void 0)&&C.content)){$.push(q.candidates[0].content);for(const re of(T=q.candidates[0].content.parts)!==null&&T!==void 0?T:[])if(h<a&&re.functionCall){if(!re.functionCall.name)throw new Error("Function call name was not returned by the model.");if(w.has(re.functionCall.name)){const Se=yield tt(w.get(re.functionCall.name).callTool([re.functionCall]));B.push(...Se)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${w.keys()}, mising tool: ${re.functionCall.name}`)}}}}catch(q){M={error:q}}finally{try{!k&&!P&&(V=R.return)&&(yield tt(V.call(R)))}finally{if(M)throw M.error}}if(B.length>0){u=!0;const q=new lo;q.candidates=[{content:{role:"user",parts:B}}],yield yield tt(q);const re=[];re.push(...$),re.push({role:"user",parts:B});const Se=Dn(_.contents).concat(re);_.contents=Se}else break}})}(this,m,e)}async generateContentInternal(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=Sp(this.apiClient,e);return h=ce("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=Ip(w),C=new lo;return Object.assign(C,_),C})}else{const p=Ap(this.apiClient,e);return h=ce("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=Tp(w),C=new lo;return Object.assign(C,_),C})}}async generateContentStreamInternal(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=Sp(this.apiClient,e);return h=ce("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),u.then(function(_){return Es(this,arguments,function*(){var C,T,P,M;try{for(var V=!0,D=Io(_),k;k=yield tt(D.next()),C=k.done,!C;V=!0){M=k.value,V=!1;const R=M,F=Ip(yield tt(R.json()));F.sdkHttpResponse={headers:R.headers};const Y=new lo;Object.assign(Y,F),yield yield tt(Y)}}catch(R){T={error:R}}finally{try{!V&&!C&&(P=D.return)&&(yield tt(P.call(D)))}finally{if(T)throw T.error}}})})}else{const p=Ap(this.apiClient,e);return h=ce("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(_){return Es(this,arguments,function*(){var C,T,P,M;try{for(var V=!0,D=Io(_),k;k=yield tt(D.next()),C=k.done,!C;V=!0){M=k.value,V=!1;const R=M,F=Tp(yield tt(R.json()));F.sdkHttpResponse={headers:R.headers};const Y=new lo;Object.assign(Y,F),yield yield tt(Y)}}catch(R){T={error:R}}finally{try{!V&&!C&&(P=D.return)&&(yield tt(P.call(D)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=bI(this.apiClient,e);return h=ce("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=kI(w),C=new lp;return Object.assign(C,_),C})}else{const p=NI(this.apiClient,e);return h=ce("{model}:batchEmbedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=RI(w),C=new lp;return Object.assign(C,_),C})}}async generateImagesInternal(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=HI(this.apiClient,e);return h=ce("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=zI(w),C=new up;return Object.assign(C,_),C})}else{const p=GI(this.apiClient,e);return h=ce("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=qI(w),C=new up;return Object.assign(C,_),C})}}async editImageInternal(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI()){const h=AI(this.apiClient,e);return a=ce("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const w=p;return w.sdkHttpResponse={headers:m.headers},w})),s.then(m=>{const p=SI(m),w=new MA;return Object.assign(w,p),w})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI()){const h=H3(this.apiClient,e);return a=ce("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const w=p;return w.sdkHttpResponse={headers:m.headers},w})),s.then(m=>{const p=q3(m),w=new DA;return Object.assign(w,p),w})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI()){const h=C3(this.apiClient,e);return a=ce("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>{const p=A3(m),w=new OA;return Object.assign(w,p),w})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI()){const h=R3(this.apiClient,e);return a=ce("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>{const p=k3(m),w=new LA;return Object.assign(w,p),w})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=a3(this.apiClient,e);return h=ce("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json()),u.then(w=>Id(w))}else{const p=o3(this.apiClient,e);return h=ce("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json()),u.then(w=>Td(w))}}async listInternal(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=m3(this.apiClient,e);return h=ce("{models_url}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=x3(w),C=new cp;return Object.assign(C,_),C})}else{const p=g3(this.apiClient,e);return h=ce("{models_url}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=y3(w),C=new cp;return Object.assign(C,_),C})}}async update(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=V3(this.apiClient,e);return h=ce("{model}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json()),u.then(w=>Id(w))}else{const p=U3(this.apiClient,e);return h=ce("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json()),u.then(w=>Td(w))}}async delete(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=vI(this.apiClient,e);return h=ce("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=_I(w),C=new dp;return Object.assign(C,_),C})}else{const p=wI(this.apiClient,e);return h=ce("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=EI(w),C=new dp;return Object.assign(C,_),C})}}async countTokens(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=mI(this.apiClient,e);return h=ce("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=xI(w),C=new fp;return Object.assign(C,_),C})}else{const p=gI(this.apiClient,e);return h=ce("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=yI(w),C=new fp;return Object.assign(C,_),C})}}async computeTokens(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI()){const h=lI(this.apiClient,e);return a=ce("{model}:computeTokens",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const w=p;return w.sdkHttpResponse={headers:m.headers},w})),s.then(m=>{const p=uI(m),w=new BA;return Object.assign(w,p),w})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=XI(this.apiClient,e);return h=ce("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json()),u.then(w=>{const _=YI(w),C=new Dl;return Object.assign(C,_),C})}else{const p=jI(this.apiClient,e);return h=ce("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json()),u.then(w=>{const _=$I(w),C=new Dl;return Object.assign(C,_),C})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _N extends Ar{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=IA(e);return h=ce("{operationName}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json()),u}else{const p=TA(e);return h=ce("{operationName}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json()),u}}async fetchPredictVideosOperationInternal(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI()){const h=wA(e);return a=ce("{resourceName}:fetchPredictOperation",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CN(t){const e={},n=g(t,["data"]);if(n!=null&&x(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function AN(t){const e={},n=g(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>MN(a))),x(e,["parts"],s)}const r=g(t,["role"]);return r!=null&&x(e,["role"],r),e}function SN(t,e,n){const r={},s=g(e,["expireTime"]);n!==void 0&&s!=null&&x(n,["expireTime"],s);const a=g(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&x(n,["newSessionExpireTime"],a);const u=g(e,["uses"]);n!==void 0&&u!=null&&x(n,["uses"],u);const h=g(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&x(n,["bidiGenerateContentSetup"],PN(t,h));const m=g(e,["lockAdditionalFields"]);return n!==void 0&&m!=null&&x(n,["fieldMask"],m),r}function TN(t,e){const n={},r=g(e,["config"]);return r!=null&&x(n,["config"],SN(t,r,n)),n}function IN(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=g(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function NN(t){const e={},n=g(t,["id"]);n!=null&&x(e,["id"],n);const r=g(t,["args"]);r!=null&&x(e,["args"],r);const s=g(t,["name"]);if(s!=null&&x(e,["name"],s),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function bN(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function RN(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function kN(t,e){const n={},r=g(t,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],r);const s=g(t,["responseModalities"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","responseModalities"],s);const a=g(t,["temperature"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","temperature"],a);const u=g(t,["topP"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","topP"],u);const h=g(t,["topK"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","topK"],h);const m=g(t,["maxOutputTokens"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","maxOutputTokens"],m);const p=g(t,["mediaResolution"]);e!==void 0&&p!=null&&x(e,["setup","generationConfig","mediaResolution"],p);const w=g(t,["seed"]);e!==void 0&&w!=null&&x(e,["setup","generationConfig","seed"],w);const _=g(t,["speechConfig"]);e!==void 0&&_!=null&&x(e,["setup","generationConfig","speechConfig"],Wf(_));const C=g(t,["thinkingConfig"]);e!==void 0&&C!=null&&x(e,["setup","generationConfig","thinkingConfig"],C);const T=g(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],T);const P=g(t,["systemInstruction"]);e!==void 0&&P!=null&&x(e,["setup","systemInstruction"],AN(Kt(P)));const M=g(t,["tools"]);if(e!==void 0&&M!=null){let H=Us(M);Array.isArray(H)&&(H=H.map(B=>ON(Fs(B)))),x(e,["setup","tools"],H)}const V=g(t,["sessionResumption"]);e!==void 0&&V!=null&&x(e,["setup","sessionResumption"],DN(V));const D=g(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&x(e,["setup","inputAudioTranscription"],D);const k=g(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&x(e,["setup","outputAudioTranscription"],k);const R=g(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&x(e,["setup","realtimeInputConfig"],R);const F=g(t,["contextWindowCompression"]);e!==void 0&&F!=null&&x(e,["setup","contextWindowCompression"],F);const Y=g(t,["proactivity"]);return e!==void 0&&Y!=null&&x(e,["setup","proactivity"],Y),n}function PN(t,e){const n={},r=g(e,["model"]);r!=null&&x(n,["setup","model"],Fe(t,r));const s=g(e,["config"]);return s!=null&&x(n,["config"],kN(s,n)),n}function MN(t){const e={},n=g(t,["mediaResolution"]);n!=null&&x(e,["mediaResolution"],n);const r=g(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const s=g(t,["executableCode"]);s!=null&&x(e,["executableCode"],s);const a=g(t,["fileData"]);a!=null&&x(e,["fileData"],IN(a));const u=g(t,["functionCall"]);u!=null&&x(e,["functionCall"],NN(u));const h=g(t,["functionResponse"]);h!=null&&x(e,["functionResponse"],h);const m=g(t,["inlineData"]);m!=null&&x(e,["inlineData"],CN(m));const p=g(t,["text"]);p!=null&&x(e,["text"],p);const w=g(t,["thought"]);w!=null&&x(e,["thought"],w);const _=g(t,["thoughtSignature"]);_!=null&&x(e,["thoughtSignature"],_);const C=g(t,["videoMetadata"]);return C!=null&&x(e,["videoMetadata"],C),e}function DN(t){const e={},n=g(t,["handle"]);if(n!=null&&x(e,["handle"],n),g(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ON(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let w=n;Array.isArray(w)&&(w=w.map(_=>_)),x(e,["functionDeclarations"],w)}if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=g(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const s=g(t,["computerUse"]);s!=null&&x(e,["computerUse"],s);const a=g(t,["fileSearch"]);a!=null&&x(e,["fileSearch"],a);const u=g(t,["codeExecution"]);if(u!=null&&x(e,["codeExecution"],u),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=g(t,["googleMaps"]);h!=null&&x(e,["googleMaps"],bN(h));const m=g(t,["googleSearch"]);m!=null&&x(e,["googleSearch"],RN(m));const p=g(t,["urlContext"]);return p!=null&&x(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LN(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function BN(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=LN(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];s.length>0&&(h=s.map(p=>u.includes(p)?`generationConfig.${p}`:p));const m=[];a&&m.push(a),h.length>0&&m.push(...h),m.length>0?t.fieldMask=m.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class FN extends Ar{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=TN(this.apiClient,e);a=ce("auth_tokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query;const m=BN(h,e.config);return s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UN(t,e){const n={},r=g(t,["displayName"]);return e!==void 0&&r!=null&&x(e,["displayName"],r),n}function VN(t){const e={},n=g(t,["config"]);return n!=null&&UN(n,e),e}function GN(t,e){const n={},r=g(t,["force"]);return e!==void 0&&r!=null&&x(e,["_query","force"],r),n}function HN(t){const e={},n=g(t,["name"]);n!=null&&x(e,["_url","name"],n);const r=g(t,["config"]);return r!=null&&GN(r,e),e}function qN(t){const e={},n=g(t,["name"]);return n!=null&&x(e,["_url","name"],n),e}function zN(t,e){const n={},r=g(t,["customMetadata"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),x(e,["customMetadata"],a)}const s=g(t,["chunkingConfig"]);return e!==void 0&&s!=null&&x(e,["chunkingConfig"],s),n}function WN(t){const e={},n=g(t,["name"]);n!=null&&x(e,["name"],n);const r=g(t,["metadata"]);r!=null&&x(e,["metadata"],r);const s=g(t,["done"]);s!=null&&x(e,["done"],s);const a=g(t,["error"]);a!=null&&x(e,["error"],a);const u=g(t,["response"]);return u!=null&&x(e,["response"],$N(u)),e}function KN(t){const e={},n=g(t,["fileSearchStoreName"]);n!=null&&x(e,["_url","file_search_store_name"],n);const r=g(t,["fileName"]);r!=null&&x(e,["fileName"],r);const s=g(t,["config"]);return s!=null&&zN(s,e),e}function $N(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["parent"]);r!=null&&x(e,["parent"],r);const s=g(t,["documentName"]);return s!=null&&x(e,["documentName"],s),e}function YN(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const s=g(t,["pageToken"]);return e!==void 0&&s!=null&&x(e,["_query","pageToken"],s),n}function jN(t){const e={},n=g(t,["config"]);return n!=null&&YN(n,e),e}function XN(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const s=g(t,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),x(e,["fileSearchStores"],a)}return e}function JN(t,e){const n={},r=g(t,["mimeType"]);e!==void 0&&r!=null&&x(e,["mimeType"],r);const s=g(t,["displayName"]);e!==void 0&&s!=null&&x(e,["displayName"],s);const a=g(t,["customMetadata"]);if(e!==void 0&&a!=null){let h=a;Array.isArray(h)&&(h=h.map(m=>m)),x(e,["customMetadata"],h)}const u=g(t,["chunkingConfig"]);return e!==void 0&&u!=null&&x(e,["chunkingConfig"],u),n}function ZN(t){const e={},n=g(t,["fileSearchStoreName"]);n!=null&&x(e,["_url","file_search_store_name"],n);const r=g(t,["config"]);return r!=null&&JN(r,e),e}function QN(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eb(t,e){const n={},r=g(t,["force"]);return e!==void 0&&r!=null&&x(e,["_query","force"],r),n}function tb(t){const e={},n=g(t,["name"]);n!=null&&x(e,["_url","name"],n);const r=g(t,["config"]);return r!=null&&eb(r,e),e}function nb(t){const e={},n=g(t,["name"]);return n!=null&&x(e,["_url","name"],n),e}function rb(t,e){const n={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const s=g(t,["pageToken"]);return e!==void 0&&s!=null&&x(e,["_query","pageToken"],s),n}function ib(t){const e={},n=g(t,["parent"]);n!=null&&x(e,["_url","parent"],n);const r=g(t,["config"]);return r!=null&&rb(r,e),e}function sb(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=g(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const s=g(t,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),x(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ob extends Ar{constructor(e){super(),this.apiClient=e,this.list=async n=>new Mi(_r.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=nb(e);return a=ce("{name}",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async delete(e){var n,r;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=tb(e);s=ce("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ib(e);return a=ce("{parent}/documents",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>{const p=sb(m),w=new FA;return Object.assign(w,p),w})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ab extends Ar{constructor(e,n=new ob(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Mi(_r.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=VN(e);return a=ce("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async get(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=qN(e);return a=ce("{name}",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async delete(e){var n,r;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=HN(e);s=ce("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=jN(e);return a=ce("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>{const p=XN(m),w=new UA;return Object.assign(w,p),w})}}async uploadToFileSearchStoreInternal(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ZN(e);return a=ce("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>{const p=QN(m),w=new VA;return Object.assign(w,p),w})}}async importFile(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=KN(e);return a=ce("{file_search_store_name}:importFile",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),s.then(m=>{const p=WN(m),w=new Vf;return Object.assign(w,p),w})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lb(t,e){const n={},r=g(t,["name"]);return r!=null&&x(n,["_url","name"],r),n}function ub(t,e){const n={},r=g(t,["name"]);return r!=null&&x(n,["_url","name"],r),n}function cb(t,e,n){const r={};if(g(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=g(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&x(e,["displayName"],s),g(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=g(t,["epochCount"]);e!==void 0&&a!=null&&x(e,["tuningTask","hyperparameters","epochCount"],a);const u=g(t,["learningRateMultiplier"]);if(u!=null&&x(r,["tuningTask","hyperparameters","learningRateMultiplier"],u),g(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(g(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(g(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=g(t,["batchSize"]);e!==void 0&&h!=null&&x(e,["tuningTask","hyperparameters","batchSize"],h);const m=g(t,["learningRate"]);if(e!==void 0&&m!=null&&x(e,["tuningTask","hyperparameters","learningRate"],m),g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(g(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function db(t,e,n){const r={};let s=g(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const T=g(t,["validationDataset"]);e!==void 0&&T!=null&&x(e,["supervisedTuningSpec"],Dp(T))}else if(s==="PREFERENCE_TUNING"){const T=g(t,["validationDataset"]);e!==void 0&&T!=null&&x(e,["preferenceOptimizationSpec"],Dp(T))}const a=g(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&x(e,["tunedModelDisplayName"],a);const u=g(t,["description"]);e!==void 0&&u!=null&&x(e,["description"],u);let h=g(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const T=g(t,["epochCount"]);e!==void 0&&T!=null&&x(e,["supervisedTuningSpec","hyperParameters","epochCount"],T)}else if(h==="PREFERENCE_TUNING"){const T=g(t,["epochCount"]);e!==void 0&&T!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],T)}let m=g(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const T=g(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&x(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],T)}else if(m==="PREFERENCE_TUNING"){const T=g(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],T)}let p=g(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const T=g(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&x(e,["supervisedTuningSpec","exportLastCheckpointOnly"],T)}else if(p==="PREFERENCE_TUNING"){const T=g(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&x(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],T)}let w=g(n,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const T=g(t,["adapterSize"]);e!==void 0&&T!=null&&x(e,["supervisedTuningSpec","hyperParameters","adapterSize"],T)}else if(w==="PREFERENCE_TUNING"){const T=g(t,["adapterSize"]);e!==void 0&&T!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],T)}if(g(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(g(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=g(t,["labels"]);e!==void 0&&_!=null&&x(e,["labels"],_);const C=g(t,["beta"]);return e!==void 0&&C!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","beta"],C),r}function fb(t,e){const n={},r=g(t,["baseModel"]);r!=null&&x(n,["baseModel"],r);const s=g(t,["preTunedModel"]);s!=null&&x(n,["preTunedModel"],s);const a=g(t,["trainingDataset"]);a!=null&&Cb(a);const u=g(t,["config"]);return u!=null&&cb(u,n),n}function hb(t,e){const n={},r=g(t,["baseModel"]);r!=null&&x(n,["baseModel"],r);const s=g(t,["preTunedModel"]);s!=null&&x(n,["preTunedModel"],s);const a=g(t,["trainingDataset"]);a!=null&&Ab(a,n,e);const u=g(t,["config"]);return u!=null&&db(u,n,e),n}function pb(t,e){const n={},r=g(t,["name"]);return r!=null&&x(n,["_url","name"],r),n}function gb(t,e){const n={},r=g(t,["name"]);return r!=null&&x(n,["_url","name"],r),n}function mb(t,e,n){const r={},s=g(t,["pageSize"]);e!==void 0&&s!=null&&x(e,["_query","pageSize"],s);const a=g(t,["pageToken"]);e!==void 0&&a!=null&&x(e,["_query","pageToken"],a);const u=g(t,["filter"]);return e!==void 0&&u!=null&&x(e,["_query","filter"],u),r}function yb(t,e,n){const r={},s=g(t,["pageSize"]);e!==void 0&&s!=null&&x(e,["_query","pageSize"],s);const a=g(t,["pageToken"]);e!==void 0&&a!=null&&x(e,["_query","pageToken"],a);const u=g(t,["filter"]);return e!==void 0&&u!=null&&x(e,["_query","filter"],u),r}function xb(t,e){const n={},r=g(t,["config"]);return r!=null&&mb(r,n),n}function wb(t,e){const n={},r=g(t,["config"]);return r!=null&&yb(r,n),n}function vb(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const s=g(t,["nextPageToken"]);s!=null&&x(n,["nextPageToken"],s);const a=g(t,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>Lx(h))),x(n,["tuningJobs"],u)}return n}function Eb(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const s=g(t,["nextPageToken"]);s!=null&&x(n,["nextPageToken"],s);const a=g(t,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>bd(h))),x(n,["tuningJobs"],u)}return n}function _b(t,e){const n={},r=g(t,["name"]);r!=null&&x(n,["model"],r);const s=g(t,["name"]);return s!=null&&x(n,["endpoint"],s),n}function Cb(t,e){const n={};if(g(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=g(t,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),x(n,["examples","examples"],s)}return n}function Ab(t,e,n){const r={};let s=g(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const u=g(t,["gcsUri"]);e!==void 0&&u!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(s==="PREFERENCE_TUNING"){const u=g(t,["gcsUri"]);e!==void 0&&u!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=g(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=g(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=g(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(g(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Lx(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const s=g(t,["name"]);s!=null&&x(n,["name"],s);const a=g(t,["state"]);a!=null&&x(n,["state"],yx(a));const u=g(t,["createTime"]);u!=null&&x(n,["createTime"],u);const h=g(t,["tuningTask","startTime"]);h!=null&&x(n,["startTime"],h);const m=g(t,["tuningTask","completeTime"]);m!=null&&x(n,["endTime"],m);const p=g(t,["updateTime"]);p!=null&&x(n,["updateTime"],p);const w=g(t,["description"]);w!=null&&x(n,["description"],w);const _=g(t,["baseModel"]);_!=null&&x(n,["baseModel"],_);const C=g(t,["_self"]);return C!=null&&x(n,["tunedModel"],_b(C)),n}function bd(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const s=g(t,["name"]);s!=null&&x(n,["name"],s);const a=g(t,["state"]);a!=null&&x(n,["state"],yx(a));const u=g(t,["createTime"]);u!=null&&x(n,["createTime"],u);const h=g(t,["startTime"]);h!=null&&x(n,["startTime"],h);const m=g(t,["endTime"]);m!=null&&x(n,["endTime"],m);const p=g(t,["updateTime"]);p!=null&&x(n,["updateTime"],p);const w=g(t,["error"]);w!=null&&x(n,["error"],w);const _=g(t,["description"]);_!=null&&x(n,["description"],_);const C=g(t,["baseModel"]);C!=null&&x(n,["baseModel"],C);const T=g(t,["tunedModel"]);T!=null&&x(n,["tunedModel"],T);const P=g(t,["preTunedModel"]);P!=null&&x(n,["preTunedModel"],P);const M=g(t,["supervisedTuningSpec"]);M!=null&&x(n,["supervisedTuningSpec"],M);const V=g(t,["preferenceOptimizationSpec"]);V!=null&&x(n,["preferenceOptimizationSpec"],V);const D=g(t,["tuningDataStats"]);D!=null&&x(n,["tuningDataStats"],D);const k=g(t,["encryptionSpec"]);k!=null&&x(n,["encryptionSpec"],k);const R=g(t,["partnerModelTuningSpec"]);R!=null&&x(n,["partnerModelTuningSpec"],R);const F=g(t,["customBaseModel"]);F!=null&&x(n,["customBaseModel"],F);const Y=g(t,["experiment"]);Y!=null&&x(n,["experiment"],Y);const H=g(t,["labels"]);H!=null&&x(n,["labels"],H);const B=g(t,["outputUri"]);B!=null&&x(n,["outputUri"],B);const $=g(t,["pipelineJob"]);$!=null&&x(n,["pipelineJob"],$);const q=g(t,["serviceAccount"]);q!=null&&x(n,["serviceAccount"],q);const re=g(t,["tunedModelDisplayName"]);re!=null&&x(n,["tunedModelDisplayName"],re);const Se=g(t,["veoTuningSpec"]);return Se!=null&&x(n,["veoTuningSpec"],Se),n}function Sb(t,e){const n={},r=g(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const s=g(t,["name"]);s!=null&&x(n,["name"],s);const a=g(t,["metadata"]);a!=null&&x(n,["metadata"],a);const u=g(t,["done"]);u!=null&&x(n,["done"],u);const h=g(t,["error"]);return h!=null&&x(n,["error"],h),n}function Dp(t,e){const n={},r=g(t,["gcsUri"]);r!=null&&x(n,["validationDatasetUri"],r);const s=g(t,["vertexDatasetResource"]);return s!=null&&x(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tb extends Ar{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Mi(_r.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),a=await this.tuneMldevInternal(s);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:_d.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=gb(e);return h=ce("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>bd(w))}else{const p=pb(e);return h=ce("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>Lx(w))}}async listInternal(e){var n,r,s,a;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=wb(e);return h=ce("tuningJobs",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=Eb(w),C=new hp;return Object.assign(C,_),C})}else{const p=xb(e);return h=ce("tunedModels",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(w=>w.json().then(_=>{const C=_;return C.sdkHttpResponse={headers:w.headers},C})),u.then(w=>{const _=vb(w),C=new hp;return Object.assign(C,_),C})}}async cancel(e){var n,r,s,a;let u="",h={};if(this.apiClient.isVertexAI()){const m=ub(e);u=ce("{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const m=lb(e);u=ce("{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI()){const h=hb(e,e);return a=ce("tuningJobs",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const w=p;return w.sdkHttpResponse={headers:m.headers},w})),s.then(m=>bd(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=fb(e);return a=ce("tunedModels",h._url),u=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const w=p;return w.sdkHttpResponse={headers:m.headers},w})),s.then(m=>Sb(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ib{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Nb=1024*1024*8,bb=3,Rb=1e3,kb=2,Ll="x-goog-upload-status";async function Pb(t,e,n){var r;const s=await Bx(t,e,n),a=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Ll])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function Mb(t,e,n){var r;const s=await Bx(t,e,n),a=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Ll])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=dx(a),h=new Gf;return Object.assign(h,u),h}async function Bx(t,e,n){var r,s;let a=0,u=0,h=new Cd(new Response),m="upload";for(a=t.size;u<a;){const p=Math.min(Nb,a-u),w=t.slice(u,u+p);u+p>=a&&(m+=", finalize");let _=0,C=Rb;for(;_<bb&&(h=await n.request({path:"",body:w,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((r=h==null?void 0:h.headers)===null||r===void 0)&&r[Ll]));)_++,await Ob(C),C=C*kb;if(u+=p,((s=h==null?void 0:h.headers)===null||s===void 0?void 0:s[Ll])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function Db(t){return{size:t.size,type:t.type}}function Ob(t){return new Promise(e=>setTimeout(e,t))}class Lb{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Pb(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Mb(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Db(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bb{create(e,n,r){return new Fb(e,n,r)}}class Fb{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Op="x-goog-api-key";class Ub{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Op)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Op,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vb="gl-node/";class Gb{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=yA(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const s=new Ub(this.apiKey);this.apiClient=new nN({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Vb+"web",uploader:new Lb,downloader:new Ib}),this.models=new EN(this.apiClient),this.live=new gN(this.apiClient,s,new Bb),this.batches=new KS(this.apiClient),this.chats=new IT(this.models,this.apiClient),this.caches=new AT(this.apiClient),this.files=new BT(this.apiClient),this.operations=new _N(this.apiClient),this.authTokens=new FN(this.apiClient),this.tunings=new Tb(this.apiClient),this.fileSearchStores=new ab(this.apiClient)}}var Hb={};const Fx=()=>{const t=Hb.API_KEY;if(!t)throw new Error("API Key is missing. Please configure process.env.API_KEY");return new Gb({apiKey:t})},qb=async(t,e=[])=>{try{return(await Fx().chats.create({model:"gemini-3-pro-preview",history:e,config:{systemInstruction:"Sen ASLAN AVM'nin yardmsever, Trke konuan yapay zeka asistansn. Maaza ynetimi, stok takibi ve genel muhasebe konularnda uzmansn. Cevaplarn ksa, net ve profesyonel olmal."}}).sendMessage({message:t})).text||"Bir hata olutu, cevap alnamad."}catch(n){return console.error("Gemini Chat Error:",n),"zgnm, u anda hizmet veremiyorum. Ltfen API anahtarnz kontrol edin."}},zb=async t=>{var e,n;try{const r=Fx(),s="gemini-2.5-flash",a=t.split(",")[1]||t,u=((e=t.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/))==null?void 0:e[1])||"image/png",m=(n=(await r.models.generateContent({model:s,contents:{parts:[{inlineData:{mimeType:u,data:a}},{text:"Analyze this image and identify the barcode number or product serial number. Return ONLY the raw numeric or alphanumeric code. Do not include any explanation, labels, or markdown formatting. If multiple codes are present, return the most prominent barcode. If no code is found, return 'NOT_FOUND'."}]}})).text)==null?void 0:n.trim();return!m||m==="NOT_FOUND"?null:m.replace(/`/g,"").replace(/Barcode:/i,"").trim()}catch(r){return console.error("Gemini Barcode Scan Error:",r),null}},$f=({onScanSuccess:t,onClose:e})=>{const[n,r]=Ce.useState(null),[s,a]=Ce.useState(!0),[u,h]=Ce.useState(!1),[m,p]=Ce.useState(""),[w,_]=Ce.useState(!1),C=Ce.useRef(null),T=Ce.useRef(null),P="html5qr-reader";Ce.useEffect(()=>((async()=>{try{if(await new Promise(B=>setTimeout(B,100)),!document.getElementById(P))return;if(C.current)try{C.current.isScanning&&await C.current.stop(),C.current.clear()}catch(B){console.warn("Cleanup error",B)}const H=new hA(P,{formatsToSupport:[ae.QR_CODE,ae.EAN_13,ae.EAN_8,ae.CODE_128,ae.UPC_A,ae.UPC_E,ae.CODE_39],verbose:!1});C.current=H,M(H)}catch(H){console.error("Scanner initialization error:",H),r("Kamera balatlamad.")}})(),()=>{if(C.current)try{C.current.isScanning&&C.current.stop().catch(console.error),C.current.clear()}catch(H){console.error("Unmount cleanup error",H)}}),[]);const M=async Y=>{const H=Y||C.current;if(H)try{r(null),_(!1),a(!0),await H.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},B=>{D(B)},B=>{})}catch(B){console.error("Camera start error:",B),a(!1);const $=(B==null?void 0:B.toString())||"";$.includes("NotAllowedError")||$.includes("Permission denied")?(_(!0),r("Kamera izni reddedildi.")):$.includes("NotFoundError")?r("Kamera bulunamad."):r("Kamera balatlamad.")}},V=async()=>{if(C.current){try{C.current.isScanning&&await C.current.stop()}catch(Y){console.warn("Stop camera warning:",Y)}a(!1)}},D=Y=>{t(Y),e()},k=Y=>new Promise((H,B)=>{const $=new FileReader;$.readAsDataURL(Y),$.onload=()=>H($.result),$.onerror=q=>B(q)}),R=async Y=>{var B;const H=(B=Y.target.files)==null?void 0:B[0];if(!(!H||!C.current)){h(!0),p("Grsel taranyor..."),r(null);try{await V();try{const re=await C.current.scanFileV2(H,!0);if(re){D(re);return}}catch(re){console.log("Standard scan failed, switching to AI...",re)}p("AI ile analiz ediliyor...");const $=await k(H),q=await zb($);if(q)D(q);else throw new Error("No code found by AI")}catch($){console.error("File scan error:",$),r("Grselde barkod bulunamad. Ltfen daha net bir fotoraf ykleyin."),T.current&&(T.current.value="")}finally{h(!1),p("")}}},F=()=>{r(null),s||M()};return S.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/95 backdrop-blur-md p-4 animate-fade-in",children:S.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl relative flex flex-col max-h-[90vh]",children:[S.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 border-b border-gray-200",children:[S.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[S.jsx(C0,{className:"text-orange-600",size:20}),"Barkod Tara"]}),S.jsx("button",{onClick:e,className:"p-2 bg-gray-200 rounded-full hover:bg-gray-300 text-gray-600 transition-colors",children:S.jsx(Rs,{size:20})})]}),S.jsxs("div",{className:"relative bg-black flex-1 min-h-[320px] flex flex-col justify-center overflow-hidden",children:[(n||w)&&!u?S.jsxs("div",{className:"absolute inset-0 z-20 flex flex-col items-center justify-center bg-gray-900 text-white p-6 text-center",children:[S.jsx("div",{className:"bg-red-500/20 p-4 rounded-full mb-4",children:w?S.jsx(ey,{className:"w-8 h-8 text-red-400"}):S.jsx(Kv,{className:"w-8 h-8 text-red-400"})}),S.jsx("h4",{className:"text-lg font-bold mb-2",children:w?"Kamera zni Gerekli":"Tarama Hatas"}),S.jsx("p",{className:"text-gray-300 mb-6 text-sm leading-relaxed",children:w?"Barkod taramak iin kamera iznine ihtiyacmz var. Ltfen tarayc ayarlarndan izin verin veya fotoraf ykleyin.":n}),S.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[!w&&S.jsxs("button",{onClick:F,className:"flex items-center justify-center gap-2 px-6 py-3 bg-white text-gray-900 rounded-xl font-bold hover:bg-gray-100 transition-colors",children:[S.jsx(lE,{size:18})," Tekrar Dene"]}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{ref:T,type:"file",accept:"image/*",onChange:R,className:"hidden",id:"barcode-upload-fallback"}),S.jsxs("label",{htmlFor:"barcode-upload-fallback",className:"flex items-center justify-center gap-2 px-6 py-3 bg-orange-600 text-white rounded-xl font-bold hover:bg-orange-700 transition-colors cursor-pointer w-full",children:[S.jsx(S0,{size:18}),"Fotoraf Ykle (AI Destekli)"]})]})]})]}):null,u&&S.jsxs("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center bg-black/80 text-white backdrop-blur-sm",children:[S.jsxs("div",{className:"relative",children:[S.jsx(cE,{className:"w-16 h-16 text-orange-500 animate-pulse"}),S.jsx(ty,{className:"w-6 h-6 text-yellow-300 absolute -top-1 -right-1 animate-bounce"})]}),S.jsx("p",{className:"font-bold text-lg mt-4",children:m}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Ltfen bekleyin..."})]}),S.jsx("div",{id:P,className:"w-full h-full"})]}),S.jsxs("div",{className:"p-4 bg-white border-t border-gray-200",children:[S.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[S.jsxs("button",{onClick:()=>{s||M()},disabled:s&&!n,className:`flex items-center justify-center gap-2 py-3 px-4 rounded-xl font-medium transition-colors border ${s&&!n?"bg-orange-50 border-orange-200 text-orange-700":"bg-white border-gray-200 text-gray-700 hover:bg-gray-50"}`,children:[S.jsx(C0,{size:18}),s&&!n?"Kamera Ak":"Kameray A"]}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:"file",accept:"image/*",onChange:R,className:"hidden",id:"barcode-upload-footer"}),S.jsxs("label",{htmlFor:"barcode-upload-footer",className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl font-medium bg-gray-900 text-white hover:bg-gray-800 transition-colors cursor-pointer w-full shadow-md active:scale-95",children:[S.jsx(S0,{size:18}),"Grsel Ykle (AI)"]})]})]}),S.jsx("p",{className:"text-xs text-gray-400 text-center mt-3",children:"Barkodu ereveye ortalayn veya fotoraf ykleyin. AI otomatik devreye girer."})]})]})})},Wb=({product:t,categories:e,onClose:n,onSave:r})=>{const[s,a]=Ce.useState({name:t.name,company:t.company,category:t.category||"",quantity:t.quantity.toString(),purchasePrice:t.purchasePrice.toString(),sellingPrice:t.sellingPrice.toString(),barcode:t.barcode}),[u,h]=Ce.useState(t.image||null),[m,p]=Ce.useState(!1),w=P=>{const{name:M,value:V}=P.target;a(D=>({...D,[M]:V}))},_=P=>{var V;const M=(V=P.target.files)==null?void 0:V[0];if(M){const D=new FileReader;D.onloadend=()=>{h(D.result)},D.readAsDataURL(M)}},C=P=>{a(M=>({...M,barcode:P}))},T=P=>{P.preventDefault();const M={...t,name:s.name,company:s.company,category:s.category||void 0,quantity:parseInt(s.quantity)||0,purchasePrice:parseFloat(s.purchasePrice)||0,sellingPrice:parseFloat(s.sellingPrice)||0,barcode:s.barcode,image:u||void 0};r(M),n()};return S.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-4 bg-gray-900/60 backdrop-blur-sm animate-fade-in",onClick:n,children:S.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",onClick:P=>P.stopPropagation(),children:[m&&S.jsx($f,{onScanSuccess:C,onClose:()=>p(!1)}),S.jsxs("div",{className:"flex justify-between items-center p-4 bg-orange-600 text-white",children:[S.jsx("h2",{className:"text-lg font-bold flex items-center gap-2",children:"rn Dzenle"}),S.jsx("button",{onClick:n,className:"p-1 hover:bg-orange-700 rounded-full transition-colors",children:S.jsx(Rs,{size:24})})]}),S.jsxs("form",{onSubmit:T,className:"p-6 overflow-y-auto space-y-4",children:[S.jsx("div",{className:"flex justify-center mb-4",children:S.jsxs("label",{className:"relative cursor-pointer group",children:[S.jsx("div",{className:"w-24 h-24 rounded-xl border-2 border-dashed border-gray-300 flex items-center justify-center overflow-hidden bg-gray-50 hover:border-orange-400 transition-colors",children:u?S.jsx("img",{src:u,alt:"Preview",className:"w-full h-full object-contain"}):S.jsx(sd,{className:"text-gray-400 group-hover:text-orange-500"})}),S.jsx("div",{className:"absolute -bottom-2 -right-2 bg-orange-600 text-white p-1.5 rounded-full shadow-md",children:S.jsx(sd,{size:14})}),S.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:_})]})}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"rn Ad"}),S.jsx("input",{type:"text",name:"name",value:s.name,onChange:w,className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Kategori"}),S.jsxs("div",{className:"relative",children:[S.jsxs("select",{name:"category",value:s.category,onChange:w,className:"w-full border border-gray-300 rounded-lg p-2 appearance-none focus:ring-2 focus:ring-orange-500 outline-none",children:[S.jsx("option",{value:"",children:"Seiniz..."}),e.map(P=>S.jsx("option",{value:P.name,children:P.name},P.id))]}),S.jsx(Qm,{size:16,className:"absolute right-3 top-3 text-gray-400 pointer-events-none"})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Firma"}),S.jsx("input",{type:"text",name:"company",value:s.company,onChange:w,className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-orange-500 outline-none"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Stok Miktar"}),S.jsx("input",{type:"number",name:"quantity",value:s.quantity,onChange:w,className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-orange-500 outline-none"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Al Fiyat ()"}),S.jsx("input",{type:"number",name:"purchasePrice",step:"0.01",value:s.purchasePrice,onChange:w,className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-orange-500 outline-none"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Sat Fiyat ()"}),S.jsx("input",{type:"number",name:"sellingPrice",step:"0.01",value:s.sellingPrice,onChange:w,className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-orange-500 outline-none font-bold text-gray-900"})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Barkod"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsxs("div",{className:"relative flex-grow",children:[S.jsx(Tf,{className:"absolute left-3 top-2.5 text-gray-400",size:18}),S.jsx("input",{type:"text",name:"barcode",value:s.barcode,onChange:w,className:"w-full border border-gray-300 rounded-lg py-2 pl-10 pr-2 font-mono tracking-widest focus:ring-2 focus:ring-orange-500 outline-none"})]}),S.jsx("button",{type:"button",onClick:()=>p(!0),className:"bg-gray-800 text-white p-2 rounded-lg hover:bg-gray-900",children:S.jsx(bf,{size:20})})]})]}),S.jsxs("div",{className:"pt-4 flex gap-3",children:[S.jsx("button",{type:"button",onClick:n,className:"flex-1 py-3 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors",children:"ptal"}),S.jsxs("button",{type:"submit",className:"flex-1 py-3 bg-orange-600 text-white rounded-xl font-bold shadow-lg shadow-orange-200 hover:bg-orange-700 transition-colors flex justify-center items-center gap-2",children:[S.jsx(nd,{size:18})," Kaydet"]})]})]})]})})},Lp=({initialQuantity:t,onSave:e})=>{const[n,r]=Ce.useState(t.toString()),[s,a]=Ce.useState(!1),[u,h]=Ce.useState(!1);Dd.useEffect(()=>{r(t.toString()),a(!1)},[t]);const m=w=>{r(w.target.value),a(parseInt(w.target.value)!==t),h(!1)},p=w=>{w.stopPropagation();const _=parseInt(n);!isNaN(_)&&_>=0&&(e(_),a(!1),h(!0),setTimeout(()=>h(!1),2e3))};return S.jsxs("div",{className:"flex items-center gap-2",onClick:w=>w.stopPropagation(),children:[S.jsx("button",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-lg text-gray-600 hover:bg-gray-200 active:scale-95",onClick:w=>{w.stopPropagation();const _=Math.max(0,parseInt(n||"0")-1);r(_.toString()),a(_!==t)},children:"-"}),S.jsx("input",{type:"number",min:"0",value:n,onChange:m,className:`w-14 text-center py-1.5 text-base font-semibold rounded-lg focus:outline-none focus:ring-2 transition-all bg-white text-gray-900 ${s?"ring-2 ring-orange-400 text-orange-700":"bg-gray-50 border border-gray-200"}`}),S.jsx("button",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-lg text-gray-600 hover:bg-gray-200 active:scale-95",onClick:w=>{w.stopPropagation();const _=parseInt(n||"0")+1;r(_.toString()),a(_!==t)},children:"+"}),s&&S.jsx("button",{onClick:p,className:"ml-1 p-2 rounded-lg bg-orange-600 text-white shadow-md hover:bg-orange-700 active:scale-95 transition-all",children:S.jsx(uE,{size:16})}),u&&S.jsx("span",{className:"ml-1 text-green-600 animate-fade-in",children:S.jsx(Zm,{size:20})})]})},Kb=({product:t,onClose:e,onEdit:n,onDelete:r})=>{const[s,a]=Ce.useState([]),[u,h]=Ce.useState(!1);if(Dd.useEffect(()=>{(async()=>{h(!0);const{data:w,error:_}=await ln.from("product_history").select("*").eq("product_id",t.id).order("created_at",{ascending:!1});w&&a(w),h(!1)})()},[t.id]),!t)return null;const m=p=>{if(!p)return"Bilinmiyor";try{return new Date(p).toLocaleDateString("tr-TR",{day:"2-digit",month:"long",year:"numeric"})}catch{return"Geersiz Tarih"}};return S.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-gray-900/60 backdrop-blur-sm animate-fade-in",onClick:e,children:S.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-4xl overflow-hidden flex flex-col max-h-[90vh] animate-scale-in",onClick:p=>p.stopPropagation(),children:[S.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-100 bg-gray-50/80 backdrop-blur-md sticky top-0 z-10",children:[S.jsxs("div",{children:[S.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 line-clamp-1",children:t.name}),S.jsx("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-2",children:S.jsxs("span",{className:"font-mono bg-gray-200 px-2 py-0.5 rounded text-gray-700",children:["ID: ",t.id]})})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[n&&S.jsx("button",{onClick:n,className:"p-2 bg-blue-50 text-blue-600 rounded-full hover:bg-blue-100 transition-colors",title:"Dzenle",children:S.jsx(rd,{size:20})}),r&&S.jsx("button",{onClick:()=>{window.confirm("Bu rn silmek istediinize emin misiniz?")&&(r(),e())},className:"p-2 bg-red-50 text-red-600 rounded-full hover:bg-red-100 transition-colors",title:"Sil",children:S.jsx(id,{size:20})}),S.jsx("button",{onClick:e,className:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors text-gray-600",children:S.jsx(Rs,{size:24})})]})]}),S.jsx("div",{className:"overflow-y-auto p-5 lg:p-8",children:S.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[S.jsxs("div",{className:"w-full lg:w-1/3 space-y-6",children:[S.jsxs("div",{className:"aspect-square bg-white rounded-2xl border border-gray-100 shadow-sm flex items-center justify-center p-6 relative overflow-hidden group",children:[t.image?S.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-contain transition-transform duration-300 group-hover:scale-105"}):S.jsx(Ao,{className:"w-32 h-32 text-gray-300"}),S.jsx("div",{className:"absolute top-4 right-4",children:S.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full shadow-sm backdrop-blur-md ${t.quantity<10?"bg-red-100 text-red-700 border border-red-200":"bg-green-100 text-green-700 border border-green-200"}`,children:t.quantity<10?"Kritik Stok":"Stokta Var"})})]}),S.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-white rounded-2xl p-5 border border-orange-100 shadow-sm",children:[S.jsxs("h4",{className:"text-sm font-semibold text-orange-800 mb-4 flex items-center gap-2",children:[S.jsx(fE,{size:16})," Finansal zet"]}),S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{className:"flex justify-between items-center text-sm",children:[S.jsx("span",{className:"text-gray-600",children:"Al Birim:"}),S.jsxs("span",{className:"font-medium text-gray-900",children:[t.purchasePrice.toLocaleString("tr-TR",{minimumFractionDigits:2})," "]})]}),S.jsxs("div",{className:"flex justify-between items-center text-sm",children:[S.jsx("span",{className:"text-gray-600",children:"Sat Birim:"}),S.jsxs("span",{className:"font-medium text-gray-900",children:[t.sellingPrice.toLocaleString("tr-TR",{minimumFractionDigits:2})," "]})]}),S.jsx("div",{className:"h-px bg-orange-200/50 my-2"}),S.jsxs("div",{className:"flex justify-between items-center text-sm",children:[S.jsx("span",{className:"text-orange-700 font-medium",children:"Kr Marj:"}),S.jsxs("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-0.5 rounded",children:["% ",((t.sellingPrice-t.purchasePrice)/t.purchasePrice*100).toFixed(1)]})]}),S.jsxs("div",{className:"flex justify-between items-center text-sm pt-1",children:[S.jsx("span",{className:"text-orange-700 font-medium",children:"Toplam Stok Deeri:"}),S.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:[(t.quantity*t.sellingPrice).toLocaleString("tr-TR",{minimumFractionDigits:2})," "]})]})]})]})]}),S.jsxs("div",{className:"w-full lg:w-2/3 space-y-8",children:[S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-8",children:[S.jsxs("div",{className:"space-y-1",children:[S.jsxs("label",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider flex items-center gap-1.5",children:[S.jsx(ny,{size:14})," Kategori"]}),S.jsx("p",{className:"text-lg font-medium text-gray-900 border-b border-gray-100 pb-2",children:t.category||"Belirtilmemi"})]}),S.jsxs("div",{className:"space-y-1",children:[S.jsxs("label",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider flex items-center gap-1.5",children:[S.jsx(jv,{size:14})," Tedariki Firma"]}),S.jsx("p",{className:"text-lg font-medium text-gray-900 border-b border-gray-100 pb-2",children:t.company})]}),S.jsxs("div",{className:"space-y-1",children:[S.jsxs("label",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider flex items-center gap-1.5",children:[S.jsx(Tf,{size:14})," Barkod"]}),S.jsx("p",{className:"text-lg font-medium text-gray-900 font-mono tracking-wide border-b border-gray-100 pb-2",children:t.barcode})]}),S.jsxs("div",{className:"space-y-1",children:[S.jsxs("label",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider flex items-center gap-1.5",children:[S.jsx(A0,{size:14})," Ekleme Tarihi"]}),S.jsx("p",{className:"text-lg font-medium text-gray-900 border-b border-gray-100 pb-2",children:m(t.created_at)})]})]}),S.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[S.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-100",children:S.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[S.jsx(eE,{size:18,className:"text-orange-600"}),"rn Stok Gemii"]})}),S.jsx("div",{className:"p-6 max-h-[300px] overflow-y-auto",children:u?S.jsx("div",{className:"flex justify-center py-8",children:S.jsx(If,{className:"animate-spin text-orange-500"})}):s.length>0?S.jsxs("div",{className:"space-y-0 relative",children:[S.jsx("div",{className:"absolute left-[19px] top-2 bottom-4 w-px bg-gray-200"}),s.map(p=>{const w=p.new_quantity>p.old_quantity,_=p.change_type==="INITIAL",C=p.new_quantity-p.old_quantity;return S.jsxs("div",{className:"relative flex items-start gap-4 pb-6 last:pb-0 group",children:[S.jsx("div",{className:`relative z-10 w-10 h-10 rounded-full border-2 flex items-center justify-center bg-white flex-shrink-0 shadow-sm ${_?"border-blue-100 text-blue-600":w?"border-green-100 text-green-600":"border-red-100 text-red-600"}`,children:_?S.jsx(Ao,{size:18}):w?S.jsx(Yv,{size:18}):S.jsx($v,{size:18})}),S.jsxs("div",{className:"flex-1 pt-1",children:[S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsxs("div",{children:[S.jsx("p",{className:"font-medium text-gray-900 text-sm sm:text-base",children:_?"rn Oluturuldu":w?"Stok Eklendi":"Stok Dt"}),S.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-0.5",children:[S.jsx(A0,{size:12}),new Date(p.created_at).toLocaleDateString("tr-TR"),"  ",new Date(p.created_at).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})]})]}),S.jsx("div",{className:`text-sm font-bold ${_?"text-blue-600":w?"text-green-600":"text-red-600"}`,children:_?p.new_quantity:C>0?`+${C}`:C})]}),S.jsxs("div",{className:"mt-2 text-xs bg-gray-50 p-2 rounded-lg border border-gray-100 inline-flex items-center gap-2",children:[S.jsx("span",{className:"text-gray-500",children:"nce:"}),S.jsx("span",{className:"font-mono font-medium",children:p.old_quantity}),S.jsx("span",{className:"text-gray-300",children:""}),S.jsx("span",{className:"text-gray-900 font-bold",children:"Sonra:"}),S.jsx("span",{className:"font-mono font-bold text-gray-900",children:p.new_quantity})]})]})]},p.id)})]}):S.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"Henz kaytl bir stok gemii bulunmamaktadr."})})]})]})]})})]})})},Bp=({products:t,categories:e=[],onUpdateQuantity:n,onAddSampleProducts:r,selectedCategory:s,onSelectCategory:a,onEditProduct:u,onDeleteProduct:h})=>{const[m,p]=Ce.useState(""),[w,_]=Ce.useState("table"),[C,T]=Ce.useState(null),[P,M]=Ce.useState(null),[V,D]=Ce.useState(!1),k=Ce.useMemo(()=>{if(e.length>0)return e.map($=>$.name);const B=new Set(t.map($=>$.category).filter(Boolean));return Array.from(B)},[t,e]),R=Ce.useMemo(()=>{const B=m.toLowerCase();return t.filter($=>{const q=$.name.toLowerCase().includes(B)||$.company.toLowerCase().includes(B)||$.barcode.includes(m),re=s?$.category===s:!0;return q&&re})},[t,m,s]);t.reduce((B,$)=>B+$.quantity,0);const F=B=>{p(B)},Y=(B,$)=>{B.stopPropagation(),M($)},H=(B,$)=>{B.stopPropagation(),h&&window.confirm("Bu rn silmek istediinize emin misiniz?")&&h($)};return S.jsxs("div",{className:"space-y-6 animate-fade-in relative pb-20",children:[C&&S.jsx(Kb,{product:C,onClose:()=>T(null),onEdit:u?()=>{M(C),T(null)}:void 0,onDelete:h?()=>{h(C.id)}:void 0}),P&&u&&S.jsx(Wb,{product:P,categories:e,onClose:()=>M(null),onSave:u}),V&&S.jsx($f,{onScanSuccess:F,onClose:()=>D(!1)}),S.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[S.jsxs("div",{className:"col-span-2 md:col-span-2",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s?`${s} Stoklar`:"Depo Envanteri"}),S.jsx("p",{className:"text-sm text-gray-500",children:"Stok durumunu canl takip edin."})]}),S.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col justify-center",children:[S.jsx("p",{className:"text-xs text-gray-500 uppercase font-semibold tracking-wider",children:"rn eidi"}),S.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R.length})]}),S.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col justify-center",children:[S.jsx("p",{className:"text-xs text-gray-500 uppercase font-semibold tracking-wider",children:"Toplam Stok"}),S.jsx("p",{className:"text-2xl font-bold text-orange-600",children:R.reduce((B,$)=>B+$.quantity,0)})]})]}),S.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 sticky top-20 z-30",children:S.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[S.jsxs("div",{className:"flex gap-2 flex-1",children:[S.jsxs("div",{className:"relative flex-1",children:[S.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:S.jsx(T0,{className:"h-5 w-5 text-gray-400"})}),S.jsx("input",{type:"text",className:"block w-full pl-10 pr-10 py-3 border border-gray-200 rounded-xl leading-5 bg-gray-50 placeholder-gray-400 focus:outline-none focus:bg-white focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",placeholder:"Ara...",value:m,onChange:B=>p(B.target.value)}),m&&S.jsx("button",{onClick:()=>p(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:S.jsx(Rs,{size:16})})]}),S.jsx("button",{onClick:()=>D(!0),className:"bg-gray-900 text-white p-3 rounded-xl hover:bg-gray-800 transition-colors shadow-sm active:scale-95",title:"Barkod ile Ara",children:S.jsx(bf,{size:24})})]}),S.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 no-scrollbar",children:[S.jsxs("div",{className:"relative min-w-[150px]",children:[S.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:S.jsx(Zv,{className:"h-4 w-4 text-gray-400"})}),S.jsxs("select",{value:s,onChange:B=>a(B.target.value),className:"block w-full pl-9 pr-8 py-3 text-sm border-gray-200 focus:outline-none focus:ring-2 focus:ring-orange-500 rounded-xl bg-gray-50 text-gray-700 appearance-none",children:[S.jsx("option",{value:"",children:"Tm Kategoriler"}),k.map(B=>S.jsx("option",{value:B,children:B},B))]})]}),S.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl border border-gray-200",children:[S.jsx("button",{onClick:()=>_("table"),className:`p-2 rounded-lg transition-all ${w==="table"?"bg-white text-orange-600 shadow-sm":"text-gray-500 hover:text-gray-900"}`,children:S.jsx(iE,{size:20})}),S.jsx("button",{onClick:()=>_("card"),className:`p-2 rounded-lg transition-all ${w==="card"?"bg-white text-orange-600 shadow-sm":"text-gray-500 hover:text-gray-900"}`,children:S.jsx(rE,{size:20})})]})]})]})}),t.length===0&&!m&&!s?S.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4 text-center bg-white rounded-3xl shadow-sm border border-gray-100 border-dashed",children:[S.jsx("div",{className:"bg-orange-50 p-6 rounded-full mb-6",children:S.jsx(Ao,{className:"h-16 w-16 text-orange-400"})}),S.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Envanteriniz Bo"}),S.jsx("p",{className:"text-gray-500 max-w-md mb-8",children:"Deponuzda hi rn yok. Hzl balang iin rnek rnleri ekleyebilir veya yeni rn girii yapabilirsiniz."}),S.jsxs("button",{onClick:r,className:"flex items-center gap-3 px-8 py-4 bg-orange-600 text-white rounded-xl hover:bg-orange-700 transition-all font-bold shadow-lg shadow-orange-200 hover:shadow-orange-300 active:scale-95",children:[S.jsx(Nf,{size:24}),"rnek 5 rn Ekle"]})]}):R.length>0?w==="table"?S.jsx("div",{className:"bg-white shadow-sm rounded-2xl border border-gray-200 overflow-hidden",children:S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"rn"}),S.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Kategori"}),S.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Barkod"}),S.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Miktar"}),S.jsx("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Sat"}),S.jsx("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-bold text-gray-500 uppercase tracking-wider",children:"lem"})]})}),S.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:R.map(B=>S.jsxs("tr",{onClick:()=>T(B),className:"hover:bg-orange-50/50 transition-colors cursor-pointer group",children:[S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"flex-shrink-0 h-12 w-12 bg-white rounded-lg flex items-center justify-center overflow-hidden border border-gray-200 group-hover:border-orange-300 transition-colors p-1",children:B.image?S.jsx("img",{src:B.image,alt:B.name,className:"h-full w-full object-contain"}):S.jsx(Ao,{className:"text-gray-300 group-hover:text-orange-400",size:24})}),S.jsxs("div",{className:"ml-4",children:[S.jsx("div",{className:"text-sm font-bold text-gray-900 group-hover:text-orange-700",children:B.name}),S.jsx("div",{className:"text-xs text-gray-500",children:B.company})]})]})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200",children:B.category||"-"})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsx("span",{className:"font-mono text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded",children:B.barcode})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsx(Lp,{initialQuantity:B.quantity,onSave:$=>n(B.id,$)})}),S.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-bold text-right",children:[B.sellingPrice.toLocaleString("tr-TR",{minimumFractionDigits:2})," "]}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:S.jsxs("div",{className:"flex justify-center gap-2",children:[u&&S.jsx("button",{onClick:$=>Y($,B),className:"p-1.5 text-blue-600 bg-blue-50 rounded hover:bg-blue-100",title:"Dzenle",children:S.jsx(rd,{size:16})}),h&&S.jsx("button",{onClick:$=>H($,B.id),className:"p-1.5 text-red-600 bg-red-50 rounded hover:bg-red-100",title:"Sil",children:S.jsx(id,{size:16})})]})})]},B.id))})]})})}):S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",children:R.map(B=>S.jsxs("div",{onClick:()=>T(B),className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-xl hover:border-orange-300 transition-all cursor-pointer flex flex-col group relative",children:[S.jsxs("div",{className:"h-48 w-full bg-white flex items-center justify-center relative border-b border-gray-100 p-4 group-hover:bg-orange-50/10 transition-colors",children:[B.image?S.jsx("img",{src:B.image,alt:B.name,className:"h-full w-full object-contain transition-transform duration-500 group-hover:scale-110"}):S.jsx(Ao,{className:"text-gray-200 w-20 h-20 group-hover:text-orange-300 transition-colors"}),B.category&&S.jsx("div",{className:"absolute top-3 left-3",children:S.jsx("span",{className:"bg-white text-gray-600 text-[10px] font-bold px-2 py-1 rounded-full shadow-sm border border-gray-100",children:B.category})}),S.jsxs("div",{className:"absolute top-3 right-3 flex gap-1",children:[u&&S.jsx("button",{onClick:$=>Y($,B),className:"p-1.5 bg-white text-blue-600 rounded-full shadow-sm border border-gray-100 hover:bg-blue-50",children:S.jsx(rd,{size:14})}),h&&S.jsx("button",{onClick:$=>H($,B.id),className:"p-1.5 bg-white text-red-600 rounded-full shadow-sm border border-gray-100 hover:bg-red-50",children:S.jsx(id,{size:14})})]}),S.jsx("div",{className:"absolute bottom-3 right-3",children:S.jsxs("span",{className:`px-2 py-1 text-[10px] font-bold rounded-md shadow-sm border ${B.quantity<10?"bg-red-50 text-red-600 border-red-100":"bg-green-50 text-green-600 border-green-100"}`,children:[B.quantity," Adet"]})})]}),S.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[S.jsxs("div",{className:"mb-4",children:[S.jsx("h3",{className:"font-bold text-gray-900 line-clamp-2 leading-tight group-hover:text-orange-600 transition-colors",children:B.name}),S.jsx("p",{className:"text-xs text-gray-400 mt-1",children:B.company})]}),S.jsxs("div",{className:"mt-auto space-y-3",children:[S.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded-xl border border-gray-100",children:[S.jsx("span",{className:"text-xs font-semibold text-gray-500 ml-1",children:"Stok:"}),S.jsx(Lp,{initialQuantity:B.quantity,onSave:$=>n(B.id,$)})]}),S.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[S.jsxs("span",{className:"text-xs text-gray-400 font-mono",children:[B.barcode.slice(-4),"..."]}),S.jsxs("p",{className:"text-xl font-extrabold text-gray-900",children:[B.sellingPrice.toLocaleString("tr-TR",{minimumFractionDigits:2})," ",S.jsx("span",{className:"text-xs font-normal text-gray-500",children:""})]})]})]})]})]},B.id))}):S.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[S.jsx("div",{className:"bg-gray-100 p-6 rounded-full mb-4",children:S.jsx(T0,{className:"h-10 w-10 text-gray-400"})}),S.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Sonu Bulunamad"}),S.jsx("p",{className:"mt-1 text-gray-500 max-w-xs mx-auto",children:m?`"${m}" ile eleen rn yok.`:s?`"${s}" kategorisinde rn bulunmuyor.`:"rn bulunmuyor."}),(m||s)&&S.jsx("button",{onClick:()=>{p(""),a("")},className:"mt-4 text-orange-600 font-medium hover:underline",children:"Filtreleri Temizle"})]})]})},$b=({onAddProduct:t,categories:e})=>{const[n,r]=Ce.useState({name:"",company:"",category:"",quantity:"",purchasePrice:"",sellingPrice:"",barcode:""}),[s,a]=Ce.useState(null),[u,h]=Ce.useState(""),[m,p]=Ce.useState(!1),w=P=>{const{name:M,value:V}=P.target;r(D=>({...D,[M]:V}))},_=P=>{var V;const M=(V=P.target.files)==null?void 0:V[0];if(M){const D=new FileReader;D.onloadend=()=>{a(D.result)},D.readAsDataURL(M)}},C=P=>{r(M=>({...M,barcode:P}))},T=P=>{if(P.preventDefault(),!n.name||!n.company||!n.quantity||!n.purchasePrice||!n.sellingPrice||!n.barcode){alert("Ltfen tm zorunlu alanlar ve barkodu doldurun.");return}const M={id:Date.now().toString(),name:n.name,company:n.company,category:n.category||void 0,quantity:parseInt(n.quantity),purchasePrice:parseFloat(n.purchasePrice),sellingPrice:parseFloat(n.sellingPrice),barcode:n.barcode,image:s||void 0,created_at:new Date().toISOString()};t(M),r({name:"",company:"",category:"",quantity:"",purchasePrice:"",sellingPrice:"",barcode:""}),a(null),h("rn baaryla eklendi!"),setTimeout(()=>h(""),3e3)};return S.jsxs("div",{className:"max-w-3xl mx-auto pb-20",children:[m&&S.jsx($f,{onScanSuccess:C,onClose:()=>p(!1)}),S.jsxs("div",{className:"bg-white shadow-xl rounded-2xl overflow-hidden border border-gray-100",children:[S.jsxs("div",{className:"px-4 py-4 md:px-6 md:py-5 bg-gradient-to-r from-orange-600 to-orange-500 border-b border-orange-400",children:[S.jsxs("h2",{className:"text-lg md:text-xl font-bold text-white flex items-center gap-2",children:[S.jsx(Nf,{className:"text-orange-100"})," Yeni rn Girii"]}),S.jsx("p",{className:"text-xs md:text-sm text-orange-100 mt-1 opacity-90",children:"Stok sistemine yeni rn eklemek iin formu doldurun."})]}),S.jsxs("form",{onSubmit:T,className:"p-4 md:p-6 space-y-4 md:space-y-6",children:[u&&S.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-800 rounded-xl p-4 flex items-center gap-3 animate-fade-in shadow-sm",children:[S.jsx("div",{className:"bg-green-100 p-2 rounded-full",children:S.jsx(nd,{size:20,className:"text-green-600"})}),S.jsx("span",{className:"font-medium text-sm md:text-base",children:u})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[S.jsxs("div",{className:"col-span-1 md:col-span-2",children:[S.jsx("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-700 mb-1.5",children:"rn Ad"}),S.jsx("input",{type:"text",name:"name",id:"name",value:n.name,onChange:w,className:"block w-full bg-white text-gray-900 rounded-xl border-gray-200 shadow-sm focus:border-orange-500 focus:ring-orange-500 p-3 border placeholder-gray-400 transition-all hover:border-gray-300",placeholder:"rn: St 1L",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"category",className:"block text-sm font-semibold text-gray-700 mb-1.5",children:"Kategori"}),S.jsxs("div",{className:"relative",children:[S.jsxs("select",{name:"category",id:"category",value:n.category,onChange:w,className:"block w-full bg-white text-gray-900 rounded-xl border-gray-200 shadow-sm focus:border-orange-500 focus:ring-orange-500 p-3 border appearance-none cursor-pointer hover:border-gray-300",children:[S.jsx("option",{value:"",children:"Kategori Sein..."}),e.map(P=>S.jsx("option",{value:P.name,children:P.name},P.id))]}),S.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-500",children:S.jsx(Qm,{size:20})})]}),e.length===0&&S.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"* Henz kategori yok. Menden ekleyebilirsiniz."})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"company",className:"block text-sm font-semibold text-gray-700 mb-1.5",children:"irket Ad"}),S.jsx("input",{type:"text",name:"company",id:"company",value:n.company,onChange:w,className:"block w-full bg-white text-gray-900 rounded-xl border-gray-200 shadow-sm focus:border-orange-500 focus:ring-orange-500 p-3 border placeholder-gray-400 transition-all hover:border-gray-300",placeholder:"rn: Sta",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"quantity",className:"block text-sm font-semibold text-gray-700 mb-1.5",children:"Miktar"}),S.jsx("input",{type:"number",name:"quantity",id:"quantity",value:n.quantity,onChange:w,className:"block w-full bg-white text-gray-900 rounded-xl border-gray-200 shadow-sm focus:border-orange-500 focus:ring-orange-500 p-3 border placeholder-gray-400 transition-all hover:border-gray-300",placeholder:"0",min:"0",required:!0})]}),S.jsxs("div",{className:"col-span-1 md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-6 bg-gray-50 p-4 rounded-xl border border-gray-100",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"purchasePrice",className:"block text-sm font-semibold text-gray-700 mb-1.5",children:"Al Fiyat (TL)"}),S.jsx("div",{className:"relative",children:S.jsx("input",{type:"number",name:"purchasePrice",id:"purchasePrice",value:n.purchasePrice,onChange:w,className:"block w-full bg-white text-gray-900 rounded-xl border-gray-200 shadow-sm focus:border-orange-500 focus:ring-orange-500 p-3 border placeholder-gray-400 transition-all hover:border-gray-300",placeholder:"0.00",step:"0.01",min:"0",required:!0})})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"sellingPrice",className:"block text-sm font-semibold text-gray-700 mb-1.5",children:"Sat Fiyat (TL)"}),S.jsx("div",{className:"relative",children:S.jsx("input",{type:"number",name:"sellingPrice",id:"sellingPrice",value:n.sellingPrice,onChange:w,className:"block w-full bg-white text-gray-900 rounded-xl border-gray-200 shadow-sm focus:border-orange-500 focus:ring-orange-500 p-3 border placeholder-gray-400 transition-all hover:border-gray-300 font-medium",placeholder:"0.00",step:"0.01",min:"0",required:!0})})]})]})]}),S.jsxs("div",{className:"border-t border-gray-100 pt-4 md:pt-6",children:[S.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Barkod"}),S.jsxs("div",{className:"flex flex-wrap xs:flex-nowrap gap-2",children:[S.jsxs("div",{className:"relative flex-grow min-w-[150px]",children:[S.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:S.jsx(Tf,{className:"h-5 w-5 text-gray-400"})}),S.jsx("input",{type:"text",name:"barcode",id:"barcode",value:n.barcode,onChange:w,className:"block w-full bg-white text-gray-900 pl-10 sm:text-lg border-gray-200 rounded-xl py-3 font-mono tracking-widest placeholder-gray-400 shadow-sm focus:border-orange-500 focus:ring-orange-500 border",placeholder:"Barkod",required:!0})]}),S.jsxs("button",{type:"button",onClick:()=>p(!0),className:"bg-gray-900 text-white px-4 py-2 rounded-xl hover:bg-gray-800 transition-colors flex items-center justify-center gap-2 shadow-md active:scale-95 transform duration-150 flex-shrink-0",children:[S.jsx(bf,{size:20}),S.jsx("span",{className:"inline",children:"Tara"})]})]})]}),S.jsxs("div",{className:"border-t border-gray-100 pt-4 md:pt-6",children:[S.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"rn Grseli"}),S.jsx("div",{className:"flex items-center justify-center w-full",children:S.jsxs("label",{htmlFor:"dropzone-file",className:"flex flex-col items-center justify-center w-full h-32 md:h-40 border-2 border-gray-300 border-dashed rounded-xl cursor-pointer bg-gray-50 hover:bg-orange-50 hover:border-orange-300 transition-all group",children:[s?S.jsx("img",{src:s,alt:"Preview",className:"h-full object-contain p-2"}):S.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[S.jsx("div",{className:"bg-white p-2 md:p-3 rounded-full shadow-sm mb-2 md:mb-3 group-hover:scale-110 transition-transform",children:S.jsx(sd,{className:"w-5 h-5 md:w-6 md:h-6 text-gray-400 group-hover:text-orange-500"})}),S.jsx("p",{className:"mb-1 text-sm text-gray-600 font-medium",children:"Fotoraf Ykle"}),S.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG"})]}),S.jsx("input",{id:"dropzone-file",type:"file",className:"hidden",accept:"image/*",onChange:_})]})}),s&&S.jsx("button",{type:"button",onClick:()=>a(null),className:"mt-2 text-sm text-red-600 hover:text-red-800 font-medium flex items-center justify-center w-full",children:"Grseli Kaldr"})]}),S.jsx("div",{className:"pt-2 md:pt-4",children:S.jsxs("button",{type:"submit",className:"w-full flex justify-center items-center gap-2 py-3 md:py-4 px-4 border border-transparent rounded-xl shadow-lg text-base font-bold text-white bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-700 hover:to-orange-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-all active:scale-[0.98]",children:[S.jsx(nd,{size:20}),"rn Kaydet"]})})]})]})]})},Yb=()=>{const[t,e]=Ce.useState(""),[n,r]=Ce.useState([{id:"1",role:"model",text:"Merhaba! Ben ASLAN AVM asistanym. Stok durumu, muhasebe ilemleri veya maaza ynetimi hakknda size nasl yardmc olabilirim?",timestamp:new Date}]),[s,a]=Ce.useState(!1),u=Ce.useRef(null),h=()=>{var w;(w=u.current)==null||w.scrollIntoView({behavior:"smooth"})};Ce.useEffect(()=>{h()},[n]);const m=async()=>{if(!t.trim()||s)return;const w={id:Date.now().toString(),role:"user",text:t,timestamp:new Date};r(_=>[..._,w]),e(""),a(!0);try{const _=n.map(P=>({role:P.role,parts:[{text:P.text}]})),C=await qb(w.text,_),T={id:(Date.now()+1).toString(),role:"model",text:C,timestamp:new Date};r(P=>[...P,T])}catch(_){console.error(_);const C={id:(Date.now()+1).toString(),role:"model",text:"Bir hata olutu, ltfen tekrar deneyiniz.",timestamp:new Date};r(T=>[...T,C])}finally{a(!1)}},p=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),m())};return S.jsxs("div",{className:"flex flex-col h-[calc(100vh-8rem)] bg-white rounded-lg shadow-lg overflow-hidden border border-gray-200",children:[S.jsxs("div",{className:"bg-orange-600 p-4 flex items-center justify-between text-white",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("div",{className:"bg-white rounded-full p-1",children:S.jsx(Zu,{size:20,className:"text-orange-600"})}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-bold",children:"ASLAN AI Asistan"}),S.jsx("p",{className:"text-xs text-orange-100",children:"Gemini 3 Pro Preview tarafndan desteklenmektedir"})]})]}),S.jsx(ty,{size:20,className:"text-orange-200 animate-pulse"})]}),S.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[n.map(w=>S.jsx("div",{className:`flex w-full ${w.role==="user"?"justify-end":"justify-start"}`,children:S.jsxs("div",{className:`flex max-w-[80%] gap-2 ${w.role==="user"?"flex-row-reverse":"flex-row"}`,children:[S.jsx("div",{className:`flex-shrink-0 h-8 w-8 rounded-full flex items-center justify-center ${w.role==="user"?"bg-orange-600":"bg-gray-200"}`,children:w.role==="user"?S.jsx(hE,{size:16,className:"text-white"}):S.jsx(Zu,{size:16,className:"text-gray-600"})}),S.jsxs("div",{className:`p-3 rounded-lg text-sm shadow-sm ${w.role==="user"?"bg-orange-600 text-white rounded-tr-none":"bg-white text-gray-800 border border-gray-200 rounded-tl-none"}`,children:[w.text,S.jsx("div",{className:`text-[10px] mt-1 text-right ${w.role==="user"?"text-orange-100":"text-gray-400"}`,children:w.timestamp.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})})]})]})},w.id)),s&&S.jsx("div",{className:"flex justify-start w-full",children:S.jsxs("div",{className:"flex max-w-[80%] gap-2",children:[S.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:S.jsx(Zu,{size:16,className:"text-gray-600"})}),S.jsx("div",{className:"bg-white p-3 rounded-lg rounded-tl-none border border-gray-200 shadow-sm",children:S.jsx(If,{className:"animate-spin text-orange-500",size:20})})]})}),S.jsx("div",{ref:u})]}),S.jsx("div",{className:"p-4 bg-white border-t border-gray-200",children:S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("input",{type:"text",value:t,onChange:w=>e(w.target.value),onKeyDown:p,placeholder:"Bir soru sorun...",disabled:s,className:"flex-1 p-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"}),S.jsx("button",{onClick:m,disabled:s||!t.trim(),className:"bg-orange-600 hover:bg-orange-700 text-white p-3 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:S.jsx(dE,{size:20})})]})})]})},jb=()=>{const[t,e]=Ce.useState(or.INVENTORY),[n,r]=Ce.useState([]),[s,a]=Ce.useState([]),[u,h]=Ce.useState(""),[m,p]=Ce.useState(!1),[w,_]=Ce.useState(!0),[C,T]=Ce.useState(null),[P,M]=Ce.useState(!1),[V,D]=Ce.useState(!1);Ce.useEffect(()=>{k()},[]);const k=async()=>{try{_(!0),T(null),M(!1);const{data:le,error:ue}=await ln.from("products").select("*").order("id",{ascending:!1});if(ue)throw ue;const z=(le||[]).map(Q=>({...Q,id:Q.id.toString()}));r(z);const{data:ve,error:oe}=await ln.from("categories").select("*").order("name",{ascending:!0});if(oe){if(oe.code==="42P01")throw oe;console.error("Error fetching categories:",oe.message||oe)}ve&&a(ve.map(Q=>({...Q,id:Q.id.toString()})))}catch(le){console.error("Error fetching data:",le);const ue=le.message||(typeof le=="object"?JSON.stringify(le):String(le));le.code==="42P01"?(T("Veritaban tablolar eksik (products veya categories). Ltfen SQL kurulumunu yapn."),M(!0)):ue.includes("fetch")||ue.includes("URL")?T("Supabase balants kurulamad. URL veya API Anahtar hatal olabilir."):T("Veriler yklenirken bir hata olutu: "+ue)}finally{_(!1)}},R=async le=>{try{const{id:ue,...z}=le,{data:ve,error:oe}=await ln.from("products").insert([{name:z.name,company:z.company,quantity:z.quantity,purchasePrice:z.purchasePrice,sellingPrice:z.sellingPrice,barcode:z.barcode,category:z.category,image:z.image}]).select();if(oe)throw oe;if(ve&&ve[0]){const Q={...ve[0],id:ve[0].id.toString()};r(xe=>[Q,...xe]),await ln.from("product_history").insert([{product_id:ve[0].id,old_quantity:0,new_quantity:z.quantity,change_type:"INITIAL"}]),e(or.INVENTORY),z.category&&u&&u!==z.category&&h("")}}catch(ue){console.error("Error adding product:",ue);const z=ue.message||JSON.stringify(ue);ue.code==="42P01"?(alert("Hata: Veritaban tablolar bulunamad. Ltfen SQL kurulumunu yapn."),T("Veritaban tablolar eksik."),M(!0)):alert("rn eklenirken bir hata olutu: "+z)}},F=async le=>{try{const{id:ue,...z}=le,{error:ve}=await ln.from("products").update({name:z.name,company:z.company,category:z.category,quantity:z.quantity,purchasePrice:z.purchasePrice,sellingPrice:z.sellingPrice,barcode:z.barcode,image:z.image}).eq("id",ue);if(ve)throw ve;r(oe=>oe.map(Q=>Q.id===ue?le:Q))}catch(ue){console.error("Error editing product:",ue),alert("rn gncellenirken bir hata olutu: "+ue.message)}},Y=async le=>{try{const{error:ue}=await ln.from("products").delete().eq("id",le);if(ue)throw ue;r(z=>z.filter(ve=>ve.id!==le))}catch(ue){console.error("Error deleting product:",ue),alert("rn silinirken bir hata olutu: "+ue.message)}},H=async(le,ue)=>{const z=n.find(oe=>oe.id===le),ve=z?z.quantity:0;r(oe=>oe.map(Q=>Q.id===le?{...Q,quantity:ue}:Q));try{const{error:oe}=await ln.from("products").update({quantity:ue}).eq("id",le);if(oe)throw oe;await ln.from("product_history").insert([{product_id:le,old_quantity:ve,new_quantity:ue,change_type:"UPDATE"}])}catch(oe){console.error("Error updating quantity:",oe),alert("Stok gncellenemedi, deiiklikler geri alnyor."),k()}},B=async le=>{try{const{data:ue,error:z}=await ln.from("categories").insert([{name:le}]).select();if(z)throw z;ue&&ue[0]&&a(ve=>[...ve,{...ue[0],id:ue[0].id.toString()}])}catch(ue){console.error("Error adding category:",ue);let z=ue.message||(typeof ue=="object"?JSON.stringify(ue):String(ue));ue.code==="42P01"?(alert("Hata: 'categories' tablosu bulunamad. Ltfen veritaban kurulumunu yapn."),T("Veritaban tablolar eksik (categories)."),M(!0)):alert("Kategori eklenirken hata olutu: "+z)}},$=le=>{h(le),e(or.INVENTORY),p(!1)},q=async()=>{if(!window.confirm("Veritabanna 5 adet rnek rn eklenecek. Onaylyor musunuz?"))return;_(!0);const le=["Gda","ecek","Attrmalk","Temizlik"];try{for(const oe of le){const{error:Q}=await ln.from("categories").insert([{name:oe}]).select();Q&&Q.code!=="23505"&&Q.code!=="42P01"&&console.warn("Error adding sample category:",Q)}const{data:ue,error:z}=await ln.from("categories").select("*");if(z&&z.code==="42P01")throw z;ue&&a(ue.map(oe=>({...oe,id:oe.id.toString()})));const ve=[{name:"aykur Rize Turist ay 1000gr",company:"aykur",category:"Gda",quantity:50,purchasePrice:115.5,sellingPrice:145,barcode:"8690105000001"},{name:"Torku Tam Yal St 1L",company:"Torku",category:"ecek",quantity:120,purchasePrice:24,sellingPrice:32.5,barcode:"8690123456789"},{name:"lker ikolatal Gofret 36gr",company:"lker",category:"Attrmalk",quantity:240,purchasePrice:6.5,sellingPrice:10,barcode:"8690504030201"},{name:"Nescaf Gold 100gr",company:"Nestle",category:"ecek",quantity:45,purchasePrice:85,sellingPrice:115,barcode:"8690632145874"},{name:"Domestos amar Suyu 750ml",company:"Unilever",category:"Temizlik",quantity:30,purchasePrice:45,sellingPrice:65,barcode:"8690637112233"}];for(const oe of ve){const{data:Q,error:xe}=await ln.from("products").insert([oe]).select();if(xe)throw xe;Q&&Q[0]&&await ln.from("product_history").insert([{product_id:Q[0].id,old_quantity:0,new_quantity:oe.quantity,change_type:"INITIAL"}])}await k()}catch(ue){console.error("Error adding samples",ue);const z=ue.message||JSON.stringify(ue);ue.code==="42P01"?(T("Veritaban tablolar eksik. Ltfen SQL kodunu altrn."),M(!0)):alert("rnek rnler eklenirken hata: "+z)}finally{_(!1)}},re=`create table if not exists products (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  name text,
  company text,
  category text,
  quantity integer,
  "purchasePrice" numeric,
  "sellingPrice" numeric,
  barcode text,
  image text
);

create table if not exists product_history (
  id bigint generated by default as identity primary key,
  product_id bigint references products(id) on delete cascade,
  old_quantity integer,
  new_quantity integer,
  change_type text,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

create table if not exists categories (
  id bigint generated by default as identity primary key,
  name text unique not null,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);`,Se=()=>{navigator.clipboard.writeText(re),D(!0),setTimeout(()=>D(!1),2e3)},se=()=>{if(w&&n.length===0)return S.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[S.jsx(If,{className:"w-10 h-10 animate-spin text-orange-600 mb-4"}),S.jsx("p",{className:"text-gray-500",children:"Veriler ykleniyor..."})]});if(C)return S.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center p-6",children:[S.jsx("div",{className:`p-4 rounded-full mb-4 ${P?"bg-orange-50":"bg-red-50"}`,children:P?S.jsx(Jv,{className:"w-12 h-12 text-orange-500"}):S.jsx(ey,{className:"w-12 h-12 text-red-500"})}),S.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:P?"Veritaban Tablosu Eksik":"Balant Hatas"}),S.jsx("p",{className:"text-gray-600 mb-6 max-w-lg mx-auto",children:P?"Supabase projenizde gerekli tablolar (products, categories, history) henz oluturulmam.":C}),P&&S.jsxs("div",{className:"w-full max-w-2xl text-left bg-gray-100 border border-gray-200 rounded-lg overflow-hidden shadow-sm mb-6 relative group",children:[S.jsxs("div",{className:"bg-gray-200 px-4 py-2 flex justify-between items-center border-b border-gray-300",children:[S.jsx("span",{className:"text-gray-600 text-xs font-mono",children:"SQL Editor"}),S.jsxs("button",{onClick:Se,className:"flex items-center gap-1 text-xs font-medium text-orange-700 hover:text-orange-900 transition-colors",children:[V?S.jsx(Zm,{size:14}):S.jsx(Xv,{size:14}),V?"Kopyaland":"Kodu Kopyala"]})]}),S.jsx("div",{className:"p-4 overflow-x-auto",children:S.jsx("pre",{className:"text-gray-800 text-sm font-mono select-all",children:re})}),S.jsx("div",{className:"bg-gray-50 px-4 py-2 text-right border-t border-gray-200",children:S.jsx("span",{className:"text-xs text-gray-500",children:"Supabase SQL Editrne yaptrp altrn."})})]}),S.jsx("button",{onClick:k,className:"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors shadow-md font-medium",children:"Tekrar Dene"})]});switch(t){case or.INVENTORY:return S.jsx(Bp,{products:n,categories:s,selectedCategory:u,onSelectCategory:h,onUpdateQuantity:H,onAddSampleProducts:q,onEditProduct:F,onDeleteProduct:Y});case or.ADD_PRODUCT:return S.jsx($b,{onAddProduct:R,categories:s});case or.CHAT_BOT:return S.jsx(Yb,{});default:return S.jsx(Bp,{products:n,categories:s,selectedCategory:u,onSelectCategory:h,onUpdateQuantity:H,onAddSampleProducts:q,onEditProduct:F,onDeleteProduct:Y})}};return S.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col font-sans",children:[S.jsx(pE,{currentView:t,setCurrentView:e,isMobileMenuOpen:m,setIsMobileMenuOpen:p,categories:s,onAddCategory:B,selectedCategory:u,onSelectCategory:$}),S.jsx("main",{className:"flex-grow max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-8",children:se()}),S.jsx("footer",{className:"bg-white border-t border-gray-200 py-6 mt-auto",children:S.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:S.jsx("p",{className:"text-sm text-gray-500",children:" 2024 ASLAN AVM. Tm haklar sakldr."})})})]})},Ux=document.getElementById("root");if(!Ux)throw new Error("Could not find root element to mount to");const Xb=uc.createRoot(Ux);Xb.render(S.jsx(Dd.StrictMode,{children:S.jsx(jb,{})}));
//# sourceMappingURL=index-COkK-tyN.js.map
